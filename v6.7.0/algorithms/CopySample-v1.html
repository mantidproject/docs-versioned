<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>CopySample v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CorelliCalibrationApply v1" href="CorelliCalibrationApply-v1.html" />
    <link rel="prev" title="CopyLogs v1" href="CopyLogs-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">CopySample v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="copysample-v1">
<span id="algm-copysample"></span><span id="algm-copysample-v1"></span><h1>CopySample v1<a class="headerlink" href="#copysample-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id7">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id8">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Copy some/all the sample information from one workspace to another.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="CompareSampleLogs-v1.html#algm-comparesamplelogs"><span class="std std-ref">CompareSampleLogs</span></a>, <a class="reference internal" href="CopyLogs-v1.html#algm-copylogs"><span class="std std-ref">CopyLogs</span></a>, <a class="reference internal" href="CheckForSampleLogs-v1.html#algm-checkforsamplelogs"><span class="std std-ref">CheckForSampleLogs</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input workspace from wich to copy sample information.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>InOut</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An output workspace to wich to copy sample information..</p></td>
</tr>
<tr class="row-even"><td><p>CopyName</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Copy the name of the sample</p></td>
</tr>
<tr class="row-odd"><td><p>CopyMaterial</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Copy the material of the sample</p></td>
</tr>
<tr class="row-even"><td><p>CopyEnvironment</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Copy the sample environment</p></td>
</tr>
<tr class="row-odd"><td><p>CopyShape</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Copy the sample shape</p></td>
</tr>
<tr class="row-even"><td><p>CopyLattice</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Copy the sample oriented lattice</p></td>
</tr>
<tr class="row-odd"><td><p>CopyOrientationOnly</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Copy the U matrix only, if both origin and destination have oriented lattices</p></td>
</tr>
<tr class="row-even"><td><p>MDInputSampleNumber</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>The number of the sample to be copied from, for an MD workspace (starting from 0)</p></td>
</tr>
<tr class="row-odd"><td><p>MDOutputSampleNumber</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The number of the sample to be copied to for an MD workspace (starting from 0). No number, or negative number, means that it will copy to all samples</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>The algorithm copies some/all the sample information from one workspace
to another. For MD input workspaces, if no input sample number is specified, or
not found, it will copy the first sample. For MD output workspaces, if no
output sample number is specified (or negative), it will copy to all
samples. The following information can be copied:</p>
<ul class="simple">
<li><p>Name</p></li>
<li><p>Material</p></li>
<li><p>Sample environment</p></li>
<li><p>Shape</p></li>
<li><p>Oriented lattice</p></li>
</ul>
<p>One can copy the orientation matrix only. To do this, select both
CopyLattice and CopyOrientationOnly. If only CopyOrientationOnly is
true, the algorithm will throw an error.</p>
<p>A common use for this algorithm is for single crystal measurements.
Finding the <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> occurs on a <a class="reference internal" href="../concepts/PeaksWorkspace.html#peaksworkspace"><span class="std std-ref">PeaksWorkspace</span></a>.
In order to convertthe data to HKL space, one needs to copy the oriented lattice
to the individual data workspaces.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#create some workspaces</span>
<span class="n">peaks</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="s1">&#39;1,2&#39;</span><span class="p">,</span><span class="n">DataY</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">WorkspaceTitle</span><span class="o">=</span><span class="s1">&#39;Workspace a&#39;</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">peaks</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">beta</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">gamma</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">u</span><span class="o">=</span><span class="s2">&quot;1,0,0&quot;</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="s2">&quot;0,0,1&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="s1">&#39;1,2&#39;</span><span class="p">,</span><span class="n">DataY</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">WorkspaceTitle</span><span class="o">=</span><span class="s1">&#39;Workspace b&#39;</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">beta</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">gamma</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span><span class="n">u</span><span class="o">=</span><span class="s2">&quot;1,0,0&quot;</span><span class="p">,</span><span class="n">v</span><span class="o">=</span><span class="s2">&quot;0,1,1&quot;</span><span class="p">)</span>

<span class="c1">#apply algorithm</span>
<span class="n">CopySample</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">peaks</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">CopyName</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CopyMaterial</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CopyEnvironment</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CopyShape</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">CopyLattice</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#do a quick check</span>
<span class="n">ol</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span><span class="o">.</span><span class="n">getOrientedLattice</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Data lattice parameters are: </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="n">ol</span><span class="o">.</span><span class="n">a</span><span class="p">(),</span> <span class="n">ol</span><span class="o">.</span><span class="n">b</span><span class="p">(),</span> <span class="n">ol</span><span class="o">.</span><span class="n">c</span><span class="p">(),</span> <span class="n">ol</span><span class="o">.</span><span class="n">alpha</span><span class="p">(),</span> <span class="n">ol</span><span class="o">.</span><span class="n">beta</span><span class="p">(),</span> <span class="n">ol</span><span class="o">.</span><span class="n">gamma</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Data lattice parameters are: 2.0 3.0 4.0 90.0 90.0 90.0
</pre></div>
</div>
<p>CopySample can be used to copy a sample shape, but apply a new automatic goniometer rotation. <a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><span class="std std-ref">SetGoniometer</span></a> should be called before CopySample.
After running this example code, the sample shapes can be plotted (see <a class="reference internal" href="../plotting/MeshPlotHelp.html#mesh-plots"><span class="std std-ref">3D Mesh Plots for Sample Shapes</span></a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cuboid</span> <span class="o">=</span> <span class="s2">&quot; </span><span class="se">\</span>
<span class="s2">&lt;cuboid id=&#39;some-cuboid&#39;&gt; </span><span class="se">\</span>
<span class="s2">&lt;height val=&#39;2.0&#39;  /&gt; </span><span class="se">\</span>
<span class="s2">&lt;width val=&#39;2.0&#39; /&gt;  </span><span class="se">\</span>
<span class="s2">&lt;depth  val=&#39;0.2&#39; /&gt;  </span><span class="se">\</span>
<span class="s2">&lt;centre x=&#39;10.0&#39; y=&#39;10.0&#39; z=&#39;10.0&#39;  /&gt;  </span><span class="se">\</span>
<span class="s2">&lt;/cuboid&gt;  </span><span class="se">\</span>
<span class="s2">&lt;algebra val=&#39;some-cuboid&#39; /&gt; </span><span class="se">\</span>
<span class="s2">&quot;</span>

<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;0,0,1,0,1&quot;</span><span class="p">)</span>
<span class="n">SetSample</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Geometry</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Shape&#39;</span><span class="p">:</span> <span class="s1">&#39;CSG&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">:</span> <span class="n">cuboid</span><span class="p">})</span>

<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;30,0,1,0,-1&quot;</span><span class="p">)</span>
<span class="n">CopySample</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">ws1</span><span class="p">,</span><span class="n">CopyEnvironment</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">CopyMaterial</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">CopyShape</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id2">
<a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable :plots: using DOCS_PLOTDIRECTIVE in CMake</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Sample.html">Sample</a> | <a class="reference external" href="categories/Utility/Workspaces.html">Utility\Workspaces</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/291276d1b3f92d519f399310a3ef5f5d4a7c3d7f/Framework/Algorithms/inc/MantidAlgorithms/CopySample.h">CopySample.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/291276d1b3f92d519f399310a3ef5f5d4a7c3d7f/Framework/Algorithms/src/CopySample.cpp">CopySample.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CopyLogs-v1.html" title="Previous Chapter: CopyLogs v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CopyLogs v1</span>
    </a>
  </li>
  <li>
    <a href="CorelliCalibrationApply-v1.html" title="Next Chapter: CorelliCalibrationApply v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CorelliCalibr... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>