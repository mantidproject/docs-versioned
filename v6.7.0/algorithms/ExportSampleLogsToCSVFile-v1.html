<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ExportSampleLogsToCSVFile v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ExportSampleLogsToHDF5 v1" href="ExportSampleLogsToHDF5-v1.html" />
    <link rel="prev" title="ExportGeometry v1" href="ExportGeometry-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ExportSampleLogsToCSVFile v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="exportsamplelogstocsvfile-v1">
<span id="algm-exportsamplelogstocsvfile"></span><span id="algm-exportsamplelogstocsvfile-v1"></span><h1>ExportSampleLogsToCSVFile v1<a class="headerlink" href="#exportsamplelogstocsvfile-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#csv-file-format" id="id6">CSV File format</a></p></li>
<li><p><a class="reference internal" href="#header-file" id="id7">Header file</a></p></li>
<li><p><a class="reference internal" href="#time-zone" id="id8">Time Zone</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id10">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Exports sample logs to spreadsheet file.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="ExportExperimentLog-v1.html#algm-exportexperimentlog"><span class="std std-ref">ExportExperimentLog</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of data workspace containing sample logs to be exported.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the output sample environment log file name. Allowed extensions: [‘.txt’]</p></td>
</tr>
<tr class="row-even"><td><p>SampleLogNames</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>Names of sample logs to be exported in a same file.</p></td>
</tr>
<tr class="row-odd"><td><p>WriteHeaderFile</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Flag to generate a sample log header file.</p></td>
</tr>
<tr class="row-even"><td><p>Header</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>String in the header file.</p></td>
</tr>
<tr class="row-odd"><td><p>DateTitleInHeader</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true, then the first 2 lines of header will be experiment date and title.Otherwise, there will be only 1 line in header.</p></td>
</tr>
<tr class="row-even"><td><p>SeparateHeaderFile</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true, then the header is written to another file.Otherwise, header will be in the same output file.</p></td>
</tr>
<tr class="row-odd"><td><p>TimeZone</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>America/New_York</p></td>
<td><p>Sample logs recorded in NeXus files (in SNS) are in UTC time. TimeZone can allow the algorithm to output the log with local time. Allowed values: [‘UTC’, ‘America/New_York’, ‘Asia/Shanghai’, ‘Australia/Sydney’, ‘Europe/London’, ‘GMT+0’, ‘Europe/Paris’, ‘Europe/Copenhagen’]</p></td>
</tr>
<tr class="row-even"><td><p>TimeTolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.01</p></td>
<td><p>If any 2 log entries with log times within the time tolerance, they will be recorded in one line. Unit is second.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Algorithm <em>LoadSampleLogsToCSVFile</em> exports a specified set of sample logs
, which are stored in a MatrixWorkspace, to a CSV file.
The header for the sample log csv file can also
be created by this algorithm in a separate <em>header</em> file.</p>
<section id="csv-file-format">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">CSV File format</a><a class="headerlink" href="#csv-file-format" title="Permalink to this heading">¶</a></h3>
<p>Sample logs are written to a csv file.
A tab separates any two adjacent values.</p>
<p>Each entry of each exported sample log will be an individual entry in the
output CSV file,
except in the situation that two entries with time stamps within time tolerance.</p>
<p>The output CSV file has 2+n columns, where n is the number of sample logs
to be exported.</p>
<p>Here is the definition for the columns.</p>
<ul class="simple">
<li><p>Column 1: Absolute time (with respect to the Unix epoch) in seconds</p></li>
<li><p>Column 2: Relative to first log entry’s time</p></li>
<li><p>Column 3 to (2 + n): log values in the order determined by input
<em>SampleLogNames</em></p></li>
</ul>
</section>
<section id="header-file">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Header file</a><a class="headerlink" href="#header-file" title="Permalink to this heading">¶</a></h3>
<p>A sample log header file can be generated optionally.
It contains theree lines described as below.</p>
<ul class="simple">
<li><p>Line 1: Test date: [Test date in string]</p></li>
<li><p>Line 2: Test description: [Description of this log file]</p></li>
<li><p>Line 3: Header content given by user via input property <em>Header</em>.
Usually it is the column names in the .csv file</p></li>
</ul>
</section>
<section id="time-zone">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Time Zone</a><a class="headerlink" href="#time-zone" title="Permalink to this heading">¶</a></h3>
<p>The time stamps of sample logs are recorded as UTC time in SNS.
Some users wants to see the exported sample log as the neutron facility’s local time.
So the input property ‘TimeZone’ is for this purpose.</p>
<p>Property <em>TimeZone</em> does not support all the time zones
but only those with facilities that use Mantid.</p>
<p>Here is the list of all time zones that are allowed by this algorithm.
- UTC
- GMT+0
- America/New_York
- Asia/Shanghai
- Australia/Sydney
- Europe/London
- Europe/Paris
- Europe/Copenhagen</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Export a time series sample log to a csv file:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">nxsfilename</span> <span class="o">=</span> <span class="s2">&quot;HYS_11092_event.nxs&quot;</span>
<span class="n">wsname</span> <span class="o">=</span> <span class="s2">&quot;HYS_11092_event&quot;</span>

<span class="n">defaultdir</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;default.savedirectory&quot;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">defaultdir</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
  <span class="n">defaultdir</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;defaultsave.directory&quot;</span><span class="p">]</span>
<span class="n">savefile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">defaultdir</span><span class="p">,</span> <span class="s2">&quot;testphase4.txt&quot;</span><span class="p">)</span>

<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span> <span class="o">=</span> <span class="n">nxsfilename</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="n">wsname</span><span class="p">,</span>
    <span class="n">MetaDataOnly</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">LoadLogs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">ExportSampleLogsToCSVFile</span><span class="p">(</span>
    <span class="n">InputWorkspace</span> <span class="o">=</span> <span class="n">wsname</span><span class="p">,</span>
    <span class="n">OutputFilename</span> <span class="o">=</span> <span class="n">savefile</span><span class="p">,</span>
    <span class="n">SampleLogNames</span> <span class="o">=</span> <span class="s2">&quot;Phase1, Phase2, Phase3, Phase4&quot;</span><span class="p">,</span>
    <span class="n">WriteHeaderFile</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">Header</span> <span class="o">=</span> <span class="s2">&quot;Test sample log: Phase1-Phase4&quot;</span><span class="p">,</span>
    <span class="n">TimeZone</span> <span class="o">=</span> <span class="s2">&quot;America/New_York&quot;</span><span class="p">,</span>
    <span class="n">TimeTolerance</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">)</span>

<span class="n">headerfilename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">defaultdir</span><span class="p">,</span> <span class="s2">&quot;testphase4_header.txt&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File is created =  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">savefile</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Header file is created =  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">headerfilename</span><span class="p">)))</span>

<span class="c1"># Get the lines of both files</span>
<span class="n">sfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">savefile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">slines</span> <span class="o">=</span> <span class="n">sfile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">sfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">hfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">headerfilename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">hlines</span> <span class="o">=</span> <span class="n">hfile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">hfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of lines in File = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">slines</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of lines in Header file = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hlines</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>File is created =  True
Header file is created =  True
Number of lines in File = 36
Number of lines in Header file = 3
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Logs.html">DataHandling\Logs</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/291276d1b3f92d519f399310a3ef5f5d4a7c3d7f/Framework/PythonInterface/plugins/algorithms/ExportSampleLogsToCSVFile.py">ExportSampleLogsToCSVFile.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ExportGeometry-v1.html" title="Previous Chapter: ExportGeometry v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ExportGeometry v1</span>
    </a>
  </li>
  <li>
    <a href="ExportSampleLogsToHDF5-v1.html" title="Next Chapter: ExportSampleLogsToHDF5 v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ExportSampleL... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>