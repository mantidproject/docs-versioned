<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Run Summation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="User File Format" href="User%20File%20Format.html" />
    <link rel="prev" title="Settings" href="Settings%20Tab.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Interfaces</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="ISIS%20SANS.html" accesskey="U">ISIS SANS</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Run Summation</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="run-summation">
<span id="isis-sans-sum-runs-tab-ref"></span><h1>Run Summation<a class="headerlink" href="#run-summation" title="Permalink to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../../_images/sum_runs_page.png"><img alt="../../_images/sum_runs_page.png" class="align-center" src="../../_images/sum_runs_page.png" style="width: 800px;" /></a>
<p id="id1">The Add Runs page provides a simple tool for adding similar runs
(usually of short duration) together. The user builds a list of multiple
histogram or event files (but not mixed) before pressing the sum button to
produce a single output file in the mantid output directory.</p>
<p>The resulting ‘add file’ is then the equivalent of having measured one
run for an extended period. The final add file is named after the first
run number that is entered.</p>
<section id="runs-to-sum">
<h2>Runs To Sum<a class="headerlink" href="#runs-to-sum" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Run Query Box</strong></p></td>
<td><p>This box is used to add runs to the summation table below. The user can enter one or
more comma separated run numbers and press <strong>Add</strong> or the enter key to search for runs
with a matching number.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Run Summation List</strong></p></td>
<td><p>This list contains the files to be summed.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Browse</strong></p></td>
<td><p>This button is used to select one or more nexus files to be added to the summation
table.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Manage Directories</strong></p></td>
<td><p>Opens the ‘Manage User Directories’ window allowing the user to add/remove directories
from the mantid search path and to set the ‘Output Folder’ where the summation result
will be saved.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Remove</strong></p></td>
<td><p>Removes an entry from the summation table. Note, this does not delete the file itself,
it just removes it from the list of files to be summed.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Remove All</strong></p></td>
<td><p>Removes all entries from the summation table. As above, this will only remove the
entries from the table, not the files themselves.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="histogram-binning">
<h2>Histogram Binning<a class="headerlink" href="#histogram-binning" title="Permalink to this heading">¶</a></h2>
<p>This panel allows the user to specify the binning parameters to be applied
when summing event data. There are three different ways to add files containing
event data <a class="footnote-reference brackets" href="#no-effect-when-non-event" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<section id="custom-binning">
<h3>Custom Binning<a class="headerlink" href="#custom-binning" title="Permalink to this heading">¶</a></h3>
<p>If this option is chosen a line edit field becomes available which the user
can use to set the preferred binning boundaries. The format of this input is
identical to the format required by
the <a class="reference internal" href="../../algorithms/Rebin-v1.html"><span class="doc">Rebin Algorithm</span></a>.</p>
</section>
<section id="use-binning-from-monitors">
<h3>Use Binning From Monitors<a class="headerlink" href="#use-binning-from-monitors" title="Permalink to this heading">¶</a></h3>
<p>If this option is chosen the binning is taken from the monitors.</p>
</section>
<section id="save-as-event-data">
<h3>Save As Event Data<a class="headerlink" href="#save-as-event-data" title="Permalink to this heading">¶</a></h3>
<p>If this option is chosen, the output file will contain event data.
The output is not an event workspace but rather a group workspace, which
contains two child event workspaces, one for the added event data and one
for the added monitor data.</p>
<p>With <strong>‘Overlay Event Workspaces’ Disabled</strong> the event data from the files
is added using the event the <a class="reference internal" href="../../algorithms/Plus-v1.html#algm-plus"><span class="std std-ref">Plus Algorithm</span></a>.
Timestamps of the events and of the logs are not
changed as indicated in the image below.</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/sum_runs_add_no_overlay.png"><img alt="../../_images/sum_runs_add_no_overlay.png" src="../../_images/sum_runs_add_no_overlay.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Simple addition of event data</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>With <strong>‘Overlay Event Workspaces’ Enabled</strong> and <strong>no Additional Time Shifts</strong>
specified, the event data of the different files is shifted on top of each
other.</p>
<p>In the case of two workspaces the time difference between them is determined
by the difference between their first entry in the proton charge log.
This time difference is then applied to all timestamps of the second workspace.</p>
<p>The second workspace is essentially laid on the first. The same principle
applies if more than two workspaces are involved as this is a pairwise
operation. The working principle is illustrated below:</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../_images/sum_runs_add_overlay.png"><img alt="../../_images/sum_runs_add_overlay.png" src="../../_images/sum_runs_add_overlay.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Adding two workspaces by overlaying them</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Note that the underlying mechanism for time shifting is provided by the
<a class="reference internal" href="../../algorithms/ChangeTimeZero-v1.html#algm-changetimezero"><span class="std std-ref">ChangeTimeZero Algorithm</span></a>.
Using this option will result in a change to the history of the underlying
data.</p>
<p>With <strong>‘Overlay Event Workspaces’ Enabled</strong> you can specify
<strong>Additional Time Shifts</strong>.</p>
<p>Additional time shifts are specified as a comma separated list of numbers
where each shift is the time to shift by in seconds. The list should contain
exactly <em>N-1</em> entries where <em>N</em> is the number of runs to be summed.</p>
<p>Similar to the case above the workspaces are overlaid. This specified time
shift is in addition to the actual overlay operation. A positive time shift
will shift the second workspace into the future, whereas a negative time shift
causes a shift into the past. This allows the user to fine tune the
overlay mechanism.</p>
<p>Both situations are illustrated below:</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../../_images/sum_runs_pos_time_shift.png"><img alt="../../_images/sum_runs_pos_time_shift.png" src="../../_images/sum_runs_pos_time_shift.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Overlaid workspaces with a positive time shift (into the future).</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../_images/sum_runs_neg_time_shift.png"><img alt="../../_images/sum_runs_neg_time_shift.png" src="../../_images/sum_runs_neg_time_shift.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Overlaid workspaces with a negative time shift (into the past).</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Just as above, using this option means that the history of the underlying
data will be changed.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="no-effect-when-non-event" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>These options have no effect when adding non-event data files.</p>
</aside>
</aside>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Settings%20Tab.html" title="Previous Chapter: Settings"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Settings</span>
    </a>
  </li>
  <li>
    <a href="User%20File%20Format.html" title="Next Chapter: User File Format"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">User File Format &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>