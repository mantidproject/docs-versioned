<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Direct Inelastic Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Inelastic Changes" href="indirect_inelastic.html" />
    <link rel="prev" title="UI &amp; Usability Changes" href="ui.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.9.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Direct Inelastic Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#improvements" id="id1">Improvements</a></p></li>
<li><p><a class="reference internal" href="#new-features" id="id2">New features</a></p>
<ul>
<li><p><a class="reference internal" href="#algorithms" id="id3">Algorithms</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#crystal-field" id="id4">Crystal Field</a></p></li>
</ul>
</nav>
<section id="improvements">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>New algorithm <a class="reference internal" href="../../algorithms/CalculateCountRate-v1.html#algm-calculatecountrate"><span class="std std-ref">CalculateCountRate</span></a> allows to calculate instrument counting rate as function of the experiment
time to be able to filter spurions, which may sometimes appear on ISIS instruments. It can also be used to evaluate changes
of sample reflectivity as function of some slow changing experiment’s parameter e.g. temperature, magnetic field or pressure.</p></li>
<li><p>The previously inaccurate instrument definition for IN4 at ILL has been updated. The instrument geometry should now be more correct.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadILLTOF-v2.html#algm-loadilltof"><span class="std std-ref">LoadILLTOF</span></a> has been upgraded to version 2. The new version loads the TOF axis as defined by the ‘time_of_flight’ field in the NeXus file. Consequently, the <em>FilenameVanadium</em> and <em>WorkspaceVanadium</em> input properties were removed and no ‘EPP’ entry is added to the sample logs anymore.</p></li>
<li><p>The Debye-Waller factor correction was applied incorrectly to the vanadium data in <a class="reference internal" href="../../algorithms/ComputeCalibrationCoefVan-v1.html#algm-computecalibrationcoefvan"><span class="std std-ref">ComputeCalibrationCoefVan</span></a>. This, as well as too pessimistic error evaluation in the algorithm have been fixed.</p></li>
<li><p>A new input property <em>Temperature</em> has been added to <a class="reference internal" href="../../algorithms/ComputeCalibrationCoefVan-v1.html#algm-computecalibrationcoefvan"><span class="std std-ref">ComputeCalibrationCoefVan</span></a>.</p></li>
<li><p><a class="reference internal" href="../../interfaces/direct/PyChop.html#pychop"><span class="std std-ref">PyChop</span></a> has been updated to reflect physical changes to LET’s choppers. It will now also not output zero flux Ei reps for LET and Merlin in multi-rep mode. An additional tab is created if the “Instrument Scientist Mode” option is selected which shows the time widths at the detector due to the moderator and choppers for each calculation.</p></li>
</ul>
</section>
<section id="new-features">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Permalink to this heading">¶</a></h2>
<section id="algorithms">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>A utility algorithm <a class="reference internal" href="../../algorithms/WorkflowAlgorithmRunner-v1.html#algm-workflowalgorithmrunner"><span class="std std-ref">WorkflowAlgorithmRunner</span></a> has been added to manage the running of certain data reduction workflows at ILL.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/CorrectTOFAxis-v1.html#algm-correcttofaxis"><span class="std std-ref">CorrectTOFAxis</span></a> enables the adjustment of the time-of-flight axis according to incident energy or reference workspace.</p></li>
</ul>
</section>
</section>
<section id="crystal-field">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Crystal Field</a><a class="headerlink" href="#crystal-field" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The peak widths can be fixed to or varied around values obtained from experimental or calculated instrument resolution function.</p></li>
<li><p>The initial field parameters can be estimated using a Monte Carlo search algorithm (<a class="reference internal" href="../../algorithms/EstimateFitParameters-v1.html#algm-estimatefitparameters"><span class="std std-ref">EstimateFitParameters</span></a>)</p></li>
<li><p>The crystal field heat capacity, magnetisation and susceptibility can now be calculated or fitted, using new functions
<a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldHeatCapacity.html#func-crystalfieldheatcapacity"><span class="std std-ref">CrystalFieldHeatCapacity</span></a>, <a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldSusceptibility.html#func-crystalfieldsusceptibility"><span class="std std-ref">CrystalFieldSusceptibility</span></a>,
<a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldMagnetisation.html#func-crystalfieldmagnetisation"><span class="std std-ref">CrystalFieldMagnetisation</span></a>, and <a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldMoment.html#func-crystalfieldmoment"><span class="std std-ref">CrystalFieldMoment</span></a>.
The Python interface <a class="reference internal" href="../../interfaces/direct/Crystal%20Field%20Python%20Interface.html#crystal-field-python-interface"><span class="std std-ref">Crystal Field Python Interface</span></a> has also been updated to handle calculating and fitting these quantities.</p></li>
</ul>
<p><a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.9%22+is%3Amerged+label%3A%22Component%3A+Direct+Inelastic%22">Full list of changes on GitHub</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ui.html" title="Previous Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; UI & Usabilit...</span>
    </a>
  </li>
  <li>
    <a href="indirect_inelastic.html" title="Next Chapter: Indirect Inelastic Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Inel... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>