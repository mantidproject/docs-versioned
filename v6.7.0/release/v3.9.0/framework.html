<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Framework Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UI &amp; Usability Changes" href="ui.html" />
    <link rel="prev" title="Mantid 3.9.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.9.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Framework Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#changes" id="id2">Changes</a></p></li>
<li><p><a class="reference internal" href="#algorithms" id="id3">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new" id="id4">New</a></p></li>
<li><p><a class="reference internal" href="#improved" id="id5">Improved</a></p></li>
<li><p><a class="reference internal" href="#renamed" id="id6">Renamed</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id7">Bug Fixes</a></p></li>
<li><p><a class="reference internal" href="#deprecated" id="id8">Deprecated</a></p></li>
<li><p><a class="reference internal" href="#removed" id="id9">Removed</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#curvefitting" id="id10">CurveFitting</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id11">Improved</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="changes">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Changes</a><a class="headerlink" href="#changes" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Mantid now supports automatic updates to the facilities.xml file in the same way that it does the instrument definitions.  This allows extensions and changes to the list of supported instruments without needing to install a new release of Mantid.</p></li>
<li><p>This has been initially put into place to support a data file naming change for Vesuvio, but will help for future changes as well.</p></li>
<li><p>Mantid is aware of the change to file naming for Vesuvio, you can continue to use EVS or VESUVIO as a prefix when trying to load files from this instrument, and Mantid will map that to the correct filenames.</p></li>
<li><p>Mantid will correctly handle the naming format changes to Polaris, it will automatically select between the old and new filename format whilst loading files correctly.</p></li>
</ul>
</section>
<section id="algorithms">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this heading">¶</a></h2>
<section id="new">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">New</a><a class="headerlink" href="#new" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/ConvertToConstantL2-v1.html#algm-converttoconstantl2"><span class="std std-ref">ConvertToConstantL2</span></a> is the new name for CorrectFlightPaths.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BinWidthAtX-v1.html#algm-binwidthatx"><span class="std std-ref">BinWidthAtX</span></a> calculates the bin width at X, averaged over all histograms.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MedianBinWidth-v1.html#algm-medianbinwidth"><span class="std std-ref">MedianBinWidth</span></a> provides the median bin widths of histograms.</p></li>
</ul>
</section>
<section id="improved">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Improved</a><a class="headerlink" href="#improved" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/CalculateFlatBackground-v1.html#algm-calculateflatbackground"><span class="std std-ref">CalculateFlatBackground</span></a> has a new mode ‘Moving Average’, which takes the minimum of a moving window average as the flat background.</p></li>
<li><p><a class="reference internal" href="../../algorithms/StartLiveData-v1.html#algm-startlivedata"><span class="std std-ref">StartLiveData</span></a> and its dialog now support dynamic listener properties, based on the specific LiveListener being used.</p></li>
<li><p>All algorithms using AsciiPointBase now have a new property ‘Separator’ which allows the delimiter to be set to either comma, space or tab. This affects <code class="docutils literal notranslate"><span class="pre">SaveReflCustomAscii</span></code>, <code class="docutils literal notranslate"><span class="pre">SaveReflThreeColumnAscii</span></code>, <code class="docutils literal notranslate"><span class="pre">SaveANSTOAscii</span></code> and <code class="docutils literal notranslate"><span class="pre">SaveILLCosmosAscii</span></code>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ReplaceSpecialValues-v1.html#algm-replacespecialvalues"><span class="std std-ref">ReplaceSpecialValues</span></a> allows for ‘small’ values, which are below a user specified threshold, to be replaced.</p></li>
<li><p><a class="reference internal" href="../../algorithms/Stitch1DMany-v1.html#algm-stitch1dmany"><span class="std std-ref">Stitch1DMany</span></a> has a new property ‘ScaleFactorFromPeriod’, which enables it to apply scale factors from a particular period when stitching group workspaces. The documentation for this algorithm has also been improved.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SaveMDWorkspaceToVTK</span></code> has a working progress bar.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SumSpectra-v1.html#algm-sumspectra"><span class="std std-ref">SumSpectra</span></a> has an option to ignore special floating point values called ‘RemoveSpecialValues’. This is off by default. When enabled it will ignore values such as NaN or Infinity during the summation of the spectra.  It was also updated to fix special values being used in some cases when the option was selected.</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="../../algorithms/MonteCarloAbsorption-v1.html#algm-montecarloabsorption"><span class="std std-ref">MonteCarloAbsorption</span></a>:</dt><dd><ul>
<li><p>An <cite>Interpolation</cite> option has been added. The availabile options are: <cite>Linear</cite> &amp; <cite>CSpline</cite>.</p></li>
<li><p>The method of selecting the scattering point has ben updated to give better agreement with numerical algorithms (e.g. <a class="reference internal" href="../../algorithms/CylinderAbsorption-v1.html#algm-cylinderabsorption"><span class="std std-ref">CylinderAbsorption</span></a>).</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="../../algorithms/SetSample-v1.html#algm-setsample"><span class="std std-ref">SetSample</span></a> now accepts an Angle argument for defining a rotated flat plate sample.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SavePlot1D-v1.html#algm-saveplot1d"><span class="std std-ref">SavePlot1D</span></a> now supports optional <code class="docutils literal notranslate"><span class="pre">SpectraList</span></code> for plotting</p></li>
<li><p><a class="reference internal" href="../../algorithms/MaskDetectors-v1.html#algm-maskdetectors"><span class="std std-ref">MaskDetectors</span></a> has a new option to mask detectors by the instrument’s component name. It can accept a masked workspace with a differing number of spectra to the input workspace, providing that the number of detectors match. This can be useful in the case of hardware grouped detectors.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadIsawDetCal-v1.html#algm-loadisawdetcal"><span class="std std-ref">LoadIsawDetCal</span></a> now accepts multiple files in a single <code class="docutils literal notranslate"><span class="pre">Filename</span></code> property.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SavePlot1D-v1.html#algm-saveplot1d"><span class="std std-ref">SavePlot1D</span></a> now supports optional <code class="docutils literal notranslate"><span class="pre">SpectraList</span></code> for plotting</p></li>
<li><p><a class="reference internal" href="../../algorithms/MayersSampleCorrection-v1.html#algm-mayerssamplecorrection"><span class="std std-ref">MayersSampleCorrection</span></a>: The calculation of the azimuth angle has been fixed. Previously it was set equal to the Mantid definition of phi but the old code defined it as the angle away from the scattering plane.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MatchPeaks-v1.html#algm-matchpeaks"><span class="std std-ref">MatchPeaks</span></a> performs circular shift operation (numpy roll) along the x-axis to align the peaks in the spectra.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FindEPP-v2.html#algm-findepp"><span class="std std-ref">FindEPP</span></a> is improved to better determine the initial parameters and range for the fitting.</p></li>
<li><p><a class="reference internal" href="../../algorithms/StartLiveData-v1.html#algm-startlivedata"><span class="std std-ref">StartLiveData</span></a> can now accept LiveListener properties as parameters, based on the value of the “Instrument” parameter.</p></li>
</ul>
</section>
<section id="renamed">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Renamed</a><a class="headerlink" href="#renamed" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/ConvertToConstantL2-v1.html#algm-converttoconstantl2"><span class="std std-ref">CorrectFlightPaths</span></a> has been renamed to <a class="reference internal" href="../../algorithms/ConvertToConstantL2-v1.html#algm-converttoconstantl2"><span class="std std-ref">ConvertToConstantL2</span></a>.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Bin masking information was incorrectly saved when converting workspaces into nexus files, which is now fixed.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a> should no longer leak memory when the execution is cancelled.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadNexusProcessed-v2.html#algm-loadnexusprocessed"><span class="std std-ref">LoadNexusProcessed</span></a> will now load the stored workspace names from a processed Nexus file in the case of multiperiod data.</p></li>
<li><p>If a run is aborted and restarted, the <code class="docutils literal notranslate"><span class="pre">running</span></code> log in the workspace will correctly reflect this. (<code class="docutils literal notranslate"><span class="pre">running</span></code> will be false at all times before the abort.)</p></li>
<li><p>Fixed several issues with masked detectors and neighbour counts in the nearest-neighbour code used by a few algorithms.</p></li>
<li><p>Issues with <a class="reference internal" href="../../algorithms/CalculateFlatBackground-v1.html#algm-calculateflatbackground"><span class="std std-ref">CalculateFlatBackground</span></a> with  <strong>Return Background</strong> option returning fake values has been fixed.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ShiftLogTime-v1.html#algm-shiftlogtime"><span class="std std-ref">ShiftLogTime</span></a> now correctly handles shift in the negative direction</p></li>
</ul>
</section>
<section id="deprecated">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Deprecated</a><a class="headerlink" href="#deprecated" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AbortRemoteJob</span></code> is deprecated in favour of v2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Authenticate</span></code>  is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CentroidPeaksMD-v2.html#algm-centroidpeaksmd"><span class="std std-ref">CentroidPeaksMD</span></a>  is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ConvertEmptyToTof-v1.html#algm-convertemptytotof"><span class="std std-ref">ConvertEmptyToTof</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ConvertUnitsUsingDetectorTable-v1.html#algm-convertunitsusingdetectortable"><span class="std std-ref">ConvertUnitsUsingDetectorTable</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DownloadRemoteFile</span></code> is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FFTSmooth-v2.html#algm-fftsmooth"><span class="std std-ref">FFTSmooth</span></a> is deprecated in favour of v2.</p></li>
<li><p>OneStepMDEW.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QueryAllRemoteJobs</span></code> is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/RefinePowderInstrumentParameters-v3.html#algm-refinepowderinstrumentparameters"><span class="std std-ref">RefinePowderInstrumentParameters</span></a> is deprecated in favour of v2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StartRemoteTransaction</span></code> is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadILLDiffraction-v1.html#algm-loadilldiffraction"><span class="std std-ref">LoadILLAscii</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StopRemoteTransaction</span></code> is deprecated in favour of v2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SubmitRemoteJob</span></code> is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/Transpose3D-v1.html#algm-transpose3d"><span class="std std-ref">Transpose3D</span></a> is deprecated in favour <a class="reference internal" href="../../algorithms/TransposeMD-v1.html#algm-transposemd"><span class="std std-ref">TransposeMD</span></a>.</p></li>
<li><p>The Python function <cite>IMDDimension.getName()</cite> has been deprecated in favour of <cite>IMDDimension.name</cite>.</p></li>
<li><p>The duplicate Python function <cite>Workspace.getName()</cite> has been deprecated in favour of <cite>Workspace.name()</cite>.</p></li>
</ul>
</section>
<section id="removed">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Removed</a><a class="headerlink" href="#removed" title="Permalink to this heading">¶</a></h3>
<p>The following (previously deprecated) algorithms versions have now been removed:</p>
<ul class="simple">
<li><p>LoadEventPreNexus v1</p></li>
<li><p>LoadLogsForSNSPulsedMagnet v1</p></li>
<li><p>Lorentzian1D v1</p></li>
<li><p>ProcessDasNexusLog v1</p></li>
<li><p>LoadILL v1</p></li>
<li><p>SANSDirectBeamScaling v1</p></li>
</ul>
</section>
</section>
<section id="curvefitting">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">CurveFitting</a><a class="headerlink" href="#curvefitting" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Recommendations for which fitting method to use for a given data set has been added to <a class="reference internal" href="../../concepts/FittingMinimizers.html#fittingminimizers"><span class="std std-ref">FittingMinimzers page</span></a>.</p></li>
<li><p>Improved documentation of the these fitting minimizers.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/CalculateCostFunction-v1.html#algm-calculatecostfunction"><span class="std std-ref">CalculateCostFunction</span></a> calculates a value of any available cost function.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/EstimateFitParameters-v1.html#algm-estimatefitparameters"><span class="std std-ref">EstimateFitParameters</span></a> estimates the initial values of a fiting function in given intervals.</p></li>
<li><p><cite>Exclude</cite> is new property of <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a>, which allows for a user defined range to be excluded from a fit.</p></li>
<li><p>System tests and Fitting Benchmarks have been added for testing the minimizer, the scripts generate the tables displayed on <a class="reference internal" href="../../concepts/FittingMinimizers.html#fittingminimizers"><span class="std std-ref">FittingMinimzers page</span></a>. This System tests also demo how these tables can be created as a standard Mantid script.</p></li>
</ul>
<p>The work on benchmarking fitting has received funding from the Horizon 2020 Framework
Programme of the European Union under the SINE2020 project Grant No 654000</p>
<section id="id1">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Improved</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <cite>Peak Radius</cite> global setting for 1D peaks is replaced with <cite>PeakRadius</cite> property of the <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a> algorithm (see algorithm’s <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">description</span></a> for the details).</p></li>
</ul>
<figure class="align-default">
<a class="screenshot reference internal image-reference" href="../../_images/NoPeakRadius_3.9.png"><img alt="../../_images/NoPeakRadius_3.9.png" class="screenshot" src="../../_images/NoPeakRadius_3.9.png" style="width: 550px;" /></a>
</figure>
<ul class="simple">
<li><p>The output and normalization MDHistoWorkspaces from <a class="reference internal" href="../../algorithms/MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDNormSCD</span></a> and <a class="reference internal" href="../../algorithms/MDNormDirectSC-v1.html#algm-mdnormdirectsc"><span class="std std-ref">MDNormDirectSC</span></a> have the ‘displayNormalization’ set to ‘NoNormalization’. For older outputs, the <cite>setDisplayNormalization</cite> function is now exposed to python.</p></li>
</ul>
<p>Full list of
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.9%22+is%3Amerged+label%3A%22Component%3A+Framework%22">Framework</a>
and
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.9%22+is%3Amerged+label%3A%22Component%3A+Python%22">Python</a>
changes on GitHub</p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 3.9.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 3.9.0 ...</span>
    </a>
  </li>
  <li>
    <a href="ui.html" title="Next Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">UI & Usabilit... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>