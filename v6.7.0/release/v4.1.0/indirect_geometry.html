<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Indirect Geometry Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MantidPlot Changes" href="mantidplot.html" />
    <link rel="prev" title="Framework Changes" href="framework.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 4.1.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Indirect Geometry Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="indirect-geometry-changes">
<h1>Indirect Geometry Changes<a class="headerlink" href="#indirect-geometry-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#instrument-definitions" id="id9">Instrument Definitions</a></p></li>
<li><p><a class="reference internal" href="#algorithms" id="id10">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#improvements" id="id11">Improvements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-analysis-interface" id="id12">Data Analysis Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id13">Improvements</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id14">Bug Fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-corrections-interface" id="id15">Data Corrections Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id16">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id17">Bug Fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-reduction-interface" id="id18">Data Reduction Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id19">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id20">Bug Fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#diffraction-interface" id="id21">Diffraction Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#id6" id="id22">Bug Fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#indirect-settings-interface" id="id23">Indirect Settings Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id24">New Features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#simulations-interface" id="id25">Simulations Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id26">Bug Fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-workbench" id="id27">The Workbench</a></p></li>
<li><p><a class="reference internal" href="#tools-interface" id="id28">Tools Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#id8" id="id29">Improvements</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="instrument-definitions">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Instrument Definitions</a><a class="headerlink" href="#instrument-definitions" title="Permalink to this heading">¶</a></h2>
<p>The IDF of IN16B has been rewritten to properly model the neutronic positions of the pixels as reflections with respect to spherical analysers.
This is needed for the new inverted time-of-flight mode (BATS), but also improves the model for the standard doppler mode.
Particularly, this will allow us to calculate correct absorption corrections before grouping the pixels tube by tube.
With the new IDF, the flight-paths inside the sample will properly take into account the off-plane angle, which was not the case with the previous IDF.
This change has a retroactive effect, but for reductions where the detectors were grouped, it should not produce different results.</p>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/IN16B-R.png"><img alt="../../_images/IN16B-R.png" src="../../_images/IN16B-R.png" style="width: 376.81px; height: 319.48px;" /></a>
</figure>
<figure class="align-right">
<a class="reference internal image-reference" href="../../_images/IN16B-N.png"><img alt="../../_images/IN16B-N.png" src="../../_images/IN16B-N.png" style="width: 387.0px; height: 316.5px;" /></a>
</figure>
</section>
<section id="algorithms">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this heading">¶</a></h2>
<section id="improvements">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/IndirectILLEnergyTransfer-v1.html#algm-indirectillenergytransfer"><span class="std std-ref">IndirectILLEnergyTransfer</span></a> is extended to support reduction for the new inverted TOF option (BATS) of IN16B.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ModeratorTzeroLinear-v1.html#algm-moderatortzerolinear"><span class="std std-ref">ModeratorTzeroLinear</span></a> now permits the passing of parameter values as input properties.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BASISPowderDiffraction-v1.html#algm-basispowderdiffraction"><span class="std std-ref">BASISPowderDiffraction</span></a> resolves between the run with old and new DAS.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BASISPowderDiffraction-v1.html#algm-basispowderdiffraction"><span class="std std-ref">BASISPowderDiffraction</span></a> now permits flux normalization by proton charge and run duration.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a> now permits flux normalization by proton charge and run duration.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a> now permits retaining events only within a time window.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a> can output the powder diffraction spectra.</p></li>
<li><p><a class="reference internal" href="../../algorithms/BASISCrystalDiffraction-v1.html#algm-basiscrystaldiffraction"><span class="std std-ref">BASISCrystalDiffraction</span></a> resolves between the run with old and new DAS.</p></li>
<li><p><a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins</span></a> permits individually numbered atom contributions to simulated INS spectrum to be specified, alongside the existing option to select by element.</p></li>
</ul>
</section>
</section>
<section id="data-analysis-interface">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Data Analysis Interface</a><a class="headerlink" href="#data-analysis-interface" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Improvements</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Improved the output options of MSD Fit, Iqt Fit, Conv Fit and F(Q)Fit so that Chi_squared can now be plotted.</p></li>
<li><p>Improved the I(Q, t) tab by adding more validation checks for the input data.</p></li>
<li><p>Improved the Fit and Difference plots in MSD Fit, Iqt Fit, Conv Fit and F(Q)Fit. It is now possible to adjust their
relative sizes by dragging a ‘handle’ between the plots.</p></li>
<li><p>Improved the I(Q, t) tab by allowing an asymmetric energy range by unticking ‘Symmetric Energy Range’.</p></li>
<li><p>Improved the I(Q, t) tab by adding the ability to change the plotted spectrum using the ‘Spectrum’ spin box.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed an error caused by loading a Sample into ConvFit which does not have a resolution parameter for the analyser.</p></li>
<li><p>Fixed a crash caused by changing the Preview Spectrum on Elwin after clicking Run.</p></li>
<li><p>Fixed a bug where the loaded workspace in Data Analysis doesn’t update after being changed on a different
interface.</p></li>
<li><p>Fixed a bug with the StartX and EndX selectors seen on the Preview Plots.</p></li>
<li><p>Fixed a bug causing the errors calculated on Iqt to be too small towards the end of the spectra.</p></li>
</ul>
<figure class="align-center" style="width: 90%">
<img alt="The bug causing small Iqt errors." class="screenshot" src="../../_images/Iqt_Errors_Bug.PNG" />
</figure>
</section>
</section>
<section id="data-corrections-interface">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Data Corrections Interface</a><a class="headerlink" href="#data-corrections-interface" title="Permalink to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Improvements</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Improved the setting of sample and container neutron information by allowing the entry of cross sections as an
alternative to a chemical formula. The cross sections can be entered in the Calculate Paalman Pings tab and
Calculate Monte Carlo Absorption tab. This uses the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a> algorithm.</p></li>
</ul>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug where the output plots on the Calculate Paalman Pings and Calculate Monte Carlo Absorption tabs had
the wrong axis labels and units.</p></li>
<li><p>Fixed a bug where Calculate Paalman Pings would crash if an EFixed value had not been provided.</p></li>
<li><p>Fixed a bug where Apply Aborption Corrections would crash when provided an invalid corrections workspace.</p></li>
</ul>
</section>
</section>
<section id="data-reduction-interface">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Data Reduction Interface</a><a class="headerlink" href="#data-reduction-interface" title="Permalink to this heading">¶</a></h2>
<section id="id4">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Improvements</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added an option called <em>Group Output</em> to group the output files from a reduction on ISISEnergyTransfer.</p></li>
<li><p>Improved ISISEnergyTransfer by automatically loading the Detailed Balance from the sample logs if available.</p></li>
<li><p>Removed the obsolete <em>Plot Raw</em> button in ISIS Calibration.</p></li>
<li><p>Improved the validation checks for input data on all tabs.</p></li>
<li><p>Improved performance of starting up the interface, by optimising the loading of parameter files.</p></li>
</ul>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug in the <a class="reference internal" href="../../algorithms/Integration-v1.html#algm-integration"><span class="std std-ref">Integration</span></a> algorithm causing the Moments tab to crash.</p></li>
<li><p>Fixed an unexpected error when opening the Data Reduction interface with an unrelated facility selected.</p></li>
<li><p>Fixed a crash on the Symmetrise, Sqw and Moments tab caused by attempting to load raw data.</p></li>
<li><p>Fixed a crash on attempting to plot a loaded file before running the reduction.</p></li>
</ul>
</section>
</section>
<section id="diffraction-interface">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">Diffraction Interface</a><a class="headerlink" href="#diffraction-interface" title="Permalink to this heading">¶</a></h2>
<section id="id6">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug which allowed an out-of-range Spectra Min and Spectra Max.</p></li>
</ul>
</section>
</section>
<section id="indirect-settings-interface">
<h2><a class="toc-backref" href="#id23" role="doc-backlink">Indirect Settings Interface</a><a class="headerlink" href="#indirect-settings-interface" title="Permalink to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">New Features</a><a class="headerlink" href="#new-features" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>A <a class="reference internal" href="../../interfaces/indirect/Indirect%20Settings.html#interface-indirect-settings"><span class="std std-ref">Settings</span></a> GUI is now available and can be opened using the button
next to the help <em>?</em> button on the bottom left of the interfaces. It can also be opened from the Indirect
interfaces menu.</p></li>
</ul>
<figure class="align-center" style="width: 90%">
<img alt="The Indirect settings GUI." class="screenshot" src="../../_images/Indirect_Settings.png" />
</figure>
<ul class="simple">
<li><p>The <em>Settings</em> GUI allows you to turn off the restriction of input data based on their name.</p></li>
<li><p>The <em>Settings</em> GUI allows you to turn on error bars for the output plots.</p></li>
</ul>
</section>
</section>
<section id="simulations-interface">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Simulations Interface</a><a class="headerlink" href="#simulations-interface" title="Permalink to this heading">¶</a></h2>
<section id="id7">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a crash in MolDyn when plotting output data.</p></li>
</ul>
</section>
</section>
<section id="the-workbench">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">The Workbench</a><a class="headerlink" href="#the-workbench" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The Indirect Corrections GUI has been added to the Workbench.</p></li>
<li><p>The Indirect Data Reduction GUI has been added to the Workbench.</p></li>
<li><p>The Indirect Diffraction GUI has been added to the Workbench.</p></li>
<li><p>The Indirect Simulations GUI has been added to the Workbench.</p></li>
<li><p>The Indirect Tools GUI has been added to the Workbench.</p></li>
</ul>
<figure class="align-center" style="width: 90%">
<img alt="The Indirect Data Reduction GUI in the Workbench." class="screenshot" src="../../_images/Indirect_Data_Reduction_Sqw.png" />
</figure>
</section>
<section id="tools-interface">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">Tools Interface</a><a class="headerlink" href="#tools-interface" title="Permalink to this heading">¶</a></h2>
<section id="id8">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Improvements</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added a verification for the chemical formula input on the Transmission tab.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v4-1-0"><span class="std std-ref">Release 4.1.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="framework.html" title="Previous Chapter: Framework Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Framework Changes</span>
    </a>
  </li>
  <li>
    <a href="mantidplot.html" title="Next Chapter: MantidPlot Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MantidPlot Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>