<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Framework Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UI &amp; Usability Changes" href="ui.html" />
    <link rel="prev" title="Mantid 3.6.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.6.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Framework Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#load-instrument-breaking-change" id="id5">Load Instrument Breaking Change</a></p></li>
<li><p><a class="reference internal" href="#algorithms" id="id6">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new" id="id7">New</a></p></li>
<li><p><a class="reference internal" href="#improved" id="id8">Improved</a></p></li>
<li><p><a class="reference internal" href="#deprecated" id="id9">Deprecated</a></p></li>
<li><p><a class="reference internal" href="#md-algorithms-vates-cli" id="id10">MD Algorithms (VATES CLI)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance" id="id11">Performance</a></p></li>
<li><p><a class="reference internal" href="#curvefitting" id="id12">CurveFitting</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id13">Improved</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id14">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#python-algorithms" id="id15">Python Algorithms</a></p></li>
<li><p><a class="reference internal" href="#ipython-notebooks" id="id16">IPython Notebooks</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="load-instrument-breaking-change">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Load Instrument Breaking Change</a><a class="headerlink" href="#load-instrument-breaking-change" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/Load-v1.html#algm-load"><span class="std std-ref">Load</span></a> instrument is an algorithm used by many of the Loading
algorithms in Mantid behind the scenes, for those this has been
adjusted, but if you call <a class="reference internal" href="../../algorithms/LoadInstrument-v1.html#algm-loadinstrument"><span class="std std-ref">LoadInstrument</span></a> in your own scripts …</p></li>
<li><p>The RewriteSpectraMap property of <a class="reference internal" href="../../algorithms/LoadInstrument-v1.html#algm-loadinstrument"><span class="std std-ref">LoadInstrument</span></a> must be specified as
of version 3.6. This has previously been optional.</p></li>
</ul>
</section>
<section id="algorithms">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this heading">¶</a></h2>
<p>The usage of algoirthms is now tracked so we can get a better idea of
which algorithms are used, and which are not. No personal information is
stored alongside this, just a count of algorithm usages against the
version of Mantid.</p>
<section id="new">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">New</a><a class="headerlink" href="#new" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/Comment-v1.html#algm-comment"><span class="std std-ref">Comment</span></a>: A simple algorithm to add comments into the history of a workspace</p></li>
<li><p><a class="reference internal" href="../../algorithms/ExportGeometry-v1.html#algm-exportgeometry"><span class="std std-ref">ExportGeometry</span></a>: Writes portions of the instrument geometry in IDF xml format.</p></li>
<li><p><a class="reference internal" href="../../algorithms/StringToPng-v1.html#algm-stringtopng"><span class="std std-ref">StringToPng</span></a> Writes a simple text message into a png file. This can be used in
autoreduction, if users expect an image output.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ExtractUnmaskedSpectra-v1.html#algm-extractunmaskedspectra"><span class="std std-ref">ExtractUnmaskedSpectra</span></a>: Extracts unmasked spectra from a workspace and places them in a new
workspace.</p></li>
<li><p><a class="reference internal" href="../../algorithms/AccumulateMD-v1.html#algm-accumulatemd"><span class="std std-ref">AccumulateMD</span></a>: Adds data to an existing MDEventWorkspace from a list of input files.
This allows accumulation of data in a workspace during an experiment.</p></li>
</ul>
</section>
<section id="improved">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Improved</a><a class="headerlink" href="#improved" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/ExportTimeSeriesLog-v1.html#algm-exporttimeserieslog"><span class="std std-ref">ExportTimeSeriesLog</span></a>
has been improved such that it is able to export time series log with
various time unit, to export the time as relative time or epoch time,
and export partial time series log.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a>
previously had a bug that could cause the number of events to be
doubled when loading a subset of spectra. This has been tracked down
and resolved, along with improving the performance for loading a
subset of spectra.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadFITS-v1.html#algm-loadfits"><span class="std std-ref">LoadFITS</span></a>:
has been optimized. Support for additional header keys has been
added. Several issues have been fixed.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadIsawPeaks-v1.html#algm-loadisawpeaks"><span class="std std-ref">LoadIsawPeaks</span></a>
has been optimized for loading of large files. A test file with 6000
peaks that previously took 2.5 minutes to load now takes 7 seconds.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadLogPropertyTable-v1.html#algm-loadlogpropertytable"><span class="std std-ref">LoadLogPropertyTable</span></a>
can now handle event files, and filenames with characters after the
run number, such as `CNCS_7860_event.nxs`.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadNexusProcessed-v2.html#algm-loadnexusprocessed"><span class="std std-ref">LoadNexusProcessed</span></a>
has been fixed so that it loads spectrum numbers from files where the
up axis is a numeric axis. As a result <a class="reference internal" href="../../algorithms/CompareWorkspaces-v1.html#algm-compareworkspaces"><span class="std std-ref">CompareWorkspaces</span></a> now passes
with a workspace in memory and one that is passed through save/load.</p></li>
<li><p><a class="reference internal" href="../../algorithms/NormaliseByCurrent-v1.html#algm-normalisebycurrent"><span class="std std-ref">NormaliseByCurrent</span></a>
gives more specific and detailed error messages, especially when
normalizing multiperiod data.</p></li>
<li><p><a class="reference internal" href="../../algorithms/RemoveBins-v1.html#algm-removebins"><span class="std std-ref">RemoveBins</span></a>
has been fixed so it now properly processes workspaces index requests
&gt; 0.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveNexusProcessed-v1.html#algm-savenexusprocessed"><span class="std std-ref">SaveNexusProcessed</span></a>
has been fixed so files do not complain about “Error parsing duration
in algorithm history entry.” on reloading.</p></li>
<li><p><a class="reference internal" href="../../algorithms/UpdateInstrumentFromFile-v1.html#algm-updateinstrumentfromfile"><span class="std std-ref">UpdateInstrumentFromFile</span></a>
had a bug where the algorithm would crash if it encountered a
spectrum that had multiple detectors assigned to it. This has been
fixed.</p></li>
</ul>
</section>
<section id="deprecated">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Deprecated</a><a class="headerlink" href="#deprecated" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/AddNote-v1.html#algm-addnote"><span class="std std-ref">AddNote</span></a> v1 is deprecated in favour of <a class="reference internal" href="../../algorithms/Comment-v1.html#algm-comment"><span class="std std-ref">Comment</span></a> v1.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadAscii-v2.html#algm-loadascii"><span class="std std-ref">LoadAscii</span></a> v1 is deprecated in favour of v2.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadEventPreNexus-v2.html#algm-loadeventprenexus"><span class="std std-ref">LoadEventPreNexus</span></a> v1 is deprecated in favour of v2.</p></li>
</ul>
</section>
<section id="md-algorithms-vates-cli">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">MD Algorithms (VATES CLI)</a><a class="headerlink" href="#md-algorithms-vates-cli" title="Permalink to this heading">¶</a></h3>
<p>Many of these areas will see further improvements in the following
release:</p>
<ul class="simple">
<li><p>Added progress reporting and interruptibility to several MD
algorithms.</p></li>
<li><p>Fixed several bugs related to dimension naming in MDWorkspaces.</p></li>
<li><p>Added the
<a class="reference internal" href="../../algorithms/AccumulateMD-v1.html#algm-accumulatemd"><span class="std std-ref">AccumulateMD</span></a> algorithm.</p></li>
<li><p><a class="reference internal" href="../../algorithms/TransposeMD-v1.html#algm-transposemd"><span class="std std-ref">TransposeMD</span></a> can now be used as <a class="reference internal" href="../../algorithms/TransposeMD-v1.html#algm-transposemd"><span class="std std-ref">TransposeMD</span></a>
which will be more familiar for users of Matlab and Horace.</p></li>
<li><p>Data in MDWorkspaces which is masked using <a class="reference internal" href="../../algorithms/MaskMD-v1.html#algm-maskmd"><span class="std std-ref">MaskMD</span></a> will no longer be
displayed in 1D plots, the Slice Viewer or the Vates Simple
Interface.</p></li>
<li><p>Data in MDWorkspaces which is masked using <a class="reference internal" href="../../algorithms/MaskMD-v1.html#algm-maskmd"><span class="std std-ref">MaskMD</span></a> is now set to <em>not
a number</em> (NaN).</p></li>
</ul>
</section>
</section>
<section id="performance">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Performance</a><a class="headerlink" href="#performance" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The performance of loading a partial subset of spectra from Event
Nexus files has been greatly increased.</p></li>
<li><p>The performance of loading instruments with lots of rectangular
detector banks has been notably increased.</p></li>
<li><p>Loading of ISAW Peaks files has been optimized. A test file with 6000
peaks that previously took 2.5 minutes to load now takes 7 seconds.
Another file with 157,377 lines that reportedly took about one hour
to load now loads in roughly 8 seconds.</p></li>
<li><p>Removed unnecessary clone of surfaces in Mantid::Geometry::Rule.</p></li>
</ul>
</section>
<section id="curvefitting">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">CurveFitting</a><a class="headerlink" href="#curvefitting" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Improved</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../fitting/fitfunctions/StretchedExpFT.html#func-stretchedexpft"><span class="std std-ref">StretchedExpFT</span></a> includes now fitting parameter “origin”. It enables
shifting the peak center.</p></li>
</ul>
</section>
</section>
<section id="python">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Python</a><a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/mantidproject/mantid/issues/14022">#14022</a>
Monitor workspace getters and setters have been exposed to Python.
This allows users to substantially simplify the reduction workflow,
in particular for direct inelastic experiments in ISIS.
<a class="reference internal" href="../../algorithms/RenameWorkspace-v1.html#algm-renameworkspace"><span class="std std-ref">RenameWorkspace</span></a>
algorithm supports monitors workspace, attached to a workspace and
renames both workspaces accordingly (Monitor workspace is named the
same as main workspace with <strong>_monitors</strong> suffix at the end. )</p></li>
<li><p>TableWorkspace.addRow() now accepts anything that behaves like a
sequence (tuples, numpy arrays, etc) rather than just lists and
dictionaries.</p></li>
<li><p><a class="reference external" href="https://github.com/mantidproject/mantid/issues/13751">#13751</a>
Plot normalization can now be controlled from the python
plotSpectrum() function using the distribution keyword argument.</p></li>
</ul>
<section id="python-algorithms">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Python Algorithms</a><a class="headerlink" href="#python-algorithms" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Python Algorithms should now define which category the algorithm
should be shown under in the Algorithms toolbox. For example this
definition specifies that this algorithm should be listed twice, once
under Arithmetic, and again under
CorrectionFunctions\\SpecialFunctions. More details can be found in
<a class="reference external" href="BasicPythonAlgorithmStructure">Basic PythonAlgorithm Structure</a>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">PythonAlgorithm</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Arithmetic;CorrectionFunctions</span><span class="se">\\</span><span class="s1">SpecialFunctions&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If you do not define this method the algorithm will still register in
MantidPlot, and work, but Mantidplot will warn you that the algorithm
does not have a category defined, and it will appear under the
PythonAlgorithms category in the Algorithms Toolbox.</p></li>
</ul>
</section>
<section id="ipython-notebooks">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">IPython Notebooks</a><a class="headerlink" href="#ipython-notebooks" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>IPython notebooks generated using the <a class="reference internal" href="../../algorithms/GenerateIPythonNotebook-v1.html#algm-generateipythonnotebook"><span class="std std-ref">GenerateIPythonNotebook</span></a>
algorithm, or from the ISIS Reflectometry interface, are now looking
more friendly. This is thanks to importing more functionality from
Mantid rather than the code being in the notebook.</p></li>
</ul>
<p>Full list of
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.6%22+is%3Amerged+label%3A%22Component%3A+Framework%22">Framework</a>
and
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.6%22+is%3Amerged+label%3A%22Component%3A+Python%22">Python</a>
changes on GitHub</p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 3.6.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 3.6.0 ...</span>
    </a>
  </li>
  <li>
    <a href="ui.html" title="Next Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">UI & Usabilit... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>