<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Exercises</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Useful Extras" href="../useful/index.html" />
    <link rel="prev" title="Intelligent Fitting" href="04_intelligent_fitting.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../../index.html" >Training</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="../index.html" >Mantid Basic Course</a> &#187;</li>
          
            <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">Fitting Data</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Exercises</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="exercises">
<span id="fitting-exercises"></span><h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">¶</a></h1>
<section id="exercise-1">
<h2>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this heading">¶</a></h2>
<p>In this exercise we will fit a simple Gaussian on a linear background.</p>
<ol class="arabic simple">
<li><p>Start with loading the data set (GEM38370_Focussed).</p></li>
<li><p>Plot Spectrum number 4.</p></li>
<li><p>Zoom into the peak around 5 angstroms.</p></li>
</ol>
<p><a class="reference internal" href="../../../_images/GemSinglePeak.png"><img alt="GemSinglePeak.png" src="../../../_images/GemSinglePeak.png" style="width: 500px;" /></a></p>
<ol class="arabic simple" start="4">
<li><p>Click on the Fit Toolbar button to open the fit property browser.</p></li>
<li><p>Adjust the fitting range, defined by the dashed lines, if needed.</p></li>
<li><p>Make sure the fitting model is empty, Clear the model if necessary.</p></li>
</ol>
<p><a class="reference internal" href="../../../_images/ClearModel.png"><img alt="ClearModel.png" src="../../../_images/ClearModel.png" style="width: 300px;" /></a></p>
<ol class="arabic simple" start="7">
<li><p>Add a background function. Select LinearBackground.</p></li>
</ol>
<p><a class="reference internal" href="../../../_images/AddBackgroundOption.png"><img alt="AddBackgroundOption.png" src="../../../_images/AddBackgroundOption.png" style="width: 500px;" /></a></p>
<ol class="arabic simple" start="8">
<li><p>Change peak type to Gaussian, and add a Gaussian.</p></li>
<li><p>Click at peak’s maximum point to set initial values for the centre
and the height.</p></li>
<li><p>Adjust the width.</p></li>
</ol>
<figure class="align-center">
<img alt="PreparedToFitGaussian.png" src="../../../_images/PreparedToFitGaussian.png" />
</figure>
<ol class="arabic simple" start="11">
<li><p>Run Fit.</p></li>
</ol>
<figure class="align-center">
<img alt="FittedGaussian.png" src="../../../_images/FittedGaussian.png" />
</figure>
</section>
<section id="exercise-2">
<h2>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Again, ensure that the Fit model is clear by clicking Setup &gt;”Clear model”</p></li>
<li><p>Load the GEM63437_focussed.nxs data (different to the data in Exercise 1). Note the workspace created is a
WorkspaceGroup, which has already been processed with
Mantid. Click on the triangle to reveal the contained workspaces. Show the History to see how many algorithms have been applied to this dataset.</p></li>
<li><p>Plot the spectrum in <em>GEM63437_focussed_2</em> by double-clicking on this workspace, and zoom in on the area of the three peaks</p></li>
<li><p>Open the Fit Property Browser and set fitting range/StartX and EndX
to be between approximately 2270 and 5000 microseconds</p></li>
<li><p>Right click on plot and select “Add background”, then
LinearBackground</p></li>
<li><p>Change the peak type to IkedaCarpenterPV.</p>
<p>Remember, this is a peak function where
some parameters are set based on the relevant instrument
geometry. This is evident from the starting guess of the peak width
but also by inspecting this function in the Fit Function panel.</p>
</li>
<li><p>Add an IkedaCarpenterPV peak to each of the three peaks, remembering to change the peak width (at least for the first one!)</p></li>
<li><p>Display &gt; “Plot guess” and what you should see is something similar to</p></li>
</ol>
<figure class="align-center">
<img alt="ExerciseFittingMBCguess.png" src="../../../_images/ExerciseFittingMBCguess.png" />
</figure>
<p>where the orange line is the guess</p>
<ol class="arabic simple" start="9">
<li><p>Remove plot guess</p></li>
<li><p>Fit the data with the model, where the output should be something similar to:</p></li>
</ol>
<figure class="align-center">
<img alt="ExerciseFittingMBCfit.png" src="../../../_images/ExerciseFittingMBCfit.png" />
</figure>
<p>where the green line here is the Calculated fit</p>
<p>Optionally using a similar approach try to fit the spectrum in for example <em>GEM63437_focussed_3</em></p>
</section>
<section id="exercise-3">
<h2>Exercise 3<a class="headerlink" href="#exercise-3" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Load the MUSR00015189 data set, this is a group workspace</p></li>
<li><p>Click the triangle beside this workspace</p></li>
<li><p>From the second workspace (MUSR00015189_2), plot spectrum number 64</p></li>
<li><p>Open the Fit property browser</p></li>
<li><p>As described earlier, add a UserFunction with the with Formula = <cite>h*exp(-a*x)</cite></p></li>
<li><p>Set <cite>h = 5000</cite> and <strong>Fix</strong> it to this value</p></li>
<li><p>Give <cite>a</cite> some positive intial value such as <cite>1.0</cite></p></li>
<li><p>Fit the data</p></li>
</ol>
<figure class="align-center">
<img alt="ExerciseFittingMBCfit_3MUSR.png" src="../../../_images/ExerciseFittingMBCfit_3MUSR.png" />
</figure>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="04_intelligent_fitting.html" title="Previous Chapter: Intelligent Fitting"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Intelligent Fitting</span>
    </a>
  </li>
  <li>
    <a href="../useful/index.html" title="Next Chapter: Useful Extras"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Useful Extras &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>