<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Run</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IDF ISIS SANS2D annotated" href="SANS2DSampleIDF.html" />
    <link rel="prev" title="Rectangular Detector" href="RectangularDetector.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Concepts</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Run</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="run">
<span id="id1"></span><h1>Run<a class="headerlink" href="#run" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#what-the-run-object" id="id3">What the Run object</a></p></li>
<li><p><a class="reference internal" href="#working-with-run-object-in-python" id="id4">Working with Run object in Python</a></p>
<ul>
<li><p><a class="reference internal" href="#getting-the-run-object-from-a-workspace" id="id5">Getting the Run Object from a Workspace</a></p></li>
<li><p><a class="reference internal" href="#run-properties" id="id6">Run Properties</a></p></li>
<li><p><a class="reference internal" href="#accessing-properties" id="id7">Accessing Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#listing-all-properties" id="id8">Listing all properties</a></p></li>
<li><p><a class="reference internal" href="#getting-a-specific-property" id="id9">Getting a specific property</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-goniometer" id="id10">The Goniometer</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id11">Listing all properties</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-information-is-stored-here" id="id12">What information is stored here?</a></p>
<ul>
<li><p><a class="reference internal" href="#isis-not-including-isis-muon-data" id="id13">ISIS (not including ISIS Muon data)</a></p></li>
<li><p><a class="reference internal" href="#isis-muon-data" id="id14">ISIS Muon data</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="what-the-run-object">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">What the Run object</a><a class="headerlink" href="#what-the-run-object" title="Permalink to this heading">¶</a></h2>
<p>A Run holds data related to the properties of the experimental run, e.g.
good proton charge, total frames etc. It also holds all of the sample
log files as sets of time-series data. Currently used properties within
Mantid includes <em>run_start</em>, which specified the date the data were
collected. Where an instrument has been modified over time, and multiple
<a class="reference internal" href="InstrumentDefinitionFile.html#instrumentdefinitionfile"><span class="std std-ref">instrument definition files</span></a> have been
defined for it, this property is used to loads the IDF valid when the
data were collected.</p>
</section>
<section id="working-with-run-object-in-python">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Working with Run object in Python</a><a class="headerlink" href="#working-with-run-object-in-python" title="Permalink to this heading">¶</a></h2>
<p>You can look at the <a class="reference internal" href="../api/python/mantid/api/Run.html#mantid-api-run"><span class="std std-ref">Run API reference</span></a> for a full list of properties and operations, but here are some of the key ones.</p>
<section id="getting-the-run-object-from-a-workspace">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Getting the Run Object from a Workspace</a><a class="headerlink" href="#getting-the-run-object-from-a-workspace" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="run-properties">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Run Properties</a><a class="headerlink" href="#run-properties" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.kernel</span> <span class="kn">import</span> <span class="n">DateAndTime</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span>

<span class="c1"># Set the start and end time of a run</span>
<span class="n">run</span><span class="o">.</span><span class="n">setStartAndEndTime</span><span class="p">(</span><span class="n">DateAndTime</span><span class="p">(</span><span class="s2">&quot;2015-01-27T11:00:00&quot;</span><span class="p">),</span>
<span class="n">DateAndTime</span><span class="p">(</span><span class="s2">&quot;2015-01-27T11:57:51&quot;</span><span class="p">))</span>

<span class="c1"># Get the start and end time of a run</span>
<span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">startTime</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">endTime</span><span class="p">())</span>

<span class="c1"># Get the total good proton charge</span>
<span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">getProtonCharge</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="accessing-properties">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Accessing Properties</a><a class="headerlink" href="#accessing-properties" title="Permalink to this heading">¶</a></h3>
<section id="listing-all-properties">
<h4><a class="toc-backref" href="#id8" role="doc-backlink">Listing all properties</a><a class="headerlink" href="#listing-all-properties" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;MAR11060&quot;</span><span class="p">)</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span>

<span class="c1"># Get a list of the property names</span>
<span class="nb">print</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="c1"># Loop over all of the Properties</span>
<span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">run</span><span class="o">.</span><span class="n">getProperties</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">prop</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="getting-a-specific-property">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">Getting a specific property</a><a class="headerlink" href="#getting-a-specific-property" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span>

<span class="c1"># Check if property exists</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is runstart present: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="s2">&quot;run_start&quot;</span> <span class="ow">in</span> <span class="n">run</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
<span class="c1"># or</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is runstart present: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">hasProperty</span><span class="p">(</span><span class="s2">&quot;run_start&quot;</span><span class="p">)))</span>

<span class="c1">#get the Property</span>
<span class="n">runStart</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="s2">&quot;run_start&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Property name: &quot;</span> <span class="o">+</span> <span class="n">runStart</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Property value: &quot;</span> <span class="o">+</span> <span class="n">runStart</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="the-goniometer">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">The Goniometer</a><a class="headerlink" href="#the-goniometer" title="Permalink to this heading">¶</a></h3>
<p>If the instrument contains a Goniometer it can be accessed from the run object.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">wg</span><span class="o">=</span><span class="n">CreateSingleValuedWorkspace</span><span class="p">()</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">wg</span><span class="p">,</span><span class="s2">&quot;Motor1&quot;</span><span class="p">,</span><span class="s2">&quot;45.&quot;</span><span class="p">,</span><span class="s2">&quot;Number&quot;</span><span class="p">)</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">wg</span><span class="p">,</span><span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;Motor1,0,1,0,1&quot;</span><span class="p">,</span><span class="n">Axis1</span><span class="o">=</span><span class="s2">&quot;5,0,1,0,1&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goniometer angles:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wg</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getGoniometer</span><span class="p">()</span><span class="o">.</span><span class="n">getEulerAngles</span><span class="p">(</span><span class="s1">&#39;YZY&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<p>Multiple goniometers can be accessed from the run object by</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">wg</span><span class="o">=</span><span class="n">CreateSingleValuedWorkspace</span><span class="p">()</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">wg</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;Motor1&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:00:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">wg</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;Motor1&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:01:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">wg</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;Motor1&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:02:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">wg</span><span class="p">,</span><span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;Motor1,0,1,0,1&quot;</span><span class="p">,</span><span class="n">Average</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of goniometers =&quot;</span><span class="p">,</span> <span class="n">wg</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getNumGoniometers</span><span class="p">())</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">wg</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getNumGoniometers</span><span class="p">()):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Goniometer angles:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wg</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getGoniometer</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">getEulerAngles</span><span class="p">(</span><span class="s1">&#39;YZY&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<section id="id2">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Listing all properties</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
</section>
</section>
</section>
<section id="what-information-is-stored-here">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">What information is stored here?</a><a class="headerlink" href="#what-information-is-stored-here" title="Permalink to this heading">¶</a></h2>
<p>On loading experimental data there is a default set of properties that
are populated within the run. These are as follows:</p>
<section id="isis-not-including-isis-muon-data">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">ISIS (not including ISIS Muon data)</a><a class="headerlink" href="#isis-not-including-isis-muon-data" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>run_header</strong> - The complete header for this run</p></li>
<li><p><strong>run_title</strong> - The run title</p></li>
<li><p><strong>run_start</strong> - Start date and time. Format: YYYY-MM-DD HH:MM:SS (+)</p></li>
<li><p><strong>run_end</strong> - End date and time. Format: YYYY-MM-DD HH:MM:SS (+)</p></li>
<li><p><strong>nspectra</strong> - The number of spectra in the raw data file</p></li>
<li><p><strong>nchannels</strong> - The number of time channels in the raw data</p></li>
<li><p><strong>nperiods</strong> - The number of periods within the raw data</p></li>
<li><p><strong>dur</strong> - The run duration</p></li>
<li><p><strong>durunits</strong> - The units of the run duration, 1 = seconds</p></li>
<li><p><strong>dur_freq</strong> - Test interval for above</p></li>
<li><p><strong>dmp</strong> - Dump interval</p></li>
<li><p><strong>dmp_units</strong> - The units (scaler) for above</p></li>
<li><p><strong>dmp_freq</strong> - Test interval for above</p></li>
<li><p><strong>freq</strong> - 2**k where source frequency = 50 / 2**k</p></li>
<li><p><strong>gd_prtn_chrg</strong> - Good proton charge (uA.hour)</p></li>
<li><p>‘’’tot_prtn_chrg* ‘’’- Total proton charge (uA.hour)</p></li>
<li><p><strong>goodfrm</strong> - Good frames</p></li>
<li><p>‘’’rawfrm* ‘’’- Raw frames</p></li>
<li><p><strong>dur_wanted</strong> - Requested run duration (units as for “duration”
above)</p></li>
<li><p><strong>dur_secs</strong> - Actual run duration in seconds</p></li>
<li><p><strong>mon_sum1</strong> - Monitor sum 1</p></li>
<li><p><strong>mon_sum2</strong> - Monitor sum 2</p></li>
<li><p><strong>mon_sum3</strong> - Monitor sum 3</p></li>
<li><p><strong>rb_proposal</strong> - The proposal number</p></li>
</ul>
</section>
<section id="isis-muon-data">
<span id="runinfoonisismuondata"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">ISIS Muon data</a><a class="headerlink" href="#isis-muon-data" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>run_title</strong> - The run title</p></li>
<li><p><strong>run_start</strong> - Start date and time. Format: YYYY-MM-DD HH:MM:SS (+)</p></li>
<li><p><strong>run_end</strong> - End date and time. Format: YYYY-MM-DD HH:MM:SS (+)</p></li>
<li><p><strong>nspectra</strong> - The number of spectra in the raw data file</p></li>
<li><p><strong>goodfrm</strong> - Good frames</p></li>
<li><p><strong>dur_secs</strong> - Run duration in seconds</p></li>
<li><p><strong>run_number</strong> - Run number</p></li>
<li><p><strong>sample_temp</strong> - Temperature of the sample</p></li>
<li><p><strong>sample_magn_field</strong> - Magnetic field of the sample</p></li>
</ul>
<p>(+) or YYYY-MM-DDTHH:MM:SS (ISO 8601 format, see
<a class="reference external" href="http://en.wikipedia.org/wiki/ISO_8601">1</a>)</p>
<p><strong>Category</strong>: <a class="reference external" href="../api/python/mantid/api/categories/Concepts.html">Concepts</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="RectangularDetector.html" title="Previous Chapter: Rectangular Detector"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Rectangular Detector</span>
    </a>
  </li>
  <li>
    <a href="SANS2DSampleIDF.html" title="Next Chapter: IDF ISIS SANS2D annotated"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IDF ISIS SANS... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>