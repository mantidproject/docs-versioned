<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LeanElasticPeaks Workspace</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MD Histogram Workspace" href="MDHistoWorkspace.html" />
    <link rel="prev" title="Theory of Le Bail Fit" href="LeBailFit.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Concepts</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LeanElasticPeaks Workspace</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="leanelasticpeaks-workspace">
<span id="leanelasticpeaksworkspace"></span><h1>LeanElasticPeaks Workspace<a class="headerlink" href="#leanelasticpeaks-workspace" title="Permalink to this heading">¶</a></h1>
<p>The LeanElasticPeaksWorkspace is a special Workspace that holds a list
of single crystal LeanElasticPeak objects. It is the equivalent to the
<a class="reference internal" href="PeaksWorkspace.html#peaksworkspace"><span class="std std-ref">PeaksWorkspace</span></a> for Peak objects.</p>
<section id="creating-a-leanelasticpeaksworkspace">
<h2>Creating a LeanElasticPeaksWorkspace<a class="headerlink" href="#creating-a-leanelasticpeaksworkspace" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../algorithms/FindPeaksMD-v1.html#algm-findpeaksmd"><span class="std std-ref">FindPeaksMD</span></a> will find peaks in reciprocal space in a <a class="reference internal" href="MDWorkspace.html#mdworkspace"><span class="std std-ref">MDWorkspace</span></a>.</p></li>
<li><p><a class="reference internal" href="../algorithms/PredictPeaks-v1.html#algm-predictpeaks"><span class="std std-ref">PredictPeaks</span></a> will predict peaks in reciprocal space for a given UB matrix.</p></li>
<li><p><a class="reference internal" href="../algorithms/CreatePeaksWorkspace-v1.html#algm-createpeaksworkspace"><span class="std std-ref">CreatePeaksWorkspace</span></a> will create an empty LeanElasticPeaksWorkspace that you can then edit. <em>_e.g._</em> <code class="code docutils literal notranslate"><span class="pre">CreatePeaksWorkspace(NumberOfPeaks=0,</span> <span class="pre">OutputType=&quot;LeanElasticPeak&quot;,</span> <span class="pre">OutputWorkspace='peaks')</span></code></p></li>
</ul>
<section id="findpeaksmd-example">
<h3>FindPeaksMD example<a class="headerlink" href="#findpeaksmd-example" title="Permalink to this heading">¶</a></h3>
<p>Create a MDEventWorkspace and add some fake peaks at Q-sample of
(1,1,1), (3,3,3), and (5.5,3.14159,1) and run FindPeaksMD.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;0,10,0,10,0,10&#39;</span><span class="p">,</span>
                  <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;Q_sample_x,Q_sample_y,Q_sample_z&#39;</span><span class="p">,</span>
                  <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;rlu,rlu,rlu&#39;</span><span class="p">,</span>
                  <span class="n">Frames</span><span class="o">=</span><span class="s1">&#39;QSample,QSample,QSample&#39;</span><span class="p">,</span>
                  <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;MDE&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="s1">&#39;MDE&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;10000,1,1,1,0.2&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="s1">&#39;MDE&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;100000,3,3,3,0.3&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="s1">&#39;MDE&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;1000,5.5,3.14159,1,0.1&#39;</span><span class="p">)</span>

<span class="n">peaks</span><span class="o">=</span><span class="n">FindPeaksMD</span><span class="p">(</span><span class="s1">&#39;MDE&#39;</span><span class="p">,</span>
                  <span class="n">DensityThresholdFactor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                  <span class="n">PeakDistanceThreshold</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">peaks</span><span class="o">.</span><span class="n">getNumberPeaks</span><span class="p">()):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">getPeak</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Peak </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> - Q-sample = </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">getQSampleFrame</span><span class="p">()</span><span class="si">}</span><span class="s2"> - bin count = </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">getBinCount</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Peak 0 - Q-sample = [5.50233,3.1408,1.00067] - bin count = 1000.0
Peak 1 - Q-sample = [2.91935,3.07936,2.91857] - bin count = 503.0
Peak 2 - Q-sample = [1.00319,1.00183,1.00097] - bin count = 181.0
</pre></div>
</div>
<p>Now convert that MDEventWorkspace to MDHistoWorkspace and run FindPeaksMD on that.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">BinMD</span><span class="p">(</span><span class="s1">&#39;MDE&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;MDH&#39;</span><span class="p">,</span>
      <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;Q_sample_x,0,10,100&#39;</span><span class="p">,</span>
      <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;Q_sample_y,0,10,100&#39;</span><span class="p">,</span>
      <span class="n">AlignedDim2</span><span class="o">=</span><span class="s1">&#39;Q_sample_z,0,10,100&#39;</span><span class="p">)</span>

<span class="n">peaks2</span><span class="o">=</span><span class="n">FindPeaksMD</span><span class="p">(</span><span class="s1">&#39;MDH&#39;</span><span class="p">,</span>
                   <span class="n">DensityThresholdFactor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                   <span class="n">PeakDistanceThreshold</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">peaks2</span><span class="o">.</span><span class="n">getNumberPeaks</span><span class="p">()):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">peaks2</span><span class="o">.</span><span class="n">getPeak</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Peak </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> - Q-sample = </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">getQSampleFrame</span><span class="p">()</span><span class="si">}</span><span class="s2"> - bin count = </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">getBinCount</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Peak 0 - Q-sample = [2.85,2.95,3.05] - bin count = 0.94
Peak 1 - Q-sample = [1.05,0.95,1.05] - bin count = 0.35
Peak 2 - Q-sample = [5.55,3.15,1.05] - bin count = 0.19
</pre></div>
</div>
</section>
<section id="predictpeaks-example">
<h3>PredictPeaks example<a class="headerlink" href="#predictpeaks-example" title="Permalink to this heading">¶</a></h3>
<p>Create a workspace, set the UB and then predict all peaks in the d-spacing range.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span><span class="o">=</span><span class="n">CreatePeaksWorkspace</span><span class="p">()</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="n">gamma</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">PredictPeaks</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">OutputType</span><span class="o">=</span><span class="s1">&#39;LeanElasticPeak&#39;</span><span class="p">,</span> <span class="n">CalculateWavelength</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">MinDSpacing</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">MaxDSpacing</span><span class="o">=</span><span class="mf">3.5</span><span class="p">)</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">peaks</span><span class="o">.</span><span class="n">getNumberPeaks</span><span class="p">()):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">getPeak</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Peak </span><span class="si">{</span><span class="n">n</span><span class="si">:</span><span class="s2">&gt;2</span><span class="si">}</span><span class="s2"> - d-spacing = </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">getDSpacing</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> - HKL = </span><span class="si">{</span><span class="n">p</span><span class="o">.</span><span class="n">getHKL</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Peak  0 - d-spacing = 2.50 - HKL = [-2,1,0]
Peak  1 - d-spacing = 2.50 - HKL = [-1,-1,0]
Peak  2 - d-spacing = 2.72 - HKL = [-1,0,-2]
Peak  3 - d-spacing = 2.72 - HKL = [-1,0,2]
Peak  4 - d-spacing = 2.72 - HKL = [-1,1,-2]
Peak  5 - d-spacing = 2.72 - HKL = [-1,1,2]
Peak  6 - d-spacing = 2.50 - HKL = [-1,2,0]
Peak  7 - d-spacing = 2.72 - HKL = [0,-1,-2]
Peak  8 - d-spacing = 2.72 - HKL = [0,-1,2]
Peak  9 - d-spacing = 3.50 - HKL = [0,0,-2]
Peak 10 - d-spacing = 3.50 - HKL = [0,0,2]
Peak 11 - d-spacing = 2.72 - HKL = [0,1,-2]
Peak 12 - d-spacing = 2.72 - HKL = [0,1,2]
Peak 13 - d-spacing = 2.50 - HKL = [1,-2,0]
Peak 14 - d-spacing = 2.72 - HKL = [1,-1,-2]
Peak 15 - d-spacing = 2.72 - HKL = [1,-1,2]
Peak 16 - d-spacing = 2.72 - HKL = [1,0,-2]
Peak 17 - d-spacing = 2.72 - HKL = [1,0,2]
Peak 18 - d-spacing = 2.50 - HKL = [1,1,0]
Peak 19 - d-spacing = 2.50 - HKL = [2,-1,0]
</pre></div>
</div>
</section>
</section>
<section id="viewing-a-leanelasticpeaksworkspace">
<h2>Viewing a LeanElasticPeaksWorkspace<a class="headerlink" href="#viewing-a-leanelasticpeaksworkspace" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Double-click a LeanElasticPeaksWorkspace to see the full list of data of each Peak object.</p></li>
<li><p>The LeanElasticPeaksWorkspace can be overlay onto of data using <a class="reference internal" href="../workbench/sliceviewer.html#sliceviewer"><span class="std std-ref">Sliceviewer</span></a>.</p></li>
</ul>
</section>
<section id="the-leanelasticpeak-object">
<h2>The LeanElasticPeak Object<a class="headerlink" href="#the-leanelasticpeak-object" title="Permalink to this heading">¶</a></h2>
<p>Each peak object contains several pieces of information. Not all of them are necessary:</p>
<ul class="simple">
<li><p>Q position (in q-sample frame)</p></li>
<li><p>H K L indices (optional)</p></li>
<li><p>Goniometer rotation matrix (for converting to Q in the lab frame)</p></li>
<li><p>Wavelength</p></li>
<li><p>Integrated intensity and error (optional)</p></li>
<li><p>An integration shape (see below)</p></li>
</ul>
<section id="the-leanelasticpeak-shape">
<h3>The LeanElasticPeak Shape<a class="headerlink" href="#the-leanelasticpeak-shape" title="Permalink to this heading">¶</a></h3>
<p>This is the same as the Peak object, see <a class="reference internal" href="PeaksWorkspace.html#the-peak-shape"><span class="std std-ref">PeaksWorkspace #The Peak Shape</span></a>.</p>
</section>
</section>
<section id="using-leanelasticpeaksworkspaces-in-python">
<h2>Using LeanElasticPeaksWorkspaces in Python<a class="headerlink" href="#using-leanelasticpeaksworkspaces-in-python" title="Permalink to this heading">¶</a></h2>
<p>The LeanElasticPeaksWorkspace and LeanElasticPeak objects are exposed to python.</p>
<section id="leanelasticpeaksworkspace-python-interface">
<h3>LeanElasticPeaksWorkspace Python Interface<a class="headerlink" href="#leanelasticpeaksworkspace-python-interface" title="Permalink to this heading">¶</a></h3>
<p>See <a class="reference internal" href="../api/python/mantid/api/IPeaksWorkspace.html#mantid.api.IPeaksWorkspace" title="mantid.api.IPeaksWorkspace"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPeaksWorkspace</span></code></a> for
complete API.</p>
<p>To get peaks from an existing workspace <cite>‘name_of_peaks_workspace’</cite></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;name_of_peaks_workspace&#39;</span><span class="p">]</span>
<span class="n">pws</span><span class="o">.</span><span class="n">getNumberPeaks</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">pws</span><span class="o">.</span><span class="n">getPeak</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">pws</span><span class="o">.</span><span class="n">removePeak</span><span class="p">(</span><span class="mi">34</span><span class="p">)</span>
</pre></div>
</div>
<p>The command <a class="reference internal" href="../api/python/mantid/api/IPeaksWorkspace.html#mantid.api.IPeaksWorkspace.getPeak" title="mantid.api.IPeaksWorkspace.getPeak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">p</span> <span class="pre">=</span> <span class="pre">pws.getPeak</span></code></a> will give you a reference to
the peak and not a copy of the peak, so any modification to <cite>p</cite> will
change not just <cite>p</cite> but that peak in the <cite>name_of_peaks_workspace</cite>
workspace.</p>
<p>To create an empty LeanElasticPeaksWorkspace then add peaks to it:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">peaks</span> <span class="o">=</span> <span class="n">CreatePeaksWorkspace</span><span class="p">(</span><span class="n">NumberOfPeaks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">OutputType</span><span class="o">=</span><span class="s2">&quot;LeanElasticPeak&quot;</span><span class="p">)</span>
<span class="n">p0</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">createPeakQSample</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">peaks</span><span class="o">.</span><span class="n">addPeak</span><span class="p">(</span><span class="n">p0</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">peaks</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">createPeakHKL</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">peaks</span><span class="o">.</span><span class="n">addPeak</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">peak</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">getPeak</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Peak </span><span class="si">{}</span><span class="s1"> hkl = </span><span class="si">{:.0f}{:.0f}{:.0f}</span><span class="s1"> q_sample = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">peak</span><span class="o">.</span><span class="n">getH</span><span class="p">(),</span> <span class="n">peak</span><span class="o">.</span><span class="n">getK</span><span class="p">(),</span> <span class="n">peak</span><span class="o">.</span><span class="n">getL</span><span class="p">(),</span> <span class="n">peak</span><span class="o">.</span><span class="n">getQSampleFrame</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Peak 0 hkl = 000 q_sample = [1,1,1]
Peak 1 hkl = 123 q_sample = [6.28319,9.42478,3.14159]
</pre></div>
</div>
</section>
<section id="leanelasticpeak-python-interface">
<h3>LeanElasticPeak Python Interface<a class="headerlink" href="#leanelasticpeak-python-interface" title="Permalink to this heading">¶</a></h3>
<p>See <a class="reference internal" href="../api/python/mantid/api/IPeak.html#mantid.api.IPeak" title="mantid.api.IPeak"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPeak</span></code></a> for complete API.</p>
<p>You can get a handle to an existing peak with:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">getPeak</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Or you can create a new peak in this way:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">qsample</span> <span class="o">=</span> <span class="n">V3D</span><span class="p">(</span><span class="mf">1.23</span><span class="p">,</span> <span class="mf">3.45</span><span class="p">,</span> <span class="mf">2.22</span><span class="p">)</span> <span class="c1"># Q in the sample frame of the peak</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">createPeakQSample</span><span class="p">(</span><span class="n">qsample</span><span class="p">)</span>
<span class="c1"># The peak can later be added to the workspace</span>
<span class="n">peaks</span><span class="o">.</span><span class="n">addPeak</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>Once you have a handle on a peak “p” you have several methods to query/modify its values:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">setHKL</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">hkl</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getHKL</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hkl =&quot;</span><span class="p">,</span> <span class="n">hkl</span><span class="p">)</span>

<span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getQSampleFrame</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;q =&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">setIntensity</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">setSigmaIntensity</span><span class="p">(</span><span class="mf">31.6</span><span class="p">)</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getIntensity</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;counts =&quot;</span><span class="p">,</span> <span class="n">counts</span><span class="p">)</span>

<span class="n">wl</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getWavelength</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;wl = </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wl</span><span class="p">))</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getDSpacing</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;d = </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">getPeakShape</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;shape =&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="o">.</span><span class="n">shapeName</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hkl = [-5,4,3]
q = [1.23,3.45,2.22]
counts = 1000.0
wl = 1.52
d = 1.47
shape = none
</pre></div>
</div>
<p><strong>Category</strong>: <a class="reference external" href="../api/python/mantid/api/categories/Concepts.html">Concepts</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LeBailFit.html" title="Previous Chapter: Theory of Le Bail Fit"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Theory of Le Bail Fit</span>
    </a>
  </li>
  <li>
    <a href="MDHistoWorkspace.html" title="Next Chapter: MD Histogram Workspace"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MD Histogram ... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>