<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ReflectometrySliceEventWorkspace v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=ff701123"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ReflectometrySumInQ v1" href="ReflectometrySumInQ-v1.html" />
    <link rel="prev" title="ReflectometryReductionOneLiveData v1" href="ReflectometryReductionOneLiveData-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ReflectometrySliceEventWorkspace v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="reflectometrysliceeventworkspace-v1">
<span id="algm-reflectometrysliceeventworkspace"></span><span id="algm-reflectometrysliceeventworkspace-v1"></span><h1>ReflectometrySliceEventWorkspace v1<a class="headerlink" href="#reflectometrysliceeventworkspace-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#reflectometrysliceeventworkspace" id="id4">ReflectometrySliceEventWorkspace</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id5">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id6">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Split an input workspace into multiple slices according to time or log values</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a>, <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>, <a class="reference internal" href="ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input Matrix workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>StartTime</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The start time, such that all events before this time are filtered out: it could be  (1) relative time to run start time in unit as specified property ‘UnitOfTime’ (2) absolute time Absolute time takes a string in format as 1990-01-01T00:00:00, while the relative time takes a string representing an integer or a floating-point number.</p></td>
</tr>
<tr class="row-even"><td><p>StopTime</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The stop time, such that all events after this time are filtered out: it could be  (1) relative time to run start time in unit as specified property ‘UnitOfTime’ (2) absolute time Absolute time takes a string in format as 1990-01-01T00:00:00, while the relative time takes a string representing an integer or a floating-point number.</p></td>
</tr>
<tr class="row-odd"><td><p>TimeInterval</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Array for lengths of time intervals for splitters:  if the array is empty, then there will be one splitter created from StartTime and StopTime;  if the array has one value, then if this value is positive, all splitters will have same time intervals, else the time intervals will be exponentially increasing; if the size of the array is larger than one, then the splitters can have various time interval values.</p></td>
</tr>
<tr class="row-even"><td><p>LogName</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Name of the sample log to use to filter - for example, the pulse charge is recorded in ‘ProtonCharge’.</p></td>
</tr>
<tr class="row-odd"><td><p>MinimumLogValue</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Minimum log value for which to keep events.</p></td>
</tr>
<tr class="row-even"><td><p>MaximumLogValue</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Maximum log value for which to keep events.</p></td>
</tr>
<tr class="row-odd"><td><p>LogValueInterval</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Delta of log value to be sliced into from min log value and max log value; if not given, then only value</p></td>
</tr>
<tr class="row-even"><td><p>LogBoundary</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Centre</p></td>
<td><p>How to treat log values as being measured in the centre of time. There are three options, ‘Centre’, ‘Left’ and ‘Other’. This value must be set to Left if the sample log is recorded upon changing,which applies to most of the sample environment devices in SNS. Allowed values: [‘Centre’, ‘Left’, ‘Other’]</p></td>
</tr>
<tr class="row-odd"><td><p>LogValueTolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Tolerance of the log value to be included in filter, used in the case to filter by multiple values.</p></td>
</tr>
<tr class="row-even"><td><p>MonitorWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input monitor workspace</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>WorkspaceGroup</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Group name for the output workspace(s).</p></td>
</tr>
<tr class="row-even"><td><p>UseNewFilterAlgorithm</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true, use the new FilterEvents algorithm instead of FilterByTime.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="reflectometrysliceeventworkspace">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">ReflectometrySliceEventWorkspace</a><a class="headerlink" href="#reflectometrysliceeventworkspace" title="Link to this heading">¶</a></h2>
<p>This algorithm slices an input workspace into one or more grouped output workspaces based on input filtering properties.</p>
<p>It uses <a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter v1</span></a> to define the way splitting should be done and exposes the relevant input properties for that algorithm. It then performs the filtering using <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents v1</span></a>.</p>
<p>The sliced workspaces are then rebinned to histogram data and combined with the given monitor workspace, to produce a workspace suitable for input to <a class="reference internal" href="ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto v3</span></a>. The monitors for each slice are scaled according to the percentage of <code class="docutils literal notranslate"><span class="pre">proton_charge</span></code> in that slice.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example: slice by time interval</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">input_ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s2">&quot;Event&quot;</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">BinWidth</span><span class="o">=</span><span class="mi">20000</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:00:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:10:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:20:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:30:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:40:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:50:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">monitor_ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">NumBanks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">NumMonitors</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">NumEvents</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">ReflectometrySliceEventWorkspace</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">MonitorWorkspace</span><span class="o">=</span><span class="n">monitor_ws</span><span class="p">,</span>
                                          <span class="n">TimeInterval</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">StartTime</span><span class="o">=</span><span class="s1">&#39;1800&#39;</span><span class="p">,</span> <span class="n">StopTime</span><span class="o">=</span><span class="s1">&#39;3300&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; slices&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; spectra&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Y values for first bin:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Slice &#39;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dataY</span><span class="p">(</span><span class="n">j</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>3 slices
5 spectra
Y values for first bin:
Slice 0
0.0505263157895
0.0505263157895
0.0505263157895
4.0
4.0
Slice 1
0.00947368421053
0.00947368421053
0.00947368421053
4.0
4.0
Slice 2
0.0631578947368
0.0631578947368
0.0631578947368
1.0
1.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/171b44b29330a2303790637329340bb3b6de0d0a/Framework/PythonInterface/plugins/algorithms/ReflectometrySliceEventWorkspace.py">ReflectometrySliceEventWorkspace.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ReflectometryReductionOneLiveData-v1.html" title="Previous Chapter: ReflectometryReductionOneLiveData v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Reflectometry...</span>
    </a>
  </li>
  <li>
    <a href="ReflectometrySumInQ-v1.html" title="Next Chapter: ReflectometrySumInQ v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Reflectometry... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>