<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LoadInstrument v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=ff701123"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadInstrumentFromNexus v1" href="LoadInstrumentFromNexus-v1.html" />
    <link rel="prev" title="LoadISISPolarizationEfficiencies v1" href="LoadISISPolarizationEfficiencies-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadInstrument v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="loadinstrument-v1">
<span id="algm-loadinstrument"></span><span id="algm-loadinstrument-v1"></span><h1>LoadInstrument v1<a class="headerlink" href="#loadinstrument-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id5">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id6">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Loads an Instrument Definition File (IDF) into a workspace. After the IDF has been read this algorithm will attempt to run the Child Algorithm LoadParameterFile; where if IDF filename is of the form IDENTIFIER_Definition.xml then the instrument parameters in the file named IDENTIFIER_Parameters.xml would be loaded.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="LoadInstrumentFromNexus-v1.html#algm-loadinstrumentfromnexus"><span class="std std-ref">LoadInstrumentFromNexus</span></a>, <a class="reference internal" href="LoadInstrumentFromRaw-v1.html#algm-loadinstrumentfromraw"><span class="std std-ref">LoadInstrumentFromRaw</span></a>, <a class="reference internal" href="ExportGeometry-v1.html#algm-exportgeometry"><span class="std std-ref">ExportGeometry</span></a>, <a class="reference internal" href="Load-v1.html#algm-load"><span class="std std-ref">Load</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace</p></td>
<td><p>InOut</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the workspace to load the instrument definition into. Any existing instrument will be replaced.</p></td>
</tr>
<tr class="row-odd"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The filename (including its full or relative path) of an instrument definition file. The file extension must either be .xml or .XML when specifying an instrument definition file. Files can also be .hdf5 or .nxs for usage with NeXus Geometry files. Note Filename or InstrumentName must be specified but not both. Allowed extensions: [‘.xml’, ‘.nxs’, ‘.hdf5’]</p></td>
</tr>
<tr class="row-even"><td><p>MonitorList</p></td>
<td><p>Output</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>Will be filled with a list of the detector ids of any monitors loaded in to the workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>InstrumentName</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Name of instrument. Can be used instead of Filename to specify aninstrument definition.</p></td>
</tr>
<tr class="row-even"><td><p>InstrumentXML</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The full XML instrument definition as a string.</p></td>
</tr>
<tr class="row-odd"><td><p>RewriteSpectraMap</p></td>
<td><p>Input</p></td>
<td><p>optional boolean</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>If set to True then a 1:1 map between the spectrum numbers and detector/monitor IDs is set up such that the detector/monitor IDs in the IDF are ordered from smallest to largest number and then assigned in that order to the spectra in the workspace. For example if the IDF has defined detectors/monitors with IDs 1, 5, 10 and the workspace contains 3 spectra with numbers 1, 2, 3 (and workspace indices 0, 1, 2) then spectrum number 1 is associated with detector ID 1, spectrum number 2 with detector ID 5 and spectrum number 3 with detector ID 10.If the number of spectra and detectors do not match then the operation is performed until the maximum number of either is reached. For example if there are 12 spectra and 50 detectors then the first 12 detectors are assigned to the 12 spectra in the workspace.If set to False then the spectrum numbers and detector IDs of the workspace are not modified.This property must be set to either True or False. Allowed values: [‘Unset’, ‘True’, ‘False’]</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>Loads the instrument geometry from either an instrument definition file
(<a class="reference internal" href="../concepts/InstrumentDefinitionFile.html#instrumentdefinitionfile"><span class="std std-ref">IDF</span></a>) or a Nexus file into a workspace. The
geometry contains information about detector positions, their geometric shape,
slit properties, links between values stored in log-files and components of the
instrument and so on. For more on IDFs see:
<a class="reference internal" href="../concepts/InstrumentDefinitionFile.html#instrumentdefinitionfile"><span class="std std-ref">InstrumentDefinitionFile</span></a>.</p>
<p>By default the algorithm will write a 1:1 map between the spectrum
number and detector ID. Any custom loading algorithm that calls this as
a Child Algorithm will therefore get this 1:1 map be default. If the
custom loader is to write its own map then it is advised to set
<code class="docutils literal notranslate"><span class="pre">RewriteSpectraMap</span></code> to false to avoid extra work.</p>
<p>The instrument to load can be specified by either the <code class="docutils literal notranslate"><span class="pre">InstrumentXML</span></code> (IDFs
only), <code class="docutils literal notranslate"><span class="pre">Filename</span></code> and <code class="docutils literal notranslate"><span class="pre">InstrumentName</span></code> properties (given here in order of
precedence if more than one is set). At present, if the <code class="docutils literal notranslate"><span class="pre">InstrumentXML</span></code> is
used the <code class="docutils literal notranslate"><span class="pre">InstrumentName</span></code> property should also be set.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Filename</span></code> can either be an absolute or relative path. In the latter case,
both the <code class="docutils literal notranslate"><span class="pre">datasearch.directories</span></code> and instrument directories (accessible via
<code class="docutils literal notranslate"><span class="pre">getInstrumentDirectories()</span></code> and <code class="docutils literal notranslate"><span class="pre">setInstrumentDirectories()</span></code>) are searched for
the specified file. The filename is required to be of the form
<code class="docutils literal notranslate"><span class="pre">InstrumentName</span> <span class="pre">+</span> <span class="pre">_Definition</span> <span class="pre">+</span> <span class="pre">Identifier</span> <span class="pre">+</span> <span class="pre">extension</span></code>.
The identifier then is the part of a filename that identifies the instrument
definition valid at a given date. If several instrument files files are valid at
the given date the file with the most recent from date is selected. If no such
files are found the file with the latest from date is selected.</p>
<p>If only the <code class="docutils literal notranslate"><span class="pre">InstrumentName</span></code> is specified, a filename is built on-the-fly to
have the form <code class="docutils literal notranslate"><span class="pre">InstrumentName</span> <span class="pre">+</span> <span class="pre">_Definition.(xml|hdf5|nxs)</span></code>. Short instrument
names can also be used, such as <code class="docutils literal notranslate"><span class="pre">seq</span></code>; they get translated to long instrument
names (e.g. <code class="docutils literal notranslate"><span class="pre">SEQUOIA</span></code>) through the <code class="docutils literal notranslate"><span class="pre">ConfigServiceImp::getInstrument().name()</span></code>
method.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example - Load instrument to a workspace:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create sample workspace</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">();</span>
<span class="n">inst1</span> <span class="o">=</span> <span class="n">ws1</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">();</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Default workspace has instrument: </span><span class="si">{0}</span><span class="s2"> with </span><span class="si">{1}</span><span class="s2"> parameters&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst1</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span><span class="nb">len</span><span class="p">(</span><span class="n">inst1</span><span class="o">.</span><span class="n">getParameterNames</span><span class="p">())))</span>

<span class="c1"># load MARI from instrument name</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;===========================&quot;</span><span class="p">)</span>
<span class="n">mon1</span> <span class="o">=</span> <span class="n">LoadInstrument</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">InstrumentName</span><span class="o">=</span><span class="s2">&quot;MARI&quot;</span><span class="p">,</span> <span class="n">RewriteSpectraMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">inst1</span> <span class="o">=</span> <span class="n">ws1</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
<span class="n">di1</span> <span class="o">=</span> <span class="n">ws1</span><span class="o">.</span><span class="n">detectorInfo</span><span class="p">()</span>
<span class="n">ci1</span> <span class="o">=</span> <span class="n">ws1</span><span class="o">.</span><span class="n">componentInfo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Modified workspace </span><span class="si">{0}</span><span class="s2"> has instrument: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws1</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">inst1</span><span class="o">.</span><span class="n">getName</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Instrument </span><span class="si">{0}</span><span class="s2"> has </span><span class="si">{1}</span><span class="s2"> components, including </span><span class="si">{2}</span><span class="s2"> monitors and </span><span class="si">{3}</span><span class="s2"> detectors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst1</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">ci1</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="n">mon1</span><span class="p">),</span> <span class="n">di1</span><span class="o">.</span><span class="n">size</span><span class="p">()))</span>

<span class="c1"># load LOKI from file name</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;===========================&quot;</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">();</span>
<span class="n">mon2</span> <span class="o">=</span> <span class="n">LoadInstrument</span><span class="p">(</span><span class="n">ws2</span><span class="p">,</span> <span class="n">FileName</span><span class="o">=</span><span class="s2">&quot;LOKI_Definition.hdf5&quot;</span><span class="p">,</span> <span class="n">RewriteSpectraMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">inst2</span> <span class="o">=</span> <span class="n">ws2</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
<span class="n">di2</span> <span class="o">=</span> <span class="n">ws2</span><span class="o">.</span><span class="n">detectorInfo</span><span class="p">()</span>
<span class="n">ci2</span> <span class="o">=</span> <span class="n">ws2</span><span class="o">.</span><span class="n">componentInfo</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Workspace </span><span class="si">{0}</span><span class="s2"> has instrument: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">inst2</span><span class="o">.</span><span class="n">getName</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Instrument </span><span class="si">{0}</span><span class="s2"> has </span><span class="si">{1}</span><span class="s2"> components, including </span><span class="si">{2}</span><span class="s2"> monitors and </span><span class="si">{3}</span><span class="s2"> detectors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst2</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">ci2</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="n">mon2</span><span class="p">),</span> <span class="n">di2</span><span class="o">.</span><span class="n">size</span><span class="p">()))</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Default workspace has instrument: basic_rect with 0 parameters
===========================
Modified workspace ws1 has instrument: MARI
Instrument MARI has 963 components, including 3 monitors and 921 detectors
===========================
Workspace ws2 has instrument: LOKI
Instrument LOKI has 8011 components, including 0 monitors and 8000 detectors
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Instrument.html">DataHandling\Instrument</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/171b44b29330a2303790637329340bb3b6de0d0a/Framework/DataHandling/inc/MantidDataHandling/LoadInstrument.h">LoadInstrument.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/171b44b29330a2303790637329340bb3b6de0d0a/Framework/DataHandling/src/LoadInstrument.cpp">LoadInstrument.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadISISPolarizationEfficiencies-v1.html" title="Previous Chapter: LoadISISPolarizationEfficiencies v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadISISPolar...</span>
    </a>
  </li>
  <li>
    <a href="LoadInstrumentFromNexus-v1.html" title="Next Chapter: LoadInstrumentFromNexus v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadInstrumen... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>