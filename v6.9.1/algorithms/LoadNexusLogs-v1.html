<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LoadNexusLogs v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=ff701123"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadNexusMonitors v1" href="LoadNexusMonitors-v1.html" />
    <link rel="prev" title="LoadNexus v1" href="LoadNexus-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadNexusLogs v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="loadnexuslogs-v1">
<span id="algm-loadnexuslogs"></span><span id="algm-loadnexuslogs-v1"></span><h1>LoadNexusLogs v1<a class="headerlink" href="#loadnexuslogs-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#data-loaded-from-nexus-file" id="id5">Data loaded from Nexus File</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Loads run logs (temperature, pulse charges, etc.) from a NeXus file and adds it to the run information in a workspace.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="LoadLog-v1.html#algm-loadlog"><span class="std std-ref">LoadLog</span></a>, <a class="reference internal" href="MergeLogs-v1.html#algm-mergelogs"><span class="std std-ref">MergeLogs</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace</p></td>
<td><p>InOut</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the workspace that will be filled with the logs.</p></td>
</tr>
<tr class="row-odd"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Path to the .nxs file to load. Can be an EventNeXus or a histogrammed NeXus. Allowed extensions: [‘.nxs’, ‘.n*’]</p></td>
</tr>
<tr class="row-even"><td><p>OverwriteLogs</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true then some existing logs will be overwritten, if false they will not.</p></td>
</tr>
<tr class="row-odd"><td><p>NXentryName</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Entry in the nexus file from which to read the logs</p></td>
</tr>
<tr class="row-even"><td><p>AllowList</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>If specified, only these logs will be loaded from the file (each separated by a comma).</p></td>
</tr>
<tr class="row-odd"><td><p>BlockList</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>If specified, logs matching one of the patterns will NOT be loaded from the file (each separated by a comma).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>The <strong>LoadNexusLogs</strong>
algorithm loads the sample logs from the given <a class="reference external" href="http://www.nexusformat.org">NeXus</a>
file. The logs are visible from <a class="reference internal" href="../workbench/index.html#workbench"><span class="std std-ref">MantidWorkbench</span></a>
if you right-click on a workspace and select “Sample Logs…”.</p>
<p>If you use <a class="reference internal" href="LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a>
or
<a class="reference internal" href="LoadISISNexus-v2.html#algm-loadisisnexus"><span class="std std-ref">LoadISISNexus</span></a>,
calling this algorithm is not necessary, since it called as a child algorithm.</p>
<section id="data-loaded-from-nexus-file">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Data loaded from Nexus File</a><a class="headerlink" href="#data-loaded-from-nexus-file" title="Link to this heading">¶</a></h3>
<p>Not all of the nexus file is loaded. This section tells you what is loaded and where it goes in the workspace.
Items missing from the Nexus file are simply not loaded.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Description of Data</p></th>
<th class="head"><p>Found in Nexus file</p></th>
<th class="head"><p>Placed in Workspace (Workspace2D)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Log group</p></td>
<td><p>Each group of class <code class="docutils literal notranslate"><span class="pre">IXrunlog</span></code> or <code class="docutils literal notranslate"><span class="pre">IXselog</span></code>
or with name <code class="docutils literal notranslate"><span class="pre">&quot;DASLogs&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;framelog&quot;</span></code>
(henceforth referred as [LOG])</p></td>
<td><p>See below</p></td>
</tr>
<tr class="row-odd"><td><p>Periods group</p></td>
<td><p>Each group of class <code class="docutils literal notranslate"><span class="pre">IXperiods</span></code>
(henceforth referred as [PERIODS])</p></td>
<td><p>See below</p></td>
</tr>
<tr class="row-even"><td><p>Time series</p></td>
<td><p>Each group of class <code class="docutils literal notranslate"><span class="pre">NXlog</span></code> or <code class="docutils literal notranslate"><span class="pre">NXpositioner</span></code>
within [LOG]</p></td>
<td><p>Time series in workspace run object
<em>Only these are affected by the
OverwriteLogs algorithm property.</em></p></td>
</tr>
<tr class="row-odd"><td><p>SE logs</p></td>
<td><p>Each group of class <code class="docutils literal notranslate"><span class="pre">IXseblock</span></code>
within [LOG]</p></td>
<td><p>Workspace run object. Item prefixed
with <code class="docutils literal notranslate"><span class="pre">selog_</span></code>,
if name is already in use.</p></td>
</tr>
<tr class="row-even"><td><p>Periods</p></td>
<td><p>Each group of class <code class="docutils literal notranslate"><span class="pre">IXperiods</span></code> and  name
<code class="docutils literal notranslate"><span class="pre">&quot;periods&quot;</span></code> within [PERIODS]</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nperiods</span></code> item in run object,
if it does not already exist</p></td>
</tr>
<tr class="row-odd"><td><p>Start and end times</p></td>
<td><p>Groups <code class="docutils literal notranslate"><span class="pre">&quot;start_time&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;end</span> <span class="pre">time&quot;</span></code></p></td>
<td><p>start and end times in run object
<em>Existing values are always
overwritten.</em></p></td>
</tr>
<tr class="row-even"><td><p>Proton charge</p></td>
<td><p>Group <code class="docutils literal notranslate"><span class="pre">&quot;proton_charge&quot;</span></code>, if it exists,
else integration of proton charge time series</p></td>
<td><p>Proton charge in run object
if it does not already exist</p></td>
</tr>
<tr class="row-odd"><td><p>Measurement information</p></td>
<td><p>Group <code class="docutils literal notranslate"><span class="pre">&quot;measurement&quot;</span></code> of class <code class="docutils literal notranslate"><span class="pre">NXcollection</span></code></p></td>
<td><p>Run object items with name from
Nexus group prefixed with
<code class="docutils literal notranslate"><span class="pre">measurement_</span></code>
<em>Existing values are always
overwritten.</em></p></td>
</tr>
<tr class="row-even"><td><p>Run title</p></td>
<td><p>Entry <code class="docutils literal notranslate"><span class="pre">&quot;title&quot;</span></code></p></td>
<td><p>Title in run object if it exists</p></td>
</tr>
</tbody>
</table>
<p>If the nexus file has a <code class="docutils literal notranslate"><span class="pre">&quot;proton_log&quot;</span></code> group, then this algorithm will do some event filtering to allow SANS2D files to load.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AllowList</span></code> option skips loading of the entire sample log, and loads only log entries specified in the list.
This can be useful if only particular log entries are needed.
Likewise, the <code class="docutils literal notranslate"><span class="pre">BlockList</span></code> option will skip loading log entries specified in the list (regular expression is supported
for blocking a series of logs with similar names), while loading all other sample log entries.
For both of these options, log entry names should be separated by a space.
Warning: <code class="docutils literal notranslate"><span class="pre">AllowList</span></code> and <code class="docutils literal notranslate"><span class="pre">BlockList</span></code> cannot be set at the same time.</p>
<p>NOTE: The pattern matching (globing) in <code class="docutils literal notranslate"><span class="pre">BlockList</span></code> supports the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code> matches any sequence of zero or more characters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?</span></code> matches any single character</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[SET]</span></code> matches any single character in the specified set (<code class="docutils literal notranslate"><span class="pre">[0-9a-zA-Z_]</span></code> is the set of characters allowed in C identifiers)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[!SET]</span></code> matches any character not in the specified set</p></li>
<li><p>To suppress the special syntactic significance of any of <code class="docutils literal notranslate"><span class="pre">[]*?!-\</span></code>, and match the character exactly, precede it with a backslash.</p></li>
<li><p>All strings must be UTF-8 encoded</p></li>
</ul>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>As described above, normal usage of this algorithm is not necessary. however, at SNS
there are preNeXus files available. The following uses this mechanism and then adds
the logs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventPreNexus</span><span class="p">(</span><span class="s2">&quot;CNCS_7860_neutron_event.dat&quot;</span><span class="p">)</span>
<span class="c1"># Five logs are already present</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of original logs = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
<span class="n">phase_log</span> <span class="o">=</span> <span class="s2">&quot;Phase1&quot;</span>
<span class="c1"># Try to get a log that doesn&#39;t exist yet</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">phase_log</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> log does not exist!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">phase_log</span><span class="p">))</span>
<span class="n">LoadNexusLogs</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s2">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of final logs = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
<span class="c1"># Try getting the log again</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">phase_log</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> log size = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">phase_log</span><span class="p">,</span> <span class="n">log</span><span class="o">.</span><span class="n">size</span><span class="p">()))</span>
<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> log does not exist!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">phase_log</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Number of original logs = 5
Phase1 log does not exist!
Number of final logs = 44
Phase1 log size = 46
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Logs.html">DataHandling\Logs</a> | <a class="reference external" href="categories/DataHandling/Nexus.html">DataHandling\Nexus</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/171b44b29330a2303790637329340bb3b6de0d0a/Framework/DataHandling/inc/MantidDataHandling/LoadNexusLogs.h">LoadNexusLogs.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/171b44b29330a2303790637329340bb3b6de0d0a/Framework/DataHandling/src/LoadNexusLogs.cpp">LoadNexusLogs.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadNexus-v1.html" title="Previous Chapter: LoadNexus v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadNexus v1</span>
    </a>
  </li>
  <li>
    <a href="LoadNexusMonitors-v1.html" title="Next Chapter: LoadNexusMonitors v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadNexusMonitors v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>