<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Direct Inelastic Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=ff701123"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Framework Changes" href="framework.html" />
    <link rel="prev" title="Diffraction Changes" href="diffraction.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 4.0.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Direct Inelastic Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#algorithms" id="id5">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new-algorithms" id="id6">New Algorithms</a></p></li>
<li><p><a class="reference internal" href="#improvements" id="id7">Improvements</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id8">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#interfaces" id="id9">Interfaces</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id10">New features</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id11">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id12">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id13">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id14">Improvements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#instrument-definitions" id="id15">Instrument definitions</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id16">Improvements</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="algorithms">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Link to this heading">¶</a></h2>
<section id="new-algorithms">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">New Algorithms</a><a class="headerlink" href="#new-algorithms" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added a new algorithm to ILL’s reduction workflow: <a class="reference internal" href="../../algorithms/DirectILLTubeBackground-v1.html#algm-directilltubebackground"><span class="std std-ref">DirectILLTubeBackground</span></a> which can be used to calculate the time-independent backgrounds for instruments with PSD detectors such as IN5.</p></li>
<li><p>The new algorithm <a class="reference internal" href="../../algorithms/SofTwoThetaTOF-v1.html#algm-softwothetatof"><span class="std std-ref">SofTwoThetaTOF</span></a> can be used to convert a workspace from (spectrum number, TOF) units to (<span class="math notranslate nohighlight">\(2\theta\)</span>, TOF) averaging the intensities over constant scattering angles.</p></li>
<li><p>The new algorithm <a class="reference internal" href="../../algorithms/MDNorm-v1.html#algm-mdnorm"><span class="std std-ref">MDNorm</span></a> can be used to calculate cross section for single crystal direct inelastic measurements.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadPLN-v1.html#algm-loadpln"><span class="std std-ref">LoadPLN</span></a> loader for an ANSTO PELICAN event file.</p></li>
<li><p>Version 3 of <a class="reference internal" href="../../algorithms/GetEiMonDet-v3.html#algm-geteimondet"><span class="std std-ref">GetEiMonDet v3</span></a> is now available. The upgraded version now fits a Gaussian to summed detector data making the energy calculation more robust. Version 2 has been deprecated and will be removed in a future release.</p></li>
</ul>
</section>
<section id="improvements">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/DirectILLIntegrateVanadium-v1.html#algm-directillintegratevanadium"><span class="std std-ref">DirectILLIntegrateVanadium</span></a> now masks zero counting detectors from the integral.</p></li>
<li><p>Changes to <a class="reference internal" href="../../algorithms/ComputeCalibrationCoefVan-v1.html#algm-computecalibrationcoefvan"><span class="std std-ref">ComputeCalibrationCoefVan</span></a>:</p>
<ul>
<li><p>It is now possible to turn off the Debye-Waller correction.</p></li>
<li><p>The temperature sample log entry can be given in an instrument parameter <code class="docutils literal notranslate"><span class="pre">temperature_sample_log</span></code>.</p></li>
<li><p>The temperature sample log can now be a time series.</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../algorithms/ComputeIncoherentDOS-v1.html#algm-computeincoherentdos"><span class="std std-ref">ComputeIncoherentDOS</span></a> now supports computation from <span class="math notranslate nohighlight">\(S(2\theta,E)\)</span> workspace.</p></li>
<li><p>The upper limit of the empty container scaling factor in <a class="reference internal" href="../../algorithms/DirectILLApplySelfShielding-v1.html#algm-directillapplyselfshielding"><span class="std std-ref">DirectILLApplySelfShielding</span></a> has been removed.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a> now has <cite>ConverterType = {Default, Indexed}</cite> setting: <cite>Default</cite> keeps the old
version of algorithm, <cite>Indexed</cite> provide the new one with better performance and some restrictions
(see <a class="reference internal" href="../../algorithms/ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a> Notes).</p></li>
<li><p><a class="reference internal" href="../../algorithms/DirectILLCollectData-v1.html#algm-directillcollectdata"><span class="std std-ref">DirectILLCollectData</span></a> now automatically disables incident energy calibration and normalises to time instead of monitor counts if the monitor counts are deemed too low.</p></li>
<li><p>There are two new properties in ref:<cite>DirectILLReduction &lt;algm-DirectILLReduction&gt;</cite>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">EnergyRebinning</span></code> allows mixing automatic bin widths with user specified ones when rebinning the energy transfer axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GroupingAngleStep</span></code> allows one to specify a <span class="math notranslate nohighlight">\(2\theta\)</span> step for detector grouping. By default, a step of 0.01 degrees or the value of <code class="docutils literal notranslate"><span class="pre">natural-angle-step</span></code> instrument parameter is used.</p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">SofQW</span></code> algorithms have a new property <code class="docutils literal notranslate"><span class="pre">DetectorTwoThetaRanges</span></code> which can be used to supply detector scattering angle coverage information for <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon</span></a>.</p></li>
<li><p>The built-in version of MSlice has been updated to include the full CLI, generating scripts from plots and waterfall plotting.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug in <a class="reference internal" href="../../algorithms/DirectILLCollectData-v1.html#algm-directillcollectdata"><span class="std std-ref">DirectILLCollectData</span></a> which prevented the <em>OutputIncidentEnergyWorkspace</em> being generated if <em>IncidentEnergyCalibration</em> was turned off.</p></li>
<li><p>Fixed the detector <span class="math notranslate nohighlight">\(2\theta\)</span> coverage calculation in <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon</span></a>. The algorithm was computing the angle between the detector center and top point, not the actual minimum and maximum <span class="math notranslate nohighlight">\(2\theta\)</span>. The width is now calculated accurately for cylinder and cuboid shapes. For other shapes, an approximate method is used.</p></li>
<li><p>Fixed a bug in <a class="reference internal" href="../../algorithms/Rebin2D-v1.html#algm-rebin2d"><span class="std std-ref">Rebin2D</span></a> which requires that an input workspace had to have fractional area weights for the <cite>UseFractionalArea</cite> option to work. The behaviour is now that if the input workspace does not have fractional areas, and <cite>UseFractionalArea</cite> is true, then fractional area tracking will be used with input fractions set to unity.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadILLTOF-v2.html#algm-loadilltof"><span class="std std-ref">LoadILLTOF</span></a> now properly closes the loaded file.</p></li>
</ul>
</section>
</section>
<section id="interfaces">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Interfaces</a><a class="headerlink" href="#interfaces" title="Link to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added the ability to save the results of the TOFTOF reduction as Ascii files.</p></li>
</ul>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Improvements</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>New instrument geometry for CNCS.</p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">Save</span></code>-section of the TOFTOF reduction dialog.</p></li>
<li><p>Behavior of the <a class="reference internal" href="../../algorithms/LoadDNSLegacy-v1.html#algm-loaddnslegacy"><span class="std std-ref">LoadDNSLegacy</span></a> for TOF data has been changed: the algorithm does not try to guess elastic channel any more, but asks for the user input. Neutron wavelength can optionally be specified as user input.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadDNSSCD-v1.html#algm-loaddnsscd"><span class="std std-ref">LoadDNSSCD</span></a> has been improved to be able to load TOF data.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MDNormDirectSC-v1.html#algm-mdnormdirectsc"><span class="std std-ref">MDNormDirectSC</span></a> now can handle merged MD workspaces.</p></li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Several bugs in <a class="reference internal" href="../../interfaces/direct/PyChop.html#pychop"><span class="std std-ref">PyChop</span></a> have been fixed, including the printing out of multiple Ei reps in the “Show Ascii” dialog, the disappearing axes labels in the Q-E tab, and incorrect energies in the multi-rep calculations. The calculation of the time width for LET has also been corrected for the relative sizes of the disk slots and the guide opening, which is important for “High Flux” mode calculations, where the energy widths were calculated to be narrower than is really the case. Finally the time-distance diagrams have been updated with the option to only show the first frame, and the MARI instrument file has been updated with the measured MARI flux.</p></li>
</ul>
</section>
</section>
<section id="python">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Python</a><a class="headerlink" href="#python" title="Link to this heading">¶</a></h2>
<section id="id3">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Improvements</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">directtools</span></code> plotting and utility module has been updated:</p>
<ul>
<li><p>Added a new function <a class="reference internal" href="../../techniques/DirecttoolsPythonModule.html#directtools.plotDOS" title="directtools.plotDOS"><code class="xref py py-func docutils literal notranslate"><span class="pre">directtools.plotDOS()</span></code></a> to support plotting the density-of-states.</p></li>
<li><p>Improved the automatic E ranges, cut labels and other visuals.</p></li>
<li><p>All functions should be applicable to non-ILL data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defaultrcParams</span></code> was renamed to <code class="docutils literal notranslate"><span class="pre">defaultrcparams</span></code> to be consistent with the rest of the functions.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="instrument-definitions">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Instrument definitions</a><a class="headerlink" href="#instrument-definitions" title="Link to this heading">¶</a></h2>
<section id="id4">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Improvements</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>IN5: pixel radius and height are now more realistic and the detector ID of the monitor is now 100000 instead of 0.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v4-0-0"><span class="std std-ref">Release 4.0.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="diffraction.html" title="Previous Chapter: Diffraction Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Diffraction Changes</span>
    </a>
  </li>
  <li>
    <a href="framework.html" title="Next Chapter: Framework Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Framework Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>