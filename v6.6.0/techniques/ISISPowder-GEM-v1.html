<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ISIS Powder Diffraction Scripts - GEM Reference</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ISIS Powder Diffraction Scripts - HRPD Reference" href="ISISPowder-HRPD-v1.html" />
    <link rel="prev" title="directtools" href="DirecttoolsPythonModule.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Techniques</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ISIS Powder Diffraction Scripts - GEM Reference</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="isis-powder-diffraction-scripts-gem-reference">
<span id="isis-powder-diffraction-gem-ref"></span><h1>ISIS Powder Diffraction Scripts - GEM Reference<a class="headerlink" href="#isis-powder-diffraction-scripts-gem-reference" title="Permalink to this heading">Â¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#creating-gem-object" id="id7">Creating GEM Object</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id8">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#methods" id="id9">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#create-vanadium" id="id10">create_vanadium</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id11">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#focus" id="id12">focus</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id13">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#set-sample" id="id14">set_sample</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id15">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#create-cal" id="id16">create_cal</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id17">Example</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#calibration-mapping-file" id="id18">Calibration Mapping File</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id19">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id20">Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#calibration-to-adjust" id="id21">calibration_to_adjust</a></p></li>
<li><p><a class="reference internal" href="#calibration-directory" id="id22">calibration_directory</a></p></li>
<li><p><a class="reference internal" href="#calibration-mapping-file-gem-isis-powder-diffraction-ref" id="id23">calibration_mapping_file</a></p></li>
<li><p><a class="reference internal" href="#config-file" id="id24">config_file</a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections" id="id25">do_absorb_corrections</a></p></li>
<li><p><a class="reference internal" href="#file-ext" id="id26">file_ext</a></p></li>
<li><p><a class="reference internal" href="#first-cycle-run-no" id="id27">first_cycle_run_no</a></p></li>
<li><p><a class="reference internal" href="#input-mode" id="id28">input_mode</a></p></li>
<li><p><a class="reference internal" href="#mode" id="id29">mode</a></p></li>
<li><p><a class="reference internal" href="#multiple-scattering" id="id30">multiple_scattering</a></p></li>
<li><p><a class="reference internal" href="#output-directory" id="id31">output_directory</a></p></li>
<li><p><a class="reference internal" href="#run-number" id="id32">run_number</a></p></li>
<li><p><a class="reference internal" href="#sample-empty" id="id33">sample_empty</a></p></li>
<li><p><a class="reference internal" href="#sample-empty-scale" id="id34">sample_empty_scale</a></p></li>
<li><p><a class="reference internal" href="#save-all" id="id35">save_all</a></p></li>
<li><p><a class="reference internal" href="#texture-mode" id="id36">texture_mode</a></p></li>
<li><p><a class="reference internal" href="#unit-to-keep" id="id37">unit_to_keep</a></p></li>
<li><p><a class="reference internal" href="#suffix" id="id38">suffix</a></p></li>
<li><p><a class="reference internal" href="#user-name" id="id39">user_name</a></p></li>
<li><p><a class="reference internal" href="#vanadium-normalisation" id="id40">vanadium_normalisation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-parameters" id="id41">Advanced Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#create-cal-rebin-1-params" id="id42">create_cal_rebin_1_params</a></p></li>
<li><p><a class="reference internal" href="#create-cal-rebin-2-params" id="id43">create_cal_rebin_2_params</a></p></li>
<li><p><a class="reference internal" href="#cross-corr-reference-spectra" id="id44">cross_corr_reference_spectra</a></p></li>
<li><p><a class="reference internal" href="#cross-corr-ws-index-max" id="id45">cross_corr_ws_index_max</a></p></li>
<li><p><a class="reference internal" href="#cross-corr-ws-index-min" id="id46">cross_corr_ws_index_min</a></p></li>
<li><p><a class="reference internal" href="#cross-cor-x-max" id="id47">cross_cor_x_max</a></p></li>
<li><p><a class="reference internal" href="#cross-cor-x-min" id="id48">cross_cor_x_min</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-d-ref" id="id49">get_det_offsets_d_ref</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-step" id="id50">get_det_offsets_step</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-x-max" id="id51">get_det_offsets_x_max</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-x-min" id="id52">get_det_offsets_x_min</a></p></li>
<li><p><a class="reference internal" href="#focused-cropping-values" id="id53">focused_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#grouping-file-name" id="id54">grouping_file_name</a></p></li>
<li><p><a class="reference internal" href="#gsas-calib-filename" id="id55">gsas_calib_filename</a></p></li>
<li><p><a class="reference internal" href="#nxs-filename" id="id56">nxs_filename</a></p></li>
<li><p><a class="reference internal" href="#gss-filename" id="id57">gss_filename</a></p></li>
<li><p><a class="reference internal" href="#dat-files-directory" id="id58">dat_files_directory</a></p></li>
<li><p><a class="reference internal" href="#tof-xye-filename" id="id59">tof_xye_filename</a></p></li>
<li><p><a class="reference internal" href="#dspacing-xye-filename" id="id60">dspacing_xye_filename</a></p></li>
<li><p><a class="reference internal" href="#maud-grouping-scheme" id="id61">maud_grouping_scheme</a></p></li>
<li><p><a class="reference internal" href="#raw-tof-cropping-values" id="id62">raw_tof_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#save-gda" id="id63">save_gda</a></p></li>
<li><p><a class="reference internal" href="#save-maud-calib" id="id64">save_maud_calib</a></p></li>
<li><p><a class="reference internal" href="#save-maud" id="id65">save_maud</a></p></li>
<li><p><a class="reference internal" href="#spline-coefficient" id="id66">spline_coefficient</a></p></li>
<li><p><a class="reference internal" href="#subtract-empty-instrument" id="id67">subtract_empty_instrument</a></p></li>
<li><p><a class="reference internal" href="#vanadium-cropping-values" id="id68">vanadium_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#vanadium-sample-details" id="id69">Vanadium sample details</a></p>
<ul>
<li><p><a class="reference internal" href="#chemical-formula" id="id70">chemical_formula</a></p></li>
<li><p><a class="reference internal" href="#number-density" id="id71">number_density</a></p></li>
<li><p><a class="reference internal" href="#cylinder-sample-height" id="id72">cylinder_sample_height</a></p></li>
<li><p><a class="reference internal" href="#cylinder-sample-radius" id="id73">cylinder_sample_radius</a></p></li>
<li><p><a class="reference internal" href="#cylinder-position" id="id74">cylinder_position</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="creating-gem-object">
<span id="creating-gem-object-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">Creating GEM Object</a><a class="headerlink" href="#creating-gem-object" title="Permalink to this heading">Â¶</a></h2>
<p>This method assumes you are familiar with the concept of objects in Python.
If not more details can be read here: <a class="reference internal" href="ISISPowder-Tutorials.html#intro-to-objects-isis-powder-diffraction-ref"><span class="std std-ref">A quick introduction to objects</span></a></p>
<p>To create a GEM object the following parameters are required:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-directory-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a></p></li>
<li><p><a class="reference internal" href="#output-directory-gem-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a></p></li>
<li><p><a class="reference internal" href="#user-name-gem-isis-powder-diffraction-ref"><span class="std std-ref">user_name</span></a></p></li>
</ul>
<p>Optionally a configuration file may be specified if one exists
using the following parameter:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#config-file-gem-isis-powder-diffraction-ref"><span class="std std-ref">config_file</span></a></p></li>
</ul>
<p>See <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><span class="std std-ref">Using configuration files</span></a>
on YAML configuration files for more details</p>
<section id="example">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Example</a><a class="headerlink" href="#example" title="Permalink to this heading">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">isis_powder</span> <span class="kn">import</span> <span class="n">Gem</span>

<span class="n">calibration_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span>

<span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="n">calibration_dir</span><span class="p">,</span>
                  <span class="n">output_directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
                  <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">)</span>

<span class="c1"># Optionally we could provide a configuration file like so</span>
<span class="c1"># Notice how the file name ends with .yaml</span>
<span class="n">config_file_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\config_file.yaml</span>
<span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file_path</span><span class="p">,</span>
                  <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="methods">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Methods</a><a class="headerlink" href="#methods" title="Permalink to this heading">Â¶</a></h2>
<p>The following methods can be executed on a GEM object:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a></p></li>
<li><p><a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a></p></li>
<li><p><a class="reference internal" href="#set-sample-gem-isis-powder-diffraction-ref"><span class="std std-ref">set_sample</span></a></p></li>
<li><p><a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a></p></li>
</ul>
<p>For information on creating a GEM object see:
<a class="reference internal" href="#creating-gem-object-isis-powder-diffraction-ref"><span class="std std-ref">Creating GEM Object</span></a></p>
<section id="create-vanadium">
<span id="create-vanadium-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">create_vanadium</a><a class="headerlink" href="#create-vanadium" title="Permalink to this heading">Â¶</a></h3>
<p>The <em>create_vanadium</em> method allows a user to process a vanadium run.
Whilst processing the vanadium run the scripts can apply any corrections
the user enables and will spline the resulting workspace(s) for later focusing.</p>
<p>On GEM the following parameters are required when executing <em>create_vanadium</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections-gem-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a></p></li>
<li><p><a class="reference internal" href="#first-cycle-run-no-gem-isis-powder-diffraction-ref"><span class="std std-ref">first_cycle_run_no</span></a></p></li>
<li><p><a class="reference internal" href="#mode-gem-isis-powder-diffraction-ref"><span class="std std-ref">mode</span></a></p></li>
</ul>
<p>If <a class="reference internal" href="#do-absorb-corrections-gem-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a> is
set to <strong>True</strong> the following parameter is required in addition to the
above:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#multiple-scattering-gem-isis-powder-diffraction-ref"><span class="std std-ref">multiple_scattering</span></a></p></li>
</ul>
<section id="id1">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Example</a><a class="headerlink" href="#id1" title="Permalink to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">gem_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                            <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">first_cycle_run_no</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;PDF&quot;</span><span class="p">,</span>
                            <span class="n">multiple_scattering</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="focus">
<span id="focus-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">focus</a><a class="headerlink" href="#focus" title="Permalink to this heading">Â¶</a></h3>
<p>The <em>focus</em> method processes the user specified run(s). It aligns,
focuses and optionally applies corrections if the user has requested them.</p>
<p>On GEM the following parameters are required when executing <em>focus</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections-gem-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a></p></li>
<li><p><a class="reference internal" href="#input-mode-gem-isis-powder-diffraction-ref"><span class="std std-ref">input_mode</span></a></p></li>
<li><p><a class="reference internal" href="#mode-gem-isis-powder-diffraction-ref"><span class="std std-ref">mode</span></a></p></li>
<li><p><a class="reference internal" href="#run-number-gem-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a></p></li>
<li><p><a class="reference internal" href="#vanadium-normalisation-gem-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_normalisation</span></a></p></li>
</ul>
<p>If <a class="reference internal" href="#do-absorb-corrections-gem-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a> is
set to <strong>True</strong> the following parameter is required in addition to the
above:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#multiple-scattering-gem-isis-powder-diffraction-ref"><span class="std std-ref">multiple_scattering</span></a></p></li>
</ul>
<p>The following parameters may also be optionally set:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#file-ext-gem-isis-powder-diffraction-ref"><span class="std std-ref">file_ext</span></a></p></li>
<li><p><a class="reference internal" href="#sample-empty-gem-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty</span></a></p></li>
<li><p><a class="reference internal" href="#suffix-gem-isis-powder-diffraction-ref"><span class="std std-ref">suffix</span></a></p></li>
<li><p><a class="reference internal" href="#texture-mode-isis-powder-diffraction-ref"><span class="std std-ref">texture_mode</span></a></p></li>
<li><p><a class="reference internal" href="#unit-to-keep-gem-isis-powder-diffraction-ref"><span class="std std-ref">unit_to_keep</span></a></p></li>
<li><p><a class="reference internal" href="#save-all-gem-isis-powder-diffraction-ref"><span class="std std-ref">save_all</span></a></p></li>
</ul>
<p>If <a class="reference internal" href="#sample-empty-gem-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty</span></a> is
set then the following parameter is also required:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sample-empty-scale-gem-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty_scale</span></a></p></li>
</ul>
<section id="id2">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">Example</a><a class="headerlink" href="#id2" title="Permalink to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                  <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">file_ext</span><span class="o">=</span><span class="s2">&quot;.s01&quot;</span><span class="p">,</span> <span class="n">input_mode</span><span class="o">=</span><span class="s2">&quot;Individual&quot;</span><span class="p">,</span>
                  <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;Rietveld&quot;</span><span class="p">,</span> <span class="n">run_number</span><span class="o">=</span><span class="s2">&quot;100-105&quot;</span><span class="p">,</span>
                  <span class="n">vanadium_normalisation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="set-sample">
<span id="set-sample-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">set_sample</a><a class="headerlink" href="#set-sample" title="Permalink to this heading">Â¶</a></h3>
<p>The <em>set_sample</em> method allows a user to specify a SampleDetails
object which contains the sample properties used when
<a class="reference internal" href="#do-absorb-corrections-gem-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a> is <strong>True</strong>
whilst focusing.</p>
<p>For more details on the SampleDetails object and how to set
it see: <a class="reference internal" href="ISISPowder-SampleDetails-v1.html#isis-powder-diffraction-sampledetails-ref"><span class="std std-ref">ISIS Powder Diffraction Scripts - SampleDetails Reference</span></a></p>
<p>The following parameter is required when calling <em>set_sample</em></p>
<ul class="simple">
<li><p><em>sample</em> - This must be a SampleDetails object with the
material set already.</p></li>
</ul>
<section id="id3">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">Example</a><a class="headerlink" href="#id3" title="Permalink to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_obj</span> <span class="o">=</span> <span class="n">SampleDetails</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">sample_obj</span><span class="o">.</span><span class="n">set_material</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">gem_example</span><span class="o">.</span><span class="n">set_sample</span><span class="p">(</span><span class="n">sample</span><span class="o">=</span><span class="n">sample_obj</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="create-cal">
<span id="create-cal-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id16" role="doc-backlink">create_cal</a><a class="headerlink" href="#create-cal" title="Permalink to this heading">Â¶</a></h3>
<p>The <em>create_cal</em> method creates the offset calibration file for GEM, or if one is passed in, adjusts
an existing file.
The following parameters are required:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#run-number-gem-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a></p></li>
</ul>
<p>The Following parameter may also be set</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-to-adjust-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_to_adjust</span></a></p></li>
</ul>
<section id="id4">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">Example</a><a class="headerlink" href="#id4" title="Permalink to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">gem_example</span><span class="o">.</span><span class="n">create_cal</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">87618</span><span class="p">,</span>
                         <span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="calibration-mapping-file">
<span id="calibration-mapping-gem-isis-powder-ref"></span><h2><a class="toc-backref" href="#id18" role="doc-backlink">Calibration Mapping File</a><a class="headerlink" href="#calibration-mapping-file" title="Permalink to this heading">Â¶</a></h2>
<p>The calibration mapping file holds the mapping between
run numbers, current label, offset filename and the empty
and vanadium numbers.</p>
<p>For more details on the calibration mapping file see:
<a class="reference internal" href="ISISPowder-Tutorials.html#cycle-mapping-files-isis-powder-diffraction-ref"><span class="std std-ref">Cycle mapping files</span></a></p>
<p>The layout on GEM should look as follows for each block
substituting the below values for appropriate values:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nt">1-100</span><span class="p">:</span><span class="w"></span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_1&quot;</span><span class="w"></span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span><span class="w"></span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">PDF</span><span class="p">:</span><span class="w"></span>
<span class="linenos">5</span><span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span><span class="w"></span>
<span class="linenos">6</span><span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="w"></span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">Rietveld</span><span class="p">:</span><span class="w"></span>
<span class="linenos">8</span><span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span><span class="w"></span>
<span class="linenos">9</span><span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;40&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Lines 5 and 6 in this example set the vanadium and empty run numbers for
PDF mode. Lines 8 and 9 set the vanadium and empty for
Rietveld mode.</p>
<section id="id5">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Example</a><a class="headerlink" href="#id5" title="Permalink to this heading">Â¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">1-100</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_1&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">PDF</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">Rietveld</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;40&quot;</span><span class="w"></span>

<span class="nt">101-</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_2&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">PDF</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;110&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">Rietveld</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;130&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;140&quot;</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading">Â¶</a></h2>
<p>The following parameters for GEM are intended for regular use
when using the ISIS Powder scripts.</p>
<section id="calibration-to-adjust">
<span id="calibration-to-adjust-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id21" role="doc-backlink">calibration_to_adjust</a><a class="headerlink" href="#calibration-to-adjust" title="Permalink to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>This Parameter contains the path to an offsets .cal file to adjust using
the automatic cal file generation.</p>
</section>
<section id="calibration-directory">
<span id="calibration-directory-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id22" role="doc-backlink">calibration_directory</a><a class="headerlink" href="#calibration-directory" title="Permalink to this heading">Â¶</a></h3>
<p>This parameter should be the full path to the calibration folder.
Within the folder the following should be present:</p>
<ul class="simple">
<li><p>Grouping .cal file (see: <a class="reference internal" href="#grouping-file-name-gem-isis-powder-diffraction-ref"><span class="std std-ref">grouping_file_name</span></a>)</p></li>
<li><p>Folder(s) with the label name specified in mapping file (e.g. â1_1â)
- Inside each folder should be the offset file with name specified in mapping file</p></li>
</ul>
<p>The script will also save out vanadium splines into the relevant
label folder which are subsequently loaded and used within the
<a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="calibration-mapping-file-gem-isis-powder-diffraction-ref">
<span id="id6"></span><h3><a class="toc-backref" href="#id23" role="doc-backlink">calibration_mapping_file</a><a class="headerlink" href="#calibration-mapping-file-gem-isis-powder-diffraction-ref" title="Permalink to this heading">Â¶</a></h3>
<p>This parameter gives the full path to the YAML file containing the
calibration mapping. For more details on this file see:
<a class="reference internal" href="#calibration-mapping-gem-isis-powder-ref"><span class="std std-ref">Calibration Mapping File</span></a></p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice the filename always ends in .yaml</span>
<span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\file\calibration_mapping.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="config-file">
<span id="config-file-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id24" role="doc-backlink">config_file</a><a class="headerlink" href="#config-file" title="Permalink to this heading">Â¶</a></h3>
<p>The full path to the YAML configuration file. This file is
described in detail here: <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><span class="std std-ref">Using configuration files</span></a>
It is recommended to set this parameter at object creation instead
of on a method as it will warn if any parameters are overridden
in the scripting window.</p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice the filename always ends in .yaml</span>
<span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\file\configuration.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="do-absorb-corrections">
<span id="do-absorb-corrections-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id25" role="doc-backlink">do_absorb_corrections</a><a class="headerlink" href="#do-absorb-corrections" title="Permalink to this heading">Â¶</a></h3>
<p>Indicates whether to perform vanadium absorption corrections
in <a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a> mode.
In <a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> mode
sample absorption corrections require the sample be
set first with the <a class="reference internal" href="#set-sample-gem-isis-powder-diffraction-ref"><span class="std std-ref">set_sample</span></a>
method.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p><em>Note: If this is set to âTrueâ</em>
<a class="reference internal" href="#multiple-scattering-gem-isis-powder-diffraction-ref"><span class="std std-ref">multiple_scattering</span></a>
<em>must be set</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="c1"># Or (this assumes sample details have already been set)</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="file-ext">
<span id="file-ext-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id26" role="doc-backlink">file_ext</a><a class="headerlink" href="#file-ext" title="Permalink to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>Specifies a file extension to use when using the
<a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>This should be used to process partial runs. When
processing full runs (i.e. completed runs) it should not
be specified as Mantid will automatically determine the
best extension to use.</p>
<p><em>Note: A leading dot (.) is not required but
is preferred for readability</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">file_ext</span><span class="o">=</span><span class="s2">&quot;.s01&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="first-cycle-run-no">
<span id="first-cycle-run-no-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink">first_cycle_run_no</a><a class="headerlink" href="#first-cycle-run-no" title="Permalink to this heading">Â¶</a></h3>
<p>Indicates a run from the current cycle to use when calling
<a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>.
This does not have the be the first run of the cycle or
the run number corresponding to the vanadium. However it
must be in the correct cycle according to the
<a class="reference internal" href="#calibration-mapping-gem-isis-powder-ref"><span class="std std-ref">Calibration Mapping File</span></a>.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In this example assume we mean a cycle with run numbers 100-200</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">first_cycle_run_no</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="input-mode">
<span id="input-mode-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id28" role="doc-backlink">input_mode</a><a class="headerlink" href="#input-mode" title="Permalink to this heading">Â¶</a></h3>
<p>Indicates how to interpret the parameter
<a class="reference internal" href="#run-number-gem-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a> whilst
calling the <a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>
method.
If the input_mode is set to <em>Summed</em> it will process
to sum all runs specified. If set to <em>Individual</em> it
will process all runs individually (i.e. One at a time)</p>
<p>Accepted values are: <strong>Summed</strong> and <strong>Individual</strong></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">input_mode</span><span class="o">=</span><span class="s2">&quot;Summed&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="mode">
<span id="mode-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink">mode</a><a class="headerlink" href="#mode" title="Permalink to this heading">Â¶</a></h3>
<p>The current chopper mode to use in the
<a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
and <a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.
This determines which vanadium and empty run numbers
to use whilst processing.</p>
<p>Accepted values are: <strong>PDF</strong> and <strong>Rietveld</strong></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;PDF&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;Rietveld&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="multiple-scattering">
<span id="multiple-scattering-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id30" role="doc-backlink">multiple_scattering</a><a class="headerlink" href="#multiple-scattering" title="Permalink to this heading">Â¶</a></h3>
<p>Indicates whether to account for the effects of multiple scattering
when calculating absorption corrections. If
<a class="reference internal" href="#do-absorb-corrections-gem-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a> is
set to <strong>True</strong> this parameter must be set.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p><em>Note: Calculating multiple scattering effects will add around
10-30 minutes to the script runtime depending on the speed of
the computer you are using</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">multiple_scattering</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">multiple_scattering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="output-directory">
<span id="output-directory-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id31" role="doc-backlink">output_directory</a><a class="headerlink" href="#output-directory" title="Permalink to this heading">Â¶</a></h3>
<p>Specifies the path to the output directory to save resulting files
into. The script will automatically create a folder
with the label determined from the
<a class="reference internal" href="#calibration-mapping-file-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a>
and within that create another folder for the current
<a class="reference internal" href="#user-name-gem-isis-powder-diffraction-ref"><span class="std std-ref">user_name</span></a>.</p>
<p>Within this folder processed data will be saved out in
several formats.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">output_directory</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run-number">
<span id="run-number-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id32" role="doc-backlink">run_number</a><a class="headerlink" href="#run-number" title="Permalink to this heading">Â¶</a></h3>
<p>Specifies the run number(s) to process when calling the
<a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>This parameter accepts a single value or a range
of values with the following syntax:</p>
<p><strong>-</strong> : Indicates a range of runs inclusive
(e.g. <em>1-10</em> would process 1, 2, 3â¦.8, 9, 10)</p>
<p><strong>,</strong> : Indicates a gap between runs
(e.g. <em>1, 3, 5, 7</em> would process run numbers 1, 3, 5, 7)</p>
<p>These can be combined like so:
<em>1-3, 5, 8-10</em> would process run numbers 1, 2, 3, 5, 8, 9, 10.</p>
<p>In addition the <a class="reference internal" href="#input-mode-gem-isis-powder-diffraction-ref"><span class="std std-ref">input_mode</span></a>
parameter determines what effect a range of inputs has
on the data to be processed</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process run number 1, 3, 5, 6, 7</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s2">&quot;1, 3, 5-7&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or just a single run</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="sample-empty">
<span id="sample-empty-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink">sample_empty</a><a class="headerlink" href="#sample-empty" title="Permalink to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a/several sample empty run(s)
to subtract from the run in the
<a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.
If multiple runs are specified it will sum these runs
before subtracting the result.</p>
<p>This input uses the same syntax as
<a class="reference internal" href="#run-number-gem-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a>.
Please visit the above page for more details.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Our sample empty is a single number</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or a range of numbers</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty</span><span class="o">=</span><span class="s2">&quot;100-110&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="sample-empty-scale">
<span id="sample-empty-scale-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id34" role="doc-backlink">sample_empty_scale</a><a class="headerlink" href="#sample-empty-scale" title="Permalink to this heading">Â¶</a></h3>
<p>Required if <a class="reference internal" href="#sample-empty-gem-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty</span></a>
is set to <strong>True</strong></p>
<p>Sets a factor to scale the sample empty run(s) to before
subtracting. This value is multiplied after summing the
sample empty runs and before subtracting the empty from
the data set. For more details see: <a class="reference internal" href="../algorithms/Scale-v1.html#algm-scale-v1"><span class="std std-ref">Scale</span></a>.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale sample empty to 90% of original</span>
<span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty_scale</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="save-all">
<span id="save-all-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id35" role="doc-backlink">save_all</a><a class="headerlink" href="#save-all" title="Permalink to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies whether or not all files should be saved on
texture mode, if this is set to false then the .nxs and .gsas files will not be
saved out. If unset then this defaults to True.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">save_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="texture-mode">
<span id="texture-mode-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id36" role="doc-backlink">texture_mode</a><a class="headerlink" href="#texture-mode" title="Permalink to this heading">Â¶</a></h3>
<p>If set to <strong>True</strong>, then this specifies that the reduction is to be
carried out using Gemâs 160-bank texture mode, as opposed to the
standard 6 banks. This means using altered cropping values for the
vanadium and sample workspaces, and using Men Xieâs grouping file
(which must be placed in the top level of your
<a class="reference internal" href="#calibration-directory-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>).</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">texture_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="unit-to-keep">
<span id="unit-to-keep-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id37" role="doc-backlink">unit_to_keep</a><a class="headerlink" href="#unit-to-keep" title="Permalink to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>Specifies a single unit to keep in Mantid after processing using
the <a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.
For example if <em>dSpacing</em> is set after processing only banks
in d-spacing will be present.</p>
<p>Accepted values are: <strong>dSpacing</strong> and <strong>TOF</strong></p>
<p><em>Note: All units will still be saved out in the</em>
<a class="reference internal" href="#output-directory-gem-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a>
<em>regardless of this property</em></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">unit_to_keep</span><span class="o">=</span><span class="s2">&quot;dSpacing&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="suffix">
<span id="suffix-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id38" role="doc-backlink">suffix</a><a class="headerlink" href="#suffix" title="Permalink to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a suffix to append the names of output files
during a focus.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;-corr&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="user-name">
<span id="user-name-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink">user_name</a><a class="headerlink" href="#user-name" title="Permalink to this heading">Â¶</a></h3>
<p>Specifies the name of the current user when creating a
new GEM object. This is only used when saving data to
sort data into respective user folders.
See <a class="reference internal" href="#output-directory-gem-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a>
for more details.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span> <span class="o">=</span> <span class="n">Gem</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="vanadium-normalisation">
<span id="vanadium-normalisation-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id40" role="doc-backlink">vanadium_normalisation</a><a class="headerlink" href="#vanadium-normalisation" title="Permalink to this heading">Â¶</a></h3>
<p>Indicates whether to divide the focused workspace within
<a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> mode with a
previously generated vanadium spline.</p>
<p>This requires a vanadium to have been previously created
with the <a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gem_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">vanadium_normalisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-parameters">
<h2><a class="toc-backref" href="#id41" role="doc-backlink">Advanced Parameters</a><a class="headerlink" href="#advanced-parameters" title="Permalink to this heading">Â¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These values are not intended to be changed and should
reflect optimal defaults for the instrument. For more
details please read:
<a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><span class="std std-ref">Instrument advanced properties</span></a></p>
<p>This section is mainly intended to act as reference of the
current settings distributed with Mantid</p>
</div>
<p>All values changed in the advanced configuration file
requires the user to restart Mantid for the new values to take effect.
Please read <a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><span class="std std-ref">Instrument advanced properties</span></a>
before proceeding to change values within the advanced configuration file.</p>
<section id="create-cal-rebin-1-params">
<span id="create-cal-rebin-1-params-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id42" role="doc-backlink">create_cal_rebin_1_params</a><a class="headerlink" href="#create-cal-rebin-1-params" title="Permalink to this heading">Â¶</a></h3>
<p>The rebin parameters to use in the first rebin operation in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
      <span class="n">create_cal_rebin_1_params</span><span class="p">:</span> <span class="s2">&quot;100,-0.0006,19950&quot;</span>
</pre></div>
</div>
</section>
<section id="create-cal-rebin-2-params">
<span id="create-cal-rebin-2-params-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id43" role="doc-backlink">create_cal_rebin_2_params</a><a class="headerlink" href="#create-cal-rebin-2-params" title="Permalink to this heading">Â¶</a></h3>
<p>The rebin parameters to use in the second rebin operation in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">create_cal_rebin_2_params</span><span class="p">:</span> <span class="s2">&quot;1.05,0.002,1.3&quot;</span>
</pre></div>
</div>
</section>
<section id="cross-corr-reference-spectra">
<span id="cross-corr-reference-spectra-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id44" role="doc-backlink">cross_corr_reference_spectra</a><a class="headerlink" href="#cross-corr-reference-spectra" title="Permalink to this heading">Â¶</a></h3>
<p>The Workspace Index of the spectra to correlate all other spectra
against in the cross-correlation step of
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_reference_spectra</span><span class="p">:</span> <span class="mi">5000</span>
</pre></div>
</div>
</section>
<section id="cross-corr-ws-index-max">
<span id="cross-corr-ws-index-max-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id45" role="doc-backlink">cross_corr_ws_index_max</a><a class="headerlink" href="#cross-corr-ws-index-max" title="Permalink to this heading">Â¶</a></h3>
<p>The workspace index of the last member of the range of spectra to
cross-correlate against in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_ws_index_max</span><span class="p">:</span> <span class="mi">6450</span>
</pre></div>
</div>
</section>
<section id="cross-corr-ws-index-min">
<span id="cross-corr-ws-index-min-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id46" role="doc-backlink">cross_corr_ws_index_min</a><a class="headerlink" href="#cross-corr-ws-index-min" title="Permalink to this heading">Â¶</a></h3>
<p>The workspace index of the first member of the range of spectra to
cross-correlate against in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_ws_index_min</span><span class="p">:</span> <span class="mi">11</span>
</pre></div>
</div>
</section>
<section id="cross-cor-x-max">
<span id="cros-cor-x-max-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id47" role="doc-backlink">cross_cor_x_max</a><a class="headerlink" href="#cross-cor-x-max" title="Permalink to this heading">Â¶</a></h3>
<p>The ending point of the region to be cross correlated in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_x_max</span><span class="p">:</span> <span class="mf">1.3</span>
</pre></div>
</div>
</section>
<section id="cross-cor-x-min">
<span id="cros-corr-x-min-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id48" role="doc-backlink">cross_cor_x_min</a><a class="headerlink" href="#cross-cor-x-min" title="Permalink to this heading">Â¶</a></h3>
<p>The starting point of the region to be cross correlated in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_x_min</span><span class="p">:</span> <span class="mf">1.0</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-d-ref">
<span id="get-det-offsets-d-ref-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id49" role="doc-backlink">get_det_offsets_d_ref</a><a class="headerlink" href="#get-det-offsets-d-ref" title="Permalink to this heading">Â¶</a></h3>
<p>Center of reference peak in d-space for GetDetectorOffsets in
<a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_d_ref</span><span class="p">:</span> <span class="mf">1.912795</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-step">
<span id="get-det-offsets-step-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id50" role="doc-backlink">get_det_offsets_step</a><a class="headerlink" href="#get-det-offsets-step" title="Permalink to this heading">Â¶</a></h3>
<p>Step size used to bin d-spacing data in GetDetectorOffsets when
running <a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM
this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_step</span><span class="p">:</span> <span class="mf">0.002</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-x-max">
<span id="get-det-offsets-x-max-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id51" role="doc-backlink">get_det_offsets_x_max</a><a class="headerlink" href="#get-det-offsets-x-max" title="Permalink to this heading">Â¶</a></h3>
<p>Maximum of CrossCorrelation data to search for peak, usually negative,
in <a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this
is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_x_max</span><span class="p">:</span> <span class="mi">200</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-x-min">
<span id="get-det-offsets-x-min-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id52" role="doc-backlink">get_det_offsets_x_min</a><a class="headerlink" href="#get-det-offsets-x-min" title="Permalink to this heading">Â¶</a></h3>
<p>Minimum of CrossCorrelation data to search for peak, usually negative,
in <a class="reference internal" href="#create-cal-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On GEM this
is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_x_min</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span>
</pre></div>
</div>
</section>
<section id="focused-cropping-values">
<span id="focused-cropping-values-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id53" role="doc-backlink">focused_cropping_values</a><a class="headerlink" href="#focused-cropping-values" title="Permalink to this heading">Â¶</a></h3>
<p>Indicates a list of TOF values to crop the focused workspace
which was created by <a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>
on a bank by bank basis.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a smaller
TOF window than the <a class="reference internal" href="#vanadium-cropping-values-gem-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_cropping_values</span></a></p>
<p>On GEM this is set to the following TOF windows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># texture_mode = False (or not supplied)</span>
<span class="n">focused_cropping_values</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
                           <span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
                           <span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
                           <span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 4</span>
                           <span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">19480</span><span class="p">),</span>  <span class="c1"># Bank 5</span>
                           <span class="p">(</span><span class="mi">550</span><span class="p">,</span> <span class="mi">17980</span><span class="p">)</span>   <span class="c1"># Bank 6</span>
                           <span class="p">]</span>

<span class="c1"># texture_mode = True</span>
<span class="n">focused_cropping_values</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">448</span><span class="p">,</span> <span class="mi">29344</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
                           <span class="p">(</span><span class="mi">390</span><span class="p">,</span> <span class="mi">19225</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
                           <span class="p">(</span><span class="mi">390</span><span class="p">,</span> <span class="mi">18673</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
                               <span class="o">...</span>        <span class="c1"># Too many to list here - see gem_advanced_config.py</span>
                           <span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">16828</span><span class="p">),</span>  <span class="c1"># Bank 158</span>
                           <span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">16822</span><span class="p">),</span>  <span class="c1"># Bank 159</span>
                           <span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">16827</span><span class="p">)</span>   <span class="c1"># Bank 160</span>
                           <span class="p">]</span>
</pre></div>
</div>
</section>
<section id="grouping-file-name">
<span id="grouping-file-name-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id54" role="doc-backlink">grouping_file_name</a><a class="headerlink" href="#grouping-file-name" title="Permalink to this heading">Â¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-gem-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>.</p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># texture_mode = False (or not supplied)</span>
<span class="n">grouping_file_name</span><span class="p">:</span> <span class="s2">&quot;GEM_Instrument_grouping.cal&quot;</span>

<span class="c1"># texture_mode = True</span>
<span class="n">grouping_file_name</span><span class="p">:</span> <span class="s2">&quot;offsets_xie_test_2.cal&quot;</span>
</pre></div>
</div>
</section>
<section id="gsas-calib-filename">
<span id="gsas-calib-filename-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id55" role="doc-backlink">gsas_calib_filename</a><a class="headerlink" href="#gsas-calib-filename" title="Permalink to this heading">Â¶</a></h3>
<p>The name of the GSAS calibration file used to generate MAUD input
files when running a focus in <a class="reference internal" href="#texture-mode-isis-powder-diffraction-ref"><span class="std std-ref">texture_mode</span></a>.</p>
<p>on GEM this is set to the following (this file is distributed with Mantid):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gsas_calib_filename</span><span class="p">:</span> <span class="s2">&quot;GEM_PF1_PROFILE.IPF&quot;</span>
</pre></div>
</div>
</section>
<section id="nxs-filename">
<span id="nxs-filename-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id56" role="doc-backlink">nxs_filename</a><a class="headerlink" href="#nxs-filename" title="Permalink to this heading">Â¶</a></h3>
<p>A template for the filename of the generated NeXus file.</p>
</section>
<section id="gss-filename">
<span id="gss-filename-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id57" role="doc-backlink">gss_filename</a><a class="headerlink" href="#gss-filename" title="Permalink to this heading">Â¶</a></h3>
<p>A template for the filename of the generated GSAS file.</p>
</section>
<section id="dat-files-directory">
<span id="dat-files-directory-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id58" role="doc-backlink">dat_files_directory</a><a class="headerlink" href="#dat-files-directory" title="Permalink to this heading">Â¶</a></h3>
<p>The subdirectory of the output directory where the .dat files are saved</p>
</section>
<section id="tof-xye-filename">
<span id="tof-xye-filename-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id59" role="doc-backlink">tof_xye_filename</a><a class="headerlink" href="#tof-xye-filename" title="Permalink to this heading">Â¶</a></h3>
<p>A template for the filename of the generated TOF XYE file.</p>
</section>
<section id="dspacing-xye-filename">
<span id="dspacing-xye-filename-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id60" role="doc-backlink">dspacing_xye_filename</a><a class="headerlink" href="#dspacing-xye-filename" title="Permalink to this heading">Â¶</a></h3>
<p>A template for the filename of the generated dSpacing XYE file.</p>
</section>
<section id="maud-grouping-scheme">
<span id="maud-grouping-scheme-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id61" role="doc-backlink">maud_grouping_scheme</a><a class="headerlink" href="#maud-grouping-scheme" title="Permalink to this heading">Â¶</a></h3>
<p>When saving MAUD files (typically only done when running in
<a class="reference internal" href="#texture-mode-isis-powder-diffraction-ref"><span class="std std-ref">texture_mode</span></a>), there are too many banks to have
calibration parameters for each bank. Instead, the normal 6-bank calibration file is used
(see <a class="reference internal" href="#gsas-calib-filename-gem-isis-powder-diffraction-ref"><span class="std std-ref">gsas_calib_filename</span></a>), and each of the 160
texture banks is assigned the calibration parameters of one of the 6 banks in the file.</p>
<p>This parameter associates each of the 160 banks to one of the big banks. It is a list of bank IDs,
where the value at element <code class="docutils literal notranslate"><span class="pre">i</span></code> is a number between 1 and 6, indicating which of the 6 banks to
associate texture bank <code class="docutils literal notranslate"><span class="pre">i</span></code> with.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">maud_grouping_scheme</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span> <span class="o">+</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="mi">42</span> <span class="o">+</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="mi">52</span> <span class="o">+</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">*</span> <span class="mi">35</span>
</pre></div>
</div>
</section>
<section id="raw-tof-cropping-values">
<span id="raw-tof-cropping-values-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id62" role="doc-backlink">raw_tof_cropping_values</a><a class="headerlink" href="#raw-tof-cropping-values" title="Permalink to this heading">Â¶</a></h3>
<p>Determines the TOF window to crop all spectra down to before any
processing in the <a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
and <a class="reference internal" href="#focus-gem-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> methods.</p>
<p>This helps remove negative counts where at very low TOF
the empty counts can exceed the captured neutron counts
of the run to process.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">raw_tof_cropping_values</span><span class="p">:</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">20000</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="save-gda">
<span id="save-gda-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id63" role="doc-backlink">save_gda</a><a class="headerlink" href="#save-gda" title="Permalink to this heading">Â¶</a></h3>
<p>If set to <strong>True</strong>, this saves the focused workspace to the
MAUD-readable <cite>.gda</cite> format.</p>
<p>If <a class="reference internal" href="#texture-mode-isis-powder-diffraction-ref"><span class="std std-ref">texture_mode</span></a> is set to <strong>True</strong>
this is enabled, and disabled if it is set to <strong>False</strong>.</p>
</section>
<section id="save-maud-calib">
<span id="save-maud-calib-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id64" role="doc-backlink">save_maud_calib</a><a class="headerlink" href="#save-maud-calib" title="Permalink to this heading">Â¶</a></h3>
<p>If set to <strong>True</strong>, this uses the focus output and
<a class="reference internal" href="#gsas-calib-filename-gem-isis-powder-diffraction-ref"><span class="std std-ref">gsas_calib_filename</span></a>
to create a MAUD calibration file, using
<a class="reference internal" href="../algorithms/SaveGEMMAUDParamFile-v1.html#algm-savegemmaudparamfile"><span class="std std-ref">SaveGEMMAUDParamFile</span></a>.</p>
<p>If <a class="reference internal" href="#texture-mode-isis-powder-diffraction-ref"><span class="std std-ref">texture_mode</span></a> is set to <strong>True</strong>
this is enabled, and disabled if it is set to <strong>False</strong>.</p>
</section>
<section id="save-maud">
<span id="save-maud-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id65" role="doc-backlink">save_maud</a><a class="headerlink" href="#save-maud" title="Permalink to this heading">Â¶</a></h3>
<p>If set to <strong>True</strong>, this saves the focus output to the Maud
three-column format (<code class="docutils literal notranslate"><span class="pre">.gem</span></code> file extension). If
<a class="reference internal" href="#texture-mode-isis-powder-diffraction-ref"><span class="std std-ref">texture_mode</span></a> is set to <strong>True</strong>
this is enabled, and disabled if it is set to <strong>False</strong>.</p>
</section>
<section id="spline-coefficient">
<span id="spline-coefficient-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id66" role="doc-backlink">spline_coefficient</a><a class="headerlink" href="#spline-coefficient" title="Permalink to this heading">Â¶</a></h3>
<p>Determines the spline coefficient to use after processing
the vanadium in <a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. For more details see: <a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><span class="std std-ref">SplineBackground</span></a></p>
<p><em>Note that if this value is changed âcreate_vanadiumâ
will need to be called again.</em></p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spline_coefficient</span><span class="p">:</span> <span class="mi">30</span>
</pre></div>
</div>
</section>
<section id="subtract-empty-instrument">
<span id="subtract-empty-instrument-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id67" role="doc-backlink">subtract_empty_instrument</a><a class="headerlink" href="#subtract-empty-instrument" title="Permalink to this heading">Â¶</a></h3>
<p>Provides the option to disable subtracting empty instrument runs from
the run being focused. This is useful for focusing empties, as
subtracting an empty from itself, or subtracting the previous cycleâs
empty from this cycleâs, creates meaningless data. Set to <strong>False</strong> to
disable empty subtraction.</p>
<p>On Gem this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">subtract_empty_instrument</span><span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="vanadium-cropping-values">
<span id="vanadium-cropping-values-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id68" role="doc-backlink">vanadium_cropping_values</a><a class="headerlink" href="#vanadium-cropping-values" title="Permalink to this heading">Â¶</a></h3>
<p>Determines the TOF windows to crop to on a bank by bank basis
within the <a class="reference internal" href="#create-vanadium-gem-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. This is applied after focusing and before a spline is taken.</p>
<p>It is used to remove low counts at the start and end of the vanadium run
to produce a spline which better matches the data.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a larger
TOF window than the <a class="reference internal" href="#focused-cropping-values-gem-isis-powder-diffraction-ref"><span class="std std-ref">focused_cropping_values</span></a>
and a smaller window than <a class="reference internal" href="#raw-tof-cropping-values-gem-isis-powder-diffraction-ref"><span class="std std-ref">raw_tof_cropping_values</span></a>.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># texture_mode = False (or not supplied)</span>
<span class="n">vanadium_cropping_values</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">19997</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
                            <span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">19997</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
                            <span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">19997</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
                            <span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">19997</span><span class="p">),</span>  <span class="c1"># Bank 4</span>
                            <span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">19500</span><span class="p">),</span>  <span class="c1"># Bank 5</span>
                            <span class="p">(</span><span class="mi">510</span><span class="p">,</span> <span class="mi">18000</span><span class="p">)</span>   <span class="c1"># Bank 6</span>
                            <span class="p">]</span>

<span class="c1"># texture_mode = True</span>
<span class="n">vanadium_cropping_values</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">34933</span><span class="p">),</span>   <span class="c1"># Bank 1</span>
                            <span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">22887</span><span class="p">),</span>   <span class="c1"># Bank 2</span>
                            <span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">22230</span><span class="p">),</span>   <span class="c1"># Bank 3</span>
                                <span class="o">...</span>        <span class="c1"># Too many banks to list here -see gem_advanced_config.py</span>
                            <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20034</span><span class="p">),</span>  <span class="c1"># Bank 158</span>
                            <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20026</span><span class="p">),</span>  <span class="c1"># Bank 159</span>
                            <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20033</span><span class="p">)</span>   <span class="c1"># Bank 160</span>
                            <span class="p">]</span>
</pre></div>
</div>
</section>
<section id="vanadium-sample-details">
<span id="vanadium-sample-details-gem-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id69" role="doc-backlink">Vanadium sample details</a><a class="headerlink" href="#vanadium-sample-details" title="Permalink to this heading">Â¶</a></h3>
<section id="chemical-formula">
<span id="chemical-formula-sample-details-gem-isis-powder-diffraction-ref"></span><h4><a class="toc-backref" href="#id70" role="doc-backlink">chemical_formula</a><a class="headerlink" href="#chemical-formula" title="Permalink to this heading">Â¶</a></h4>
<p>The chemical formula for the Vanadium rod.
This is a rod consisting of 94.86% Vanadium and 5.14% Niobium.
Because this is not an elemental formula,
<a class="reference internal" href="#number-density-sample-details-gem-isis-powder-diffraction-ref"><span class="std std-ref">number_density</span></a>
must also be set.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chemical_formula</span> <span class="o">=</span> <span class="s2">&quot;V0.9486 Nb0.0514&quot;</span>
</pre></div>
</div>
</section>
<section id="number-density">
<span id="number-density-sample-details-gem-isis-powder-diffraction-ref"></span><h4><a class="toc-backref" href="#id71" role="doc-backlink">number_density</a><a class="headerlink" href="#number-density" title="Permalink to this heading">Â¶</a></h4>
<p>The number density corresponding to the
<a class="reference internal" href="#chemical-formula-sample-details-gem-isis-powder-diffraction-ref"><span class="std std-ref">chemical_formula</span></a>
used. This is in units of atoms/Angstrom^3.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">number_density</span> <span class="o">=</span> <span class="mf">0.071</span>
</pre></div>
</div>
</section>
<section id="cylinder-sample-height">
<h4><a class="toc-backref" href="#id72" role="doc-backlink">cylinder_sample_height</a><a class="headerlink" href="#cylinder-sample-height" title="Permalink to this heading">Â¶</a></h4>
<p>The height of the Vanadium rod.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cylinder_sample_height</span> <span class="o">=</span> <span class="mf">4.0</span>
</pre></div>
</div>
</section>
<section id="cylinder-sample-radius">
<h4><a class="toc-backref" href="#id73" role="doc-backlink">cylinder_sample_radius</a><a class="headerlink" href="#cylinder-sample-radius" title="Permalink to this heading">Â¶</a></h4>
<p>The radius of the Vanadium rod.</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cylinder_sample_radius</span> <span class="o">=</span> <span class="mf">0.4</span>
</pre></div>
</div>
</section>
<section id="cylinder-position">
<h4><a class="toc-backref" href="#id74" role="doc-backlink">cylinder_position</a><a class="headerlink" href="#cylinder-position" title="Permalink to this heading">Â¶</a></h4>
<p>The position of the Vanadium rod in [x, y, z]</p>
<p>On GEM this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cylinder_position</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</section>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="DirecttoolsPythonModule.html" title="Previous Chapter: directtools"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; directtools</span>
    </a>
  </li>
  <li>
    <a href="ISISPowder-HRPD-v1.html" title="Next Chapter: ISIS Powder Diffraction Scripts - HRPD Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ISIS Powder D... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>