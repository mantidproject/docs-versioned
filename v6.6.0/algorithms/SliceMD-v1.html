<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>SliceMD v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SliceMDHisto v1" href="SliceMDHisto-v1.html" />
    <link rel="prev" title="SingleCrystalDiffuseReduction v1" href="SingleCrystalDiffuseReduction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SliceMD v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="slicemd-v1">
<span id="algm-slicemd"></span><span id="algm-slicemd-v1"></span><h1>SliceMD v1<a class="headerlink" href="#slicemd-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SliceMD-v1_dlg.png"><img alt="../_images/SliceMD-v1_dlg.png" class="screenshot" src="../_images/SliceMD-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>SliceMD</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#axis-aligned-slice" id="id6">Axis-Aligned Slice</a></p></li>
<li><p><a class="reference internal" href="#non-axis-aligned-slice" id="id7">Non-Axis-Aligned Slice</a></p></li>
<li><p><a class="reference internal" href="#splitting-parameters" id="id8">Splitting Parameters</a></p></li>
<li><p><a class="reference internal" href="#slicing-a-mdhistoworkspace" id="id9">Slicing a MDHistoWorkspace</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id10">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id11">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Make a MDEventWorkspace containing the events in a slice of an input MDEventWorkspace.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="SliceMDHisto-v1.html#algm-slicemdhisto"><span class="std std-ref">SliceMDHisto</span></a>, <a class="reference internal" href="ProjectMD-v1.html#algm-projectmd"><span class="std std-ref">ProjectMD</span></a>, <a class="reference internal" href="CutMD-v1.html#algm-cutmd"><span class="std std-ref">CutMD</span></a>, <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input MDWorkspace.</p></td>
</tr>
<tr class="row-odd"><td><p>AxisAligned</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Perform binning aligned with the axes of the input MDEventWorkspace?</p></td>
</tr>
<tr class="row-even"><td><p>AlignedDim0</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 0th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>AlignedDim1</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 1th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>AlignedDim2</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 2th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>AlignedDim3</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 3th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>AlignedDim4</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 4th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>AlignedDim5</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 5th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>BasisVector0</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 0th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>BasisVector1</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 1th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>BasisVector2</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 2th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>BasisVector3</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 3th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>BasisVector4</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 4th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>BasisVector5</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 5th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>Translation</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Coordinates in the INPUT workspace that corresponds to (0,0,0) in the OUTPUT workspace. Enter as a comma-separated string. Default: 0 in all dimensions (no translation).</p></td>
</tr>
<tr class="row-odd"><td><p>OutputExtents</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>The minimum, maximum edges of space of each dimension of the OUTPUT workspace, as a comma-separated list</p></td>
</tr>
<tr class="row-even"><td><p>OutputBins</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>The number of bins for each dimension of the OUTPUT workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>NormalizeBasisVectors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Normalize the given basis vectors to unity.  If true, then a distance of 1 in the INPUT dimensions = 1 in the OUTPUT dimensions. If false, then a distance of norm(basis_vector) in the INPUT dimension = 1 in the OUTPUT dimensions.</p></td>
</tr>
<tr class="row-even"><td><p>ForceOrthogonal</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Force the input basis vectors to form an orthogonal coordinate system. Only works in 3 dimension!</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the output MDEventWorkspace.</p></td>
</tr>
<tr class="row-even"><td><p>OutputFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Optional: Specify a NeXus file to write if you want the output workspace to be file-backed. Allowed extensions: [‘.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>Memory</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>-1</p></td>
<td><p>If OutputFilename is specified to use a file back end:   The amount of memory (in MB) to allocate to the in-memory cache.   If not specified, a default of 40% of free physical memory is used.</p></td>
</tr>
<tr class="row-even"><td><p>TakeMaxRecursionDepthFromInput</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Copy the maximum recursion depth from the input workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>MaxRecursionDepth</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1000</p></td>
<td><p>Sets the maximum recursion depth to use. Can be used to constrain the workspaces internal structure</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Algorithm that can take a slice out of an original
<a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a> while preserving all the events
contained therein.</p>
<p>It uses the same parameters as <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD v1</span></a> to determine a
transformation to make from input-&gt;output workspace. The difference is
that <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD v1</span></a> sums events in a regular grid whereas SliceMD
moves the events into the output workspace, which boxes itself.</p>
<p>Please see <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD v1</span></a> for a detailed description of the
parameters.</p>
<section id="axis-aligned-slice">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Axis-Aligned Slice</a><a class="headerlink" href="#axis-aligned-slice" title="Permalink to this heading">¶</a></h3>
<p>Events outside the range of the slice are dropped. The new output
MDEventWorkspace’s dimensions only extend as far as the limit specified.</p>
</section>
<section id="non-axis-aligned-slice">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Non-Axis-Aligned Slice</a><a class="headerlink" href="#non-axis-aligned-slice" title="Permalink to this heading">¶</a></h3>
<p>The coordinates of each event are transformed according to the new basis
vectors, and placed in the output MDEventWorkspace. The dimensions of
the output workspace are along the basis vectors specified.</p>
</section>
<section id="splitting-parameters">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Splitting Parameters</a><a class="headerlink" href="#splitting-parameters" title="Permalink to this heading">¶</a></h3>
<p>The <strong>OutputBins</strong> parameter is interpreted as the “SplitInto” parameter
for the top split-level in each dimension. For instance, if you want the output workspace to
split in 2x2x2, you would specify OutputBins=”2,2,2”.</p>
<p>For 1D slices, it may make sense to specify a SplitInto parameter of 1
in every other dimension - that way, boxes will only be split along the
1D direction.</p>
<p>To force the box structure to match that defined in OutputBins, the
MaxRecursionDepth property can be set to 1. If this is not the case then
boxes will split further if sufficient events fall in the same box. Further
splitting uses the value of “SplitInto” from the InputWorkspace.</p>
</section>
<section id="slicing-a-mdhistoworkspace">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Slicing a MDHistoWorkspace</a><a class="headerlink" href="#slicing-a-mdhistoworkspace" title="Permalink to this heading">¶</a></h3>
<p>It is possible to slice a <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a>. Each
MDHistoWorkspace holds a reference to the
<a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a> that created it, as well as the
coordinate transformation that was used.</p>
<p>In this case, the algorithm is executed on the original
MDEventWorkspace, in the proper coordinates. Perhaps surprisingly, the
output of SliceMD on a MDHistoWorkspace is a MDEventWorkspace!</p>
<p>Only the non-axis aligned slice method can be performed on a
MDHistoWorkspace! Of course, your basis vectors can be aligned with the
dimensions, which is equivalent.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Axis aligned binning</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdew</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A, B, C&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U, U, U&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">mdew</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">100000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="c1"># Slice out all C &gt; 0</span>
<span class="n">sliced</span> <span class="o">=</span> <span class="n">SliceMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdew</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;A,-10,10,10&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;B, -10, 10, 10&#39;</span><span class="p">,</span> <span class="n">AlignedDim2</span><span class="o">=</span><span class="s1">&#39;C,-10, 0, 10&#39;</span><span class="p">,)</span>

<span class="n">dim0</span> <span class="o">=</span> <span class="n">sliced</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">dim1</span> <span class="o">=</span> <span class="n">sliced</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dim2</span> <span class="o">=</span> <span class="n">sliced</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A extents </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim0</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">(),</span> <span class="n">dim0</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B extents </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim1</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">(),</span> <span class="n">dim1</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;C extents </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim2</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">(),</span> <span class="n">dim2</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original MDEW should have 2*N events in sliced. We get a factor of :  </span><span class="si">{:.0f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mdew</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()</span> <span class="o">/</span> <span class="n">sliced</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A extents -10.0 10.0
B extents -10.0 10.0
C extents -10.0 0.0
Original MDEW should have 2*N events in sliced. We get a factor of :  2
</pre></div>
</div>
<p><strong>Example - Non-axis aligned binning</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="c1"># Create a host workspace</span>
<span class="n">mdew</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A, B&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U, U&#39;</span><span class="p">)</span>
<span class="c1"># Add a peak at -5,-5</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">mdew</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">100000</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="c1"># Add a peak at 5, 5</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">mdew</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">100000</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="c1"># Slice at 45 degrees. BasisVector0 now runs through both peaks</span>
<span class="n">sliced</span> <span class="o">=</span> <span class="n">SliceMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdew</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">BasisVector0</span><span class="o">=</span><span class="s1">&#39;X, sqrt(2*U^2), 1,1&#39;</span><span class="p">,</span> <span class="n">BasisVector1</span><span class="o">=</span><span class="s1">&#39;Y, sqrt(2*U^2),-1,1&#39;</span><span class="p">,</span><span class="n">OutputBins</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">OutputExtents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>

<span class="c1"># Bin it to gather statistics</span>
<span class="n">binned</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">sliced</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;X, 0,10, 100&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;Y,-10,10,1&#39;</span><span class="p">)</span>
<span class="n">signals</span> <span class="o">=</span> <span class="n">binned</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()</span>

<span class="n">dim_x</span> <span class="o">=</span> <span class="n">binned</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">x_axis</span><span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dim_x</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">(),</span> <span class="n">dim_x</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">(),</span> <span class="n">dim_x</span><span class="o">.</span><span class="n">getNBins</span><span class="p">())</span>
<span class="n">x_at_max</span> <span class="o">=</span> <span class="n">x_axis</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">signals</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Brightest region should be at x  = sqrt( 2*5*5 ) = 7.07. Found to be:  </span><span class="si">{0:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x_at_max</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Brightest region should be at x  = sqrt( 2*5*5 ) = 7.07. Found to be:  7.07
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/Slicing.html">MDAlgorithms\Slicing</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/54a39e0a58206de8c1730bb3d0bdf337c05a00a9/Framework/MDAlgorithms/inc/MantidMDAlgorithms/SliceMD.h">SliceMD.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/54a39e0a58206de8c1730bb3d0bdf337c05a00a9/Framework/MDAlgorithms/src/SliceMD.cpp">SliceMD.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SingleCrystalDiffuseReduction-v1.html" title="Previous Chapter: SingleCrystalDiffuseReduction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SingleCrystal...</span>
    </a>
  </li>
  <li>
    <a href="SliceMDHisto-v1.html" title="Next Chapter: SliceMDHisto v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SliceMDHisto v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>