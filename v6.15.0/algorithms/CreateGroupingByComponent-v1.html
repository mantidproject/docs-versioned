<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CreateGroupingByComponent v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=4468db6d" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=9aca6aaf" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=1afa37e1"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CreateGroupingWorkspace v1" href="CreateGroupingWorkspace-v1.html" />
    <link rel="prev" title="CreateFloodWorkspace v1" href="CreateFloodWorkspace-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





<nav id="navbar" class="navbar navbar-default navbar-fixed-top">
  <div id="navbar-main" class="container">
    <ul class="nav navbar-nav">
      
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <li>
        <a class="navbar-brand" href="http://www.mantidproject.org">
         </a>
      </li>
      <span class="navbar-text navbar-version pull-left"><b>6.15</b></span>
    </ul>

    
    <div class="collapse navbar-collapse nav-collapse">
    
      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          <li>
            <a href="https://www.mantidproject.org">Home</a>
          </li>
          <li>
            <a href="https://download.mantidproject.org">Download</a>
          </li>
          <li>
            <a href="https://docs.mantidproject.org">Documentation</a>
          </li>
          <li>
            <a href="https://www.mantidproject.org/contact">Contact Us</a>
          </li>
        
        
          
          
        
        
        
        
      </ul>
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          </div>
  </div> <!-- /navbar-main -->
<div id="navbar-breadcrumbs" class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0">
      <a href="../index.html">Documentation</a>
         &#187;
    </li>
    
    <li class="nav-item nav-item-1">
      <a href="index.html" accesskey="U">
        Algorithms
      </a>
       &#187;
    </li>
    
    
    
    
    <li class="nav-item nav-item-this">
      <a href="">CreateGroupingByComponent v1</a>
    </li>
    
    
  </ul>
</div>
</nav>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="creategroupingbycomponent-v1">
<span id="algm-creategroupingbycomponent"></span><span id="algm-creategroupingbycomponent-v1"></span><h1>CreateGroupingByComponent v1<a class="headerlink" href="#creategroupingbycomponent-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id5">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id6">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Creates a GroupingWorkspace where all components matching the search criteria, under a given parent component, are grouped together. These groups are then subdivided by GroupSubdivision</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="CreateGroupingWorkspace-v1.html#algm-creategroupingworkspace"><span class="std std-ref">CreateGroupingWorkspace</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InstrumentName</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Name of the instrument to base the GroupingWorkspace on</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The detector grouping workspace.</p></td>
</tr>
<tr class="row-even"><td><p>ComponentNameIncludes</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Search String for determining which components should be grouped, such components MUST contain this string</p></td>
</tr>
<tr class="row-odd"><td><p>ComponentNameExcludes</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Search String for determining which components should be grouped, such components MUST NOT contain this string</p></td>
</tr>
<tr class="row-even"><td><p>ExcludeBranches</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Search String for flagging any components which should not be searched through when looking for the target strings</p></td>
</tr>
<tr class="row-odd"><td><p>GroupSubdivision</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Number of subgroups to create for each collection of components. Minimum is 1.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>A utility algorithm for grouping detector components together based on repeated component names
(i.e. if you wanted to group all the pixels in each module together).
Specifically, every <em>component</em> which matches the search conditions will have all its child <em>detectors</em> (excluding monitors) grouped together with
the child <em>detectors</em> of the other matching <em>components</em> which are present under the <em>same</em> parent <em>component</em>.</p>
<p>This is best illustrated by example.</p>
<p>You have an instrument that has the following hierarchy Banks -&gt; Module -&gt; Pixels.
Let’s say there are two banks called <code class="docutils literal notranslate"><span class="pre">bank1</span></code> and <code class="docutils literal notranslate"><span class="pre">bank2</span></code>. Then each bank is made up of three module named
<code class="docutils literal notranslate"><span class="pre">module1</span></code>, <code class="docutils literal notranslate"><span class="pre">module2</span></code> and <code class="docutils literal notranslate"><span class="pre">module3</span></code>, respectively.
Finally each of these module contains 5 detector pixels: <code class="docutils literal notranslate"><span class="pre">pixel1</span></code>, <code class="docutils literal notranslate"><span class="pre">pixel2</span></code>, <code class="docutils literal notranslate"><span class="pre">pixel3</span></code>, <code class="docutils literal notranslate"><span class="pre">pixel4</span></code>, and <code class="docutils literal notranslate"><span class="pre">pixel5</span></code></p>
<p>If you want to create a <code class="docutils literal notranslate"><span class="pre">GroupingWorkspace</span></code> where each <em>bank</em> forms its own detector group,
you can formulate this as grouping together “module” components (using <code class="docutils literal notranslate"><span class="pre">ComponentNameIncludes</span> <span class="pre">=</span> <span class="pre">&quot;module</span></code>”).
The algorithm will find all the <em>components</em> with names containing the term <code class="docutils literal notranslate"><span class="pre">&quot;module&quot;</span></code>,
find their child <em>detectors</em> (in this case, this is a set of 5 pixels per module),
and group together all of these child <em>detectors</em> which belong to components appearing under the same <em>parent component</em>
(i.e. grouping all <em>detectors</em> belonging to <em>modules</em> which appear under the same parent <em>bank</em> -
resulting in a unique grouping for each bank)</p>
<p>In some situations you may have components you do not wish to include in the grouping preset within the instrument tree,
which entirely contain the name of the actual component you are looking to match
(for example <code class="docutils literal notranslate"><span class="pre">transmission-pixel1</span></code> when searching for <code class="docutils literal notranslate"><span class="pre">pixel</span></code> components).</p>
<p>In these cases you have two options, you can use <code class="docutils literal notranslate"><span class="pre">ComponentNameExcludes</span></code> or, in some situations <code class="docutils literal notranslate"><span class="pre">ExcludeBranches</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ComponentNameExcludes</span></code> is used to alter the condition of which components meet the search criteria. When this is set
the detectors of components
Additionally, entire branches of the Instrument Component Tree can be excluded with <code class="docutils literal notranslate"><span class="pre">ExcludeBranches</span></code>,
no components will be grouped under any parent component
with names containing any of the comma separated strings provided here.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example: Grouping ENGINX blocks together</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mantid.simpleapi</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">CreateGroupingByComponent</span><span class="p">(</span><span class="n">InstrumentName</span> <span class="o">=</span> <span class="s2">&quot;ENGINX&quot;</span><span class="p">,</span>
                          <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="s2">&quot;test_group&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameIncludes</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameExcludes</span> <span class="o">=</span> <span class="s2">&quot;transmission&quot;</span><span class="p">,</span>
                          <span class="n">GroupSubdivision</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/CreateGroupingByComponent-ENGINXmodule.png"><img alt="CreateGroupingByComponent-ENGINXmodule.png" src="../_images/CreateGroupingByComponent-ENGINXmodule.png" style="width: 600px;" />
</a>
</figure>
<p><strong>Example: Grouping ENGINX blocks together, then subdividing by 3</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mantid.simpleapi</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">CreateGroupingByComponent</span><span class="p">(</span><span class="n">InstrumentName</span> <span class="o">=</span> <span class="s2">&quot;ENGINX&quot;</span><span class="p">,</span>
                          <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="s2">&quot;test_group&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameIncludes</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameExcludes</span> <span class="o">=</span> <span class="s2">&quot;transmission&quot;</span><span class="p">,</span>
                          <span class="n">GroupSubdivision</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/CreateGroupingByComponent-ENGINXmoduleSub3.png"><img alt="CreateGroupingByComponent-ENGINXmoduleSub3.png" src="../_images/CreateGroupingByComponent-ENGINXmoduleSub3.png" style="width: 600px;" />
</a>
</figure>
<p><strong>Example: Grouping ENGINX pixels together, excluding transmission-pixels</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mantid.simpleapi</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">CreateGroupingByComponent</span><span class="p">(</span><span class="n">InstrumentName</span> <span class="o">=</span> <span class="s2">&quot;ENGINX&quot;</span><span class="p">,</span>
                          <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="s2">&quot;test_group&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameIncludes</span> <span class="o">=</span> <span class="s2">&quot;pixel&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameExcludes</span> <span class="o">=</span> <span class="s2">&quot;transmission&quot;</span><span class="p">,</span>
                          <span class="n">GroupSubdivision</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/CreateGroupingByComponent-ENGINXpixel.png"><img alt="CreateGroupingByComponent-ENGINXpixel.png" src="../_images/CreateGroupingByComponent-ENGINXpixel.png" style="width: 600px;" />
</a>
</figure>
<p><strong>Example: Grouping ENGINX pixels together, excluding the NorthBank and TransmissionBank</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mantid.simpleapi</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">CreateGroupingByComponent</span><span class="p">(</span><span class="n">InstrumentName</span> <span class="o">=</span> <span class="s2">&quot;ENGINX&quot;</span><span class="p">,</span>
                          <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="s2">&quot;test_group&quot;</span><span class="p">,</span>
                          <span class="n">ComponentNameIncludes</span> <span class="o">=</span> <span class="s2">&quot;pixel&quot;</span><span class="p">,</span>
                          <span class="n">ExcludeBranches</span> <span class="o">=</span> <span class="s2">&quot;NorthBank, Transmission&quot;</span><span class="p">,</span>
                          <span class="n">GroupSubdivision</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># note that either the exact string &quot;NorthBank&quot; or substring &quot;Transmission&quot; can be provided as comma separated strings</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/CreateGroupingByComponent-ENGINXpixelExclude.png"><img alt="CreateGroupingByComponent-ENGINXpixelExclude.png" src="../_images/CreateGroupingByComponent-ENGINXpixelExclude.png" style="width: 600px;" />
</a>
</figure>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/Engineering.html">Diffraction\Engineering</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/6762777a1cda710ac427c4efdb2a7fa75b50dc69/Framework/PythonInterface/plugins/algorithms/CreateGroupingByComponent.py">CreateGroupingByComponent.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul id="footer-nav" class="nav navbar-nav">
      
      
          
            
  <li>
    <a href="CreateFloodWorkspace-v1.html" title="Previous Chapter: CreateFloodWorkspace v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CreateFloodWo...</span>
    </a>
  </li>
  <li>
    <a href="CreateGroupingWorkspace-v1.html" title="Next Chapter: CreateGroupingWorkspace v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CreateGroupin... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>