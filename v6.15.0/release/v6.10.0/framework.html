<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Framework Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=4468db6d" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=9aca6aaf" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=1afa37e1"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Geometry Changes" href="indirect_geometry.html" />
    <link rel="prev" title="Direct Geometry Changes" href="direct_geometry.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





<nav id="navbar" class="navbar navbar-default navbar-fixed-top">
  <div id="navbar-main" class="container">
    <ul class="nav navbar-nav">
      
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <li>
        <a class="navbar-brand" href="http://www.mantidproject.org">
         </a>
      </li>
      <span class="navbar-text navbar-version pull-left"><b>6.15</b></span>
    </ul>

    
    <div class="collapse navbar-collapse nav-collapse">
    
      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          <li>
            <a href="https://www.mantidproject.org">Home</a>
          </li>
          <li>
            <a href="https://download.mantidproject.org">Download</a>
          </li>
          <li>
            <a href="https://docs.mantidproject.org">Documentation</a>
          </li>
          <li>
            <a href="https://www.mantidproject.org/contact">Contact Us</a>
          </li>
        
        
          
          
        
        
        
        
      </ul>
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          </div>
  </div> <!-- /navbar-main -->
<div id="navbar-breadcrumbs" class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0">
      <a href="../../index.html">Documentation</a>
         &#187;
    </li>
    
    <li class="nav-item nav-item-1">
      <a href="../index.html" >
        Release Notes
      </a>
       &#187;
    </li>
    
    <li class="nav-item nav-item-2">
      <a href="index.html" accesskey="U">
        Mantid 6.10.0 Release Notes
      </a>
       &#187;
    </li>
    
    
    
    
    <li class="nav-item nav-item-this">
      <a href="">Framework Changes</a>
    </li>
    
    
  </ul>
</div>
</nav>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#algorithms" id="id8">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id9">New features</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id10">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fit-functions" id="id11">Fit Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id12">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-handling" id="id13">Data Handling</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id14">New features</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id15">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-objects" id="id16">Data Objects</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id17">New features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id18">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id19">New features</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id20">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id21">Dependencies</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id22">New features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mantidworkbench" id="id23">MantidWorkbench</a></p></li>
</ul>
</nav>
<section id="algorithms">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Link to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Algorithm <a class="reference internal" href="../../algorithms/SaveAscii-v2.html#algm-saveascii"><span class="std std-ref">SaveAscii v2</span></a> now supports 1D <a class="reference internal" href="../../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MD Histogram Workspace</span></a>.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/CompressEvents-v1.html#algm-compressevents"><span class="std std-ref">CompressEvents v1</span></a> is now able to combine events together in logarithmically increasing size groups.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/PolarizationCorrectionWildes-v1.html#algm-polarizationcorrectionwildes"><span class="std std-ref">PolarizationCorrectionWildes v1</span></a> now accepts input workspace order.</p></li>
<li><p>Algorithms <a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins v1</span></a> and <a class="reference internal" href="../../algorithms/Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D v1</span></a> can now import phonopy .yaml data.
The force constants are stored in a file named <code class="docutils literal notranslate"><span class="pre">FORCE_CONSTANTS</span></code> or
<code class="docutils literal notranslate"><span class="pre">force_constants.hdf5</span></code> in the same directory as the YAML file.
This is recommended when using large force constants arrays as the
YAML loader can be very slow.</p></li>
<li><p>Algorithms <a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins v1</span></a> and <a class="reference internal" href="../../algorithms/Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D v1</span></a> now support frozen atoms in data from GAUSSIAN.</p>
<ul>
<li><p>Similarly to the frozen-atoms (“selective dynamics”) support for
VASP outputs, frozen atoms will be disregarded in the calculation
of inelastic scattering structure factor.</p></li>
</ul>
</li>
<li><p>Algorithms <a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins v1</span></a> and <a class="reference internal" href="../../algorithms/Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D v1</span></a> now support JSON file import.
The Euphonic JSON formats are convenient to create with Python
scripts, and recommended for users who wish to somehow customise or
manipulate their data before using it with Abins(2D).
Supported formats are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">AbinsData</span></code>: dump of internal object, intended for development and testing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">euphonic.QpointPhononModes</span></code>: an equivalent set of data dumped from
the Euphonic library.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">euphonic.ForceConstants</span></code>: force constants which may be manipulated
in Euphonic, and will be converted to phonon modes on a q-point
mesh when Abins(2D) is run.</p></li>
</ul>
</li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/LoadErrorEventsNexus-v1.html#algm-loaderroreventsnexus"><span class="std std-ref">LoadErrorEventsNexus</span></a> to load events from the <code class="docutils literal notranslate"><span class="pre">bank_error_events</span></code> bank of a NeXus file.</p></li>
<li><p>Re-implementation of <a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a> when specifying the <code class="docutils literal notranslate"><span class="pre">CompressTolerance</span></code>. This uses significantly less memory to create fewer events overall.
However, the execution time of <code class="docutils literal notranslate"><span class="pre">LoadEventNexus</span></code> itself is generally longer; workflows that benefit from <code class="docutils literal notranslate"><span class="pre">CompressEvents</span></code> generally run faster.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/FindSXPeaks-v1.html#algm-findsxpeaks-v1"><span class="std std-ref">FindSXPeaks</span></a> supports new peak finding strategy <code class="docutils literal notranslate"><span class="pre">AllPeaksNSigma</span></code>.
Credits to the author of SXD2001 for the idea of using NSigma as a threshold (albeit in SXD2001 the peak finding is done in 3D).
Gutmann, M. J. (2005). SXD2001. ISIS Facility, Rutherford Appleton Laboratory, Oxfordshire, England.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/FindSXPeaks-v1.html#algm-findsxpeaks-v1"><span class="std std-ref">FindSXPeaks</span></a> now includes validation rules to remove spurious peaks due to noise,
by allowing user to provide additional arguments as below:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">MinNBinsPerPeak</span></code>, the Minimum number of bins contributing to a peak in an individual spectrum</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MinNSpectraPerPeak</span></code>, <code class="docutils literal notranslate"><span class="pre">MaxNSpectraPerPeak</span></code> Minimum &amp; Maximum number of spectra contributing to a peak after they are grouped.</p></li>
</ul>
</li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Algorithm <a class="reference internal" href="../../algorithms/LoadNexusProcessed-v2.html#algm-loadnexusprocessed"><span class="std std-ref">LoadNexusProcessed</span></a> is now faster to load a NeXus file.</p></li>
<li><p>Algorithm <code class="docutils literal notranslate"><span class="pre">DSFinterp</span></code>, which was deprecated, has been removed.</p></li>
<li><p><a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins v1</span></a> and <a class="reference internal" href="../../algorithms/Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D v1</span></a> no longer influence each other:</p>
<ul>
<li><p><a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins v1</span></a> algorithm sets the value
<code class="docutils literal notranslate"><span class="pre">abins.parameters.sampling[&quot;bin_width&quot;]</span></code> while running. Previously this
overrided the default sampling of <a class="reference internal" href="../../algorithms/Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D v1</span></a> instruments if set.</p></li>
<li><p>This did not cause results to be incorrect, but sampled
them on a different mesh to the expected one and could limit
resolution.</p></li>
<li><p>Now the value is saved and restored after use by <a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins v1</span></a>; it can
still be modified by users who wish to fiddle with the <a class="reference internal" href="../../algorithms/Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D v1</span></a>
behaviour.</p></li>
</ul>
</li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/Load-v1.html#algm-load"><span class="std std-ref">Load</span></a> now loads a single file faster.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/FindPeaks-v1.html#algm-findpeaks"><span class="std std-ref">FindPeaks</span></a> no longer crashes when the number of bins in the workspace are not sufficient to run <a class="reference internal" href="../../algorithms/SmoothData-v1.html#algm-smoothdata"><span class="std std-ref">SmoothData v1</span></a> algorithm.</p></li>
</ul>
</section>
</section>
<section id="fit-functions">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Fit Functions</a><a class="headerlink" href="#fit-functions" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Search box for fitting functions in Fit interface no longer shows duplicate functions.</p></li>
<li><p>Fit Function <code class="docutils literal notranslate"><span class="pre">DSFinterp1DFit</span></code>, which was deprecated, has been removed.</p></li>
<li><p><a class="reference internal" href="../../fitting/fitfunctions/CompositeFunction.html#func-compositefunction"><span class="std std-ref">CompositeFunction</span></a> will now throw an exception if <code class="docutils literal notranslate"><span class="pre">getNumberDomains()</span></code> is called and there is an inconsistent number of domains in any of the member functions.</p></li>
</ul>
</section>
</section>
<section id="data-handling">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Data Handling</a><a class="headerlink" href="#data-handling" title="Link to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">New features</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Algorithm <a class="reference internal" href="../../algorithms/LoadEventAsWorkspace2D-v1.html#algm-loadeventasworkspace2d"><span class="std std-ref">LoadEventAsWorkspace2D v1</span></a> accepts new boolean parameter <code class="docutils literal notranslate"><span class="pre">LoadNexusInstrumentXML</span></code>. Default is <em>true</em>.</p></li>
<li><p>File search/loading will now look in instrument data cache <strong>on IDAaaS</strong>.
The instrument data cache is the directory <code class="docutils literal notranslate"><span class="pre">/data/instrument/</span></code> present on IDAaaS, and contains the same raw data as the data archive from the past 3 years.
This new feature will speed up file loading times for external users <strong>on IDAaaS</strong> that do not have access to the data archive.
Please note that if you are <strong>not</strong> on IDAaaS, avoid creating the directory <code class="docutils literal notranslate"><span class="pre">/data/instrument/</span></code> as this will trigger a search for files inside that directory.
Here is a demonstration on IDAaaS showing that an instrument file can now be loaded even when the archive is turned off (purely for demonstration purposes):</p></li>
</ul>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/data-cache.gif"><img alt="../../_images/data-cache.gif" src="../../_images/data-cache.gif" style="width: 950px;" />
</a>
</figure>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Algorithm <a class="reference internal" href="../../algorithms/Load-v1.html#algm-load-v1"><span class="std std-ref">Load v1</span></a> now guarantees that properties <code class="docutils literal notranslate"><span class="pre">LoaderName</span></code> and <code class="docutils literal notranslate"><span class="pre">LoaderVersion</span></code> are set by end of algorithm.</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/GenerateGroupingPowder-v2.html#algm-generategroupingpowder"><span class="std std-ref">GenerateGroupingPowder v2</span></a> now allows just one of the properties <code class="docutils literal notranslate"><span class="pre">GroupingWorkspace</span></code> and <code class="docutils literal notranslate"><span class="pre">GroupingFilename</span></code> be set.</p></li>
</ul>
</section>
</section>
<section id="data-objects">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Data Objects</a><a class="headerlink" href="#data-objects" title="Link to this heading">¶</a></h2>
<section id="id4">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">New features</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Sped up processing of IDF XML during loading when <code class="docutils literal notranslate"><span class="pre">side-by-side-view-location</span></code> parameter is not used.</p></li>
</ul>
</section>
</section>
<section id="python">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Python</a><a class="headerlink" href="#python" title="Link to this heading">¶</a></h2>
<section id="id5">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">New features</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../concepts/PeaksWorkspace.html#the-peak-shape"><span class="std std-ref">Peak Shapes</span></a> (NoShape, PeakShapeSpherical, PeakShapeEllipsoid) and <a class="reference internal" href="../../api/python/mantid/api/IPeak.html#mantid.api.IPeak.setPeakShape" title="mantid.api.IPeak.setPeakShape"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mantid.api.IPeak.setPeakShape()</span></code></a> are now exposed to Python allowing you to manually create and set the peak shapes.</p></li>
</ul>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../interfaces/utility/Filter%20Events.html#filter-events-interface"><span class="std std-ref">Filter Events Interface</span></a> is now stricter with inputs and no longer crashes due to invalid value of <cite>TOF Correction To Sample</cite>.</p>
<ul>
<li><p>The two sliders of the interface are now prevented from crossing each other and are automatically updated from the user input, no longer requiring a <cite>Set</cite> button:</p></li>
</ul>
</li>
</ul>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/filter-events-gui.png"><img alt="../../_images/filter-events-gui.png" src="../../_images/filter-events-gui.png" style="width: 600px;" />
</a>
</figure>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">Dependencies</a><a class="headerlink" href="#dependencies" title="Link to this heading">¶</a></h2>
<section id="id7">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">New features</a><a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Dropped support for end-of-life numpy 1.22 and 1.23, and extended support to 1.25 and 1.26.</p></li>
</ul>
</section>
</section>
<section id="mantidworkbench">
<h2><a class="toc-backref" href="#id23" role="doc-backlink">MantidWorkbench</a><a class="headerlink" href="#mantidworkbench" title="Link to this heading">¶</a></h2>
<p>See <a class="reference internal" href="mantidworkbench.html"><span class="doc">Mantid Workbench Changes</span></a>.
<a class="reference internal" href="index.html#v6-10-0"><span class="std std-ref">Release 6.10.0</span></a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul id="footer-nav" class="nav navbar-nav">
      
      
          
            
  <li>
    <a href="direct_geometry.html" title="Previous Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Direct Geomet...</span>
    </a>
  </li>
  <li>
    <a href="indirect_geometry.html" title="Next Chapter: Indirect Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Geom... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>