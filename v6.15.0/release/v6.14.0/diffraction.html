<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Diffraction Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=4468db6d" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=9aca6aaf" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=1afa37e1"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Direct Geometry Changes" href="direct_geometry.html" />
    <link rel="prev" title="Mantid 6.14.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





<nav id="navbar" class="navbar navbar-default navbar-fixed-top">
  <div id="navbar-main" class="container">
    <ul class="nav navbar-nav">
      
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <li>
        <a class="navbar-brand" href="http://www.mantidproject.org">
         </a>
      </li>
      <span class="navbar-text navbar-version pull-left"><b>6.15</b></span>
    </ul>

    
    <div class="collapse navbar-collapse nav-collapse">
    
      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          <li>
            <a href="https://www.mantidproject.org">Home</a>
          </li>
          <li>
            <a href="https://download.mantidproject.org">Download</a>
          </li>
          <li>
            <a href="https://docs.mantidproject.org">Documentation</a>
          </li>
          <li>
            <a href="https://www.mantidproject.org/contact">Contact Us</a>
          </li>
        
        
          
          
        
        
        
        
      </ul>
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          </div>
  </div> <!-- /navbar-main -->
<div id="navbar-breadcrumbs" class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0">
      <a href="../../index.html">Documentation</a>
         &#187;
    </li>
    
    <li class="nav-item nav-item-1">
      <a href="../index.html" >
        Release Notes
      </a>
       &#187;
    </li>
    
    <li class="nav-item nav-item-2">
      <a href="index.html" accesskey="U">
        Mantid 6.14.0 Release Notes
      </a>
       &#187;
    </li>
    
    
    
    
    <li class="nav-item nav-item-this">
      <a href="">Diffraction Changes</a>
    </li>
    
    
  </ul>
</div>
</nav>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#powder-diffraction" id="id3">Powder Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id4">New features</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id5">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#engineering-diffraction" id="id6">Engineering Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id7">New features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#single-crystal-diffraction" id="id8">Single Crystal Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id9">New features</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="powder-diffraction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Link to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/AlignAndFocusPowderSlim-v1.html#algm-alignandfocuspowderslim"><span class="std std-ref">AlignAndFocusPowderSlim</span></a> can skip loading particular logs using the (mutually exclusive) <code class="docutils literal notranslate"><span class="pre">LogAllowList</span></code> and <code class="docutils literal notranslate"><span class="pre">LogBlockList</span></code> properties.</p></li>
<li><p><a class="reference internal" href="../../algorithms/AlignAndFocusPowderSlim-v1.html#algm-alignandfocuspowderslim"><span class="std std-ref">AlignAndFocusPowderSlim</span></a> can now filter out bad pulses during loading by setting the <code class="docutils literal notranslate"><span class="pre">FilterBadPulses</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> (cutoff can be adjusted with <code class="docutils literal notranslate"><span class="pre">BadPulsesLowerCutoff</span></code>).</p></li>
<li><p><a class="reference internal" href="../../algorithms/AlignAndFocusPowderSlim-v1.html#algm-alignandfocuspowderslim"><span class="std std-ref">AlignAndFocusPowderSlim</span></a> now allows different binning to be specified for each output spectra by setting <code class="docutils literal notranslate"><span class="pre">XMin</span></code> or <code class="docutils literal notranslate"><span class="pre">XMax</span></code> to a list of values.</p></li>
<li><p><a class="reference internal" href="../../algorithms/AlignAndFocusPowderSlim-v1.html#algm-alignandfocuspowderslim"><span class="std std-ref">AlignAndFocusPowderSlim</span></a> now allows different input binning units by setting the <code class="docutils literal notranslate"><span class="pre">BinningUnits</span></code> property to one of <code class="docutils literal notranslate"><span class="pre">&quot;dSpacing&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;TOF&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;MomentumTransfer&quot;</span></code>, the default being d-spacing. The output will always be in time-of-flight.</p></li>
<li><p><a class="reference internal" href="../../algorithms/AlignAndFocusPowderSlim-v1.html#algm-alignandfocuspowderslim"><span class="std std-ref">AlignAndFocusPowderSlim</span></a> can do event filtering with a Splitter Workspace when the <code class="docutils literal notranslate"><span class="pre">SplitterWorkspace</span></code> property is set. This can be done only with a single output workspace and when filtering on pulse time.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PDConvertRealSpace-v1.html#algm-pdconvertrealspace"><span class="std std-ref">PDConvertRealSpace</span></a> and <a class="reference internal" href="../../algorithms/PDConvertReciprocalSpace-v1.html#algm-pdconvertreciprocalspace"><span class="std std-ref">PDConvertReciprocalSpace</span></a> will not get added to the algorithm factory if PyStoG is not installed. This package is now an optional dependency of Mantid. For more information on PyStoG, see <a class="reference external" href="https://pystog.readthedocs.io/en/latest/">the PyStogG docs</a>.</p></li>
<li><p>In Polaris reduction, <code class="docutils literal notranslate"><span class="pre">merged_S_of_Q_minus_one</span></code> workspace is output before applying Fourier filter to the PDF. To differntiate this from the resultant workspace after applying the Fourier filter and reverse transformed, the corresponding workspace was renamed from <code class="docutils literal notranslate"><span class="pre">*_merged_Q</span></code> to <code class="docutils literal notranslate"><span class="pre">*_merged_Q_r_FT</span></code>.</p></li>
<li><p>Added parameter <code class="docutils literal notranslate"><span class="pre">wavelength_lims</span></code> to <a class="reference internal" href="../../techniques/ISISPowder-Polaris-v1.html#isis-powder-diffraction-polaris-ref"><span class="std std-ref">Polaris diffraction</span></a> to crop focussed data by wavelength before calculating the pair distribution function (PDF).</p></li>
<li><p>Added parameter <code class="docutils literal notranslate"><span class="pre">r_lims</span></code> to <a class="reference internal" href="../../techniques/ISISPowder-Polaris-v1.html#isis-powder-diffraction-polaris-ref"><span class="std std-ref">Polaris diffraction</span></a> to specify min and max r-value in output PDF.</p></li>
<li><p>Updated default TOF cropping values for focussed banks for <code class="docutils literal notranslate"><span class="pre">mode=&quot;pdf&quot;</span></code> in POLARIS <a class="reference internal" href="../../techniques/ISISPowder-Polaris-v1.html#isis-powder-diffraction-polaris-ref"><span class="std std-ref">Polaris diffraction</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a> has been updated to more correctly apply absorption corrections.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Updated zero-padding for GEM and ALF (ISIS instruments) so that users can load runs from ALF00090565 and GEM00097479 onwards.</p></li>
<li><p>A bug in <a class="reference internal" href="../../algorithms/DiffractionFocussing-v2.html#algm-diffractionfocussing"><span class="std std-ref">DiffractionFocussing</span></a> where <code class="docutils literal notranslate"><span class="pre">NaN</span></code> data values were introduced when explicit binning domains were requested that exceeded the actual input-data domains has been fixed.  This bug only occurred when <code class="docutils literal notranslate"><span class="pre">PreserveEvents=False</span></code>.</p></li>
<li><p>Fixed a potential crash when running <a class="reference internal" href="../../algorithms/DiffractionFocussing-v2.html#algm-diffractionfocussing"><span class="std std-ref">DiffractionFocussing</span></a> from the algorithm dialogue and setting <code class="docutils literal notranslate"><span class="pre">InputWorkspace</span></code> to a workspace group.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">InputWorkspace</span></code> property of <a class="reference internal" href="../../algorithms/DiffractionFocussing-v2.html#algm-diffractionfocussing"><span class="std std-ref">DiffractionFocussing</span></a> can no longer take workspaces in TOF (deprecated 29/04/21).</p></li>
</ul>
</section>
</section>
<section id="engineering-diffraction">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">New features</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add module of classes in <code class="docutils literal notranslate"><span class="pre">Engineering.pawley_utils</span></code> to perform Pawley refinements for focussed spectra and 2D Pawley refinements for POLDI (frame overlap diffractometer).</p></li>
<li><p>Support batch refinement for multiple focussed (.gss) files using a single instrument group (.prm) file in the <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-gsas"><span class="std std-ref">GSASII tab</span></a> of the <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#engineering-diffraction-ref"><span class="std std-ref">Engineering Diffraction interface</span></a> GUI.  Note the .prm file should have the same number of groups as the number of spectra in an individual .gss file.</p></li>
<li><p>Removed support for specifying multiple focussed .gss files (e.g. one for each bank in ENGINX) for a single instrument group (.prm) file in <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-gsas"><span class="std std-ref">GSASII tab</span></a> of the <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#engineering-diffraction-ref"><span class="std std-ref">Engineering Diffraction interface</span></a> GUI.</p></li>
<li><p><a class="reference internal" href="../../concepts/TextureAnalysis.html#textureanalysis"><span class="std std-ref">Texture Analysis</span></a> can now be performed using the logic included in <code class="docutils literal notranslate"><span class="pre">Engineering.texture.TextureUtils</span></code> and a collection of scripts that can be found in <code class="docutils literal notranslate"><span class="pre">diffraction/ENGINX/Texture</span></code> within the <a class="reference internal" href="../../workbench/scriptrepository.html#workbenchscriptrepository"><span class="std std-ref">mantid script repository</span></a>.</p>
<a class="screenshot reference internal image-reference" href="../../_images/texture-pole-figure-displays.png"><img alt="../../_images/texture-pole-figure-displays.png" class="screenshot" src="../../_images/texture-pole-figure-displays.png" style="width: 500px;" />
</a>
</li>
<li><p>Focusing using the <code class="docutils literal notranslate"><span class="pre">focus_run</span></code> method in <code class="docutils literal notranslate"><span class="pre">Engineering.EnggUtils</span></code> will now save a combined workspace with all detector groups’ spectra, rather than saving each spectra in a separate workspace.</p></li>
<li><p>Performance improvements have been made to <a class="reference internal" href="../../algorithms/PoldiAutoCorrelation-v6.html#algm-poldiautocorrelation-v6"><span class="std std-ref">PoldiAutoCorrelation v6</span></a> and a function to simulate POLDI 2D workspace.</p></li>
<li><p>New property <code class="docutils literal notranslate"><span class="pre">InterpolationMethod</span></code> added to <a class="reference internal" href="../../algorithms/PoldiAutoCorrelation-v6.html#algm-poldiautocorrelation-v6"><span class="std std-ref">PoldiAutoCorrelation v6</span></a>. The default value <code class="docutils literal notranslate"><span class="pre">&quot;Linear&quot;</span></code> preserves existing behaviour (linear interpolation), and <code class="docutils literal notranslate"><span class="pre">&quot;Nearest&quot;</span></code> can be used for faster execution.</p></li>
</ul>
</section>
</section>
<section id="single-crystal-diffraction">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Link to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">New features</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadWANDSCD-v1.html#algm-loadwandscd"><span class="std std-ref">LoadWANDSCD</span></a> will now load the sample environment logs.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/FindUBFromScatteringPlane-v1.html#algm-findubfromscatteringplane"><span class="std std-ref">FindUBFromScatteringPlane</span></a> to find UB Matrix given lattice parameters, scattering plane and 1 peak for a sample.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">UpdateUB</span></code> option to <a class="reference internal" href="../../algorithms/IndexPeaks-v1.html#algm-indexpeaks"><span class="std std-ref">IndexPeaks v1</span></a> that saves the optimized UB matrix in the case where there is a single run and <code class="docutils literal notranslate"><span class="pre">CommonUBForAll=False</span></code>.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v6-14-0"><span class="std std-ref">Release 6.14.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul id="footer-nav" class="nav navbar-nav">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 6.14.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 6.14.0...</span>
    </a>
  </li>
  <li>
    <a href="direct_geometry.html" title="Next Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Direct Geomet... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>