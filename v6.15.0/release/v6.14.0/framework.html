<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Framework Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=4468db6d" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=9aca6aaf" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=1afa37e1"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Geometry Changes" href="indirect_geometry.html" />
    <link rel="prev" title="Direct Geometry Changes" href="direct_geometry.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





<nav id="navbar" class="navbar navbar-default navbar-fixed-top">
  <div id="navbar-main" class="container">
    <ul class="nav navbar-nav">
      
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <li>
        <a class="navbar-brand" href="http://www.mantidproject.org">
         </a>
      </li>
      <span class="navbar-text navbar-version pull-left"><b>6.15</b></span>
    </ul>

    
    <div class="collapse navbar-collapse nav-collapse">
    
      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          <li>
            <a href="https://www.mantidproject.org">Home</a>
          </li>
          <li>
            <a href="https://download.mantidproject.org">Download</a>
          </li>
          <li>
            <a href="https://docs.mantidproject.org">Documentation</a>
          </li>
          <li>
            <a href="https://www.mantidproject.org/contact">Contact Us</a>
          </li>
        
        
          
          
        
        
        
        
      </ul>
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          </div>
  </div> <!-- /navbar-main -->
<div id="navbar-breadcrumbs" class="related" role="navigation" aria-label="related navigation">
  <h3>Navigation</h3>
  <ul>
    <li class="nav-item nav-item-0">
      <a href="../../index.html">Documentation</a>
         &#187;
    </li>
    
    <li class="nav-item nav-item-1">
      <a href="../index.html" >
        Release Notes
      </a>
       &#187;
    </li>
    
    <li class="nav-item nav-item-2">
      <a href="index.html" accesskey="U">
        Mantid 6.14.0 Release Notes
      </a>
       &#187;
    </li>
    
    
    
    
    <li class="nav-item nav-item-this">
      <a href="">Framework Changes</a>
    </li>
    
    
  </ul>
</div>
</nav>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#algorithms" id="id6">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id7">New features</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id8">Bugfixes</a></p></li>
<li><p><a class="reference internal" href="#deprecated" id="id9">Deprecated</a></p></li>
<li><p><a class="reference internal" href="#removed" id="id10">Removed</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fit-functions" id="id11">Fit Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id12">New features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-objects" id="id13">Data Objects</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id14">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id15">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id16">New features</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id17">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dependencies" id="id18">Dependencies</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id19">New features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mantidworkbench" id="id20">MantidWorkbench</a></p></li>
</ul>
</nav>
<section id="algorithms">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Link to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/PlotPeakByLogValue-v1.html#algm-plotpeakbylogvalue"><span class="std std-ref">PlotPeakByLogValue</span></a> has the new option <code class="docutils literal notranslate"><span class="pre">AppendIdxToOutputName</span></code> that, when enabled with the <code class="docutils literal notranslate"><span class="pre">CreateOutput</span></code> option, will append indices of output workspace names (spectrum, workspace or numeric) based on the input format.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PlotPeakByLogValue-v1.html#algm-plotpeakbylogvalue"><span class="std std-ref">PlotPeakByLogValue</span></a> has the new option <code class="docutils literal notranslate"><span class="pre">Output2D</span></code> that, when enabled with the <code class="docutils literal notranslate"><span class="pre">CreateOutput</span></code> option, will create a 2D workspace of the results table that could be plotted.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/EstimateScatteringVolumeCentreOfMass-v1.html#algm-estimatescatteringvolumecentreofmass"><span class="std std-ref">EstimateScatteringVolumeCentreOfMass v1</span></a>, estimates the centre of mass of the intersection between an illumination volume and a sample shape.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jemalloc</span></code> has been added to the conda activation/deactivation scripts to enable use when running using the python interface (and not Workbench). Previously it was only applied in the Workbench startup script. This should improve the performance of many algorithms.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">UpdateUB</span></code> option to <a class="reference internal" href="../../algorithms/IndexPeaks-v1.html#algm-indexpeaks"><span class="std std-ref">IndexPeaks v1</span></a> that saves the optimized UB matrix in the case where there is a single run and <code class="docutils literal notranslate"><span class="pre">CommonUBForAll=False</span></code>.</p></li>
<li><p>Added new algorithm, <a class="reference internal" href="../../algorithms/TimeDifference-v1.html#algm-timedifference-v1"><span class="std std-ref">TimeDifference v1</span></a>, for calculating the time difference between a series of runs and a reference run.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a performance regression in <a class="reference internal" href="../../algorithms/SaveMD-v2.html#algm-savemd"><span class="std std-ref">SaveMD</span></a> that was leading to dramatically increased save times.</p></li>
</ul>
</section>
<section id="deprecated">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Deprecated</a><a class="headerlink" href="#deprecated" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadPreNexusLive-v1.html#algm-loadprenexuslive"><span class="std std-ref">LoadPreNexusLive</span></a> has been deprecated. There is no replacement.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SCDCalibratePanels-v1.html#algm-scdcalibratepanels-v1"><span class="std std-ref">SCDCalibratePanels v1</span></a> has been deprecated, use <a class="reference internal" href="../../algorithms/SCDCalibratePanels-v2.html#algm-scdcalibratepanels-v2"><span class="std std-ref">SCDCalibratePanels v2</span></a> instead.</p></li>
<li><p>Removed the experimental multiprocess loader from <a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus v1</span></a> and deprecated the <code class="docutils literal notranslate"><span class="pre">LoadType</span></code> property.</p></li>
</ul>
</section>
<section id="removed">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Removed</a><a class="headerlink" href="#removed" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The algorithm <code class="docutils literal notranslate"><span class="pre">ConvertUnitsUsingDetectorTable</span></code>, deprecated in <a class="reference internal" href="../v3.9.0/index.html#v3-9-0"><span class="std std-ref">Release 3.9.0</span></a>, has now been removed.</p></li>
</ul>
</section>
</section>
<section id="fit-functions">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Fit Functions</a><a class="headerlink" href="#fit-functions" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">New features</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Performance optimisations have been made to the process of adding ties to a fit function.</p></li>
</ul>
</section>
</section>
<section id="data-objects">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Data Objects</a><a class="headerlink" href="#data-objects" title="Link to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>When loading monitors with period data using <a class="reference internal" href="../../algorithms/LoadNexusMonitors-v2.html#algm-loadnexusmonitors-v2"><span class="std std-ref">LoadNexusMonitors v2</span></a>, period sample logs are now added to the resultant workspace; this is in line with the creation of Event Workspaces. This fixes a bug that occurred when <a class="reference internal" href="../../algorithms/NormaliseByCurrent-v1.html#algm-normalisebycurrent"><span class="std std-ref">NormaliseByCurrent v1</span></a> was used on the monitor workspace.</p></li>
<li><p>Inconsistencies sometimes occur in period-related logs within Event NeXus files, such as duplicated entries with the same timestamps. Therefore, these repeated entries are reduced to a single entry. This can lead to runtime errors when loading the file which, in the past, have lead to crashes. In order to prevent this, the event workspace is now created without the period logs if issues are detected.</p></li>
</ul>
</section>
</section>
<section id="python">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Python</a><a class="headerlink" href="#python" title="Link to this heading">¶</a></h2>
<section id="id3">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">New features</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The large offline documentation is now an optional install, reducing installer/download size significantly. For users that prefer online docs, this saves considerable disk space (potentially hundreds of MB). Those who prefer local/offline usage can still opt to install the documentation package and continue working without internet access. A clear indicator has been added to the Help Window’s toolbar to show whether Mantid is displaying <code class="docutils literal notranslate"><span class="pre">Local</span> <span class="pre">Docs</span></code> or <code class="docutils literal notranslate"><span class="pre">Online</span> <span class="pre">Docs</span></code>.</p></li>
<li><p>Introduced a prototype “side-by-side” help system that includes both the legacy QtHelp-based viewer and a new Python-based Help Window using an embedded web browser (QWebEngine) to display documentation within Mantid Workbench.</p></li>
<li><p>macOS users with Apple Silicon (Arm-based architecture) are now warned if they have installed the Intel-based Mantid package.</p></li>
<li><p>Created <a class="reference internal" href="../../api/python/mantid/kernel/PythonObjectProperty.html#pythonobjectproperty"><span class="std std-ref">PythonObjectProperty</span></a>, which allows using generic python objects as inputs to algorithms defined through the python API.</p></li>
<li><p>Created <a class="reference internal" href="../../api/python/mantid/kernel/PythonObjectTypeValidator.html#pythonobjecttypevalidator"><span class="std std-ref">PythonObjectTypeValidator</span></a> for use with <a class="reference internal" href="../../api/python/mantid/kernel/PythonObjectProperty.html#pythonobjectproperty"><span class="std std-ref">PythonObjectProperty</span></a>, to enforce correct typing on python objects.</p></li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Previously, Mantid could crash if the material set on a sample already existed, rather than being created from scratch. Improvements have now been made in an attempt to rectify the issues.</p></li>
</ul>
</section>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Dependencies</a><a class="headerlink" href="#dependencies" title="Link to this heading">¶</a></h2>
<section id="id5">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">New features</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<ul>
<li><p>This release has removed all reliance on the <a class="reference external" href="https://github.com/nexusformat/code">NeXus API</a> .  Instead the <code class="docutils literal notranslate"><span class="pre">File</span></code> class was rewritten to use direct calls to the <a class="reference external" href="https://github.com/HDFGroup/hdf5/tree/4f1c3b6a4c7f2af6b617aede8dfb0ff1a6c58850">HDF5 API</a>. In some places the C++ API (<code class="docutils literal notranslate"><span class="pre">H5Cpp</span></code>) is used for compatibility with other Mantid packages that also use the C++ API, but otherwise the low-level C API (<code class="docutils literal notranslate"><span class="pre">hdf5</span></code>) is used.  This decision was made because:</p>
<ol class="arabic simple">
<li><p>The C++ API is unsupported by the HDF Group (in private correspondence they suggested we use a 3rd party API).</p></li>
<li><p>The C++ API is not properly documented.</p></li>
<li><p>The C++ API does not have access to every possible feature or option that might be needed.</p></li>
<li><p>The C API is fully documented.</p></li>
<li><p>The C API is regularly maintained.</p></li>
<li><p>The C API is the “base” API for HDF5, and so automatically supports all available features natively.</p></li>
</ol>
<p>Throughout this release cycle, we have been methodically replacing and modernizing the <code class="docutils literal notranslate"><span class="pre">Nexus</span></code> abstraction layer, one piece of functionality at a time.  This has included modern objects such as vectors and strings in place of arrays and C-strings, fixing many instances that apparently led to memory leaks due to unclosed objects, and simplifying the logic inside many of the methods for saving or loading data.</p>
<p>This should not impact the observed behavior, except that memory should be more cleanly freed in Workbench, and loading or saving operations might run slightly faster.</p>
<p>Loading of HDF4 files is still handled by the read-only <code class="docutils literal notranslate"><span class="pre">LegacyNexus</span></code> layer.</p>
<p>Those interested in the details of the changes can see them in the (developer centric)
<a class="reference external" href="https://github.com/mantidproject/mantid/issues/38332">github issue</a> or by following the <a class="reference external" href="https://github.com/mantidproject/mantid/pulls?q=is%3Apr+is%3Aclosed+label%3ANexus">Nexus tag</a>.</p>
</li>
<li><p>Pin build 2 of <code class="docutils literal notranslate"><span class="pre">seekpath</span></code> v2.1.0 which removes an erroneous dependency on the <code class="docutils literal notranslate"><span class="pre">future</span></code> package. <code class="docutils literal notranslate"><span class="pre">seekpath</span></code> is a dependency of <code class="docutils literal notranslate"><span class="pre">euphonic</span></code>. <code class="docutils literal notranslate"><span class="pre">future</span></code> is not used and has a known vulnerability <a class="reference external" href="https://github.com/advisories/GHSA-xqrq-4mgf-ff32">CVE-2025-50817</a> .</p></li>
<li><p>Updated header and source files for ADARA packets from v1.5.1 to v1.10.3</p></li>
</ul>
</section>
</section>
<section id="mantidworkbench">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">MantidWorkbench</a><a class="headerlink" href="#mantidworkbench" title="Link to this heading">¶</a></h2>
<p>See <a class="reference internal" href="mantidworkbench.html"><span class="doc">Mantid Workbench Changes</span></a>.</p>
<p><a class="reference internal" href="index.html#v6-14-0"><span class="std std-ref">Release 6.14.0</span></a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul id="footer-nav" class="nav navbar-nav">
      
      
          
            
  <li>
    <a href="direct_geometry.html" title="Previous Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Direct Geomet...</span>
    </a>
  </li>
  <li>
    <a href="indirect_geometry.html" title="Next Chapter: Indirect Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Geom... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>