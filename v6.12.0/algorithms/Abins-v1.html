<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Abins v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=94a1c62f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Abins2D v1" href="Abins2D-v1.html" />
    <link rel="prev" title="Algorithms" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Abins v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="abins-v1">
<span id="algm-abins"></span><span id="algm-abins-v1"></span><h1>Abins v1<a class="headerlink" href="#abins-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#credits" id="id3">Credits</a></p></li>
<li><p><a class="reference internal" href="#summary" id="id4">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id5">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id6">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id7">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
<li><p><a class="reference internal" href="#references" id="id10">References</a></p></li>
</ul>
</nav>
<section id="credits">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Credits</a><a class="headerlink" href="#credits" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Author:</dt><dd><p>Adam Jackson, Krzysztof Dymkowski</p>
</dd>
<dt>Contributors:</dt><dd><p>Sanghamitra Mukhopadhyay, Elliot Oram, Leonardo Bernasconi, Leandro Liborio</p>
</dd>
</dl>
</section>
<section id="summary">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Calculates inelastic neutron scattering against 1-D ω axis.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="Abins2D-v1.html#algm-abins2d"><span class="std std-ref">Abins2D</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VibrationalOrPhononFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>File with the data from a vibrational or phonon calculation. Allowed values: [‘phonon’, ‘out’, ‘outmol’, ‘log’, ‘xml’, ‘yaml’, ‘castep_bin’, ‘hdf5’, ‘json’]</p></td>
</tr>
<tr class="row-odd"><td><p>AbInitioProgram</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>CASTEP</p></td>
<td><p>An ab initio program which was used for vibrational or phonon calculation. Allowed values: [‘CASTEP’, ‘CRYSTAL’, ‘DMOL3’, ‘FORCECONSTANTS’, ‘GAUSSIAN’, ‘JSON’, ‘VASP’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name to give the output workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>TemperatureInKelvin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>10</p></td>
<td><p>Temperature in K for which dynamical structure factor S should be calculated.</p></td>
</tr>
<tr class="row-even"><td><p>Atoms</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>List of atoms to use to calculate partial S.If left blank, workspaces with S for all types of atoms will be calculated. Element symbols will be interpreted as a sum of all atoms of that element in the cell. ‘atomN’ or ‘atom_N’ (where N is a positive integer) will be interpreted as individual atoms, indexing from 1 following the order of the input data.</p></td>
</tr>
<tr class="row-odd"><td><p>SumContributions</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Sum the partial dynamical structure factors into a single workspace.</p></td>
</tr>
<tr class="row-even"><td><p>SaveAscii</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Write workspaces to .ascii files after computing them.</p></td>
</tr>
<tr class="row-odd"><td><p>ScaleByCrossSection</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Incoherent</p></td>
<td><p>Scale the partial dynamical structure factors by the scattering cross section. Allowed values: [‘Total’, ‘Incoherent’, ‘Coherent’]</p></td>
</tr>
<tr class="row-even"><td><p>QuantumOrderEventsNumber</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>1</p></td>
<td><p>Number of quantum order effects included in the calculation (1 -&gt; FUNDAMENTALS, 2-&gt; first overtone + FUNDAMENTALS + 2nd order combinations. Allowed values: [‘1’, ‘2’]</p></td>
</tr>
<tr class="row-odd"><td><p>Autoconvolution</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Estimate higher quantum orders by convolution with fundamental spectrum.</p></td>
</tr>
<tr class="row-even"><td><p>EnergyUnits</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>cm-1</p></td>
<td><p>Energy units for output workspace and experimental file. Allowed values: [‘cm-1’, ‘meV’]</p></td>
</tr>
<tr class="row-odd"><td><p>BinWidthInWavenumber</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Width of bins used during rebinning.</p></td>
</tr>
<tr class="row-even"><td><p>SampleForm</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Powder</p></td>
<td><p>Form of the sample: Powder. Allowed values: [‘Powder’]</p></td>
</tr>
<tr class="row-odd"><td><p>ExperimentalFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File with the experimental inelastic spectrum to compare. Allowed values: [‘raw’, ‘dat’]</p></td>
</tr>
<tr class="row-even"><td><p>Scale</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Scale the intensity by the given factor. Default is no scaling.</p></td>
</tr>
<tr class="row-odd"><td><p>Instrument</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>TOSCA</p></td>
<td><p>Name of an instrument for which analysis should be performed. Allowed values: [‘TOSCA’, ‘Lagrange’]</p></td>
</tr>
<tr class="row-even"><td><p>Setting</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Setting choice for this instrument (e.g. monochromator). Allowed values: [‘’, ‘All detectors (TOSCA)’, ‘Backward (TOSCA)’, ‘Cu(220) (Lagrange)’, ‘Cu(331) (Lagrange)’, ‘Forward (TOSCA)’, ‘Si(111) (Lagrange)’, ‘Si(311) (Lagrange)’]</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>Abins is a plugin for Mantid which allows scientists to compare experimental and theoretical inelastic neutron
scattering spectra (INS).</p>
<p>Abins requires data from existing lattice dynamics calculations to determine the phonon mode frequencies and displacements. These are used to compute INS intensities; higher-order phonons may be approximated as combinations of fundamental modes.
Several file formats are supported for frequency and displacement data at given <span class="math notranslate nohighlight">\(\mathbf{q}\)</span>-points. Alternatively, force-constants data can be provided and a fine <span class="math notranslate nohighlight">\(\mathbf{q}\)</span>-point mesh will be sampled automatically.
Supported codes include CASTEP (.phonon), CRYSTAL (.out), DMOL3 (.outmol), GAUSSIAN (.log), PHONOPY (.yaml), VASP (.xml) as well as some pre-processed JSON (.json) formats. For more information about the files, features and quirks of these codes see <a class="reference internal" href="../concepts/AbinsDataFormats.html#abinsdataformats"><span class="std std-ref">Abins Data Formats</span></a>.</p>
<p>The user may also provide an experimental file with measured dynamical structure factor S in order to directly
compare theoretical and experimental spectra.
Abins produces one dimensional INS spectrum that can be compared against TOSCA, IN1-LAGRANGE and similar instruments;
a semi-empirical powder averaging model accounts for q- and energy-dependent intensity behaviour in this system.
The user-input temperature value is included in a Debye-Waller term, recreating the intensity fall-off with increasing
wavelength.
More information about the implemented working equations can be found <a class="reference internal" href="../concepts/DynamicalStructureFactorFromAbInitio.html#dynamicalstructurefactorfromabinitio"><span class="std std-ref">here</span></a>.</p>
<p>After successful analysis a user obtains a Mantid Workspace Group which stores theoretical spectra (and,
optionally, experimental data).
Currently a user can produce theoretical spectra for given atoms (e.g. ‘atom_1’, the first atom listed in the input
data) or types of atom (for example for benzene two element symbols: C, H) and for each quantum event (up to tenth
order).
Total theoretical spectra can also be generated, summing over all considered quantum events for that atom or element.
The user can also produce a total spectrum for the whole considered system.
The dynamical structure factor S is calculated for all atoms in the system and results are cached, so if no settings
have been changed then subsequent runs of Abins can quickly create more Mantid Workspaces without re-calculating any
spectra.</p>
<p>Abins is in constant development and suggestions for improvements are very welcome. For any such contributions please
contact Dr. Sanghamitra Mukhopadhyay.
If you are developing or modifying Abins, see the <a class="reference internal" href="../concepts/AbinsImplementation.html#abinsimplementation"><span class="std std-ref">Abins: Implementation details</span></a> notes which outline some of the key conventions, practices and pitfalls.</p>
<p>If Abins is used as part of your data analysis routines, please cite the relevant reference <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p><strong>Example - loading CASTEP phonon data:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">benzene_wrk</span> <span class="o">=</span> <span class="n">Abins</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">,</span>
                    <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">benzene_wrk</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>benzene_wrk_C_total
benzene_wrk_C
benzene_wrk_H_total
benzene_wrk_H
</pre></div>
</div>
<p><strong>Example - loading CRYSTAL phonon data:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wrk</span><span class="o">=</span><span class="n">Abins</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CRYSTAL&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;b3lyp.out&quot;</span><span class="p">,</span> <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">wrk</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>wrk_C_total
wrk_C
wrk_H_total
wrk_H
wrk_N_total
wrk_N
wrk_Na_total
wrk_Na
wrk_O_total
wrk_O
</pre></div>
</div>
<p><strong>Example - calling AbINS with more arguments:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wrk_verbose</span><span class="o">=</span><span class="n">Abins</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">,</span>
                  <span class="n">ExperimentalFile</span><span class="o">=</span><span class="s2">&quot;benzene_experimental.dat&quot;</span><span class="p">,</span>
                  <span class="n">TemperatureInKelvin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">BinWidthInWavenumber</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">SampleForm</span><span class="o">=</span><span class="s2">&quot;Powder&quot;</span><span class="p">,</span> <span class="n">Instrument</span><span class="o">=</span><span class="s2">&quot;TOSCA&quot;</span><span class="p">,</span>
                  <span class="n">Atoms</span><span class="o">=</span><span class="s2">&quot;H, atom1, atom2&quot;</span><span class="p">,</span> <span class="n">SumContributions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">ScaleByCrossSection</span><span class="o">=</span><span class="s2">&quot;Incoherent&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">wrk_verbose</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>experimental_wrk
wrk_verbose_total
wrk_verbose_H_total
wrk_verbose_H
wrk_verbose_atom_1_total
wrk_verbose_atom_1
wrk_verbose_atom_2_total
wrk_verbose_atom_2
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Simulation.html">Simulation</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a8f64cccc781eac9892433e956bab7104ebf1213/Framework/PythonInterface/plugins/algorithms/Abins.py">Abins.py</a></p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<ol class="upperalpha simple" start="11">
<li><p>Dymkowski, S. F. Parker, F. Fernandez-Alonso and S. Mukhopadhyay,  “AbINS: The modern software for INS interpretation” , Physica B, doi:10.1016/j.physb.2018.02.034 (2018).</p></li>
</ol>
</aside>
</aside>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Algorithms"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Algorithms</span>
    </a>
  </li>
  <li>
    <a href="Abins2D-v1.html" title="Next Chapter: Abins2D v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Abins2D v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>