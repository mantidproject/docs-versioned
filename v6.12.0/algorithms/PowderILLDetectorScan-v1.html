<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PowderILLDetectorScan v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=94a1c62f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PowderILLEfficiency v1" href="PowderILLEfficiency-v1.html" />
    <link rel="prev" title="PolynomialCorrection v1" href="PolynomialCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">PowderILLDetectorScan v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="powderilldetectorscan-v1">
<span id="algm-powderilldetectorscan"></span><span id="algm-powderilldetectorscan-v1"></span><h1>PowderILLDetectorScan v1<a class="headerlink" href="#powderilldetectorscan-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#input-runs" id="id6">Input Runs</a></p></li>
<li><p><a class="reference internal" href="#calibration" id="id7">Calibration</a></p></li>
<li><p><a class="reference internal" href="#normalisation-options" id="id8">Normalisation Options</a></p></li>
<li><p><a class="reference internal" href="#output" id="id9">Output</a></p></li>
<li><p><a class="reference internal" href="#workflow" id="id10">Workflow</a></p></li>
<li><p><a class="reference internal" href="#related-algorithms" id="id11">Related Algorithms</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id12">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id13">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Performs powder diffraction data reduction for D2B and D20 (when doing a detector scan).</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="PowderILLParameterScan-v1.html#algm-powderillparameterscan"><span class="std std-ref">PowderILLParameterScan</span></a>, <a class="reference internal" href="PowderILLEfficiency-v1.html#algm-powderillefficiency"><span class="std std-ref">PowderILLEfficiency</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Run</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>File path of run(s). Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>NormaliseTo</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Monitor</p></td>
<td><p>Normalise to monitor, or skip normalisation. Allowed values: [‘None’, ‘Monitor’]</p></td>
</tr>
<tr class="row-even"><td><p>CalibrationFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing the detector efficiencies. Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>Output2DTubes</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Output a 2D workspace of height along tube against tube scattering angle.</p></td>
</tr>
<tr class="row-even"><td><p>Output2D</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Output a 2D workspace of height along tube against the real scattering angle.</p></td>
</tr>
<tr class="row-odd"><td><p>Output1D</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Output a 1D workspace with counts against scattering angle.</p></td>
</tr>
<tr class="row-even"><td><p>CropNegativeScatteringAngles</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether or not to crop the negative scattering angles.</p></td>
</tr>
<tr class="row-odd"><td><p>HeightRange</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>A list (even length) of comma separated values, to give the minimum and maximum heights of the different ranges (in m). If not specified only the full height range will be used.</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>WorkspaceGroup</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output workspace containing the reduced data.</p></td>
</tr>
<tr class="row-odd"><td><p>ComponentsToMask</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Comma separated list of component names to mask, for instance: tube_1, tube_2</p></td>
</tr>
<tr class="row-even"><td><p>ComponentsToReduce</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Comma separated list of component names to output the reduced data for; for example tube_1</p></td>
</tr>
<tr class="row-odd"><td><p>AlignTubes</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Align the tubes vertically and horizontally according to IPF.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>This algorithm performs the data reduction for the D2B instrument at the ILL, and also for D20 when doing a detector
scan.</p>
</section>
<section id="input-runs">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Input Runs</a><a class="headerlink" href="#input-runs" title="Link to this heading">¶</a></h2>
<p>Provide the list of the input runs, that is the runs corresponding to a single detector scan, following the syntax in
<a class="reference internal" href="../api/python/mantid/api/MultipleFileProperty.html#mantid.api.MultipleFileProperty" title="mantid.api.MultipleFileProperty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MultipleFileProperty</span></code></a>. Note that for this algorithm <code class="docutils literal notranslate"><span class="pre">508093:508095</span></code>
and <code class="docutils literal notranslate"><span class="pre">508093-508095</span></code> would be equivalent; in either case it will load and process the runs separately and then finally merge them with <a class="reference internal" href="SumOverlappingTubes-v1.html#algm-sumoverlappingtubes"><span class="std std-ref">SumOverlappingTubes</span></a>.</p>
</section>
<section id="calibration">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Calibration</a><a class="headerlink" href="#calibration" title="Link to this heading">¶</a></h2>
<p>The NeXus files for D2B contain raw data and pre-calibrated data. Either of these can be used when loading.
Note that, when reading the calibrated data, the even-numbered tubes will not be flipped, since they are flipped in the nexus files already.</p>
</section>
<section id="normalisation-options">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Normalisation Options</a><a class="headerlink" href="#normalisation-options" title="Link to this heading">¶</a></h2>
<p>The default is for normalisation to monitor, in which case the counts will be scaled up by 10ˆ6 after dividing by monitor counts.</p>
</section>
<section id="output">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Output</a><a class="headerlink" href="#output" title="Link to this heading">¶</a></h2>
<p>The output from the algorithm is a <a class="reference internal" href="../api/python/mantid/api/WorkspaceGroup.html#mantid.api.WorkspaceGroup" title="mantid.api.WorkspaceGroup"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WorkspaceGroup</span></code></a>, containing the requested
outputs:</p>
<ul class="simple">
<li><p><strong>Output2DTubes</strong> - Outputs a 2D workspace of tube height against scattering angle. In other words with no correction
for Debye-Scherrer cones. It is expected that this is only used for checking alignment.</p></li>
<li><p><strong>Output2D</strong> - Outputs a 2D workspace of height along tube against scattering angle for pixel in tube. Here
there is effectively a correction for the Debye-Scherrer cones.</p></li>
<li><p><strong>Output1D</strong> - Outputs a 1D workspace of counts against scattering angle. The vertical integration range for this
is set in the <code class="docutils literal notranslate"><span class="pre">HeightRange</span></code> option.</p></li>
</ul>
<p>Note for D20 only the <code class="docutils literal notranslate"><span class="pre">Output1D</span></code> option will be relevant.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">Output2DTubes</span></code> only the negative scattering angles are included, they are excluded for <code class="docutils literal notranslate"><span class="pre">Output2D</span></code> and
<code class="docutils literal notranslate"><span class="pre">Output1D</span></code>.</p>
<p>Use <a class="reference internal" href="SaveFocusedXYE-v1.html#algm-savefocusedxye"><span class="std std-ref">SaveFocusedXYE</span></a> to save in FullProf format #10, or <a class="reference internal" href="SaveGSS-v1.html#algm-savegss"><span class="std std-ref">SaveGSS</span></a> for
GSAS format.</p>
</section>
<section id="workflow">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Link to this heading">¶</a></h2>
<figure class="align-default" id="id1">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="related-algorithms">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Related Algorithms</a><a class="headerlink" href="#related-algorithms" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="PowderILLParameterScan-v1.html#algm-powderillparameterscan"><span class="std std-ref">PowderILLParameterScan</span></a> can be used for D20 where the detector is static, and
another variable such as temperature is scanned instead.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example - PowderILLDetectorScan</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">red_ws</span> <span class="o">=</span> <span class="n">PowderILLDetectorScan</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;508093:508095&#39;</span><span class="p">,</span> <span class="n">Output2DTubes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">Output2D</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">Output1D</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;2DTubes&#39; output workspace has </span><span class="si">{0}</span><span class="s2"> diffractograms having </span><span class="si">{1}</span><span class="s2"> bins each&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">red_ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span> <span class="n">red_ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;2D&#39; output workspace has </span><span class="si">{0}</span><span class="s2"> diffractograms having </span><span class="si">{1}</span><span class="s2"> bins each&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">red_ws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span> <span class="n">red_ws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;1D&#39; output workspace has </span><span class="si">{0}</span><span class="s2"> diffractograms having </span><span class="si">{1}</span><span class="s2"> bins each&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">red_ws</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span> <span class="n">red_ws</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;2DTubes&#39; output workspace has 128 diffractograms having 3024 bins each
&#39;2D&#39; output workspace has 128 diffractograms having 3024 bins each
&#39;1D&#39; output workspace has 1 diffractograms having 3024 bins each
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/ILL/Diffraction.html">ILL\Diffraction</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a8f64cccc781eac9892433e956bab7104ebf1213/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/PowderILLDetectorScan.py">PowderILLDetectorScan.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PolynomialCorrection-v1.html" title="Previous Chapter: PolynomialCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PolynomialCor...</span>
    </a>
  </li>
  <li>
    <a href="PowderILLEfficiency-v1.html" title="Next Chapter: PowderILLEfficiency v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PowderILLEffi... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>