<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CuboidGaugeVolumeAbsorption v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=94a1c62f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CutMD v1" href="CutMD-v1.html" />
    <link rel="prev" title="CrystalFieldEnergies v1" href="CrystalFieldEnergies-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">CuboidGaugeVolumeAbsorption v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="cuboidgaugevolumeabsorption-v1">
<span id="algm-cuboidgaugevolumeabsorption"></span><span id="algm-cuboidgaugevolumeabsorption-v1"></span><h1>CuboidGaugeVolumeAbsorption v1<a class="headerlink" href="#cuboidgaugevolumeabsorption-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#restrictions-on-the-input-workspace" id="id5">Restrictions on the input workspace</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Calculates bin-by-bin correction factors for attenuation due to absorption and (single) scattering within a cuboid shaped ‘gauge volume’ of a generic sample. The sample shape can be defined by, e.g., the CreateSampleShape algorithm.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="AbsorptionCorrection-v1.html#algm-absorptioncorrection"><span class="std std-ref">AbsorptionCorrection</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The X values for the input workspace must be in units of wavelength</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output workspace name</p></td>
</tr>
<tr class="row-even"><td><p>ScatterFrom</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Sample</p></td>
<td><p>The component to calculate the absorption for (default: Sample). Allowed values: [‘Sample’, ‘Container’, ‘Environment’]</p></td>
</tr>
<tr class="row-odd"><td><p>AttenuationXSection</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The ABSORPTION cross-section, at 1.8 Angstroms, for the sample material in barns. Column 8 of a table generated from <a class="reference external" href="http://www.ncnr.nist.gov/resources/n-lengths/">http://www.ncnr.nist.gov/resources/n-lengths/</a>.</p></td>
</tr>
<tr class="row-even"><td><p>ScatteringXSection</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The (coherent + incoherent) scattering cross-section for the sample material in barns. Column 7 of a table generated from <a class="reference external" href="http://www.ncnr.nist.gov/resources/n-lengths/">http://www.ncnr.nist.gov/resources/n-lengths/</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>SampleNumberDensity</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The number density of the sample in number of atoms per cubic angstrom if not set with SetSampleMaterial</p></td>
</tr>
<tr class="row-even"><td><p>NumberOfWavelengthPoints</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The number of wavelength points for which the numerical integral is calculated (default: all points)</p></td>
</tr>
<tr class="row-odd"><td><p>ExpMethod</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Normal</p></td>
<td><p>Select the method to use to calculate exponentials, normal or a fast approximation (default: Normal). Allowed values: [‘Normal’, ‘FastApprox’]</p></td>
</tr>
<tr class="row-even"><td><p>EMode</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Elastic</p></td>
<td><p>The energy mode (default: elastic). Allowed values: [‘Elastic’, ‘Direct’, ‘Indirect’]</p></td>
</tr>
<tr class="row-odd"><td><p>EFixed</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>The value of the initial or final energy, as appropriate, in meV. Will be taken from the instrument definition file, if available.</p></td>
</tr>
<tr class="row-even"><td><p>SampleHeight</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The height of the plate in cm</p></td>
</tr>
<tr class="row-odd"><td><p>SampleWidth</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The width of the plate in cm</p></td>
</tr>
<tr class="row-even"><td><p>SampleThickness</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The thickness of the plate in cm</p></td>
</tr>
<tr class="row-odd"><td><p>ElementSize</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The size of one side of an integration element cube in mm</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>This algorithm uses a numerical integration method to calculate
attenuation factors resulting from absorption and single scattering
within a cuboid region of a sample with the dimensions and material
properties given.</p>
<p>The gauge volume generated will be an axis-aligned
cuboid centred on the sample (centre) position. The sample must fully
enclose this cuboid. If this does not meet your needs you can instead
use the general <a class="reference internal" href="AbsorptionCorrection-v1.html#algm-absorptioncorrection"><span class="std std-ref">AbsorptionCorrection v1</span></a>
algorithm in conjunction with
<a class="reference internal" href="DefineGaugeVolume-v1.html#algm-definegaugevolume"><span class="std std-ref">DefineGaugeVolume v1</span></a>.</p>
<p>Factors are calculated for each spectrum (i.e. detector position) and
wavelength point, as defined by the input workspace. The sample is
divided up into cuboids having sides of as close to the size given in
the ElementSize property as the sample dimensions will allow. Thus the
calculation speed depends linearly on the total number of bins in the
workspace and goes as <span class="math notranslate nohighlight">\(\rm{ElementSize}^{-3}\)</span>.</p>
<p>Path lengths through the sample are then calculated for the centre-point
of each element and a numerical integration is carried out using these
path lengths over the volume elements.</p>
<section id="restrictions-on-the-input-workspace">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Restrictions on the input workspace</a><a class="headerlink" href="#restrictions-on-the-input-workspace" title="Link to this heading">¶</a></h3>
<p>The input workspace must have units of wavelength. The
<a class="reference internal" href="../concepts/Instrument.html#instrument"><span class="std std-ref">instrument</span></a> associated with the workspace must be fully
defined because detector, source &amp; sample position are needed. A sample
shape must have been defined using, e.g.,
<a class="reference internal" href="CreateSampleShape-v1.html#algm-createsampleshape"><span class="std std-ref">CreateSampleShape v1</span></a> and the gauge volume must be
fully within the sample.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example: A simple spherical sample with a cuboid gauge volume</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#setup the sample shape</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;sphere id=&quot;sample-sphere&quot;&gt;</span>
<span class="s1">      &lt;centre x=&quot;0&quot; y=&quot;0&quot; z=&quot;0&quot;/&gt;</span>
<span class="s1">      &lt;radius val=&quot;.2&quot; /&gt;</span>
<span class="s1">  &lt;/sphere&gt;&#39;&#39;&#39;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s2">&quot;Histogram&quot;</span><span class="p">,</span><span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ConvertUnits</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="s2">&quot;Wavelength&quot;</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">Params</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">CreateSampleShape</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">sphere</span><span class="p">)</span>
<span class="n">SetSampleMaterial</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">ChemicalFormula</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">)</span>

<span class="c1">#restrict the number of wavelength points to speed up the example</span>
<span class="n">wsOut</span> <span class="o">=</span> <span class="n">CuboidGaugeVolumeAbsorption</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">NumberOfWavelengthPoints</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ElementSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">SampleHeight</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">SampleWidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">SampleThickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The created workspace has one entry for each spectra: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wsOut</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The created workspace has one entry for each spectra: 1
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/CorrectionFunctions/AbsorptionCorrections.html">CorrectionFunctions\AbsorptionCorrections</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a8f64cccc781eac9892433e956bab7104ebf1213/Framework/Algorithms/inc/MantidAlgorithms/CuboidGaugeVolumeAbsorption.h">CuboidGaugeVolumeAbsorption.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a8f64cccc781eac9892433e956bab7104ebf1213/Framework/Algorithms/src/CuboidGaugeVolumeAbsorption.cpp">CuboidGaugeVolumeAbsorption.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CrystalFieldEnergies-v1.html" title="Previous Chapter: CrystalFieldEnergies v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CrystalFieldE...</span>
    </a>
  </li>
  <li>
    <a href="CutMD-v1.html" title="Next Chapter: CutMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CutMD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>