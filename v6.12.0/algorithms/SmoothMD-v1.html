<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SmoothMD v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=94a1c62f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SmoothNeighbours v1" href="SmoothNeighbours-v1.html" />
    <link rel="prev" title="SmoothData v1" href="SmoothData-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SmoothMD v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="smoothmd-v1">
<span id="algm-smoothmd"></span><span id="algm-smoothmd-v1"></span><h1>SmoothMD v1<a class="headerlink" href="#smoothmd-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p></li>
<li><p><a class="reference internal" href="#widthvector-and-functions" id="id7">WidthVector and Functions</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Smooth an MDHistoWorkspace according to a weight function</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="ThresholdMD-v1.html#algm-thresholdmd"><span class="std std-ref">ThresholdMD</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input MDHistoWorkspace to smooth.</p></td>
</tr>
<tr class="row-odd"><td><p>WidthVector</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Width vector. Either specify the width in n-pixels for each dimension, or provide a single entry (n-pixels) for all dimensions. Must be odd integers if Hat function is chosen.</p></td>
</tr>
<tr class="row-even"><td><p>Function</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Hat</p></td>
<td><p>Smoothing function. Defaults to Hat. Allowed values: [‘Hat’, ‘Gaussian’]</p></td>
</tr>
<tr class="row-odd"><td><p>Units</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>pixels</p></td>
<td><p>The units that WidthVector has been specified in. Allowed values are: pixels, . Allowed values: [‘pixels’]</p></td>
</tr>
<tr class="row-even"><td><p>InputNormalizationWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td></td>
<td><p>Multidimensional weighting workspace. Optional.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An output smoothed MDHistoWorkspace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>Provides smoothing of <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a> in n-dimensions. The WidthVector relates to the number of pixels to include in the width for each dimension. <em>WidthVector</em> <strong>must contain entries that are odd numbers</strong>.</p>
<p>A <em>InputNormalizationWorkspace</em> may optionally be provided. Such workspaces must have exactly the same shape as the <em>InputWorkspace</em>. Where the signal values from this workspace are zero, the corresponding smoothed value will be NaN. Any un-smoothed values from the <em>InputWorkspace</em> corresponding to zero in the <em>InputNormalizationWorkspace</em> will be ignored during neighbour calculations, so effectively omitted from the smoothing altogether.
Note that the NormalizationWorkspace is not changed, and needs to be smoothed as well, using the same parameters and <em>InputNormalizationWorkspace</em> as the original data.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/PreSmooth.png"><img alt="PreSmooth.png" src="../_images/PreSmooth.png" style="width: 400px;" />
</a>
<figcaption>
<p><span class="caption-text">No smoothing</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/Smoothed.png"><img alt="PreSmooth.png" src="../_images/Smoothed.png" style="width: 400px;" />
</a>
<figcaption>
<p><span class="caption-text">Smooth with WidthVector=5</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="widthvector-and-functions">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">WidthVector and Functions</a><a class="headerlink" href="#widthvector-and-functions" title="Link to this heading">¶</a></h2>
<p>The WidthVector property defines the width of the smoothing function in each dimension in units of pixels. If “Hat” is chosen as the smoothing function then the WidthVector must only contain odd integer values, such that the filter will have a central pixel. For the “Gaussian” option the width is defined as the full width at half maximum (FWHM). Where the Gaussian function in 1D is defined as</p>
<div class="math notranslate nohighlight">
\[G(x) = \frac{1}{\sqrt{2\pi} \sigma} e^{-\frac{x^2}{2\sigma^2}} ,\]</div>
<p>the FWHM is given by</p>
<div class="math notranslate nohighlight">
\[\text{FWHM} = 2 \sqrt{2\text{ln}2}\sigma .\]</div>
<p>The Gaussian filter uses values which are integrated over the width of the pixel and is truncated at the point where the value of the pixel falls to less than 0.02 of the central pixel.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example - SmoothMD</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A,B&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U,U&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;100000,-5,0,1&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;100000,5,0,1&#39;</span><span class="p">)</span>
<span class="n">histogram</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;A,-10,10,50&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;B,-10,10,50&#39;</span><span class="p">,</span> <span class="n">OutputExtents</span><span class="o">=</span><span class="s1">&#39;-10,10,-10,10,-10,10&#39;</span><span class="p">,</span> <span class="n">OutputBins</span><span class="o">=</span><span class="s1">&#39;10,10,10&#39;</span><span class="p">)</span>
<span class="c1"># plotSlice(histogram)</span>
<span class="n">smoothed</span> <span class="o">=</span> <span class="n">SmoothMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">histogram</span><span class="p">,</span> <span class="n">WidthVector</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">Function</span><span class="o">=</span><span class="s1">&#39;Hat&#39;</span><span class="p">)</span>
<span class="c1"># plotSlice(smoothed)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Smoothed has </span><span class="si">{0}</span><span class="s1"> points&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">smoothed</span><span class="o">.</span><span class="n">getNPoints</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Smoothed has 2500 points
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/Transforms.html">MDAlgorithms\Transforms</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a8f64cccc781eac9892433e956bab7104ebf1213/Framework/MDAlgorithms/inc/MantidMDAlgorithms/SmoothMD.h">SmoothMD.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a8f64cccc781eac9892433e956bab7104ebf1213/Framework/MDAlgorithms/src/SmoothMD.cpp">SmoothMD.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SmoothData-v1.html" title="Previous Chapter: SmoothData v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SmoothData v1</span>
    </a>
  </li>
  <li>
    <a href="SmoothNeighbours-v1.html" title="Next Chapter: SmoothNeighbours v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SmoothNeighbours v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>