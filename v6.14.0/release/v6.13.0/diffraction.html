<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Diffraction Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=6b2f7db8"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Direct Geometry Changes" href="direct_geometry.html" />
    <link rel="prev" title="Mantid 6.13.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.14</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 6.13.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Diffraction Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#powder-diffraction" id="id6">Powder Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id7">New features</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id8">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#engineering-diffraction" id="id9">Engineering Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id10">New features</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id11">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#single-crystal-diffraction" id="id12">Single Crystal Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id13">New features</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id14">Bugfixes</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="powder-diffraction">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Link to this heading">¶</a></h2>
<section id="new-features">
<span id="id1"></span><h3><a class="toc-backref" href="#id7" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>A new algorithm, <a class="reference internal" href="../../algorithms/AlignAndFocusPowderSlim-v1.html#algm-alignandfocuspowderslim"><span class="std std-ref">AlignAndFocusPowderSlim</span></a> has been added - for VULCAN only. This
replicates the functionality of <a class="reference internal" href="../../algorithms/AlignAndFocusPowderFromFiles-v1.html#algm-alignandfocuspowderfromfiles"><span class="std std-ref">AlignAndFocusPowderFromFiles</span></a>, but performs
all the work on the events directly from the file to reduce memory usage.</p></li>
</ul>
<a class="screenshot reference internal image-reference" href="../../_images/PEARLTransfit-example.png"><img alt="../../_images/PEARLTransfit-example.png" class="screenshot align-right" src="../../_images/PEARLTransfit-example.png" style="width: 385px;" />
</a>
<ul class="simple">
<li><p>Several improvements have been made to <a class="reference internal" href="../../algorithms/PEARLTransfit-v1.html#algm-pearltransfit"><span class="std std-ref">PEARLTransfit v1</span></a>:</p>
<ul>
<li><p>Perform an initial fit with a fixed <code class="docutils literal notranslate"><span class="pre">GaussianFWHM</span></code> for calibration runs to improve the robustness of the
calibration.</p></li>
<li><p>Accounted for covariance in error calculation for effective temperature.</p></li>
<li><p>Added a new input parameter <code class="docutils literal notranslate"><span class="pre">RebinInEnergy</span></code>. If False then the energy bins will be determined from the TOF bins in
the input workspace rather than the <code class="docutils literal notranslate"><span class="pre">Ediv</span></code> parameter.</p></li>
<li><p>See the image for an example of the improved fit.</p></li>
</ul>
</li>
<li><p>Both user-defined sample and container geometry have been enabled together with the definition of gauge volume to
account for the beam size. This has been implemented in <a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a> and
<code class="docutils literal notranslate"><span class="pre">mantid.utils.absorptioncorrutils</span></code>.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The output workspace of <a class="reference internal" href="../../algorithms/PDFFourierTransform-v2.html#algm-pdffouriertransform-v2"><span class="std std-ref">PDFFourierTransform v2</span></a> now has the correct binning and the correct use of bin edge
and bin center in the evaluated integral.</p></li>
<li><p><a class="reference internal" href="../../algorithms/HB2AReduce-v1.html#algm-hb2areduce"><span class="std std-ref">HB2AReduce</span></a> now handles the special case where the runs to merge do not share common columns.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PEARLTransfit-v1.html#algm-pearltransfit"><span class="std std-ref">PEARLTransfit v1</span></a>:</p>
<ul>
<li><p>Empty bins that were causing fits to Ta10 resonance to fail are no longer produced when using the default <code class="docutils literal notranslate"><span class="pre">Ediv</span></code>
value.</p></li>
<li><p>Corrected error propagation for effective and sample temperature.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="engineering-diffraction">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Link to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">New features</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>In the <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-fitting"><span class="std std-ref">Fitting tab</span></a> on the
<a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#engineering-diffraction-ref"><span class="std std-ref">Engineering Diffraction interface</span></a> data can now be loaded that is in d-spacing as
well as in time-of-flight.</p></li>
<li><p>A new version of <a class="reference internal" href="../../algorithms/PoldiAutoCorrelation-v6.html#algm-poldiautocorrelation-v6"><span class="std std-ref">PoldiAutoCorrelation v6</span></a> has been added that supports the new, post-upgrade, detector
geometry on POLDI (as of December 2024). For older POLDI data please use the previous version
(<a class="reference internal" href="../../algorithms/PoldiAutoCorrelation-v5.html#algm-poldiautocorrelation-v5"><span class="std std-ref">PoldiAutoCorrelation v5</span></a>) by calling the algorithm with the keyword argument <code class="docutils literal notranslate"><span class="pre">Version=5</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poldi_utils</span></code> contains helper functions to load post-detector upgrade POLDI data (currently ASCII format with no
meta-data) and simulate the spectra in a <a class="reference internal" href="../../concepts/Workspace2D.html#workspace2d"><span class="std std-ref">Workspace2D</span></a> from an input powder spectrum.</p>
<ul>
<li><p>The functions can be used in a script by importing them using <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">plugins.algorithms.poldi_utils</span> <span class="pre">import</span> <span class="pre">*</span></code>.</p></li>
</ul>
</li>
<li><p>The <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#engineering-diffraction-ref"><span class="std std-ref">Engineering Diffraction</span></a> interface’s
<a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-calibration"><span class="std std-ref">Calibration</span></a> tab has been improved:</p>
<ul>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">Crop</span> <span class="pre">Calibration</span></code> to <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Calibration</span> <span class="pre">Region</span> <span class="pre">of</span> <span class="pre">Interest</span></code> to more accurately reflect its functionality.</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">Custom</span> <span class="pre">CalFile</span></code> to <code class="docutils literal notranslate"><span class="pre">Custom</span> <span class="pre">Grouping</span> <span class="pre">File</span></code> and allowed the provided file to be <code class="docutils literal notranslate"><span class="pre">.xml</span></code> as well as
<code class="docutils literal notranslate"><span class="pre">.cal</span></code>. This brings it inline with the current detector grouping IO algorithms,
<a class="reference internal" href="../../algorithms/SaveDetectorsGrouping-v1.html#algm-savedetectorsgrouping-v1"><span class="std std-ref">SaveDetectorsGrouping v1</span></a> and <a class="reference internal" href="../../algorithms/LoadDetectorsGroupingFile-v1.html#algm-loaddetectorsgroupingfile-v1"><span class="std std-ref">LoadDetectorsGroupingFile v1</span></a>.</p></li>
<li><p>Changed the naming suffix for custom file <code class="docutils literal notranslate"><span class="pre">example_group.xml</span></code> from <code class="docutils literal notranslate"><span class="pre">_Custom</span></code> to <code class="docutils literal notranslate"><span class="pre">_Custom_example_group</span></code> so
they don’t get overwritten when custom grouping is changed (this also makes it more clear to the user what grouping
is being used).</p></li>
<li><p>Changed the naming suffix for a cropped spectrum list (<code class="docutils literal notranslate"><span class="pre">example_list</span></code>) from <code class="docutils literal notranslate"><span class="pre">_Cropped</span></code> to
<code class="docutils literal notranslate"><span class="pre">_Cropped_example_list</span></code> as above.</p></li>
</ul>
</li>
<li><p>Added a warning to the <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-focus"><span class="std std-ref">Focus tab</span></a> for when the vanadium normalisation has been loaded
from the ADS.</p></li>
<li><p>The <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-gsas"><span class="std std-ref">GSAS-II Refinement</span></a> tab’s error messages have been improved to allow easier troubleshooting of problems
relating to the import of the GSAS-II scripting interface.</p>
<ul>
<li><p>This also avoids using a hard-coded path, which is invalid for newer version of GSAS-II (versions 5758 and later).</p></li>
</ul>
</li>
<li><p>A new algorithm <a class="reference internal" href="../../algorithms/CreatePoleFigureTableWorkspace-v1.html#algm-createpolefiguretableworkspace"><span class="std std-ref">CreatePoleFigureTableWorkspace v1</span></a> has been added which creates a table with the information
required to produce a pole figure (a collection of alphas, betas, and intensities), for use in texture analysis.</p></li>
</ul>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Rietveld</span></code> option in the <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-gsas"><span class="std std-ref">GSAS-II UI</span></a> <code class="docutils literal notranslate"><span class="pre">Refinement</span> <span class="pre">Method</span></code> combo box has been
disabled - only <code class="docutils literal notranslate"><span class="pre">Pawley</span></code> refinements are currently supported.</p></li>
<li><p>When Focusing, either within the interface or in a script, you should no longer be able to unknowingly apply an
outdated vanadium correction.</p>
<ul>
<li><p>Previously, when focusing had already been run on a user defined region of interest (Custom or Cropped), the
vanadium correction was calculated and saved in the ADS as <code class="docutils literal notranslate"><span class="pre">engggui_curves_Custom</span></code> or <code class="docutils literal notranslate"><span class="pre">engggui_curves_Cropped</span></code>.
If this ROI was then updated and recalibrated, when focus was run again, it would load the existing
<code class="docutils literal notranslate"><span class="pre">engggui_curves</span></code> from the ADS which would be from the old ROI. Now, the naming of these files should be more
unique to the specific ROI, and in the case where a file is loaded from the ADS which may be wrong, a warning is
supplied to the user.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CEO2.cif</span></code>, no longer contains a formatting issue which was causing a loop error when trying to load into Mantid
Workbech using <code class="docutils literal notranslate"><span class="pre">LoadCIF</span></code>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">&lt;side-by-side-view-location&gt;</span></code> elements to the detector banks in <code class="docutils literal notranslate"><span class="pre">SNAP_Definition.xml</span></code>.</p></li>
<li><p>Within  <a class="reference internal" href="../../algorithms/AbsorptionCorrection-v1.html#algm-absorptioncorrection"><span class="std std-ref">AbsorptionCorrection v1</span></a> algorithm, when <code class="docutils literal notranslate"><span class="pre">Rasterize</span></code> is called, it now takes both the Integration
<code class="docutils literal notranslate"><span class="pre">Volume</span> <span class="pre">Shape</span></code> and the <code class="docutils literal notranslate"><span class="pre">Sample</span> <span class="pre">Shape</span></code> to calculate L1 paths. Before, it would only take the integration volume and
would assume that the paths within this shape are equal to the paths within the sample.</p></li>
<li><p>The <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#ui-engineering-fitting"><span class="std std-ref">Fitting tab</span></a> of <a class="reference internal" href="../../interfaces/diffraction/Engineering%20Diffraction.html#engineering-diffraction-ref"><span class="std std-ref">Engineering Diffraction interface</span></a>
will no longer crash when deleting multiple workspaces in the ADS. This also fixed an issue of clearing the whole plot
in the same tab when deleting workspaces in the ADS.</p></li>
</ul>
</section>
</section>
<section id="single-crystal-diffraction">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Link to this heading">¶</a></h2>
<section id="id4">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">New features</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">detectorbin</span></code> peak shape for the peaks integrated with
<a class="reference internal" href="../../algorithms/IntegratePeaks1DProfile-v1.html#algm-integratepeaks1dprofile"><span class="std std-ref">IntegratePeaks1DProfile</span></a> integration algorithm.</p></li>
<li><p>By accessing the <code class="docutils literal notranslate"><span class="pre">detectorbin</span></code> peak shape, users can now view the detector IDs and the corresponding range in the X
dimension associated with each detector for each successfully integrated peak from the algorithm.</p></li>
</ul>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/PredictPeaks-v1.html#algm-predictpeaks"><span class="std std-ref">PredictPeaks</span></a> now correctly filters the angle range when using the
<code class="docutils literal notranslate"><span class="pre">CalculateGoniometerForCW</span></code> option and not using the default goniometer convention.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v6-13-0"><span class="std std-ref">Release 6.13.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 6.13.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 6.13.0...</span>
    </a>
  </li>
  <li>
    <a href="direct_geometry.html" title="Next Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Direct Geomet... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>