<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Diffraction Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Direct Geometry Changes" href="direct_geometry.html" />
    <link rel="prev" title="Mantid 5.0.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 5.0.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Diffraction Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#new-features" id="id5">New Features</a></p>
<ul>
<li><p><a class="reference internal" href="#engineering-diffraction" id="id6">Engineering Diffraction</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#improvements" id="id7">Improvements</a></p>
<ul>
<li><p><a class="reference internal" href="#powder-diffraction" id="id8">Powder Diffraction</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id9">Engineering Diffraction</a></p></li>
<li><p><a class="reference internal" href="#single-crystal-diffraction" id="id10">Single Crystal Diffraction</a></p></li>
<li><p><a class="reference internal" href="#miscellaneous" id="id11">Miscellaneous</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes" id="id12">Bug Fixes</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id13">Powder Diffraction</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id14">Single Crystal Diffraction</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id15">Miscellaneous</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="new-features">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">New Features</a><a class="headerlink" href="#new-features" title="Permalink to this heading">¶</a></h2>
<section id="engineering-diffraction">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Introduction of new Engineering Diffraction interface. Currently supports calibration and focusing for ENGINX. Fitting functionality is currently under development.</p></li>
</ul>
<figure class="align-default">
<a class="screenshot reference internal image-reference" href="../../_images/EngineeringDiffractionGUI.png"><img alt="../../_images/EngineeringDiffractionGUI.png" class="screenshot" src="../../_images/EngineeringDiffractionGUI.png" style="width: 500px;" /></a>
</figure>
</section>
</section>
<section id="improvements">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h2>
<section id="powder-diffraction">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Permalink to this heading">¶</a></h3>
<p>Several improvements have been made to the total scattering functionality in the Polaris powder diffraction scripts. The following changes relate specifically to the create_total_scattering_pdf function:</p>
<ul class="simple">
<li><p>Merging banks now matches spectra to the spectrum with the largest x range.</p></li>
<li><p>Merging banks no longer matches spectra with scale, it now only matches with offset.</p></li>
<li><p>It can now be given a parameter <cite>output_binning</cite> that will be used to rebin the output_pdf.</p></li>
<li><p>It can now accept a <cite>pdf_type</cite> argument to set the pdf_output type.</p></li>
<li><p>It can now accept a <cite>freq_params</cite> argument to perform a fourier filter on the run.</p></li>
<li><p>A <a class="reference internal" href="../../algorithms/SaveRMCProfile-v1.html#algm-savermcprofile-v1"><span class="std std-ref">SaveRMCProfile</span></a> algorithm has been made that saves workspaces in a format readable by the RMCProfile package.</p></li>
</ul>
<p>The following changes have also been made to other parts of the power diffraction scripts:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/HRPDSlabCanAbsorption-v1.html#algm-hrpdslabcanabsorption-v1"><span class="std std-ref">HRPDSlabCanAbsorption</span></a> now accepts any thickness parameter and not those in a specified list.</p></li>
</ul>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/EnggCalibrateFull-v1.html#algm-enggcalibratefull-v1"><span class="std std-ref">EnggCalibrateFull</span></a> now uses the new <a class="reference internal" href="../../algorithms/SaveAscii-v2.html#algm-saveascii-v2"><span class="std std-ref">SaveAscii</span></a> to save its output files as TSVs, allowing them to be loaded back into Mantid.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FitPeaks-v1.html#algm-fitpeaks-v1"><span class="std std-ref">FitPeaks</span></a> allows for specifying some of the peak parameters (e.g. only <code class="docutils literal notranslate"><span class="pre">Mixing</span></code> for <a class="reference internal" href="../../fitting/fitfunctions/PseudoVoigt.html#func-pseudovoigt"><span class="std std-ref">PseudoVoigt</span></a>) and observing the other parameters. The new functionality allows for more automated execution for peak functions other than <a class="reference internal" href="../../fitting/fitfunctions/Gaussian.html#func-gaussian"><span class="std std-ref">Gaussian</span></a>.</p></li>
<li><p>Instrument Definition File for HFIR HB2B (HiDRA) has been added.</p></li>
</ul>
</section>
<section id="single-crystal-diffraction">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/PredictFractionalPeaks-v1.html#algm-predictfractionalpeaks-v1"><span class="std std-ref">PredictFractionalPeaks</span></a> now accepts the same set of modulation vector properties as <a class="reference internal" href="../../algorithms/IndexPeaks-v1.html#algm-indexpeaks-v1"><span class="std std-ref">IndexPeaks</span></a>.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/ConvertHFIRSCDtoMDE-v1.html#algm-converthfirscdtomde-v1"><span class="std std-ref">ConvertHFIRSCDtoMDE</span></a> for converting HFIR single crystal data (from WAND and DEMAND) into MDEventWorkspace in units Q_sample.</p></li>
</ul>
<figure class="align-default">
<a class="screenshot reference internal image-reference" href="../../_images/ConvertHFIRSCDtoMDE.png"><img alt="../../_images/ConvertHFIRSCDtoMDE.png" class="screenshot" src="../../_images/ConvertHFIRSCDtoMDE.png" style="width: 500px;" /></a>
</figure>
<ul class="simple">
<li><p>The output peak workspace from <a class="reference internal" href="../../algorithms/PredictFractionalPeaks-v1.html#algm-predictfractionalpeaks-v1"><span class="std std-ref">PredictFractionalPeaks</span></a> now keeps the same lattice parameters as the input workspace.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveReflections-v1.html#algm-savereflections"><span class="std std-ref">SaveReflections</span></a> now has the option to save peaks to separate files based on their associated modulation vectors when using the Jana format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IndexPeaksWithSatellites</span></code> has been deleted as it had been deprecated and superseded by <a class="reference internal" href="../../algorithms/IndexPeaks-v1.html#algm-indexpeaks-v1"><span class="std std-ref">IndexPeaks</span></a>.</p></li>
</ul>
</section>
<section id="miscellaneous">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Miscellaneous</a><a class="headerlink" href="#miscellaneous" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadILLTOF-v2.html#algm-loadilltof-v2"><span class="std std-ref">LoadILLTOF2</span></a> now supports loading data taken from PANTHER in diffraction mode.</p></li>
<li><p>A unit <cite>AtomicDistance</cite> measured in units of Angstrom has been added to the unit factory to describe atomic structure. The initial use of this is in the pair distribution functions generated by the Polaris scripts</p></li>
</ul>
</section>
</section>
<section id="bug-fixes">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Bug Fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Unicode strings can now be given as a lim file directory in polaris create_total_scattering_pdf merging banks.</p></li>
<li><p>Polaris.focus no longer fails with <cite>do_absorption_Corrections=True</cite>.</p></li>
<li><p>Empty runs are no longer subtracted twice when specifying <cite>sample_empty</cite> in <cite>Polaris.focus</cite>.</p></li>
<li><p>Lists can now be given for <cite>q_lims</cite> in polaris create_total_scattering_pdf while merging banks.</p></li>
<li><p>SavePDF no longer fails when asked to save histogram data</p></li>
<li><p>Bug fixed affecting Diffraction &gt; Powder Diffraction Reduction interface - only facilities with applicable instruments can now be selected.</p></li>
</ul>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Support added for DEMAND (HB3A) to the algorithms <a class="reference internal" href="../../algorithms/ConvertWANDSCDtoQ-v1.html#algm-convertwandscdtoq-v1"><span class="std std-ref">ConvertWANDSCDtoQ</span></a> and <a class="reference internal" href="../../algorithms/FindPeaksMD-v1.html#algm-findpeaksmd-v1"><span class="std std-ref">FindPeaksMD</span></a> in order to handle additional goniometers.</p></li>
<li><p>Fixed PredictSatellitePeaks producing an empty table when using cross-terms with crystallography convention for sign of Q.</p></li>
<li><p>Two fixes to IntegrateEllipsoids and IntegrateEllipsoidsTwoStep. For non Event mode data the algorithms now:</p>
<ul>
<li><p>calculate the count-weighted variance as required.</p></li>
<li><p>return the correct error on the integrated intensity.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Miscellaneous</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug where <a class="reference internal" href="../../algorithms/SaveGSS-v1.html#algm-savegss-v1"><span class="std std-ref">SaveGSS</span></a> could crash when attempting to pass a group workspace into it. GSS files are produced by the focus functionality in the powder diffraction scripts and also the EnginX scripts</p></li>
</ul>
<p><a class="reference internal" href="index.html#v5-0-0"><span class="std std-ref">Release 5.0.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 5.0.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 5.0.0 ...</span>
    </a>
  </li>
  <li>
    <a href="direct_geometry.html" title="Next Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Direct Geomet... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>