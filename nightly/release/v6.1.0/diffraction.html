<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Diffraction Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Direct Geometry Changes" href="direct_geometry.html" />
    <link rel="prev" title="Mantid 6.1.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 6.1.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Diffraction Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#powder-diffraction" id="id7">Powder Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id8">New features</a></p></li>
<li><p><a class="reference internal" href="#improvements" id="id9">Improvements</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id10">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#engineering-diffraction" id="id11">Engineering Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id12">New features</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id13">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id14">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#single-crystal-diffraction" id="id15">Single Crystal Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id16">New features</a></p>
<ul>
<li><p><a class="reference internal" href="#leanelasticpeak" id="id17">LeanElasticPeak</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id5" id="id18">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id19">Bugfixes</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="powder-diffraction">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Permalink to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../algorithms/ConvertUnits-v1.html#algm-convertunits"><span class="std std-ref">ConvertUnits</span></a> algorithm has been extended to use a calibration when converting between d spacing, momentum transfer and TOF. A calibration can be loaded into a workspace using a new <a class="reference internal" href="../../algorithms/ApplyDiffCal-v1.html#algm-applydiffcal"><span class="std std-ref">ApplyDiffCal</span></a> algorithm and then viewed in the Show Detectors screen. The calibration consists of the diffractometer constants DIFA, DIFC and TZERO that determine the form of the quadratic relationship between d spacing and TOF. This functionality was previously only available in <a class="reference internal" href="../../algorithms/AlignDetectors-v1.html#algm-aligndetectors"><span class="std std-ref">AlignDetectors</span></a> which only performed the conversion in the direction TOF to d spacing. This change will provide several benefits:</p>
<ul>
<li><p>Allow the user to choose the calibration to use when converting focused data from d-spacing to TOF</p></li>
<li><p>Improved integration with GSAS e.g. both the calibration and the data will be loaded from GSAS files when running the algorithm <a class="reference internal" href="../../algorithms/LoadGSS-v1.html#algm-loadgss"><span class="std std-ref">LoadGSS</span></a> and subsequent unit conversions will respect the calibration</p></li>
<li><p>Make the unit conversions based on a calibration more accessible in the main ConvertUnits algorithm</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a> now supports workspaces with grouped detectors (i.e. more than one detector per spectrum).</p></li>
<li><p>New diagnostic plotting tools:</p>
<ul>
<li><p><cite>Calibration.tofpd..diagnostics.plot2d</cite> which adds markers for expected peak positions.</p></li>
<li><p><cite>Calibration.tofpd.diagnostics.difc_plot2d</cite> which plots the change in DIFC between two instrument calibrations.</p></li>
<li><p><cite>Calibration.tofpd.diagnostics.plot_peakd</cite> which plots the d-spacing relative strain of peak positions.</p></li>
<li><p><cite>Calibration.tofpd.diagnostics.plot_corr</cite> which plots the Pearson correlation coefficient for time-of-flight and d-spacing for each detector.</p></li>
<li><p><cite>Calibration.tofpd.diagnostics.plot_peak_info</cite> which plots fitted peak parameters for instrument banks.</p></li>
</ul>
</li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/IndirectILLReductionDIFF-v1.html#algm-indirectillreductiondiff"><span class="std std-ref">IndirectILLReductionDIFF</span></a> to reduce Doppler diffraction data for ILL’s IN16B instrument.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a> has additional property, <code class="docutils literal notranslate"><span class="pre">DeltaRagged</span></code>, which allows using <a class="reference internal" href="../../algorithms/RebinRagged-v1.html#algm-rebinragged"><span class="std std-ref">RebinRagged</span></a> to bin each spectrum differently.</p></li>
<li><p>A new caching feature is added to <a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a> to speed up calculation using same sample and container.</p></li>
<li><p>New property <cite>CleanCache</cite> in algorithm <a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a>.</p></li>
<li><p>Including three options for “cache directory” and one for “clean cache” in the Advanced Setup tab of the SNS Powder Reduction interface.</p></li>
</ul>
</section>
<section id="improvements">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>New motor convention for HB2A implemented in <a class="reference internal" href="../../algorithms/HB2AReduce-v1.html#algm-hb2areduce"><span class="std std-ref">HB2AReduce</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FitPeaks-v1.html#algm-fitpeaks"><span class="std std-ref">FitPeaks</span></a> can now fit multiple peaks in the same spectrum with a <a class="reference internal" href="../../fitting/fitfunctions/BackToBackExponential.html#func-backtobackexponential"><span class="std std-ref">BackToBackExponential</span></a> starting from user specified parameters.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a> now initialises the parameters A,B and S of the <a class="reference internal" href="../../fitting/fitfunctions/BackToBackExponential.html#func-backtobackexponential"><span class="std std-ref">BackToBackExponential</span></a> function if corresponding coefficients are in the instrument parameter.xml file.</p></li>
<li><p>Support for fitting diffractometer constants with chi-squared cost function in <a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a> now checks if a previous container was created using the same method before reusing it.</p></li>
<li><p>A differential evolution minimizer was added to <a class="reference internal" href="../../algorithms/AlignComponents-v1.html#algm-aligncomponents"><span class="std std-ref">AlignComponents</span></a>.</p></li>
<li><p>A differential evolution minimizer was added to <a class="reference internal" href="../../algorithms/CorelliPowderCalibrationCreate-v1.html#algm-corellipowdercalibrationcreate"><span class="std std-ref">CorelliPowderCalibrationCreate</span></a>.</p></li>
<li><p>Added option to fix banks’ vertical coordinate in <a class="reference internal" href="../../algorithms/CorelliPowderCalibrationCreate-v1.html#algm-corellipowdercalibrationcreate"><span class="std std-ref">CorelliPowderCalibrationCreate</span></a>.</p></li>
<li><p>Loading a CORELLI tube calibration also returns a <code class="docutils literal notranslate"><span class="pre">MaskWorkspace</span></code>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/AlignComponents-v1.html#algm-aligncomponents"><span class="std std-ref">AlignComponents</span></a> has option to output a table listing the changes in position and orientation for each component</p></li>
<li><p><a class="reference internal" href="../../algorithms/CorelliPowderCalibrationCreate-v1.html#algm-corellipowdercalibrationcreate"><span class="std std-ref">CorelliPowderCalibrationCreate</span></a> now outputs a table listing the changes in position and orientation for each bank</p></li>
<li><p><a class="reference internal" href="../../algorithms/PolDiffILLReduction-v1.html#algm-poldiffillreduction"><span class="std std-ref">PolDiffILLReduction</span></a> now outputs flipping ratios along with polarisation corrections.</p></li>
<li><p><a class="reference internal" href="../../algorithms/WANDPowderReduction-v1.html#algm-wandpowderreduction"><span class="std std-ref">WANDPowderReduction</span></a> GUI now only shows relevant items in drop down menu and no longer has a confusing copy input workspace name button.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Use the correct version of exponential integral (i.e., the E1 function) in peak profile function <a class="reference internal" href="../../fitting/fitfunctions/Bk2BkExpConvPV.html#func-bk2bkexpconvpv"><span class="std std-ref">Bk2BkExpConvPV</span></a> so it can be evaluated properly.</p></li>
<li><p>Fix the issue with SNS Powder Reduction interface when multiple run numbers are provided and separated with comma.</p></li>
<li><p>Fix an issue when saving reduced data as GSAS format using <a class="reference internal" href="../../algorithms/HB2AReduce-v1.html#algm-hb2areduce"><span class="std std-ref">HB2AReduce</span></a>.</p></li>
<li><p>Fix the format inconsistency (with data saved from autoreduction workflow) issue for saving GSAS data using <a class="reference internal" href="../../algorithms/HB2AReduce-v1.html#algm-hb2areduce"><span class="std std-ref">HB2AReduce</span></a> - both are now using <a class="reference internal" href="../../algorithms/SaveGSSCW-v1.html#algm-savegsscw"><span class="std std-ref">SaveGSSCW</span></a> for saving GSAS data.</p></li>
<li><p>Fix out-of-range bug in <a class="reference internal" href="../../algorithms/FitPeaks-v1.html#algm-fitpeaks"><span class="std std-ref">FitPeaks</span></a> for histogram data.</p></li>
<li><p>Fix bug in <a class="reference internal" href="../../algorithms/FitPeaks-v1.html#algm-fitpeaks"><span class="std std-ref">FitPeaks</span></a> not correctly checking right window for an individual peak.</p></li>
<li><p>Fix <a class="reference internal" href="../../algorithms/CalculatePlaczekSelfScattering-v2.html#algm-calculateplaczekselfscattering"><span class="std std-ref">CalculatePlaczekSelfScattering</span></a> calculation of mass term for multiple-element materials</p></li>
<li><p>Fix bug to implement intended sequential fit of DIFC, DIFA, TZERO in <a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a>.</p></li>
<li><p>Correct unit to TOF for <code class="docutils literal notranslate"><span class="pre">_tof_xye</span></code> files output for PEARL, when the focusing mode is set to <em>all</em>.</p></li>
<li><p>Allow a different number of spectra for absorption correction division of PEARL data. This allows <code class="docutils literal notranslate"><span class="pre">create_vanadium</span></code> to work for a non-standard dataset.</p></li>
<li><p>Saved filenames for summed empty workspaces now include spline properties to avoid long_mode confusion when focussing.</p></li>
<li><p>Fix segmentation violation issues for ILL instruments D1B, D2B, and D20, caused by change of scanned data type</p></li>
<li><p><a class="reference internal" href="../../algorithms/D7AbsoluteCrossSections-v1.html#algm-d7absolutecrosssections"><span class="std std-ref">D7AbsoluteCrossSections</span></a> fixed the wrong assumption on the order of spin-flip and non-spin-flip data, and fixed the relative normalisation issues.</p></li>
<li><p>Fix crashing issue in <a class="reference internal" href="../../algorithms/AlignAndFocusPowder-v1.html#algm-alignandfocuspowder"><span class="std std-ref">AlignAndFocusPowder</span></a> due to using new unit conversion APIs.</p></li>
<li><p>Support for data with x-axis unit of TOF has been deprecated in <a class="reference internal" href="../../algorithms/DiffractionFocussing-v2.html#algm-diffractionfocussing-v2"><span class="std std-ref">DiffractionFocussing version 2</span></a>, please use <a class="reference internal" href="../../algorithms/GroupDetectors-v2.html#algm-groupdetectors"><span class="std std-ref">GroupDetectors</span></a> instead.</p></li>
<li><p>Fixed an error in the final calculation for the PEARLTransVoigt function, used in PEARLTransfit</p></li>
</ul>
</section>
</section>
<section id="engineering-diffraction">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">New features</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>New IDF for upgraded VULCAN instrument</p></li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Improvements</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../fitting/fitfunctions/BackToBackExponential.html#func-backtobackexponential"><span class="std std-ref">BackToBackExponential</span></a> coefficients for A,B and S now read from .xml file and output to .prm file for GSAS-II.</p></li>
<li><p>The Engineering Diffraction interface can now be saved as part of a project file, and can save/restore in the event of a crash as part of the general project save system.</p></li>
</ul>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Engineering diffraction interface now converts fitted TOF centre to d-spacing using diffractometer constants post sequential fit (in a matrix workspace).</p></li>
<li><p>Error on the fitted peak centre converted from TOF to d-spacing will now be correct for non-zero difa in the Engineering diffraction interface.</p></li>
<li><p>Added checks for the existence of non-zero proton charge before attempting to average log values weighted by proton charge in the fitting tab of the engineering diffraction interface.</p></li>
<li><p><a class="reference internal" href="../../algorithms/EnggFocus-v1.html#algm-enggfocus"><span class="std std-ref">EnggFocus</span></a> algorithm doesn’t attempt to normalise by current if the run has no proton charge and will not throw an error (but will print a warning to the log).</p></li>
</ul>
</section>
</section>
<section id="single-crystal-diffraction">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Permalink to this heading">¶</a></h2>
<section id="id4">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">New features</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>New version of algorithm <a class="reference internal" href="../../algorithms/SCDCalibratePanels-v2.html#algm-scdcalibratepanels-v2"><span class="std std-ref">SCDCalibratePanels</span></a> provides more accurate calibration results for CORELLI instrument.</p></li>
<li><p>Modified some logs in output workspace from <a class="reference internal" href="../../algorithms/LoadWANDSCD-v1.html#algm-loadwandscd"><span class="std std-ref">LoadWANDSCD</span></a> to be TimeSeriesProperty so they work with <a class="reference internal" href="../../algorithms/SetGoniometer-v1.html#algm-setgoniometer"><span class="std std-ref">SetGoniometer</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD</span></a> has option to integrate ellipsoids around estimated centroid instead of nominal position.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD</span></a> has option to determine ellipsoid covariance iteratively and to use the estimated standard deviation rather than scale the major axis of the ellipsoid to the spherical radius.</p></li>
<li><p>Algorithms <a class="reference internal" href="../../algorithms/ConvertWANDSCDtoQ-v1.html#algm-convertwandscdtoq"><span class="std std-ref">ConvertWANDSCDtoQ</span></a> and <a class="reference internal" href="../../algorithms/ConvertHFIRSCDtoMDE-v1.html#algm-converthfirscdtomde"><span class="std std-ref">ConvertHFIRSCDtoMDE</span></a> have a new geometrical correction factor <cite>ObliquityParallaxCoefficient</cite> for shift in vertical beam position due to wide beam.</p></li>
<li><p><a class="reference internal" href="../../algorithms/TransformHKL-v1.html#algm-transformhkl"><span class="std std-ref">TransformHKL</span></a> has new keyword argument <cite>FindError</cite> allowing the lattice parameter error calculation to be skipped. This can be used to transform HKL of a peaks workspace without enough peaks to do an optimization so they are simply set to zero.</p></li>
<li><p>Added new detector to MANDI instrument geometry with updated calibration. Valid-to dates changed in previous files <code class="docutils literal notranslate"><span class="pre">MANDI_Definition_2020_04_01.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">MANDI_Parameters_2020_04_01.xml</span></code>. Valid-from dates changed in newly added files <code class="docutils literal notranslate"><span class="pre">MANDI_Definition_2021_02_01.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">MANDI_Parameters_2021_02_01.xml</span></code>.</p></li>
</ul>
<section id="leanelasticpeak">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">LeanElasticPeak</a><a class="headerlink" href="#leanelasticpeak" title="Permalink to this heading">¶</a></h4>
<p><strong>A new Peak concept has been create, a LeanElasticPeak where the instrument is not included as part of Peak. The only requirement for this peak is a Q-sample vector. There are a number of modifications made to facilitate this. The new LeanElasticPeak and LeanElasticPeakWorkspace concept is show in detail at</strong> <a class="reference internal" href="../../concepts/LeanElasticPeaksWorkspace.html#leanelasticpeaksworkspace"><span class="std std-ref">LeanElasticPeaksWorkspace</span></a></p>
<figure class="align-right">
<a class="reference internal image-reference" href="../../_images/WAND2_LeanPeaks_satellites.PNG"><img alt="../../_images/WAND2_LeanPeaks_satellites.PNG" src="../../_images/WAND2_LeanPeaks_satellites.PNG" style="width: 400px;" /></a>
</figure>
<ul>
<li><p><a class="reference internal" href="../../algorithms/CreatePeaksWorkspace-v1.html#algm-createpeaksworkspace"><span class="std std-ref">CreatePeaksWorkspace</span></a> has been modified to optionally create a <a class="reference internal" href="../../concepts/LeanElasticPeaksWorkspace.html#leanelasticpeaksworkspace"><span class="std std-ref">LeanElasticPeaksWorkspace</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FindPeaksMD-v1.html#algm-findpeaksmd"><span class="std std-ref">FindPeaksMD</span></a> has been modified to optionally create a <a class="reference internal" href="../../concepts/LeanElasticPeaksWorkspace.html#leanelasticpeaksworkspace"><span class="std std-ref">LeanElasticPeaksWorkspace</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PredictPeaks-v1.html#algm-predictpeaks"><span class="std std-ref">PredictPeaks</span></a> has been modified to optionally create a <a class="reference internal" href="../../concepts/LeanElasticPeaksWorkspace.html#leanelasticpeaksworkspace"><span class="std std-ref">LeanElasticPeaksWorkspace</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PredictSatellitePeaks-v1.html#algm-predictsatellitepeaks"><span class="std std-ref">PredictSatellitePeaks</span></a> will work with <a class="reference internal" href="../../concepts/LeanElasticPeaksWorkspace.html#leanelasticpeaksworkspace"><span class="std std-ref">LeanElasticPeaksWorkspace</span></a>.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/HFIRCalculateGoniometer-v1.html#algm-hfircalculategoniometer"><span class="std std-ref">HFIRCalculateGoniometer</span></a> allows the goniometer to be found for constant wavelength peaks after creation, works with <a class="reference internal" href="../../concepts/LeanElasticPeaksWorkspace.html#leanelasticpeaksworkspace"><span class="std std-ref">LeanElasticPeaksWorkspace</span></a>.</p></li>
<li><p>These following other algorithms have either been made to work or confirmed to already work with the LeanElasticPeak:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/AddPeakHKL-v1.html#algm-addpeakhkl"><span class="std std-ref">AddPeakHKL v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/CalculatePeaksHKL-v1.html#algm-calculatepeakshkl"><span class="std std-ref">CalculatePeaksHKL v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/CalculateUMatrix-v1.html#algm-calculateumatrix"><span class="std std-ref">CalculateUMatrix v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/CentroidPeaksMD-v2.html#algm-centroidpeaksmd"><span class="std std-ref">CentroidPeaksMD v2</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/CompareWorkspaces-v1.html#algm-compareworkspaces"><span class="std std-ref">CompareWorkspaces v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/CombinePeaksWorkspaces-v1.html#algm-combinepeaksworkspaces"><span class="std std-ref">CombinePeaksWorkspaces v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/FilterPeaks-v1.html#algm-filterpeaks"><span class="std std-ref">FilterPeaks v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/FindUBUsingFFT-v1.html#algm-findubusingfft"><span class="std std-ref">FindUBUsingFFT v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/FindUBUsingIndexedPeaks-v1.html#algm-findubusingindexedpeaks"><span class="std std-ref">FindUBUsingIndexedPeaks v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/FindUBUsingLatticeParameters-v1.html#algm-findubusinglatticeparameters"><span class="std std-ref">FindUBUsingLatticeParameters v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/FindUBUsingMinMaxD-v1.html#algm-findubusingminmaxd"><span class="std std-ref">FindUBUsingMinMaxD v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/IndexPeaks-v1.html#algm-indexpeaks"><span class="std std-ref">IndexPeaks v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD v2</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadNexusProcessed-v2.html#algm-loadnexusprocessed"><span class="std std-ref">LoadNexusProcessed v2</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/OptimizeLatticeForCellType-v1.html#algm-optimizelatticeforcelltype"><span class="std std-ref">OptimizeLatticeForCellType v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveNexusProcessed-v1.html#algm-savenexusprocessed"><span class="std std-ref">SaveNexusProcessed v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveHKLCW-v1.html#algm-savehklcw"><span class="std std-ref">SaveHKLCW v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/SelectCellOfType-v1.html#algm-selectcelloftype"><span class="std std-ref">SelectCellOfType v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/SelectCellWithForm-v1.html#algm-selectcellwithform"><span class="std std-ref">SelectCellWithForm v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/SortPeaksWorkspace-v1.html#algm-sortpeaksworkspace"><span class="std std-ref">SortPeaksWorkspace v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/ShowPossibleCells-v1.html#algm-showpossiblecells"><span class="std std-ref">ShowPossibleCells v1</span></a></p></li>
<li><p><a class="reference internal" href="../../algorithms/TransformHKL-v1.html#algm-transformhkl"><span class="std std-ref">TransformHKL v1</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Improvements</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added option to <a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD</span></a> to stop masking the first and last tubes of each bank (masked pixels are used to determine whether the integration region of a peak is near the edge of the detector). Previously adjacent tubes on adjacent banks were masked which are not always to be considered edges (e.g. on WISH). A custom masking can be applied to the peak workspace (e.g. using <a class="reference internal" href="../../algorithms/MaskBTP-v1.html#algm-maskbtp"><span class="std std-ref">MaskBTP</span></a>) prior to integration to denote detector edges.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD</span></a> now allows ellipsoidal shapes to be manually defined for the PeakRadius and Background radii options.</p></li>
<li><p>The <a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD</span></a> input dialog has been reorganised to present the many input properties in a more user-friendly manner.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegrateEllipsoids-v3.html#algm-integrateellipsoids"><span class="std std-ref">IntegrateEllipsoids</span></a> calculates intensity for satellite peaks with fractional HKL.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SCDCalibratePanels-v2.html#algm-scdcalibratepanels-v2"><span class="std std-ref">SCDCalibratePanels</span></a> can optionally update the attached UB matrix with given lattice constants.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FilterPeaks-v1.html#algm-filterpeaks"><span class="std std-ref">FilterPeaks</span></a> can select banks in addition to filtering by values.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FindPeaksMD-v1.html#algm-findpeaksmd"><span class="std std-ref">FindPeaksMD</span></a> has been modified to make use of the multiple goniometers add to <a class="reference internal" href="../../api/python/mantid/api/Run.html#mantid-api-run"><span class="std std-ref">Run</span></a> and <cite>goniometerIndex</cite> add to MDEvents.</p></li>
<li><p><a class="reference internal" href="../../algorithms/HB3APredictPeaks-v1.html#algm-hb3apredictpeaks"><span class="std std-ref">HB3APredictPeaks</span></a> can now predict satellite peaks for DEMAND data.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MDNorm-v1.html#algm-mdnorm"><span class="std std-ref">MDNorm</span></a> algorithm can now efficiently process background.</p></li>
<li><p>method <code class="docutils literal notranslate"><span class="pre">IPeaksWorkspace.addPeak(V3D,</span> <span class="pre">SpecialCoordinateSystem)</span></code> exposed to the python interface.</p></li>
</ul>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Correctly format FullProf files in <a class="reference internal" href="../../algorithms/SaveReflections-v1.html#algm-savereflections"><span class="std std-ref">SaveReflections</span></a>: there is now a title line and two rows per modulation vector in the header; the multiplicity of a reflection is by default 1.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveReflections-v1.html#algm-savereflections"><span class="std std-ref">SaveReflections</span></a> now determines the parent HKL of a satellite correctly, previously the satellite HKL was rounded.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PredictPeaks-v1.html#algm-predictpeaks"><span class="std std-ref">PredictPeaks</span></a> no longer segfaults when the instrument of the input workspace doesn’t have the sample position set.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SCDCalibratePanels-v2.html#algm-scdcalibratepanels-v2"><span class="std std-ref">SCDCalibratePanels</span></a> no longer returns null calibration outputs.</p></li>
<li><p>Fix failure in <a class="reference internal" href="../../algorithms/HB3AFindPeaks-v1.html#algm-hb3afindpeaks"><span class="std std-ref">HB3AFindPeaks</span></a> when switching to crystallographic convention.</p></li>
<li><p>Make <a class="reference internal" href="../../algorithms/ConvertWANDSCDtoQ-v1.html#algm-convertwandscdtoq"><span class="std std-ref">ConvertWANDSCDtoQ</span></a> aware of k convention.</p></li>
<li><p>Output of <a class="reference internal" href="../../algorithms/ConvertQtoHKLMDHisto-v1.html#algm-convertqtohklmdhisto"><span class="std std-ref">ConvertQtoHKLMDHisto</span></a> now accommodates zoom in slice viewer, as a result this algorithm will now drop the connection to the original workspace</p></li>
</ul>
<p><a class="reference internal" href="index.html#v6-1-0"><span class="std std-ref">Release 6.1.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 6.1.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 6.1.0 ...</span>
    </a>
  </li>
  <li>
    <a href="direct_geometry.html" title="Next Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Direct Geomet... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>