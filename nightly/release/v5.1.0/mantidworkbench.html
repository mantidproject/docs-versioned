<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Workbench Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MuSR Changes" href="muon.html" />
    <link rel="prev" title="The Final Release of MantidPlot" href="mantidplot.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 5.1.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Workbench Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="workbench-changes">
<h1>Workbench Changes<a class="headerlink" href="#workbench-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#new-and-improved" id="id2">New and Improved</a></p>
<ul>
<li><p><a class="reference internal" href="#interfaces" id="id3">Interfaces</a></p></li>
<li><p><a class="reference internal" href="#sample-logs-dialog" id="id4">Sample Logs Dialog</a></p></li>
<li><p><a class="reference internal" href="#plotting" id="id5">Plotting</a></p></li>
<li><p><a class="reference internal" href="#user-settings" id="id6">User Settings</a></p></li>
<li><p><a class="reference internal" href="#instrument-viewer" id="id7">Instrument Viewer</a></p></li>
<li><p><a class="reference internal" href="#sliceviewer" id="id8">Sliceviewer</a></p></li>
<li><p><a class="reference internal" href="#launch" id="id9">Launch</a></p></li>
<li><p><a class="reference internal" href="#scripting" id="id10">Scripting</a></p></li>
<li><p><a class="reference internal" href="#misc" id="id11">Misc</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bugfixes" id="id12">Bugfixes</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id13">General</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id14">Plotting</a></p>
<ul>
<li><p><a class="reference internal" href="#colorfill-plots" id="id15">Colorfill Plots</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fitting" id="id16">Fitting</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="new-and-improved">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">New and Improved</a><a class="headerlink" href="#new-and-improved" title="Permalink to this heading">¶</a></h2>
<figure class="align-right">
<a class="reference internal image-reference" href="../../_images/drill_release.png"><img alt="../../_images/drill_release.png" src="../../_images/drill_release.png" style="width: 550px;" /></a>
</figure>
<section id="interfaces">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Interfaces</a><a class="headerlink" href="#interfaces" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>DrILL interface: Spreadsheet based data processing interface is created for ILL data reduction.
SANS and reflectometry are currently supported. See</strong> <a class="reference internal" href="../../interfaces/ILL/DrILL.html#drill-ref"><span class="std std-ref">DrILL documentation</span></a>
<strong>for more information.</strong></p></li>
<li><p>There is now a Project Saving dialog that allows you to choose between saving <em>all</em> workspaces or <em>only altered</em> workspaces.</p></li>
<li><p>The Sample Transmission Calculator has now been implemented in Workbench.</p></li>
<li><p>There is now a Help &gt; About screen that pops up automatically on start-up to provide links to the release notes and training courses, and prompts you to set some important settings such as Facility, Instrument and accept usage tracking. You can choose to hide it until the next release.</p></li>
<li><p>Added File &gt; Recently Closed Scripts sub-menu to workbench, displaying recently closed scripts in descending order.</p></li>
</ul>
</section>
<section id="sample-logs-dialog">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Sample Logs Dialog</a><a class="headerlink" href="#sample-logs-dialog" title="Permalink to this heading">¶</a></h3>
<figure class="align-right">
<img alt="../../_images/wb_invalid_log_shading.png" src="../../_images/wb_invalid_log_shading.png" />
</figure>
<ul class="simple">
<li><p><strong>Logs containing invalid data (indicated by NeXus log alarm states) are now shaded in red, and a tool tip informs how many values are invalid.</strong></p></li>
<li><p>The complete log data can be viewed, as well as filtered data that only includes values for the current period, the running status, and with invalid values removed.  Click the “Filtered Data” checkbox to swap between them.</p></li>
<li><p>The built-in plot and statistics display will be hidden if there are no suitable logs in the workspace that need it.  This is particularly applicable for some instruments at reactor-based facilities.</p></li>
<li><p>Plots extracted from Sample Logs, by double clicking the plot, can now be converted to a python script, just like other workbench plots.</p></li>
<li><p>Now the arrow keys can be used to move between logs.</p></li>
</ul>
</section>
<section id="plotting">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Plotting</a><a class="headerlink" href="#plotting" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../plotting/3DPlotsHelp.html#d-plots"><span class="std std-ref">3D plots (surface, contour and wireframe)</span></a> <strong>can now be created in Workbench.</strong></p></li>
</ul>
<p>(<a class="reference external" href="../../release/v5.1.0/mantidworkbench-1.py">Source code</a>)</p>
<ul class="simple">
<li><p>The Advanced Plotting menu is now in Workbench. This enables creating surface and contour plots of three or more workspaces, and choosing which log value to plot against.</p></li>
</ul>
<p><strong>Toolbar Updates</strong></p>
<figure class="align-default">
<img alt="../../_images/PlotToolbar.png" src="../../_images/PlotToolbar.png" />
</figure>
<ul class="simple">
<li><p>A Copy (image) to Clipboard button has been added to the plot toolbar.</p></li>
<li><p>A Help button leading to appropriate documentation (e.g. Colorfill, Tiled …) has been added to the plot toolbar.</p></li>
<li><p>Right-clicking a plot without dragging while using the zoom tool now resets the axes limits.</p></li>
</ul>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/EditLegend.png"><img alt="../../_images/EditLegend.png" src="../../_images/EditLegend.png" style="width: 300px;" /></a>
</figure>
<ul class="simple">
<li><p><strong>Legends in 1D plots are now editable in-situ.</strong></p></li>
<li><p>On tiled plots, the axes limits and labels can be set simultaneously for all subplots with the <cite>Apply to all</cite> button in figure options.</p></li>
<li><p>Tiled plots are now reloaded correctly by project recovery.</p></li>
</ul>
<figure class="align-right">
<a class="reference internal image-reference" href="../../_images/MinorTicks.png"><img alt="../../_images/MinorTicks.png" src="../../_images/MinorTicks.png" style="width: 300px;" /></a>
</figure>
<ul class="simple">
<li><p>The x-axis tick labels on colorfill plots are now horizontal rather than diagonal.</p></li>
<li><p>The colorbar on colorfill plots is now labelled, and the label can be set in the figure options.</p></li>
<li><p>Monitor spectra are no longer displayed on bin and colorfill plots.</p></li>
<li><p>Colorfill plots of very large workspaces now take less than 10 seconds to plot.</p></li>
</ul>
<figure class="align-right">
<a class="reference internal image-reference" href="../../_images/Plot1DSelectionDialog5-1.png"><img alt="../../_images/Plot1DSelectionDialog5-1.png" src="../../_images/Plot1DSelectionDialog5-1.png" style="width: 300px;" /></a>
</figure>
<ul class="simple">
<li><p><strong>Minor ticks and minor gridlines on plots can be enabled in Figure Options.</strong></p></li>
<li><p>Script generation now supports colorfill plots and basic fitting.</p></li>
<li><p>The axis tick markers on a plot can be switched between Log and decimal formats independently of the axes scale, from axis double-click menus.</p></li>
<li><p>In Figure Options &gt; Curves tab, the drop-down list of curves now follows the same order as the plot legend.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SavePlot1D-v1.html#algm-saveplot1d"><span class="std std-ref">SavePlot1D v1</span></a> can now be executed in Workbench.</p></li>
<li><p><strong>The plot selection dialog now correctly shows the full range of valid spectra to plot, not just the min to max range.</strong></p></li>
<li><p>The canvas (background) color for a plot can now be altered in the figure options.</p></li>
<li><p>When a marker style is chosen in figure options, the face and/or edge color is disabled if they are not applicable. e.g. a plus marker only uses the edge colour, so the face colour is disabled</p></li>
</ul>
<figure class="align-right">
<img alt="../../_images/Save_settings_to_file.png" src="../../_images/Save_settings_to_file.png" />
</figure>
</section>
<section id="user-settings">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">User Settings</a><a class="headerlink" href="#user-settings" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>User settings can now be saved and loaded from a file to enable sharing with others.</strong></p></li>
<li><p>Any changes in the settings menu that require a restart (currently only changing the default font) will be detailed in
a pop-up notification when leaving the settings window.</p></li>
<li><p>The Python Extensions directory setting, to find script to run on launch, is now available in Workbench within Manage User Directories.</p></li>
</ul>
<p><strong>Now you can set the following defaults:</strong></p>
<ul class="simple">
<li><p>Font for plots.</p></li>
<li><p>Legend location.</p></li>
<li><p>Legend text size.</p></li>
<li><p>Minor ticks and minor gridlines on plots can be enabled by default.</p></li>
<li><p>Drawstyle for plot lines.</p></li>
<li><p>Linestyle for plots can now be set to ‘None’.</p></li>
<li><p>Colormap for colorfill plots.</p></li>
</ul>
<figure class="align-right">
<a class="reference internal image-reference" href="../../_images/instrument_view_sector.png"><img alt="../../_images/instrument_view_sector.png" src="../../_images/instrument_view_sector.png" style="width: 400px;" /></a>
</figure>
</section>
<section id="instrument-viewer">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Instrument Viewer</a><a class="headerlink" href="#instrument-viewer" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Added a circular sector shape in the Pick and Mask tab.</strong></p></li>
<li><p>The instrument viewer now ignores non-finite (infinity and NaN) values and should now display workspaces containing those values.
If there are no valid values for that detector the value will appear as invalid (grayed out).
It can also now display negative values in workspaces correctly.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">gray</span></code> and <code class="docutils literal notranslate"><span class="pre">plasma</span></code> colormaps have been added.</p></li>
<li><p>For monochromatic workspaces, the integration bar, the pick widget and the detector spectra mini-plot will be disabled.</p></li>
<li><p>The render tab now has a Reset view button to restore to default projection.</p></li>
<li><p>On the draw tab, the Mask, ROI and Group now work for just a single pixel / tube.</p></li>
<li><p>Instrument view now updates on zoom with a mouse wheel.</p></li>
<li><p>Failing to open for a certain workspace now outputs useful error messages.</p></li>
</ul>
</section>
<section id="sliceviewer">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Sliceviewer</a><a class="headerlink" href="#sliceviewer" title="Permalink to this heading">¶</a></h3>
<p>In this release many improvements have been made to Sliceviewer and are listed <a class="reference internal" href="sliceviewer.html"><span class="doc">separately</span></a>.</p>
</section>
<section id="launch">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Launch</a><a class="headerlink" href="#launch" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>There is a new profiling option in the workbench launch script, allowing for timing of start-up and other internal processes.</p></li>
<li><p>Improved loading of python plugins at start-up on slow disks.</p></li>
<li><p>User data directories are no longer checked at start-up, reducing launch times with slow network drives.</p></li>
</ul>
</section>
<section id="scripting">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Scripting</a><a class="headerlink" href="#scripting" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Code completions are now loaded when the code editor is first changed.</p></li>
<li><p>Variables assigned in python scripts are now cleared when a script is run in its entirety.</p></li>
<li><p>When a running script is aborted, Mantid will automatically attempt to cancel the current algorithm rather than wait for it to complete. In some cases, this can result a lot of time saved!</p></li>
</ul>
</section>
<section id="misc">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Misc</a><a class="headerlink" href="#misc" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added a Clear button to the workspaces toolbox which removes all workspaces from the tree including hidden ones</p></li>
<li><p>The workbench launch scripts have been replaced by an executable on macOS &amp; Windows. On Windows this will stop virus scanners
flagging the old <code class="docutils literal notranslate"><span class="pre">launch_workbench.exe</span></code> as a threat and quarantining it.</p></li>
<li><p>Improved the usability of the fit function and peak selection pop-up menus by allowing the user to immediately search for the desired function and activate autocompletion by pressing “enter” if there is just a single possible function.</p></li>
<li><p>Slow running algorithms will now display an estimated time to completion in their progress bars.</p></li>
<li><p>Algorithm Dialogs with a Combo box (Drop-down list) for workspace selection, are now editable to support searching and autocompletion.</p></li>
<li><p>Added an option to matrix workspaces to export bins and spectra to a table workspace.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TableWorkspaces</span></code> can now have columns containing errors linked to corresponding columns containing values, using the <code class="docutils literal notranslate"><span class="pre">setLinkedYCol(errColumn,</span> <span class="pre">dataColumn)</span></code>.</p></li>
<li><p>Use Jemalloc for memory allocation on Linux so memory can be released to the system.</p></li>
</ul>
</section>
</section>
<section id="bugfixes">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this heading">¶</a></h2>
<section id="general">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">General</a><a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Workbench launch is no longer blocked when the Process ID assigned by project recovery has been reassigned to another programme.</p></li>
<li><p>Improved the handling of <code class="docutils literal notranslate"><span class="pre">WorkspaceSingleValue</span></code> workspaces in workbench. This fixes a crash which occurred when interacting with workspaces of this type.</p></li>
<li><p>Workbench will now spot if it is about to create the settings window off the available screen, and will move it so it is all visible. This is important as it is a modal dialog and could freeze the application in an unrecoverable way before.</p></li>
<li><p>Scripts no longer run slower if a plot is open.</p></li>
<li><p>The names of new tabs in the script editor now correctly incrementing on KDE display environments (i.e. KUbuntu).</p></li>
<li><p>Selecting spectra to plot that are out of range for the workspace is handled safely.</p></li>
<li><p>Opening the plot options for a sample logs plot now works.</p></li>
<li><p>Masking a workspace while its data table is displayed now works as expected.</p></li>
<li><p>There is now a warning if <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">&gt;</span> <span class="pre">Generate</span> <span class="pre">Recovery</span> <span class="pre">Script</span></code> is executed with no workspaces present.</p></li>
</ul>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Plotting</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">plt.show()</span></code> now shows the most recently created figure.</p></li>
<li><p>The logs from a multi-dimensional workspace (that combines several different original workspaces) can be successfully plotted.</p></li>
<li><p>Opening figure options on a plot with an empty legend now works.</p></li>
<li><p>The plot setting for default axis scale now applies to the correct axis.</p></li>
<li><p>Overplotting no longer resets the axes scales.</p></li>
<li><p>Altering a line/curve no longer changes the order of curves in the legend.</p></li>
<li><p>The double-click axis menus now work as expected for tiled plots.</p></li>
<li><p>3D Surface plots of data with monitors now have the correct initial colorbar limits.</p></li>
<li><p>The plot toolbar now shows the correct toolbar buttons for 3D plots.</p></li>
<li><p>Reduce log level of project recovery when it fails to save a plot correctly, from warning to debug, to avoid excess messages in the console.</p></li>
</ul>
<section id="colorfill-plots">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">Colorfill Plots</a><a class="headerlink" href="#colorfill-plots" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>The scale of the color bars on colorfill plots of ragged workspaces now uses the maximum and minimum values of the data.</p></li>
<li><p>Being able to zoom in and out of colorbars on colorfill plots has been disabled.</p></li>
<li><p>Deleting a workspace now correctly removes waterfall plots with a fill and colorfill plots.</p></li>
<li><p>Performing an overplot by dragging workspaces onto colorfill plots now correctly replaces the workspace.</p></li>
<li><p>Gridlines no longer appear on the colorbar of colorfill plots.</p></li>
<li><p>The colorfill plot interpolation now updates correctly in figure options.</p></li>
<li><p>The methods for changing the axis scale on colorfill plots (from the context menu or figure options) has been harmonised.</p></li>
<li><p>Changing the figure options on tiled colorfill plots now applies to all the plots if there is only one colorbar.</p></li>
<li><p>Colorfill plots now correctly use the workspace name as the plot title.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">image</span></code> in figure options now contains each image, rather than each spectrum, for colorfil plots of workspaces with a numeric vertical axis.</p></li>
<li><p>Monitor only spectra can be plotted as a colorfill successfuly.</p></li>
<li><p>The y axis labels will now appear in the correct order if imshow is called from a script with origin=upper.</p></li>
<li><p>Fixed a bug with colorfill plot script generation for distribution workspaces.</p></li>
<li><p>Changing the normalisation and scale on colorfill plots now safely handles negative limits.</p></li>
</ul>
</section>
</section>
<section id="fitting">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Fitting</a><a class="headerlink" href="#fitting" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Defining a new Fit Function after deleting a plot is now handled safely.</p></li>
<li><p>The plot guess of the <code class="docutils literal notranslate"><span class="pre">Bk2BkExpConvPV</span></code> is now correct.</p></li>
<li><p>A sign error has been corrected in the <code class="docutils literal notranslate"><span class="pre">Bk2Bk2ExpConvPV</span></code> function.</p></li>
<li><p>The peak cursor now maintains its cross shape when ready to add a peak.</p></li>
<li><p>The fit property browser can be resized now a workaround for a QT bug has been implemented.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v5-1-0"><span class="std std-ref">Release 5.1.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="mantidplot.html" title="Previous Chapter: The Final Release of MantidPlot"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; The Final Rel...</span>
    </a>
  </li>
  <li>
    <a href="muon.html" title="Next Chapter: MuSR Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MuSR Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>