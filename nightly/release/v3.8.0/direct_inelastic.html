<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Direct Inelastic Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Inelastic Changes" href="indirect_inelastic.html" />
    <link rel="prev" title="UI &amp; Usability Changes" href="ui.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.8.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Direct Inelastic Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#improvements" id="id1">Improvements</a></p></li>
<li><p><a class="reference internal" href="#pychop" id="id2">PyChop</a></p></li>
<li><p><a class="reference internal" href="#crystal-field" id="id3">Crystal Field</a></p></li>
<li><p><a class="reference internal" href="#mlz-toftof" id="id4">MLZ &amp; TOFTOF</a></p></li>
</ul>
</nav>
<section id="improvements">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/MDNormDirectSC-v1.html#algm-mdnormdirectsc"><span class="std std-ref">MDNormDirectSC</span></a> has an option to skip safety checks. This improves the speed when acting on workspace groups.</p></li>
<li><p>The <a class="reference internal" href="../../algorithms/ExportSpectraMask-v1.html#algm-exportspectramask"><span class="std std-ref">ExportSpectraMask</span></a> algorithm was added to Mantid, along with documentation, unit tests and a Python GUI.
The algorithm exports a list of masked spectra and the list can be saved as a single ISIS <em>.msk</em> file.
The export mask procedure is often used by instrument scientists in ISIS, and they had to initialize qtiGenie to do this operation before these changes.</p></li>
<li><p><a class="reference internal" href="../../algorithms/GetEiMonDet-v3.html#algm-geteimondet"><span class="std std-ref">GetEiMonDet</span></a> has had a complete rewrite. Version 2 utilises the elastic peak position data generated by <a class="reference internal" href="../../algorithms/FindEPP-v2.html#algm-findepp"><span class="std std-ref">FindEPP</span></a>. The detectors of interest are specified by their indices instead of their distance from the sample. The revised algorithm is able to deal with cases where neutrons arrive at the detectors in a later time frame.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MaskDetectors-v1.html#algm-maskdetectors"><span class="std std-ref">MaskDetectors</span></a> has been modified to work on grouped spectra. If a detector of the workspace is masked then the relevant spectra of the target workspace become masked(zero). Masks defined by <em>.xml</em> files, produced by <a class="reference internal" href="../../algorithms/SaveMask-v1.html#algm-savemask"><span class="std std-ref">SaveMask</span></a> algorithm,  can be applied to workspaces containing mapped spectra that has been obtained from ISIS instruments.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadMask-v1.html#algm-loadmask"><span class="std std-ref">LoadMask</span></a> was modified to accept a spectra mask and a spectra-detector map.
This allows the use of old legacy <em>.msk</em> files to generate a masked workspace, use old spectra masks on workspaces with different groupings and spectra-detector maps.</p></li>
<li><p>The algorithm <a class="reference internal" href="../../algorithms/MagFormFactorCorrection-v1.html#algm-magformfactorcorrection"><span class="std std-ref">MagFormFactorCorrection</span></a> will scale an input workspace by 1/<span class="math notranslate nohighlight">\(|F(Q)|^2\)</span>, where <span class="math notranslate nohighlight">\(F(Q)\)</span> is the magnetic form factor for a specified magnetic ion.</p></li>
</ul>
</section>
<section id="pychop">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">PyChop</a><a class="headerlink" href="#pychop" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../interfaces/direct/PyChop.html#pychop"><span class="std std-ref">PyChop</span></a> has been fixed and updated with a new Python commandline interface and a new GUI. Flux and resolution calculations for LET are now fully integrated into a single interface, and there is also support for calculating the resolution, flux and allowed <span class="math notranslate nohighlight">\(E_i\)</span> in multi-rep mode.</p></li>
</ul>
</section>
<section id="crystal-field">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Crystal Field</a><a class="headerlink" href="#crystal-field" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>A fitting function was added (<a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldMultiSpectrum.html#func-crystalfieldmultispectrum"><span class="std std-ref">CrystalFieldMultiSpectrum</span></a>) that fits crystal field parameters to multiple spectra simultaneously.</p></li>
<li><p>A preliminary python interface to the Crystal Field functionality was added (<a class="reference internal" href="../../interfaces/direct/Crystal%20Field%20Python%20Interface.html#crystal-field-python-interface"><span class="std std-ref">Crystal Field Python Interface</span></a>). It includes classes for defining a problem, performing a fit and basic plotting facilities.</p></li>
</ul>
</section>
<section id="mlz-toftof">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">MLZ &amp; TOFTOF</a><a class="headerlink" href="#mlz-toftof" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>A workflow gui for TOFTOF data reduction (#17075).
The gui is accessible through the <code class="docutils literal notranslate"><span class="pre">Interfaces</span> <span class="pre">/</span> <span class="pre">Direct</span> <span class="pre">/</span> <span class="pre">DGS</span> <span class="pre">Reduction</span></code> menu.
The first time the user is presented with a choice of facilities and instruments -
choose MLZ / TOFTOF. The choice can be changed later from (any) reduction gui by
<code class="docutils literal notranslate"><span class="pre">Tools</span> <span class="pre">/</span> <span class="pre">Change</span> <span class="pre">instrument</span> <span class="pre">...</span></code>.</p></li>
</ul>
<p><a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.8%22+is%3Amerged+label%3A%22Component%3A+Direct+Inelastic%22">Full list of changes on GitHub</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ui.html" title="Previous Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; UI & Usabilit...</span>
    </a>
  </li>
  <li>
    <a href="indirect_inelastic.html" title="Next Chapter: Indirect Inelastic Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Inel... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>