<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>MaskDetectors v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MaskDetectorsIf v1" href="MaskDetectorsIf-v1.html" />
    <link rel="prev" title="MaskBinsIf v1" href="MaskBinsIf-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">MaskDetectors v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="maskdetectors-v1">
<span id="algm-maskdetectors"></span><span id="algm-maskdetectors-v1"></span><h1>MaskDetectors v1<a class="headerlink" href="#maskdetectors-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/MaskDetectors-v1_dlg.png"><img alt="../_images/MaskDetectors-v1_dlg.png" class="screenshot" src="../_images/MaskDetectors-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>MaskDetectors</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#introduction" id="id5">Introduction</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#mask-detectors-according-to-instrument-masking-workspace" id="id7">Mask Detectors According To Instrument &amp; Masking Workspace</a></p></li>
<li><p><a class="reference internal" href="#definition-of-mask" id="id8">Definition of Mask</a></p></li>
<li><p><a class="reference internal" href="#about-input-parameters" id="id9">About Input Parameters</a></p></li>
<li><p><a class="reference internal" href="#rules" id="id10">Rules</a></p></li>
<li><p><a class="reference internal" href="#operations-involved-in-masking" id="id11">Operations Involved in Masking</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id12">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id13">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>An algorithm to mask a detector, or set of detectors, as not to be used. The workspace spectra associated with those detectors are zeroed.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="MaskDetectorsInShape-v1.html#algm-maskdetectorsinshape"><span class="std std-ref">MaskDetectorsInShape</span></a>, <a class="reference internal" href="MaskDetectorsIf-v1.html#algm-maskdetectorsif"><span class="std std-ref">MaskDetectorsIf</span></a>, <a class="reference internal" href="MaskSpectra-v1.html#algm-maskspectra"><span class="std std-ref">MaskSpectra</span></a>, <a class="reference internal" href="MaskBTP-v1.html#algm-maskbtp"><span class="std std-ref">MaskBTP</span></a>, <a class="reference internal" href="MaskAngle-v1.html#algm-maskangle"><span class="std std-ref">MaskAngle</span></a>, <a class="reference internal" href="InvertMask-v1.html#algm-invertmask"><span class="std std-ref">InvertMask</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace</p></td>
<td><p>InOut</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the input and output workspace on which to perform the algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p>SpectraList</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>A list of spectra to mask</p></td>
</tr>
<tr class="row-even"><td><p>DetectorList</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>A list of detector ID’s to mask</p></td>
</tr>
<tr class="row-odd"><td><p>WorkspaceIndexList</p></td>
<td><p>Input</p></td>
<td><p>unsigned int list</p></td>
<td></td>
<td><p>A list of the workspace indices to mask</p></td>
</tr>
<tr class="row-even"><td><p>MaskedWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>If given but not as a SpecialWorkspace2D, the masking from this workspace will be copied. If given as a SpecialWorkspace2D, the masking is read from its Y values.</p></td>
</tr>
<tr class="row-odd"><td><p>ForceInstrumentMasking</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Works when ‘MaskedWorkspace’ is provided and forces to use spectra-detector mapping even in case when number of spectra in ‘Workspace’ and ‘MaskedWorkspace’ are equal</p></td>
</tr>
<tr class="row-even"><td><p>StartWorkspaceIndex</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>If other masks fields are provided, it’s the first index of the target workspace to be allowed to be masked from by these masks, if not, its the first index of the target workspace to mask. Default value is 0 if other masking is present or ignored if not.</p></td>
</tr>
<tr class="row-odd"><td><p>EndWorkspaceIndex</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>If other masks are provided, it’s the last index of the target workspace allowed to be masked to by these masks, if not, its the last index of the target workspace to mask. Default is number of histograms in target workspace if other masks are present or ignored if not.</p></td>
</tr>
<tr class="row-even"><td><p>ComponentList</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>A list names of components to mask</p></td>
</tr>
</tbody>
</table>
</section>
<section id="introduction">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>To understand the algorithms options, user should clearly understand the difference between <em>WorkspaceIndex</em>
– the numbers, specified in <em>WorkspaceIndexList</em> and <em>StartWorkspacIndex</em>, <em>EndWorkspaceIndex</em> properties,
the <em>Spectra Number</em> or according to other terminology <em>Spectra ID</em> – values of the <strong>SpectraList</strong> property and <em>Detector ID</em> – the numbers to provide for
<em>DetectorList</em> property.</p>
<p>The <em>WorkspaceIndex</em> is the number a spectrum has in a workspace, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sp</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>always returns first spectra present in the workspace.</p>
<p>The <em>Spectra Number</em> or  <em>spectra ID</em> mean the number, assigned to a spectrum. This number is often equal to <em>WorkspaceIndex+1</em>, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">())</span>
</pre></div>
</div>
<p>from the sample above will often print 1 but not always. The simplest case when this
number is different is when you load a second half of a workspace, when the first spectrum number still is <strong>NumTotalSpectraInWorkspace/2+1</strong>,
while <em>WorkspaceIndex</em> of this spectra becomes 0, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sp</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">())</span>
</pre></div>
</div>
<p>prints number equal to <strong>NumTotalSpectraInWorkspace/2+1</strong>. There are other ways to assign a random number to a spectrum.</p>
<p>And finally, the <em>detector ID</em> is the number assigned to a detector in an instrument definition file. Sometimes,
a  first detector corresponds to the first spectra of a workspace, but it is not in any way certain. For example
the code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="s1">&#39;MARI&#39;</span><span class="p">,</span><span class="s1">&#39;-0.5,0.5,0.5&#39;</span><span class="p">)</span>
<span class="n">sp</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">(),</span> <span class="n">sp</span><span class="o">.</span><span class="n">getDetectorIDs</span><span class="p">()))</span>
</pre></div>
</div>
<p>Will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="nb">set</span><span class="p">(</span><span class="mi">1102</span><span class="p">)</span>
</pre></div>
</div>
<p>but any <em>ISIS MARI</em> workspace obtained from experiment will produce different sequence, e.g. something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="nb">set</span><span class="p">(</span><span class="mi">4101</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>The algorithm zeroes the data in the spectra of the input workspace
defined as masked. The detectors corresponding to the masked spectra are also
flagged as masked (can be verified by the <cite>IDetector::isMasked()</cite> method).</p>
<p>The <em>Workspace</em> property specifies the workspace to mask while the other properties
provide various ways to define the spectra and detectors to mask.</p>
<p>If <em>Workspace</em> is PeaksWorkspace, only the detectors listed are masked and
the mask must be specified by a <em>DetectorList</em> or <em>MaskedWorkspace</em>.</p>
<p>All but the <em>Workspace</em> property are optional and at least one of them must be
set. If several are set, the combination of them is used.</p>
<p>The set of spectra and detectors to be masked can be given as a list of either
spectrum numbers, detector IDs, workspace indices, component names, or as a
workspace index range.</p>
<p>The workspace index range (properties <em>StartWorkspacIndex</em> and <em>EndWorkspaceIndex</em>)
changes its action depending on other masking properties being provided, namely:</p>
<ul class="simple">
<li><p>If a workspace index range is provided alone, all spectra within this range are masked.</p></li>
<li><p>If a workspace index range is provided in combination with any other masking
property, only the indexes in this range are masked.</p></li>
</ul>
<section id="mask-detectors-according-to-instrument-masking-workspace">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Mask Detectors According To Instrument &amp; Masking Workspace</a><a class="headerlink" href="#mask-detectors-according-to-instrument-masking-workspace" title="Permalink to this heading">¶</a></h3>
<p>If <em>MaskedWorkspace</em> is provided, both <em>MaskedWorkspace</em> and
<em>Workspace</em> mask have the same instrument.</p>
<p>The algorithm works differently depending on <em>MaskedWorkspace</em> property
being a <em>Mask Workspace</em> (SpecialWorkspace2D object) or
<a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">Matrix Workspace</span></a>.</p>
<p>If source <em>MaskedWorkspace</em> is a <em>Mask Workspace</em> and the number of spectra in the source
<em>MaskedWorkspace</em> is equal to number of spectra in the target <em>Workspace</em>, the
spectra numbers of the <em>MaskedWorkspace</em> are used as source
of masking information for the target workspace.</p>
<p>If the numbers of spectra in <em>Workspace</em> and <em>MaskedWorkspace</em> are different,
the algorithm extracts list of masked detector IDS from source workspace and
uses them to mask the corresponding spectra of the target workspace.</p>
<p>Setting property <em>ForceInstrumentMasking</em> to true forces algorithm
to always use <em>MaskedWorkspace</em> detector IDs as the source of the masking
information. If a detector is masked, then the corresponding detector
will be masked in the input <em>Workspace</em>.</p>
<p>If the input <em>MaskedWorkspace</em> is a <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">Matrix Workspace</span></a>
and the number of spectra in the source <em>MaskedWorkspace</em> is equal to the number
of spectra in the target <em>Workspace</em>, then workspace indices of the source are
used.</p>
<p>If the numbers of spectra in <em>Workspace</em> and <em>MaskedWorkspace</em> are different,
the algorithm extracts list of detector IDS from source workspace and uses them
to mask the corresponding spectra of the target workspace.</p>
</section>
<section id="definition-of-mask">
<span id="maskdetectors-def-of-mask"></span><h3><a class="toc-backref" href="#id8" role="doc-backlink">Definition of Mask</a><a class="headerlink" href="#definition-of-mask" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>If a pixel is masked, it means that the data from this pixel won’t be
used. In the masking workspace the corresponding value
is 1.</p></li>
<li><p>If a pixel is NOT masked, it means that the data from this pixel will
be used. In the masking workspace the corresponding value
is 0.</p></li>
<li><p>If masked workspace with a masked spectrum is applied to a target workspace with grouped detectors,
and only one detector in the group of target workspace is masked, all target spectra,
containing this detector become masked.</p></li>
</ul>
</section>
<section id="about-input-parameters">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">About Input Parameters</a><a class="headerlink" href="#about-input-parameters" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="#algm-maskdetectors"><span class="std std-ref">MaskDetectors v1</span></a> supports various format of input to
mask detectors, including</p>
<ul class="simple">
<li><p>Workspace indices</p></li>
<li><p>Spectrum numbers</p></li>
<li><p>Detector IDs</p></li>
<li><p>Instrument components</p></li>
<li><p>MaskWorkspace</p></li>
<li><p>General <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> other than
MaskWorkspace (In this case, the mask will be
extracted from this workspace)</p></li>
<li><p>Workspace index range specified by setting either <em>StartWorkspacIndex</em> or <em>EndWorkspaceIndex</em> to non-default value.
<strong>Note:</strong> Setting <em>EndWorkspaceIndex</em> to a value exceeding the number of histograms in the target workspace would mask
the entire workspace.</p></li>
</ul>
</section>
<section id="rules">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Rules</a><a class="headerlink" href="#rules" title="Permalink to this heading">¶</a></h3>
<p>Here are the rules for input information for masking</p>
<ol class="arabic simple">
<li><p>At least one of the masking inputs must be specified.</p></li>
<li><p>Workspace indices and Spectra cannot be given at the same time.</p></li>
<li><p>MaskWorkspace  and general <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> cannot be given at the same time.</p></li>
<li><p>When a general <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> is specified, then all detectors in a spectrum are treated as masked if the effective detector of that spectrum is masked.</p></li>
<li><p>The detectors found recursively in given instrument components are added to the list of detectors to mask. If multiple components with the same name exist, the first component found is masked.</p></li>
<li><p>The masks specified from</p>
<ol class="loweralpha simple">
<li><p>workspace indices/spectra</p></li>
<li><p>detectors</p></li>
<li><p>MaskWorkspace /general <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> will be combined by the <em>plus</em> operation.</p></li>
</ol>
</li>
</ol>
</section>
<section id="operations-involved-in-masking">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Operations Involved in Masking</a><a class="headerlink" href="#operations-involved-in-masking" title="Permalink to this heading">¶</a></h3>
<p>There are 2 operations to mask a detector and thus spectrum related</p>
<ol class="arabic simple">
<li><p>Set the detector in workspace’s instrument’s <em>parameter map</em> to <em>masked</em>.</p></li>
<li><p>Zero the data and clear the events associated with the spectrum with detectors that are masked.</p></li>
</ol>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example 1: specifying spectrum numbers</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Create a workspace containing some data.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask two detectors by specifying numbers 1 and 3</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">SpectraList</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="c1"># Check that spectra with spectrum numbers 1 and 3 are masked</span>

<span class="c1"># Get the 1st spectrum in the workspace</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">detid</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">getDetectorIDs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Spectrum number is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector of this spectrum is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">detid</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All counts in the spectrum are 0:    </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span> <span class="n">y</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="p">)))</span>

<span class="c1"># Get the 2nd spectrum in the workspace</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">detid</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">getDetectorIDs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Spectrum number is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector of this spectrum is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">detid</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All counts in the spectrum are 0:    </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span> <span class="n">y</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="p">)))</span>

<span class="c1"># Get the 3rd spectrum in the workspace</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">detid</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">getDetectorIDs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Spectrum number is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector of this spectrum is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">detid</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All counts in the spectrum are 0:    </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span> <span class="n">y</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="p">)))</span>

<span class="c1"># Get the 4th spectrum in the workspace</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getSpectrum</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">detid</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">getDetectorIDs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Spectrum number is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spec</span><span class="o">.</span><span class="n">getSpectrumNo</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector of this spectrum is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">detid</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All counts in the spectrum are 0:    </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span> <span class="n">y</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Spectrum number is 1
Detector of this spectrum is masked: True
All counts in the spectrum are 0:    True
Spectrum number is 2
Detector of this spectrum is masked: False
All counts in the spectrum are 0:    False
Spectrum number is 3
Detector of this spectrum is masked: True
All counts in the spectrum are 0:    True
Spectrum number is 4
Detector of this spectrum is masked: False
All counts in the spectrum are 0:    False
</pre></div>
</div>
<p><strong>Example 2: specifying detector IDs</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a workspace containing some data.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask two detectors by specifying detector IDs 101 and 103</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">DetectorList</span><span class="o">=</span><span class="p">[</span><span class="mi">101</span><span class="p">,</span><span class="mi">103</span><span class="p">])</span>

<span class="c1"># Check that spectra with spectrum numbers 1 and 3 are masked</span>

<span class="c1"># Check the 1st detector</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>

<span class="c1"># Check the 2nd detector</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">103</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>

<span class="c1"># Check some other detectors</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">105</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Detector  101  is masked: True
Detector  103  is masked: True
Detector  100  is masked: False
Detector  102  is masked: False
Detector  105  is masked: False
</pre></div>
</div>
<p><strong>Example 3: specifying workspace indices</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a workspace containing some data.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask two detectors by specifying workspace indices 0 and 2</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">WorkspaceIndexList</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># Check that spectra with workspace indices 0 and 2 are masked</span>

<span class="c1"># Check the 1st spectrum</span>
<span class="n">workspaceIndex</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span> <span class="n">workspaceIndex</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector in spectrum with workspace index  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">workspaceIndex</span><span class="p">,</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>

<span class="c1"># Check the 2nd spectrum</span>
<span class="n">workspaceIndex</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span> <span class="n">workspaceIndex</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector in spectrum with workspace index  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">workspaceIndex</span><span class="p">,</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>

<span class="c1"># Check some other spectra</span>
<span class="n">workspaceIndex</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span> <span class="n">workspaceIndex</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector in spectrum with workspace index  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">workspaceIndex</span><span class="p">,</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">workspaceIndex</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span> <span class="n">workspaceIndex</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector in spectrum with workspace index  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">workspaceIndex</span><span class="p">,</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">workspaceIndex</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span> <span class="n">workspaceIndex</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector in spectrum with workspace index  </span><span class="si">{}</span><span class="s1">  is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">workspaceIndex</span><span class="p">,</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Detector in spectrum with workspace index  0  is masked: True
Detector in spectrum with workspace index  2  is masked: True
Detector in spectrum with workspace index  1  is masked: False
Detector in spectrum with workspace index  3  is masked: False
Detector in spectrum with workspace index  4  is masked: False
</pre></div>
</div>
<p><strong>Example 4: specifying instrument components</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a workspace containing some data.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask the column of detectors named &#39;bank1(x=3)&#39; in bank1, and bank2 entirely.</span>
<span class="c1"># Unfortunately, individual detectors cannot be masked this way in the</span>
<span class="c1"># workspace created by CreateSampleWorkspace since their</span>
<span class="c1"># names contain a comma &#39;,&#39; which breaks the parsing of the component list.</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">ComponentList</span><span class="o">=</span><span class="s1">&#39;bank1/bank1(x=3), bank2&#39;</span><span class="p">)</span>


<span class="c1"># Define a helper function.</span>
<span class="k">def</span> <span class="nf">checkMasked</span><span class="p">(</span><span class="n">detsBegin</span><span class="p">,</span> <span class="n">detsEnd</span><span class="p">):</span>
    <span class="n">allMasked</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">detsBegin</span><span class="p">,</span> <span class="n">detsEnd</span><span class="p">):</span>
        <span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">():</span>
            <span class="n">allMasked</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>
    <span class="k">if</span> <span class="n">allMasked</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detectors from </span><span class="si">{0}</span><span class="s1"> to </span><span class="si">{1}</span><span class="s1"> are masked.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">detsBegin</span><span class="p">,</span> <span class="n">detsEnd</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Some detectors were unmasked.&#39;</span><span class="p">)</span>

<span class="c1"># Check the detector column in bank1</span>
<span class="n">checkMasked</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span>

<span class="c1"># Check bank2</span>
<span class="n">checkMasked</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Detectors from 130 to 140 are masked.
Detectors from 200 to 300 are masked.
</pre></div>
</div>
<p><strong>Example 5: specifying a masking workspace</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a masking workspace</span>

<span class="c1"># Create a intermediate workspace to help create the masking workspace</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask two detectors</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="n">WorkspaceIndexList</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="c1"># Extract created mask into specialised masking workspace</span>
<span class="n">masking_ws</span><span class="p">,</span><span class="n">dummy</span> <span class="o">=</span> <span class="n">ExtractMask</span><span class="p">(</span> <span class="n">tmp</span> <span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A masking workspace has </span><span class="si">{}</span><span class="s1"> spectrum&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">masking_ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unmasked spectrum, value = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">masking_ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Masked spectrum,   value = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">masking_ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unmasked spectrum, value = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">masking_ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Masked spectrum,   value = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">masking_ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">3</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unmasked spectrum, value = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">masking_ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">4</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Create a data workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask it using the mask in masking_ws</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MaskedWorkspace</span><span class="o">=</span><span class="n">masking_ws</span><span class="p">)</span>

<span class="c1"># Check masking of first 5 detectors</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A masking workspace has 1 spectrum
Unmasked spectrum, value = 0.0
Masked spectrum,   value = 1.0
Unmasked spectrum, value = 0.0
Masked spectrum,   value = 1.0
Unmasked spectrum, value = 0.0

Detector 100 is masked: False
Detector 101 is masked: True
Detector 102 is masked: False
Detector 103 is masked: True
Detector 104 is masked: False
</pre></div>
</div>
<p><strong>Example 6: specifying a masking range</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a data workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask 3 detectors using the masking range</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">StartWorkspaceIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">EndWorkspaceIndex</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Check masking of first 6 detectors</span>
<span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span>
  <span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Detector 100 is masked: False
Detector 101 is masked: False
Detector 102 is masked: True
Detector 103 is masked: True
Detector 104 is masked: True
Detector 105 is masked: False
</pre></div>
</div>
<p><strong>Example 7: constraining the masking range</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a masking workspace</span>

<span class="c1"># Create a intermediate workspace to help create the masking workspace</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask four detectors:</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="n">StartWorkspaceIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">EndWorkspaceIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># Extract created mask into specialised masking workspace</span>
<span class="n">masking_ws</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">ExtractMask</span><span class="p">(</span> <span class="n">tmp</span> <span class="p">)</span>

<span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">):</span>
  <span class="n">val</span> <span class="o">=</span> <span class="n">masking_ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="n">ind</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">if</span> <span class="n">val</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unmasked spectrum, value= </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
  <span class="k">else</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Masked spectrum,   value= </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Create a data workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># Mask it using the mask in masking_ws constraining masking range:</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MaskedWorkspace</span><span class="o">=</span><span class="n">masking_ws</span><span class="p">,</span><span class="n">StartWorkspaceIndex</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">EndWorkspaceIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Check masking of first 7 detectors</span>
<span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">):</span>
  <span class="n">det</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detector </span><span class="si">{}</span><span class="s1"> is masked: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">det</span><span class="o">.</span><span class="n">getID</span><span class="p">(),</span> <span class="n">det</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Masked spectrum,   value= 0.0
Masked spectrum,   value= 0.0
Unmasked spectrum, value= 1.0
Unmasked spectrum, value= 1.0
Unmasked spectrum, value= 1.0
Unmasked spectrum, value= 1.0
Masked spectrum,   value= 0.0

Detector 100 is masked: False
Detector 101 is masked: False
Detector 102 is masked: False
Detector 103 is masked: False
Detector 104 is masked: True
Detector 105 is masked: True
Detector 106 is masked: False
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Transforms/Masking.html">Transforms\Masking</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ec825fbd8c2d754b56329d9056e8016ac6d7b10a/Framework/DataHandling/inc/MantidDataHandling/MaskDetectors.h">MaskDetectors.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ec825fbd8c2d754b56329d9056e8016ac6d7b10a/Framework/DataHandling/src/MaskDetectors.cpp">MaskDetectors.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="MaskBinsIf-v1.html" title="Previous Chapter: MaskBinsIf v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MaskBinsIf v1</span>
    </a>
  </li>
  <li>
    <a href="MaskDetectorsIf-v1.html" title="Next Chapter: MaskDetectorsIf v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MaskDetectorsIf v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>