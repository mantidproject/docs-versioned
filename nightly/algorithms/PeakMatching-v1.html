<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>PeakMatching v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PeaksInRegion v1" href="PeaksInRegion-v1.html" />
    <link rel="prev" title="PeakIntensityVsRadius v1" href="PeakIntensityVsRadius-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">PeakMatching v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="peakmatching-v1">
<span id="algm-peakmatching"></span><span id="algm-peakmatching-v1"></span><h1>PeakMatching v1<a class="headerlink" href="#peakmatching-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/PeakMatching-v1_dlg.png"><img alt="../_images/PeakMatching-v1_dlg.png" class="screenshot" src="../_images/PeakMatching-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>PeakMatching</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#input-table-and-datafile-requirement" id="id6">Input Table and datafile requirement</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id7">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id8">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Matches peaks from table to a database to find probable transitions</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="FitGaussianPeaks-v1.html#algm-fitgaussianpeaks"><span class="std std-ref">FitGaussianPeaks</span></a>, <a class="reference internal" href="FindPeaks-v1.html#algm-findpeaks"><span class="std std-ref">FindPeaks</span></a>, <a class="reference internal" href="FindPeaksAutomatic-v1.html#algm-findpeaksautomatic"><span class="std std-ref">FindPeaksAutomatic</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PeakTable</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Table containing peaks to match to database</p></td>
</tr>
<tr class="row-odd"><td><p>PeakDatabase</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>json file with peak database, if none is given default database will be used. Allowed values: [‘json’]</p></td>
</tr>
<tr class="row-even"><td><p>PeakCentreColumn</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>centre</p></td>
<td><p>Name of column containing centre of peaks</p></td>
</tr>
<tr class="row-odd"><td><p>SigmaColumn</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>sigma</p></td>
<td><p>Name of column containing standard deviation of peaks</p></td>
</tr>
<tr class="row-even"><td><p>AllPeaks</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p>all_matches</p></td>
<td><p>Name of the table containing all of the peak matches</p></td>
</tr>
<tr class="row-odd"><td><p>PrimaryPeaks</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p>primary_matches</p></td>
<td><p>Name of the table containing the primary peak matches</p></td>
</tr>
<tr class="row-even"><td><p>SecondaryPeaks</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p>secondary_matches</p></td>
<td><p>Name of the table containing the secondary peak matches</p></td>
</tr>
<tr class="row-odd"><td><p>SortedByEnergy</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p>all_matches_sorted_by_energy</p></td>
<td><p>Name of the table containing all of the peak matches sorted by energy</p></td>
</tr>
<tr class="row-even"><td><p>ElementLikelihood</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p>element_likelihood</p></td>
<td><p>Name of the table containing the weighted count of elements in all matches</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm takes a table of peak centres and standard deviations, then finds overlap with a database of known values
to find probable energy transitions for peaks.</p>
<section id="input-table-and-datafile-requirement">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Input Table and datafile requirement</a><a class="headerlink" href="#input-table-and-datafile-requirement" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>input table must have at least 2 column in which one column is the peak centre and the other is the standard deviation, the names of the columns must be given if they differ from the default values: centre and sigma respectively.</p></li>
<li><p>json file can be loaded to override the default but must follow structure below:</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;Ag&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Z&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;A&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">107.87</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Primary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;K(4-&gt;1)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3177.7</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;L(4-&gt;2)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">900.7</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;M(4-&gt;3)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">304.7</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;6-&gt;5&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">141</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Secondary&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;K(2-&gt;1)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3140.6</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;L(8-&gt;2)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1347.8</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;M(10-&gt;3)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">567</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;8-&gt;6&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">122.2</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;Gammas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;72Ge(n,n&#39;)72Ge&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">691</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;73Ge(n,g)74Ge&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;74Ge(n,n&#39;)74Ge&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">595.7</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><em>Example: Using all defaults*</em></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">formatdict</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="k">else</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="k">for</span> <span class="n">column</span> <span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
    <span class="k">return</span> <span class="n">row</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">900</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">306</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">567</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)]</span>

<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="s2">&quot;centre&quot;</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="s2">&quot;sigma&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="n">table</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">PeakMatching</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<span class="n">primary_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;primary_matches&#39;</span><span class="p">]</span>
<span class="n">secondary_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;secondary_matches&#39;</span><span class="p">]</span>
<span class="n">all_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;all_matches&#39;</span><span class="p">]</span>
<span class="n">sorted_by_energy</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;all_matches_sorted_by_energy&#39;</span><span class="p">]</span>
<span class="n">element_likelihood</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span> <span class="s1">&#39;element_likelihood&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">primary_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">secondary_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">all_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">sorted_by_energy</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">element_likelihood</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--------------------------------------------------
{&#39;Peak centre&#39;: &#39;3.00&#39;, &#39;Database Energy&#39;: &#39;3.40&#39;, &#39;Element&#39;: &#39;Li&#39;, &#39;Transition&#39;: &#39;L(3d-&gt;2p)&#39;, &#39;Error&#39;: &#39;0.80&#39;, &#39;Difference&#39;: &#39;0.40&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;567.00&#39;, &#39;Database Energy&#39;: &#39;567.00&#39;, &#39;Element&#39;: &#39;Ag&#39;, &#39;Transition&#39;: &#39;M(7f-&gt;3d)&#39;, &#39;Error&#39;: &#39;0.00&#39;, &#39;Difference&#39;: &#39;0.00&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;567.00&#39;, &#39;Database Energy&#39;: &#39;567.00&#39;, &#39;Element&#39;: &#39;Ag&#39;, &#39;Transition&#39;: &#39;M(7f-&gt;3d)&#39;, &#39;Error&#39;: &#39;0.00&#39;, &#39;Difference&#39;: &#39;0.00&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;3.00&#39;, &#39;Database Energy&#39;: &#39;3.40&#39;, &#39;Element&#39;: &#39;Li&#39;, &#39;Transition&#39;: &#39;L(3d-&gt;2p)&#39;, &#39;Error&#39;: &#39;0.80&#39;, &#39;Difference&#39;: &#39;0.40&#39;}
--------------------------------------------------
{&#39;Element&#39;: &#39;Ag&#39;, &#39;Likelihood(arbitrary units)&#39;: 10}
</pre></div>
</div>
<p><em>Example: Renaming tables*</em></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">formatdict</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="k">else</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="k">for</span> <span class="n">column</span> <span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
    <span class="k">return</span> <span class="n">row</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">900</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">306</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">567</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)]</span>

<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="s2">&quot;centre&quot;</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="s2">&quot;sigma&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="n">table</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">PeakMatching</span><span class="p">(</span><span class="n">table</span><span class="p">,</span><span class="n">PrimaryPeaks</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span><span class="n">SecondaryPeaks</span><span class="o">=</span><span class="s2">&quot;secondary&quot;</span><span class="p">,</span><span class="n">AllPeaks</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span><span class="n">SortedByEnergy</span><span class="o">=</span><span class="s2">&quot;sort&quot;</span><span class="p">,</span><span class="n">ElementLikelihood</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>

<span class="n">primary_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;primary&#39;</span><span class="p">]</span>
<span class="n">secondary_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;secondary&#39;</span><span class="p">]</span>
<span class="n">all_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">]</span>
<span class="n">sorted_by_energy</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;sort&#39;</span><span class="p">]</span>
<span class="n">element_likelihood</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span> <span class="s1">&#39;count&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">primary_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">secondary_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">all_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">sorted_by_energy</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">element_likelihood</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--------------------------------------------------
{&#39;Peak centre&#39;: &#39;900.00&#39;, &#39;Database Energy&#39;: &#39;900.70&#39;, &#39;Element&#39;: &#39;Ag&#39;, &#39;Transition&#39;: &#39;L(3d3/2-&gt;2p3/2)&#39;, &#39;Error&#39;: &#39;0.80&#39;, &#39;Difference&#39;: &#39;0.70&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;567.00&#39;, &#39;Database Energy&#39;: &#39;567.00&#39;, &#39;Element&#39;: &#39;In&#39;, &#39;Transition&#39;: &#39;M(6f-&gt;3d)&#39;, &#39;Error&#39;: &#39;0.00&#39;, &#39;Difference&#39;: &#39;0.00&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;567.00&#39;, &#39;Database Energy&#39;: &#39;567.00&#39;, &#39;Element&#39;: &#39;In&#39;, &#39;Transition&#39;: &#39;M(6f-&gt;3d)&#39;, &#39;Error&#39;: &#39;0.00&#39;, &#39;Difference&#39;: &#39;0.00&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;306.00&#39;, &#39;Database Energy&#39;: &#39;304.10&#39;, &#39;Element&#39;: &#39;W&#39;, &#39;Transition&#39;: &#39;O(7i-&gt;5g)&#39;, &#39;Error&#39;: &#39;2.40&#39;, &#39;Difference&#39;: &#39;1.90&#39;}
--------------------------------------------------
{&#39;Element&#39;: &#39;Tm&#39;, &#39;Likelihood(arbitrary units)&#39;: 6}
</pre></div>
</div>
<p><em>Example: Using non default column names*</em></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="k">def</span> <span class="nf">formatdict</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">row</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">column</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span> <span class="k">else</span> <span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>  <span class="k">for</span> <span class="n">column</span> <span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
    <span class="k">return</span> <span class="n">row</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">)</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">900</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">306</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">567</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">)]</span>

<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s2">&quot;double&quot;</span><span class="p">,</span><span class="s2">&quot;standard deviation&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="n">table</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">PeakMatching</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">PeakCentreColumn</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span><span class="n">SigmaColumn</span> <span class="o">=</span> <span class="s2">&quot;standard deviation&quot;</span><span class="p">)</span>

<span class="n">primary_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;primary_matches&#39;</span><span class="p">]</span>
<span class="n">secondary_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;secondary_matches&#39;</span><span class="p">]</span>
<span class="n">all_matches</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;all_matches&#39;</span><span class="p">]</span>
<span class="n">sorted_by_energy</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;all_matches_sorted_by_energy&#39;</span><span class="p">]</span>
<span class="n">element_likelihood</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span> <span class="s1">&#39;element_likelihood&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">primary_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">secondary_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">all_matches</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">sorted_by_energy</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="o">*</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">formatdict</span><span class="p">(</span><span class="n">element_likelihood</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--------------------------------------------------
{&#39;Peak centre&#39;: &#39;900.00&#39;, &#39;Database Energy&#39;: &#39;899.20&#39;, &#39;Element&#39;: &#39;Au&#39;, &#39;Transition&#39;: &#39;M(4f5/2-&gt;3d3/2)&#39;, &#39;Error&#39;: &#39;0.80&#39;, &#39;Difference&#39;: &#39;0.80&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;567.00&#39;, &#39;Database Energy&#39;: &#39;566.70&#39;, &#39;Element&#39;: &#39;I&#39;, &#39;Transition&#39;: &#39;M(5f-&gt;3d)&#39;, &#39;Error&#39;: &#39;0.80&#39;, &#39;Difference&#39;: &#39;0.30&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;567.00&#39;, &#39;Database Energy&#39;: &#39;566.70&#39;, &#39;Element&#39;: &#39;I&#39;, &#39;Transition&#39;: &#39;M(5f-&gt;3d)&#39;, &#39;Error&#39;: &#39;0.80&#39;, &#39;Difference&#39;: &#39;0.30&#39;}
--------------------------------------------------
{&#39;Peak centre&#39;: &#39;306.00&#39;, &#39;Database Energy&#39;: &#39;304.50&#39;, &#39;Element&#39;: &#39;Tm&#39;, &#39;Transition&#39;: &#39;N(5g-&gt;4f)&#39;, &#39;Error&#39;: &#39;1.60&#39;, &#39;Difference&#39;: &#39;1.50&#39;}
--------------------------------------------------
{&#39;Element&#39;: &#39;In&#39;, &#39;Likelihood(arbitrary units)&#39;: 4}
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Muon.html">Muon</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/PythonInterface/plugins/algorithms/PeakMatching.py">PeakMatching.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PeakIntensityVsRadius-v1.html" title="Previous Chapter: PeakIntensityVsRadius v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PeakIntensity...</span>
    </a>
  </li>
  <li>
    <a href="PeaksInRegion-v1.html" title="Next Chapter: PeaksInRegion v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PeaksInRegion v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>