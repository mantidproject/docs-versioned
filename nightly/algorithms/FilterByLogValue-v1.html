<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>FilterByLogValue v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FilterByTime v1" href="FilterByTime-v1.html" />
    <link rel="prev" title="FilterBadPulses v1" href="FilterBadPulses-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">FilterByLogValue v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="filterbylogvalue-v1">
<span id="algm-filterbylogvalue"></span><span id="algm-filterbylogvalue-v1"></span><h1>FilterByLogValue v1<a class="headerlink" href="#filterbylogvalue-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/FilterByLogValue-v1_dlg.png"><img alt="../_images/FilterByLogValue-v1_dlg.png" class="screenshot" src="../_images/FilterByLogValue-v1_dlg.png" style="width: 302px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>FilterByLogValue</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#logs-that-only-record-changes" id="id7">Logs that only record changes</a></p></li>
<li><p><a class="reference internal" href="#pulsefilter-e-g-for-veto-pulses" id="id8">PulseFilter (e.g. for Veto Pulses)</a></p></li>
<li><p><a class="reference internal" href="#time-tolerance-log-boundary-and-pulse-filter" id="id9">Time Tolerance, Log Boundary and Pulse Filter</a></p></li>
<li><p><a class="reference internal" href="#comparing-with-generateeventsfilter-filterevents" id="id10">Comparing with GenerateEventsFilter/FilterEvents</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id11">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id12">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Filter out events from an EventWorkspace based on a sample log value satisfying filter criteria.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="FilterByXValue-v1.html#algm-filterbyxvalue"><span class="std std-ref">FilterByXValue</span></a>, <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>, <a class="reference internal" href="FilterLogByTime-v1.html#algm-filterlogbytime"><span class="std std-ref">FilterLogByTime</span></a>, <a class="reference internal" href="FilterBadPulses-v1.html#algm-filterbadpulses"><span class="std std-ref">FilterBadPulses</span></a>, <a class="reference internal" href="FilterByTime-v1.html#algm-filterbytime"><span class="std std-ref">FilterByTime</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input event workspace</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name to use for the output workspace</p></td>
</tr>
<tr class="row-even"><td><p>LogName</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the sample log to use to filter. For example, the pulse charge is recorded in ‘ProtonCharge’.</p></td>
</tr>
<tr class="row-odd"><td><p>MinimumValue</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Minimum log value for which to keep events.</p></td>
</tr>
<tr class="row-even"><td><p>MaximumValue</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Maximum log value for which to keep events.</p></td>
</tr>
<tr class="row-odd"><td><p>TimeTolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Tolerance, in seconds, for the event times to keep. How TimeTolerance is applied is highly correlated to LogBoundary and PulseFilter.  Check the help or algorithm documents for details.</p></td>
</tr>
<tr class="row-even"><td><p>LogBoundary</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Centre</p></td>
<td><p>How to treat log values as being measured in the centre of the time window for which log criteria are satisfied, or left (beginning) of time window boundary. This value must be set to Left if the sample log is recorded upon changing,which applies to most of the sample environment devices in SNS. Allowed values: [‘Centre’, ‘Left’]</p></td>
</tr>
<tr class="row-odd"><td><p>PulseFilter</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Optional. Filter out a notch of time for each entry in the sample log named. A notch of width 2*TimeTolerance is centered at each log time. The value of the log is NOT used.This is used, for example, to filter out veto pulses.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Filters out events using the entries in the Sample Logs.</p>
<p>Sample logs consist of a series of pairs. The first step in filtering is
to generate a list of start-stop time intervals that will be kept, using
those logs.</p>
<ul class="simple">
<li><p>Each log value is compared to the min/max value filters to determine
whether it is “good” or not.</p>
<ul>
<li><p>For a single log value that satisfies the criteria at time T, all
events between T+-Tolerance (LogBoundary=Centre), or T and
T+Tolerance (LogBoundary=Left) are kept.</p></li>
<li><p>If there are several consecutive log values matching the filter,
events between T1-Tolerance and T2+Tolerance, where T2 is the last
“good” value (LogBoundary=Centre), or T1 and T2, where T2 is the
first “bad” value (LogBoundary=Left) are kept.</p></li>
</ul>
</li>
<li><p>The filter is then applied to all events in all spectra. Any events
with pulse times outside of any “good” time ranges are removed.</p></li>
</ul>
<p>There is no interpolation of log values between the discrete sample log
times at this time. However, the log value is assumed to be constant at
times before its first point and after its last. For example, if the
first temperature measurement was at time=10 seconds and a temperature
within the acceptable range, then all events between 0 and 10 seconds
will be included also. If a log has a single point in time, then that
log value is assumed to be constant for all time and if it falls within
the range, then all events will be kept.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="#algm-filterbylogvalue"><span class="std std-ref">FilterByLogValue</span></a> is not suitable for
fast log filtering.</p>
</div>
<section id="logs-that-only-record-changes">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Logs that only record changes</a><a class="headerlink" href="#logs-that-only-record-changes" title="Permalink to this heading">¶</a></h3>
<p>In SNS, most of the sample environment devices record values upon changing.
Therefore, the <code class="docutils literal notranslate"><span class="pre">LogBoundary</span></code> value shall set to <code class="docutils literal notranslate"><span class="pre">Left</span></code> but not <code class="docutils literal notranslate"><span class="pre">Centre</span></code>.
And in this case, <code class="docutils literal notranslate"><span class="pre">TimeTolerance</span></code> is ignored.</p>
<p>Please check with the instrument scientist to confirm how the sample log values are recorded.</p>
<p>Here is an example how the time splitter works with the a motor’s position.</p>
<figure class="align-default" id="id2">
<img alt="../_images/SNAP_motor_filter.png" src="../_images/SNAP_motor_filter.png" />
<figcaption>
<p><span class="caption-text">For this SNAP run, the user wants to filter events with motor (BL3:Mot:Hexa:MotZ) position
at value equal to 6.65 with tolerance as 0.1.
The red curve shows the boundary of the time splitters (i.e., event filters).</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="pulsefilter-e-g-for-veto-pulses">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">PulseFilter (e.g. for Veto Pulses)</a><a class="headerlink" href="#pulsefilter-e-g-for-veto-pulses" title="Permalink to this heading">¶</a></h3>
<p>If you select PulseFilter, then events will be filtered OUT in notches
around each time in the selected sample log, and the MinValue/MaxValue
parameters are ignored. For example:</p>
<ul class="simple">
<li><p>If you have 3 entries at times:</p>
<ul>
<li><p>10, 20, 30 seconds.</p></li>
<li><p>A TimeTolerance of 1 second.</p></li>
</ul>
</li>
<li><p>Then the events at the following times will be EXCLUDED from the
output:</p>
<ul>
<li><p>9-11; 19-21; 29-30 seconds.</p></li>
</ul>
</li>
</ul>
<p>The typical use for this is to filter out “veto” pulses from a SNS event
nexus file. Some of these files have a sample log called
“veto_pulse_time” that only contains times of the pulses to be
rejected. For example, this call will filter out veto pulses:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">FilterByLogValue</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s2">&quot;veto_pulse_time&quot;</span><span class="p">,</span> <span class="n">PulseFilter</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="time-tolerance-log-boundary-and-pulse-filter">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Time Tolerance, Log Boundary and Pulse Filter</a><a class="headerlink" href="#time-tolerance-log-boundary-and-pulse-filter" title="Permalink to this heading">¶</a></h3>
<p>How <code class="docutils literal notranslate"><span class="pre">TimeTolerance</span></code> is applied to event filtering is highly correlated to
the setup of property <code class="docutils literal notranslate"><span class="pre">LogBoundary</span></code> and <code class="docutils literal notranslate"><span class="pre">PulseFilter</span></code>.</p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">PulseFilter</span></code> is true, a notch of width <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">TimeTolerance</span></code> is centered at each log time.
Neutron events in this notch will not be used.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">PulseFilter</span></code> is false and <code class="docutils literal notranslate"><span class="pre">LogBoundary</span></code> is <code class="docutils literal notranslate"><span class="pre">Left</span></code>, <code class="docutils literal notranslate"><span class="pre">TimeTolerance</span></code> is ignored in the algorithm.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">PulseFilter</span></code> is false and <code class="docutils literal notranslate"><span class="pre">LogBoundary</span></code> is set to <code class="docutils literal notranslate"><span class="pre">Centre</span></code>,
assuming the log entries are
<code class="docutils literal notranslate"><span class="pre">(t0,</span> <span class="pre">v0),</span> <span class="pre">(t1,</span> <span class="pre">v1),</span> <span class="pre">(t2,</span> <span class="pre">v2),</span> <span class="pre">(t3,</span> <span class="pre">v3),</span> <span class="pre">...</span> <span class="pre">(t_n,</span> <span class="pre">v_n)</span> <span class="pre">...</span></code>.</p>
<ul class="simple">
<li><p>If there is a log entry <code class="docutils literal notranslate"><span class="pre">(t_i,</span> <span class="pre">v_i)</span></code> is between <code class="docutils literal notranslate"><span class="pre">MinimumValue</span></code> and <code class="docutils literal notranslate"><span class="pre">MaximumValue</span></code>,
while <code class="docutils literal notranslate"><span class="pre">v_{i-1}</span></code> and <code class="docutils literal notranslate"><span class="pre">v_{i+1}</span></code> are not in the desired log value range,
all events between <code class="docutils literal notranslate"><span class="pre">t_i</span> <span class="pre">-</span> <span class="pre">TimeTolerance</span></code> and <code class="docutils literal notranslate"><span class="pre">t_i</span> <span class="pre">+</span> <span class="pre">TimeTolerance)</span></code> are kept.</p></li>
<li><p>If there are several consecutive log entries that have values in the desired log value range,
such as <code class="docutils literal notranslate"><span class="pre">(t_i,</span> <span class="pre">v_i),</span> <span class="pre">...,</span> <span class="pre">(t_j,</span> <span class="pre">v_j)</span></code>,
events between <code class="docutils literal notranslate"><span class="pre">t_i</span> <span class="pre">-</span> <span class="pre">TimeTolerance</span></code> and <code class="docutils literal notranslate"><span class="pre">t_j</span> <span class="pre">+</span> <span class="pre">TimToleranc</span></code> are kept.</p></li>
</ul>
<p>A good value is 1/2 your measurement interval if the intervals are constant.</p>
</li>
</ul>
</section>
<section id="comparing-with-generateeventsfilter-filterevents">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Comparing with GenerateEventsFilter/FilterEvents</a><a class="headerlink" href="#comparing-with-generateeventsfilter-filterevents" title="Permalink to this heading">¶</a></h3>
<p>The combination of <a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a> and <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a> with proper configuration
can produce same result as <a class="reference internal" href="#algm-filterbylogvalue"><span class="std std-ref">FilterByLogValue</span></a>.</p>
<p>For sample,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Load data</span>
<span class="n">LoadEventNexus</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;/SNS/SNAP/IPTS-25836/nexus/SNAP_52100.nxs.h5&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;52100&#39;</span><span class="p">)</span>

<span class="c1"># FilterByLogValue</span>
<span class="n">FilterByLogValue</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;52100&#39;</span><span class="p">,</span>
                 <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;52100_hexaZ_L&#39;</span><span class="p">,</span>
                 <span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;BL3:Mot:Hexa:MotZ&#39;</span><span class="p">,</span>
                 <span class="n">MinimumValue</span><span class="o">=</span> <span class="mf">6.55</span><span class="p">,</span>
                 <span class="n">MaximumValue</span><span class="o">=</span> <span class="mf">6.75</span><span class="p">,</span>
                 <span class="n">LogBoundary</span><span class="o">=</span><span class="s1">&#39;Left&#39;</span><span class="p">)</span>

<span class="c1"># Equivalent GenerateEventsFilter/FilterEvents combination</span>
<span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;52100&#39;</span><span class="p">,</span>
                     <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;MotZSplitter_left&#39;</span><span class="p">,</span>
                     <span class="n">InformationWorkspace</span><span class="o">=</span><span class="s1">&#39;MotZSplitter_left_info&#39;</span><span class="p">,</span>
                     <span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;BL3:Mot:Hexa:MotZ&#39;</span><span class="p">,</span>
                     <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">6.55</span><span class="p">,</span>
                     <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">6.75</span><span class="p">,</span>
                     <span class="n">LogBoundary</span><span class="o">=</span><span class="s1">&#39;Left&#39;</span><span class="p">,</span>
                     <span class="n">TitleOfSplitters</span><span class="o">=</span><span class="s1">&#39;Left&#39;</span><span class="p">)</span>
<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;52100&#39;</span><span class="p">,</span>
             <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="s1">&#39;MotZSplitter_left&#39;</span><span class="p">,</span>
             <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s1">&#39;Chop52100&#39;</span><span class="p">,</span>
             <span class="n">InformationWorkspace</span><span class="o">=</span><span class="s1">&#39;MotZSplitter_left_info&#39;</span><span class="p">,</span>
             <span class="n">FilterByPulseTime</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The OutputWorkspace with name <code class="docutils literal notranslate"><span class="pre">Chop52100_0</span></code> output from <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a> is equivalent to <code class="docutils literal notranslate"><span class="pre">52100_hexaZ_L</span></code>
from <code class="docutils literal notranslate"><span class="pre">FilterByLogValue</span></code>.</p>
<p>Here is the comparison between FilterByLogValue and <a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a>/<a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FilterByLogValue</span></code> can only filter events at the resolution of neutron pulse.</p>
<ul class="simple">
<li><p>If the start time <em>t_s</em> of a splitter is inside a pulse, then all the events inside that pulse but before <em>t_s</em>
will be included in the filtered workspace.</p></li>
<li><p>If the end time <em>t_e</em> of a splitter is inside a pulse, then all the events inside that pulse even before <em>t_e</em>
will be excluded in the filtered workspace.</p></li>
<li><p><a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a> is able to do the filtering precisely to include events only within time range [<em>t_s</em>, <em>t_e</em>).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">FilterByLogValue</span></code> can only filter events around only <code class="docutils literal notranslate"><span class="pre">one</span></code> log value, while
<a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a>/<a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>
combination can filter events against a series of log values.</p></li>
<li><p><a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a>/<a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>
have more outputs to examine the result.</p></li>
</ol>
<p>The <a class="reference internal" href="../concepts/EventFiltering.html#eventfiltering"><span class="std std-ref">Event Filtering</span></a> page has a detailed introduction on event
filtering in mantid.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Filtering by a simple time series Log</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s2">&quot;Event&quot;</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:00:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:10:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:20:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:30:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:40:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:50:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The unfiltered workspace </span><span class="si">{}</span><span class="s2"> has </span><span class="si">{}</span><span class="s2"> events and a peak value of </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">(),</span><span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">50</span><span class="p">]))</span>

<span class="n">wsOut</span> <span class="o">=</span> <span class="n">FilterByLogValue</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span><span class="n">MinimumValue</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span> <span class="n">MaximumValue</span><span class="o">=</span><span class="mi">150</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The filtered workspace </span><span class="si">{}</span><span class="s2"> has </span><span class="si">{}</span><span class="s2"> events and a peak value of </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wsOut</span><span class="p">,</span> <span class="n">wsOut</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">(),</span><span class="n">wsOut</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">50</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The unfiltered workspace ws has 1900 events and a peak value of 2...
The filtered workspace wsOut has 950 events and a peak value of 1...
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Events/EventFiltering.html">Events\EventFiltering</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/inc/MantidAlgorithms/FilterByLogValue.h">FilterByLogValue.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/src/FilterByLogValue.cpp">FilterByLogValue.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="FilterBadPulses-v1.html" title="Previous Chapter: FilterBadPulses v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; FilterBadPulses v1</span>
    </a>
  </li>
  <li>
    <a href="FilterByTime-v1.html" title="Next Chapter: FilterByTime v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">FilterByTime v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>