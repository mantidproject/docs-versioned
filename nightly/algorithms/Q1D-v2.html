<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Q1D v2</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Q1DWeighted v1" href="Q1DWeighted-v1.html" />
    <link rel="prev" title="ProjectMD v1" href="ProjectMD-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Q1D v2</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="q1d-v2">
<span id="algm-q1d"></span><span id="algm-q1d-v2"></span><h1>Q1D v2<a class="headerlink" href="#q1d-v2" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id2">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/Q1D-v2_dlg.png"><img alt="../_images/Q1D-v2_dlg.png" class="screenshot" src="../_images/Q1D-v2_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>Q1D</strong> dialog.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#output-unit" id="id7">Output unit</a></p></li>
<li><p><a class="reference internal" href="#q-unit-conversion" id="id8">Q Unit Conversion</a></p></li>
<li><p><a class="reference internal" href="#normalizing-the-input-workspace" id="id9">Normalizing the input workspace</a></p></li>
<li><p><a class="reference internal" href="#resolution-and-cutoffs" id="id10">Resolution and Cutoffs</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id11">Examples</a></p></li>
<li><p><a class="reference internal" href="#variations-on-applying-the-normalization" id="id12">Variations on applying the normalization</a></p></li>
<li><p><a class="reference internal" href="#references" id="id13">References</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#previous-versions" id="id14">Previous Versions</a></p>
<ul>
<li><p><a class="reference internal" href="#version-1" id="id15">Version 1</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id16">Properties</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#source" id="id17">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>SANS 1D reduction. Converts a workspace in wavelength into a workspace of momentum transfer, assuming elastic scattering</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="Q1DWeighted-v1.html#algm-q1dweighted"><span class="std std-ref">Q1DWeighted</span></a>, <a class="reference internal" href="Qxy-v1.html#algm-qxy"><span class="std std-ref">Qxy</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DetBankWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Particle counts as a function of wavelength</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the workspace that will contain the result of the calculation</p></td>
</tr>
<tr class="row-even"><td><p>OutputBinning</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A comma separated list of first bin boundary, width, last bin boundary. Optionally this can be followed by a comma and more widths and last boundary pairs. Negative width values indicate logarithmic binning.</p></td>
</tr>
<tr class="row-odd"><td><p>PixelAdj</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Scaling to apply to each spectrum. Must have the same number of spectra as the DetBankWorkspace</p></td>
</tr>
<tr class="row-even"><td><p>WavelengthAdj</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Scaling to apply to each bin. Must have the same number of bins as the DetBankWorkspace</p></td>
</tr>
<tr class="row-odd"><td><p>WavePixelAdj</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Scaling that depends on both pixel and wavelength together. Must have the same number of bins and spectra as the DetBankWorkspace.</p></td>
</tr>
<tr class="row-even"><td><p>AccountForGravity</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether to correct for the effects of gravity</p></td>
</tr>
<tr class="row-odd"><td><p>SolidAngleWeighting</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true, pixels will be weighted by their solid angle.</p></td>
</tr>
<tr class="row-even"><td><p>RadiusCut</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>To increase resolution some wavelengths are excluded within this distance from the beam center (mm). Note that RadiusCut  and WaveCut both need to be larger than 0 to affect  the effective cutoff. See the algorithm description for  a detailed explanation of the cutoff.</p></td>
</tr>
<tr class="row-odd"><td><p>WaveCut</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>To increase resolution by starting to remove some wavelengths below this threshold (angstrom).  Note that WaveCut  and RadiusCut both need to be larger than 0 to affect  on the effective cutoff. See the algorithm description for  a detailed explanation of the cutoff.</p></td>
</tr>
<tr class="row-even"><td><p>OutputParts</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Set to true to output two additional workspaces which will have the names OutputWorkspace_sumOfCounts OutputWorkspace_sumOfNormFactors. The division of _sumOfCounts and _sumOfNormFactors equals the workspace returned by the property OutputWorkspace (default is false).</p></td>
</tr>
<tr class="row-odd"><td><p>ExtraLength</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Additional length for gravity correction.</p></td>
</tr>
<tr class="row-even"><td><p>QResolution</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace to calculate the Q resolution.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<section id="output-unit">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Output unit</a><a class="headerlink" href="#output-unit" title="Permalink to this heading">¶</a></h3>
<p>The unit of the output workspace is 1/cm. Assuming this algorithm is called with
the appropriate input correction workspaces, include accounting for absolute
scaling, the output is meant to represent a macroscopic cross section, hence the
reason the output unit is 1/cm.</p>
</section>
<section id="q-unit-conversion">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Q Unit Conversion</a><a class="headerlink" href="#q-unit-conversion" title="Permalink to this heading">¶</a></h3>
<p>This section includes an explanation for the effect of setting
<code class="docutils literal notranslate"><span class="pre">AccountForGravity</span></code> to true along with <code class="docutils literal notranslate"><span class="pre">ExtraLength</span></code>.</p>
<p>The equation for <span class="math notranslate nohighlight">\(Q\)</span> as a function of wavelength, <span class="math notranslate nohighlight">\(\lambda\)</span>,
and neglecting gravity, is</p>
<div class="math notranslate nohighlight">
\[Q = \frac{4\pi}{\lambda} sin(\theta)\]</div>
<p>where <span class="math notranslate nohighlight">\(2 \theta\)</span> is the particle’s angle of deflection. If a
particle’s measured deflection over the sample to the detector (pixel)
distance, <span class="math notranslate nohighlight">\(L_2\)</span>, is <span class="math notranslate nohighlight">\(x\)</span> along the x-axis and <span class="math notranslate nohighlight">\(y\)</span> along
the y-axis then <span class="math notranslate nohighlight">\(\theta\)</span> is</p>
<div class="math notranslate nohighlight">
\[\theta = \frac{1}{2} arcsin\left (\frac{\sqrt{x^2+y^2}}{L_2} \right )\]</div>
<p>Including gravity this becomes:</p>
<div class="math notranslate nohighlight">
\[\theta = \frac{1}{2} arcsin\left (\frac{ \sqrt{x^2+\left (y+\frac{gm^2}{2h^2} \lambda^2 L_{corr}^2 \right)^2}}{L_2} \right )\]</div>
<p>where <span class="math notranslate nohighlight">\(m\)</span> is the particle’s mass, <span class="math notranslate nohighlight">\(g\)</span> is the acceleration
due to gravity and <span class="math notranslate nohighlight">\(h\)</span> is <a class="reference external" href="http://en.wikipedia.org/wiki/Planks_constant">plank’s
constant</a> .</p>
<p>The correction assumes that <span class="math notranslate nohighlight">\(x=y=0\)</span> would be beam centre at <span class="math notranslate nohighlight">\(\lambda = 0\)</span>.
In order to correct for the fact that the beam may not be travelling horizontal
at the sample an extra path length (<code class="docutils literal notranslate"><span class="pre">ExtraLength</span></code> property) can be included in the
numerator where</p>
<div class="math notranslate nohighlight">
\[L_{corr}^2 = (L_2 + L_{extra})^2 - L_{extra}^2\]</div>
<p>The value of <span class="math notranslate nohighlight">\(L_{extra}\)</span> is likely <span class="math notranslate nohighlight">\(0.5*L_1\)</span>, where <span class="math notranslate nohighlight">\(L_1\)</span> is the
collimation length, but may be less than this depending on where scraper baffles
are inside the collimation.
See <a class="reference internal" href="TOFSANSResolutionByPixel-v1.html#algm-tofsansresolutionbypixel"><span class="std std-ref">TOFSANSResolutionByPixel v1</span></a> for more detail on the how the collimation
length ties in with the resolution calculation.</p>
</section>
<section id="normalizing-the-input-workspace">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Normalizing the input workspace</a><a class="headerlink" href="#normalizing-the-input-workspace" title="Permalink to this heading">¶</a></h3>
<p>This section describes the normalisation/scaling/correction of the input
workspace using PixelAdj, WavelengthAdj and WavePixelAdj.</p>
<p>This <a class="reference internal" href="../concepts/Algorithm.html#algorithm"><span class="std std-ref">algorithm</span></a> takes as input a workspace of neutron
counts against <a class="reference internal" href="../concepts/UnitFactory.html#unit-factory"><span class="std std-ref">wavelength</span></a> and creates a workspace of cross
section against Q. The output Q bins boundaries are defined by setting
the property OutputBinning.</p>
<p>Below is the formula used to calculate the cross section, here denoted
<span class="math notranslate nohighlight">\(P_I(Q)\)</span>, for one bin in the output workspace whose bin number is
denoted by I, when the input workspace has just one detector. Each bin
is calculated from the sum of all input wavelength bins, n, that
evaluate to the same Q using the formula for Q at the top of this page.
In equations this relationship between the input bins and the output
bins is represented by <span class="math notranslate nohighlight">\(n \supset I\)</span> and an example of a set of
two bins is shown diagrammatically below.  (Each Q bin contains the sum
of many, one, or no wavelength bins.)</p>
<figure class="align-default">
<img alt="DgsAbsoluteUnitsReductionWorkflow.png" src="../_images/Wav_Q_bins.png" />
</figure>
<p>In the equation the number of counts in the input spectrum number is
denoted by <span class="math notranslate nohighlight">\(S(n)\)</span>, <span class="math notranslate nohighlight">\(N(n)\)</span> is the wavelength dependent
correction and <span class="math notranslate nohighlight">\(\Omega\)</span> is the <a class="reference internal" href="SolidAngle-v1.html#algm-solidangle"><span class="std std-ref">solid angle</span></a> of the
detector</p>
<div class="math notranslate nohighlight">
\[P_I(Q) = \frac{ \sum_{n \supset I} S(n)}{\Omega\sum_{n \supset I}N(n)}\]</div>
<p>The wavelength dependent correction is supplied to the algorithm through
the WavelengthAdj property and this workspace must have the same
wavelength binning as the input workspace and should be equal to the
following:</p>
<div class="math notranslate nohighlight">
\[N(n) = M(n)\eta(n)T(n)\]</div>
<p>where <span class="math notranslate nohighlight">\(M\)</span>, <span class="math notranslate nohighlight">\(\eta\)</span> and <span class="math notranslate nohighlight">\(T\)</span> are the monitor counts,
detector efficiency and transmission fraction respectively.</p>
<p>Normally there will be many spectra each from a different pixel with a
row number <span class="math notranslate nohighlight">\(i\)</span> and column number <span class="math notranslate nohighlight">\(j\)</span>. Because the value of
<span class="math notranslate nohighlight">\(\theta\)</span> varies between pixels corresponding input bins (n) from
different input spectra can contribute to different output bins (I) i.e.
<span class="math notranslate nohighlight">\(n \supset I\)</span> will be different for different pixels. For multiple
spectra the sum for each output bin will be over the set of input bins
in each pixel that have the correct Q, that is
<span class="math notranslate nohighlight">\(\{i, j, n\} \supset \{I\}\)</span> while <span class="math notranslate nohighlight">\(\Omega_{i j}\)</span> is detector
dependent:</p>
<div class="math notranslate nohighlight">
\[P_I(Q) = \frac{\sum_{\{i, j, n\} \supset \{I\}} S(i,j,n)}{\sum_{\{i, j, n\} \supset \{I\}}M(n)\eta(n)T(n)\Omega_{i j}F_{i j}}\]</div>
<p>where <span class="math notranslate nohighlight">\(F\)</span> is the detector dependent (e.g. flood) scaling specified
by the PixelAdj property, and where a <span class="math notranslate nohighlight">\(\lambda\)</span> bin <span class="math notranslate nohighlight">\(n\)</span>
spans more than one <span class="math notranslate nohighlight">\(Q\)</span> bin <span class="math notranslate nohighlight">\(I\)</span>, it is split assuming a
uniform distribution of the counts in <span class="math notranslate nohighlight">\(\lambda\)</span>. The normalization
takes any <a class="reference internal" href="MaskBins-v1.html#algm-maskbins"><span class="std std-ref">bin masking</span></a> into account.</p>
<p>Some corrections will be both pixel and wavelength dependent, for example an
angle transmission correction. Such corrections can be taken into account by
specifying WavePixelAdj.</p>
</section>
<section id="resolution-and-cutoffs">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Resolution and Cutoffs</a><a class="headerlink" href="#resolution-and-cutoffs" title="Permalink to this heading">¶</a></h3>
<p>There are two sources of uncertainty in the intensity: the statistical
(counting) error and the finite size of the bins, i.e. both time bins
and the spatial extent of the detectors (pixels). The first error is
reducible by increasing the length of the experiment or bin sizes while
the second reduces with smaller bin sizes. The first is represented by
the errors on the output workspace but the second is not included in the
error calculation although it increases uncertainties and degrades the
effective resolution of the data none the less. This algorithm allows
the resolution to be improved by removing the bins with the worst
resolution.</p>
<p>Normally the bins that give the worst resolution are those near the beam
center and with short wavelengths. When the optional properties
<span class="math notranslate nohighlight">\(RadiusCut\)</span> and <span class="math notranslate nohighlight">\(WaveCut\)</span> are set bins from this region of
the input workspace are removed from the intensity calculation (both
from the numerator and denominator). For a pixel at distance R from the
beam center the wavelength cutoff, <span class="math notranslate nohighlight">\(W_{low}\)</span>, is defined by the
input properties <span class="math notranslate nohighlight">\(RadiusCut\)</span> and <span class="math notranslate nohighlight">\(WaveCut\)</span> as:</p>
<div class="math notranslate nohighlight">
\[W_{low} = \frac{WaveCut (RadiusCut-R)}{RadiusCut}\]</div>
<p>The bin that contains the wavelength <span class="math notranslate nohighlight">\(W_{low}\)</span> and all lower
indices are excluded from the summations for that detector pixel.</p>
<p>From the equation it is possible to see that for pixels in
<span class="math notranslate nohighlight">\(R &gt; RadiusCut\)</span> all (positive) wavelengths are included. Also
substituting <span class="math notranslate nohighlight">\(WaveCut = W_{low}\)</span> we have that <span class="math notranslate nohighlight">\(R = 0\)</span> and
hence all detectors contribute at wavelengths above <span class="math notranslate nohighlight">\(WaveCut\)</span>.</p>
<p>Practically, it is more likely to be necessary to implement
<span class="math notranslate nohighlight">\(RadiusCut\)</span> and <span class="math notranslate nohighlight">\(WaveCut\)</span> in situations where the scattering
near to the beamstop is weak and ‘contaminated’ by short wavelength
scatter. This might arise, for example, when running at long
sample-detector distances, or at short sample-detector distances with
large diameter beams, or where the sample generates Bragg peaks at
low-Q. The best recourse is to check the wavelength overlap. If it is
not too bad it may be possible to improve the data presentation simply
by altering <span class="math notranslate nohighlight">\(Q{min}\)</span> and the binning scheme.</p>
</section>
<section id="examples">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Examples</a><a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h3>
<p>For an example of how Q1D is used see
<a class="reference external" href="https://developer.mantidproject.org/ISISSANSReductionBackend.html#isissansreductionbackend" title="(in MantidProject vmaster)"><span class="xref std std-ref">ISIS SANS data reduction</span></a>.</p>
<p><strong>References</strong></p>
<p><a class="reference external" href="http://scripts.iucr.org/cgi-bin/paper?gk0158">R.P. Hjelm Jr. *J. Appl. Cryst.* (1988), 21,
618-628</a>.</p>
<p><a class="reference external" href="http://scripts.iucr.org/cgi-bin/paper?gk0573">P.A. Seeger &amp; R.P. Hjelm Jr. *J. Appl. Cryst.* (1991), 24,
467-478</a>.</p>
</section>
<section id="variations-on-applying-the-normalization">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Variations on applying the normalization</a><a class="headerlink" href="#variations-on-applying-the-normalization" title="Permalink to this heading">¶</a></h3>
<p>It is possible to divide the input workspace by the WavelenghAdj and
PixelAdj workspaces prior to calling this algorithm. The results will be
same as if these workspaces were passed to Q1D instead when there are
high numbers of particle counts. However, in this scheme the
probabilities tend to converge on the true high count probabablities
more slowly with increasing number of counts and so the result is less
accuate.</p>
<p>Depending on the input and output bins there could be a significant
difference in CPU time required by these two methods.</p>
</section>
<section id="references">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h3>
<p>Calculation of Q is from Seeger, P. A. and Hjelm, R. P. Jr, “Small-Angle
Neutron Scattering at Pulsed Spallation Sources” (1991) <a class="reference external" href="http://dx.doi.org/10.1107/S0021889891004764">J. Appl 24
467-478</a></p>
</section>
</section>
<section id="previous-versions">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Previous Versions</a><a class="headerlink" href="#previous-versions" title="Permalink to this heading">¶</a></h2>
<section id="version-1">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Version 1</a><a class="headerlink" href="#version-1" title="Permalink to this heading">¶</a></h3>
<p>Before July 2011 the intensity was calculated with an equation like the
following:</p>
<div class="math notranslate nohighlight">
\[P_I(Q) = \frac{ \sum_{\{i, j, n\} \supset \{I\}}G(i,j,n) }{ \sum_{\{i, j, n\} \supset \{I\}} \Omega_{i j} }\]</div>
<p>where G is the input workspace normally related to the raw counts
workspace as:</p>
<div class="math notranslate nohighlight">
\[G(i,j,n) = S(i,j,n)/(M(n)\eta(n)T(n)F_{i j})\]</div>
<p>That is the normalization was performed before the Q calculation which
gives the same probilities at high numbers of particles counts but
weighted noisy, low count data too highly, giving more noise in
<span class="math notranslate nohighlight">\(P_I(Q)\)</span>.</p>
<p>The error was calculation did not include the errors due the
normalization or any corrections.</p>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Properties</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Order</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>MatrixWorkspace</p></td>
<td><p>Mandatory</p></td>
<td><p>The (partly) corrected data in units of wavelength.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>InputForErrors</p></td>
<td><p>Input</p></td>
<td><p>MatrixWorkspace</p></td>
<td><p>Mandatory</p></td>
<td><p>The workspace containing the counts to use for the error calculation. Must also be in units of wavelength and have matching bins to the InputWorkspace.</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>MatrixWorkspace</p></td>
<td><p>Mandatory</p></td>
<td><p>The workspace name under which to store the result histogram.</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>OutputBinning</p></td>
<td><p>Input</p></td>
<td><p>String</p></td>
<td><p>Mandatory</p></td>
<td><p>The bin parameters to use for the final result (in the format used by the <a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin v1</span></a> algorithm).</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>AccountForGravity</p></td>
<td><p>Input</p></td>
<td><p>Boolean</p></td>
<td><p>False</p></td>
<td><p>Whether to correct for the effects of gravity.</p></td>
</tr>
</tbody>
</table>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/SANS.html">SANS</a></p>
</section>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/inc/MantidAlgorithms/Q1D2.h">Q1D2.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/src/Q1D2.cpp">Q1D2.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ProjectMD-v1.html" title="Previous Chapter: ProjectMD v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ProjectMD v1</span>
    </a>
  </li>
  <li>
    <a href="Q1DWeighted-v1.html" title="Next Chapter: Q1DWeighted v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Q1DWeighted v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>