<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LoadVesuvio v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadVisionElasticBS v1" href="LoadVisionElasticBS-v1.html" />
    <link rel="prev" title="LoadTOFRawNexus v1" href="LoadTOFRawNexus-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadVesuvio v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="loadvesuvio-v1">
<span id="algm-loadvesuvio"></span><span id="algm-loadvesuvio-v1"></span><h1>LoadVesuvio v1<a class="headerlink" href="#loadvesuvio-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/LoadVesuvio-v1_dlg.png"><img alt="../_images/LoadVesuvio-v1_dlg.png" class="screenshot" src="../_images/LoadVesuvio-v1_dlg.png" style="width: 305px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>LoadVesuvio</strong> dialog.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id4">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id5">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id6">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id7">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#ip-file" id="id8">IP File</a></p></li>
<li><p><a class="reference internal" href="#information-on-vesuvio-operation" id="id9">Information on Vesuvio operation</a></p></li>
<li><p><a class="reference internal" href="#period" id="id10">2 period</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id11">3 period</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id12">6 period</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id13">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id14">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Loads raw data produced by the Vesuvio instrument at ISIS.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="LoadEmptyVesuvio-v1.html#algm-loademptyvesuvio"><span class="std std-ref">LoadEmptyVesuvio</span></a>, <a class="reference internal" href="LoadRaw-v3.html#algm-loadraw"><span class="std std-ref">LoadRaw</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The run numbers that should be loaded. E.g.14188  - for single run14188-14195 - for summed consecutive runs14188,14195 - for summed non-consecutive runs</p></td>
</tr>
<tr class="row-odd"><td><p>SpectrumList</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The spectrum numbers to load. A dash will load a range and a semicolon delimits spectra to sum</p></td>
</tr>
<tr class="row-even"><td><p>Mode</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>DoubleDifference</p></td>
<td><p>The difference option. Valid values: [‘SingleDifference’, ‘DoubleDifference’, ‘ThickDifference’, ‘FoilOut’, ‘FoilIn’, ‘FoilInOut’]. Allowed values: [‘SingleDifference’, ‘DoubleDifference’, ‘ThickDifference’, ‘FoilOut’, ‘FoilIn’, ‘FoilInOut’]</p></td>
</tr>
<tr class="row-odd"><td><p>InstrumentParFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>An optional IP file. If provided the values are used to correct the default instrument values and attach the t0 values to each detector. Allowed values: [‘dat’, ‘par’]</p></td>
</tr>
<tr class="row-even"><td><p>SumSpectra</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true then the final output is a single spectrum containing the sum of all of the requested spectra. All detector angles/parameters are averaged over the individual inputs</p></td>
</tr>
<tr class="row-odd"><td><p>LoadMonitors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true then the monitor data is loaded and will be output by the algorithm into a separate workspace.</p></td>
</tr>
<tr class="row-even"><td><p>LoadLogFiles</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true, then the log files for the specified runs will be loaded.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the output workspace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference external" href="http://www.isis.stfc.ac.uk/instruments/vesuvio/vesuvio4837.html">Vesuvio</a> instrument at ISIS produces
<a class="reference internal" href="../concepts/RAWFile.html#raw-file"><span class="std std-ref">RAW</span></a> files in the standard format. However, due to the unique design
of the instrument the raw counts from the input files must be manipulated before they are considered useful.</p>
<p>This algorithm wraps calls to <a class="reference internal" href="LoadRaw-v3.html#algm-loadraw"><span class="std std-ref">LoadRaw</span></a> and computes the counts (<span class="math notranslate nohighlight">\(\mu \text{s}^{-1}\)</span>) using the
foil-cycling method described <a class="reference external" href="http://m.iopscience.iop.org/0957-0233/23/4/045902/pdf/0957-0233_23_4_045902.pdf">here</a>.</p>
<p>The output is point data and not a histogram.</p>
<section id="ip-file">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">IP File</a><a class="headerlink" href="#ip-file" title="Permalink to this heading">¶</a></h3>
<p>There is an option to specify an ascii instrument parameter file to specify new detector positions along with a <em>t0</em> delay
time parameter for each detector.</p>
</section>
<section id="information-on-vesuvio-operation">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Information on Vesuvio operation</a><a class="headerlink" href="#information-on-vesuvio-operation" title="Permalink to this heading">¶</a></h3>
<p>Vesuvio as an instrument has the ability to analyse both forward and back scattering from the sample. In addition, when data is collected,
foils are put in front of, or remove from, the detectors. The foils are different for forward and back scattering. In forward scattering,
there are only 2 foils states, the foil is either in front of the detector (foil in) or not infront of the detector (foil out). In back
scattering there are 3 foil states. Like in forward scattering there is both a foil in and foil out state, but in addition to this there
is also a foil thick state which is where a thicker foil is placed in front of the detector.</p>
<p>Vesuvio allows for measurements to be taken in different periods:</p>
<ul class="simple">
<li><p>2 period data is for only analysing forward scattering (2 foil states - foil out/foil in)</p></li>
<li><p>3 period data is for only analysing back scattering (3 foil states - foil out/foil in/ foil thick)</p></li>
<li><p>6 period data is for both backward and forward scattering (combination of forward and back scattering states)</p></li>
</ul>
<p>When loading data from .RAW files using this algorithm, several differencing modes can be used:</p>
<ul class="simple">
<li><p>Single Difference: Foil In minus Foil Out (available in both forward and back scattering)</p></li>
<li><p>Thick Difference : Foil Thick minus Foil Out (only available in back scattering - as forward scattering has no foil Thick)</p></li>
<li><p>Double Difference: Foil In minus Foil Out combined with Foil Thick minus Foil Out (only available in back scattering - as forward scattering has no foil Thick)</p></li>
</ul>
<p>From the above modes of operation on Vesuvio we can deduce a table of valid combinations of scattering and differencing for each period.
This is shown in the tables below:</p>
</section>
<section id="period">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">2 period</a><a class="headerlink" href="#period" title="Permalink to this heading">¶</a></h3>
<p>Gold foils only move in forward scattering, so only differencing in forward scattering is valid.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Scattering</p></th>
<th class="head"><p>Single Difference</p></th>
<th class="head"><p>Thick Difference</p></th>
<th class="head"><p>Double Difference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Forward</p></td>
<td><p>Valid</p></td>
<td><p>NEVER</p></td>
<td><p>NEVER</p></td>
</tr>
<tr class="row-odd"><td><p>Back</p></td>
<td><p>Not Valid</p></td>
<td><p>Not Valid</p></td>
<td><p>Not Valid</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">3 period</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>Gold foils only move in back scattering, so only differencing in back scattering is valid.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Scattering</p></th>
<th class="head"><p>Single Difference</p></th>
<th class="head"><p>Thick Difference</p></th>
<th class="head"><p>Double Difference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Forward</p></td>
<td><p>Not Valid</p></td>
<td><p>NEVER</p></td>
<td><p>NEVER</p></td>
</tr>
<tr class="row-odd"><td><p>Back</p></td>
<td><p>Valid</p></td>
<td><p>Valid</p></td>
<td><p>Valid</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">6 period</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p>All are valid (with the exclusion of Thick Difference and Double difference in forward scattering - never valid)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Scattering</p></th>
<th class="head"><p>Single Difference</p></th>
<th class="head"><p>Thick Difference</p></th>
<th class="head"><p>Double Difference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Forward</p></td>
<td><p>Valid</p></td>
<td><p>NEVER</p></td>
<td><p>NEVER</p></td>
</tr>
<tr class="row-odd"><td><p>Back</p></td>
<td><p>Valid</p></td>
<td><p>Valid</p></td>
<td><p>Valid</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Load a single file &amp; spectrum with default difference:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="mi">135</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Sum runs on single spectrum with default difference:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="mi">135</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Sum runs on a range of spectra with default difference:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="s2">&quot;135-142&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">8</span>
</pre></div>
</div>
<p><strong>Sum runs and spectra on a range of spectra with default difference:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="s2">&quot;135-142&quot;</span><span class="p">,</span> <span class="n">SumSpectra</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Sum runs and spectra on a range of spectra using single difference method:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="s2">&quot;135-142&quot;</span><span class="p">,</span> <span class="n">SumSpectra</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                  <span class="n">Mode</span><span class="o">=</span><span class="s2">&quot;SingleDifference&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Raw.html">DataHandling\Raw</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/LoadVesuvio.py">LoadVesuvio.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadTOFRawNexus-v1.html" title="Previous Chapter: LoadTOFRawNexus v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadTOFRawNexus v1</span>
    </a>
  </li>
  <li>
    <a href="LoadVisionElasticBS-v1.html" title="Next Chapter: LoadVisionElasticBS v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadVisionEla... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>