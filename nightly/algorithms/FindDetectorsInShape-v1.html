<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>FindDetectorsInShape v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FindDetectorsOutsideLimits v1" href="FindDetectorsOutsideLimits-v1.html" />
    <link rel="prev" title="FindDeadDetectors v1" href="FindDeadDetectors-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">FindDetectorsInShape v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="finddetectorsinshape-v1">
<span id="algm-finddetectorsinshape"></span><span id="algm-finddetectorsinshape-v1"></span><h1>FindDetectorsInShape v1<a class="headerlink" href="#finddetectorsinshape-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/FindDetectorsInShape-v1_dlg.png"><img alt="../_images/FindDetectorsInShape-v1_dlg.png" class="screenshot" src="../_images/FindDetectorsInShape-v1_dlg.png" style="width: 447px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>FindDetectorsInShape</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Used to find which instrument detectors are contained within a user-defined 3-D shape.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="MaskDetectorsInShape-v1.html#algm-maskdetectorsinshape"><span class="std std-ref">MaskDetectorsInShape</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the input workspace</p></td>
</tr>
<tr class="row-odd"><td><p>ShapeXML</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The XML definition of the shape</p></td>
</tr>
<tr class="row-even"><td><p>IncludeMonitors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether monitors should be included if they are contained in the shape (default false)</p></td>
</tr>
<tr class="row-odd"><td><p>DetectorList</p></td>
<td><p>Output</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>The list of detector ids included within the shape</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>The algorithm places the user-defined geometric shape within the virtual
instrument and reports back the detector ID of every detector that is
contained within it. Detectors are only considered if their central location
point is contained within the shape.</p>
<p>There are a <a class="reference internal" href="../concepts/HowToDefineGeometricShape.html#howtodefinegeometricshape"><span class="std std-ref">How To Define Geometric Shape</span></a> available.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Finding Detectors Using Cylinders</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Load in the MUSR instrument from its IDF file.</span>
<span class="n">inst_def_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;instrumentDefinition.directory&quot;</span><span class="p">],</span> <span class="s2">&quot;MUSR_Definition.xml&quot;</span><span class="p">)</span>
<span class="n">musr_inst_ws</span> <span class="o">=</span> <span class="n">LoadEmptyInstrument</span><span class="p">(</span><span class="n">inst_def_file</span><span class="p">)</span>

<span class="c1"># Define a cylinder with radius 0.1.</span>
<span class="n">narrow_cylinder</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;infinite-cylinder id=</span><span class="se">\&quot;</span><span class="s2">shape</span><span class="se">\&quot;</span><span class="s2">&gt;</span>
<span class="s2">    &lt;centre x=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> y=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> z=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &lt;axis x=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> y=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> z=</span><span class="se">\&quot;</span><span class="s2">1</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &lt;radius val=</span><span class="se">\&quot;</span><span class="s2">0.1</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &lt;/infinite-cylinder&gt;</span>
<span class="s2">    &lt;algebra val=</span><span class="se">\&quot;</span><span class="s2">shape</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="c1"># Define a wider cylinder with radius 0.2.</span>
<span class="n">wide_cylinder</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;infinite-cylinder id=</span><span class="se">\&quot;</span><span class="s2">shape</span><span class="se">\&quot;</span><span class="s2">&gt;</span>
<span class="s2">    &lt;centre x=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> y=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> z=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &lt;axis x=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> y=</span><span class="se">\&quot;</span><span class="s2">0.0</span><span class="se">\&quot;</span><span class="s2"> z=</span><span class="se">\&quot;</span><span class="s2">1</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &lt;radius val=</span><span class="se">\&quot;</span><span class="s2">0.2</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &lt;/infinite-cylinder&gt;</span>
<span class="s2">    &lt;algebra val=</span><span class="se">\&quot;</span><span class="s2">shape</span><span class="se">\&quot;</span><span class="s2"> /&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span>

<span class="n">no_detectors</span> <span class="o">=</span> <span class="n">FindDetectorsInShape</span><span class="p">(</span><span class="n">musr_inst_ws</span><span class="p">,</span> <span class="n">narrow_cylinder</span><span class="p">)</span>
<span class="n">all_detectors</span> <span class="o">=</span> <span class="n">FindDetectorsInShape</span><span class="p">(</span><span class="n">musr_inst_ws</span><span class="p">,</span> <span class="n">wide_cylinder</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The narrow cylinder contains </span><span class="si">%i</span><span class="s2"> of the detectors.&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">no_detectors</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The wide cylinder contains </span><span class="si">%i</span><span class="s2"> of the detectors.&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_detectors</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The narrow cylinder contains 0 of the detectors.
The wide cylinder contains 64 of the detectors.
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Utility/Instrument.html">Utility\Instrument</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/8b6be077efd75a1eee39b81bc5971c6c51c44283/Framework/DataHandling/inc/MantidDataHandling/FindDetectorsInShape.h">FindDetectorsInShape.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/8b6be077efd75a1eee39b81bc5971c6c51c44283/Framework/DataHandling/src/FindDetectorsInShape.cpp">FindDetectorsInShape.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="FindDeadDetectors-v1.html" title="Previous Chapter: FindDeadDetectors v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; FindDeadDetectors v1</span>
    </a>
  </li>
  <li>
    <a href="FindDetectorsOutsideLimits-v1.html" title="Next Chapter: FindDetectorsOutsideLimits v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">FindDetectors... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>