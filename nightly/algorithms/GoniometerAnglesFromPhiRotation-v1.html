<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>GoniometerAnglesFromPhiRotation v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GreaterThanMD v1" href="GreaterThanMD-v1.html" />
    <link rel="prev" title="GetTimeSeriesLogInformation v1" href="GetTimeSeriesLogInformation-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">GoniometerAnglesFromPhiRotation v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="goniometeranglesfromphirotation-v1">
<span id="algm-goniometeranglesfromphirotation"></span><span id="algm-goniometeranglesfromphirotation-v1"></span><h1>GoniometerAnglesFromPhiRotation v1<a class="headerlink" href="#goniometeranglesfromphirotation-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/GoniometerAnglesFromPhiRotation-v1_dlg.png"><img alt="../_images/GoniometerAnglesFromPhiRotation-v1_dlg.png" class="screenshot" src="../_images/GoniometerAnglesFromPhiRotation-v1_dlg.png" style="width: 327px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>GoniometerAnglesFromPhiRotation</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>The 2nd PeaksWorkspace is set up with the correct sample orientations and UB matrices</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><span class="std std-ref">SetGoniometer</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PeaksWorkspace1</p></td>
<td><p>Input</p></td>
<td><p>PeaksWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input Peaks Workspace for Run 1</p></td>
</tr>
<tr class="row-odd"><td><p>PeaksWorkspace2</p></td>
<td><p>InOut</p></td>
<td><p>PeaksWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input Peaks Workspace for Run 2</p></td>
</tr>
<tr class="row-even"><td><p>Tolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.12</p></td>
<td><p>Integer offset for h,k,and l values to be considered valid.(def=.12)</p></td>
</tr>
<tr class="row-odd"><td><p>MIND</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>-1</p></td>
<td><p>Minimium d-spacing to consider,(def=-1)</p></td>
</tr>
<tr class="row-even"><td><p>MAXD</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>-1</p></td>
<td><p>Maximum d-spacing to consider,(def=-1)</p></td>
</tr>
<tr class="row-odd"><td><p>Run1Phi</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Phi for Run 1(def=0.0)</p></td>
</tr>
<tr class="row-even"><td><p>Phi2</p></td>
<td><p>InOut</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Phi angle for Run2(def=0.0)</p></td>
</tr>
<tr class="row-odd"><td><p>Chi2</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>Chi angle for Run2</p></td>
</tr>
<tr class="row-even"><td><p>Omega2</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>Omega angle for Run2</p></td>
</tr>
<tr class="row-odd"><td><p>NIndexed</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>Number peaks indexed</p></td>
</tr>
<tr class="row-even"><td><p>AvErrIndex</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>Average abs offset from integer values for indexed peaks</p></td>
</tr>
<tr class="row-odd"><td><p>AvErrAll</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>Average abs offset from integer values for all peaks</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm is used for finding Goniometer angles when instrument
readings are basically unknown. The inputs are two PeaksWorkspaces
corresponding to sample orientations of the SAME crystal that differ
only in their phi rotation.</p>
<p>If the phi angles are known, this algorithm attempts to find the common
chi and omega rotations.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load Peaks found in SXD23767.raw</span>
<span class="n">ws1</span> <span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;SXD23767.peaks&#39;</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">ws1</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c1">#Set orientated lattice</span>
<span class="n">ublist</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.06452276</span><span class="p">,</span>  <span class="mf">0.2478114</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.23742194</span><span class="p">,</span> <span class="mf">0.29161678</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00914316</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.12523779</span><span class="p">,</span> <span class="mf">0.06958942</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1802702</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.14649001</span><span class="p">]</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">ws1</span><span class="p">,</span><span class="n">UB</span><span class="o">=</span><span class="n">ublist</span><span class="p">)</span>

<span class="c1"># Run Algorithm</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">GoniometerAnglesFromPhiRotation</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span><span class="n">ws2</span><span class="p">,</span><span class="n">Tolerance</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">MIND</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">MAXD</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Chi: </span><span class="si">{:.1f}</span><span class="s2">, Omega: </span><span class="si">{:.1f}</span><span class="s2">, Indexed: </span><span class="si">{}</span><span class="s2">, AvErrIndex: </span><span class="si">{:.2f}</span><span class="s2"> AvErrAll: </span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Chi: 90.0, Omega: 90.0, Indexed: 300, AvErrIndex: 0.21 AvErrAll: 0.21
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Crystal/Goniometer.html">Crystal\Goniometer</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Crystal/inc/MantidCrystal/GoniometerAnglesFromPhiRotation.h">GoniometerAnglesFromPhiRotation.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Crystal/src/GoniometerAnglesFromPhiRotation.cpp">GoniometerAnglesFromPhiRotation.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="GetTimeSeriesLogInformation-v1.html" title="Previous Chapter: GetTimeSeriesLogInformation v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; GetTimeSeries...</span>
    </a>
  </li>
  <li>
    <a href="GreaterThanMD-v1.html" title="Next Chapter: GreaterThanMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">GreaterThanMD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>