<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Stitch1D v3</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Stitch1DMany v1" href="Stitch1DMany-v1.html" />
    <link rel="prev" title="Stitch v1" href="Stitch-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Stitch1D v3</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="stitch1d-v3">
<span id="algm-stitch1d"></span><span id="algm-stitch1d-v3"></span><h1>Stitch1D v3<a class="headerlink" href="#stitch1d-v3" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/Stitch1D-v3_dlg.png"><img alt="../_images/Stitch1D-v3_dlg.png" class="screenshot" src="../_images/Stitch1D-v3_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>Stitch1D</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#error-propagation" id="id6">Error propagation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id7">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id8">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Stitches single histogram matrix workspaces together</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin</span></a>, <a class="reference internal" href="Stitch1DMany-v1.html#algm-stitch1dmany"><span class="std std-ref">Stitch1DMany</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LHSWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>LHS input workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>RHSWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>RHS input workspace, must be same type as LHSWorkspace (histogram or point data).</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output stitched workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>StartOverlap</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Start overlap x-value in units of x-axis.</p></td>
</tr>
<tr class="row-even"><td><p>EndOverlap</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>End overlap x-value in units of x-axis.</p></td>
</tr>
<tr class="row-odd"><td><p>Params</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Rebinning Parameters. See Rebin for format. If only a single value is provided, start and end are taken from input workspaces.</p></td>
</tr>
<tr class="row-even"><td><p>ScaleRHSWorkspace</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Scaling either with respect to LHS workspace or RHS workspace</p></td>
</tr>
<tr class="row-odd"><td><p>UseManualScaleFactor</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>True to use a provided value for the scale factor.</p></td>
</tr>
<tr class="row-even"><td><p>ManualScaleFactor</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Provided value for the scale factor.</p></td>
</tr>
<tr class="row-odd"><td><p>OutScaleFactor</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>The actual used value for the scaling factor.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Stitches single histogram <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">Matrix Workspaces</span></a>
together outputting a stitched Matrix Workspace.
The type of the input workspaces (histogram or point data) determines the stitch procedure.
The x-error values Dx will always be ignored in case of histogram workspaces.
Point data workspaces must be consistent, i.e. must have Dx defined or not.</p>
<p>Either the right-hand-side or left-hand-side workspace can be chosen to be scaled.
Users can optionally provide <a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin v1</span></a> <code class="docutils literal notranslate"><span class="pre">Params</span></code>, otherwise they are calculated from the input workspaces.
Likewise, <code class="docutils literal notranslate"><span class="pre">StartOverlap</span></code> and <code class="docutils literal notranslate"><span class="pre">EndOverlap</span></code> are optional. If not provided, then these
are taken to be the region of X-axis intersection.</p>
<p>The algorithm workflow for histograms is as follows:</p>
<ol class="arabic simple">
<li><p>The workspaces are initially rebinned, as prescribed by the rebin <code class="docutils literal notranslate"><span class="pre">Params</span></code>. Note that
rebin parameters are determined automatically if not provided. In this case, the step size is
taken from the step size of the LHS workspace (or from the RHS workspace if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code>
was set to false) and rebin boundaries are taken from the minimum X value in the LHS workspace
and the maximum X value in the RHS workspace respectively.</p></li>
<li><p>After rebinning, each spectrum is searched for special values. Special values refer to signal
(Y) and error (E) values that are either infinite or NaN. These special values are masked out
as zeroes and their positions are recorded for later reinsertion.</p></li>
<li><p>Next, if <code class="docutils literal notranslate"><span class="pre">UseManualScaleFactor</span></code> was set to false, both workspaces will be integrated
according to the integration range defined by <code class="docutils literal notranslate"><span class="pre">StartOverlap</span></code> and <code class="docutils literal notranslate"><span class="pre">EndOverlap</span></code>.
Note that the integration is performed without special values, as those have been masked out
in the previous step. The scale factor is then calculated as the quotient of the integral of
the left-hand-side workspace by the integral of the right-hand-side workspace (or the quotient
of the right-hand-side workspace by the left-hand-side workspace if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code>
was set to false), and the right-hand-side workspace (left-hand-side if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code>
was set to false) is multiplied by the calculated factor.</p></li>
<li><p>Alternatively, if <code class="docutils literal notranslate"><span class="pre">UseManualScaleFactor</span></code> was set to true, the scale factor is applied
to the right-hand-side workspace (left-hand-side workspace if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code> was
set to false).</p></li>
<li><p>The weighted mean of the two workspaces in range [<code class="docutils literal notranslate"><span class="pre">StartOverlap</span></code>, <code class="docutils literal notranslate"><span class="pre">EndOverlap</span></code>]
is calculated. Note that if both workspaces have zero errors, an un-weighted mean will be
performed instead.</p></li>
<li><p>The output workspace will be created by summing the left-hand-side workspace (values in range
[<code class="docutils literal notranslate"><span class="pre">StartX</span></code>, <code class="docutils literal notranslate"><span class="pre">StartOverlap</span></code>], where <code class="docutils literal notranslate"><span class="pre">StartX</span></code> is the minimum X value
specified via <code class="docutils literal notranslate"><span class="pre">Params</span></code> or calculated from the left-hand-side workspace) + weighted
mean workspace + right-hand-side workspace (values in range [<code class="docutils literal notranslate"><span class="pre">EndOverlap</span></code>, <code class="docutils literal notranslate"><span class="pre">EndX</span></code>],
where <code class="docutils literal notranslate"><span class="pre">EndX</span></code> is the maximum X value specified via <code class="docutils literal notranslate"><span class="pre">Params</span></code> or calculated
from the right-hand-side workspace) multiplied by the scale factor.
Dx values will not be present in the output workspace.</p></li>
<li><p>The special values are put back in the output workspace. Note that if both the left-hand-side
workspace and the right-hand-side workspace happen to have a different special value in the same bin, this
bin will be set to infinite in the output workspace.</p></li>
</ol>
<p>Below is a flowchart illustrating the steps in the algorithm (it assumes <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code>
is true). Figure on the left corresponds
to the workflow when no scale factor is provided, while figure on the right corresponds to
workflow with a manual scale factor specified by the user.</p>
<img alt="../_images/Stitch1D-v3.svg" src="../_images/Stitch1D-v3.svg" /><p>The algorithm workflow for point data is as follows:</p>
<ol class="arabic simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">UseManualScaleFactor</span></code> was set to false, both workspaces will be integrated
according to the integration range defined by <code class="docutils literal notranslate"><span class="pre">StartOverlap</span></code> and <code class="docutils literal notranslate"><span class="pre">EndOverlap</span></code>.
Note that the integration is performed without special values, as those have been masked out
in the previous step. The scale factor is then calculated as the quotient of the integral of
the left-hand-side workspace by the integral of the right-hand-side workspace (or the quotient
of the right-hand-side workspace by the left-hand-side workspace if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code>
was set to false), and the right-hand-side workspace (left-hand-side if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code>
was set to false) is multiplied by the calculated factor.</p></li>
<li><p>Alternatively, if <code class="docutils literal notranslate"><span class="pre">UseManualScaleFactor</span></code> was set to true, the scale factor is applied
to the right-hand-side workspace (left-hand-side workspace if <code class="docutils literal notranslate"><span class="pre">ScaleRHSWorkspace</span></code> was
set to false).</p></li>
<li><p>The output workspace will be created by joining using <a class="reference internal" href="ConjoinXRuns-v1.html#algm-conjoinxruns"><span class="std std-ref">ConjoinXRuns v1</span></a> and sorting using
<a class="reference internal" href="SortXAxis-v1.html#algm-sortxaxis"><span class="std std-ref">SortXAxis v1</span></a>.
Dx values will be present in the output workspace.</p></li>
</ol>
<section id="error-propagation">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Error propagation</a><a class="headerlink" href="#error-propagation" title="Permalink to this heading">¶</a></h3>
<p>Errors are are handled and propagated in every step according to <a class="reference internal" href="../concepts/ErrorPropagation.html#error-propagation"><span class="std std-ref">Error Propagation</span></a>. This
includes every child algorithm: <a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin v1</span></a>, <a class="reference internal" href="Integration-v1.html#algm-integration"><span class="std std-ref">Integration v1</span></a>, <a class="reference internal" href="Divide-v1.html#algm-divide"><span class="std std-ref">Divide v1</span></a>,
<a class="reference internal" href="Multiply-v1.html#algm-multiply"><span class="std std-ref">Multiply v1</span></a> and <a class="reference internal" href="WeightedMean-v1.html#algm-weightedmean"><span class="std std-ref">WeightedMean v1</span></a>. In particular, when the scale factor is calculated
as the quotient of the left-hand-side integral and the right-hand-side integral, the result is
a number with an error associated, and therefore the multiplication of the right-hand-side
workspace by this number takes into account its error.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - a basic example using stitch1D to stitch two histogram workspaces together.</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Creates a Gaussian peak centered on mu and with width sigma.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span> <span class="n">sigma</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">mu</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>  <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">sigma</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># create two histograms with a single peak in each one</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">UnitX</span><span class="o">=</span><span class="s2">&quot;1/q&quot;</span><span class="p">,</span> <span class="n">DataX</span><span class="o">=</span><span class="n">x1</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">UnitX</span><span class="o">=</span><span class="s2">&quot;1/q&quot;</span><span class="p">,</span> <span class="n">DataX</span><span class="o">=</span><span class="n">x2</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># stitch the histograms together</span>
<span class="n">stitched</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">Stitch1D</span><span class="p">(</span><span class="n">LHSWorkspace</span><span class="o">=</span><span class="n">ws1</span><span class="p">,</span> <span class="n">RHSWorkspace</span><span class="o">=</span><span class="n">ws2</span><span class="p">,</span> <span class="n">StartOverlap</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">EndOverlap</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>

<span class="c1"># plot the individual workspaces alongside the stitched one</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>

<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;ws1&#39;</span><span class="p">],</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ws1&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;ws2&#39;</span><span class="p">],</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ws2&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;stitched&#39;</span><span class="p">],</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;stitched&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># uncomment the following line to show the plot window</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../algorithms/Stitch1D-v3-1.py">Source code</a>, <a class="reference external" href="../algorithms/Stitch1D-v3-1.png">png</a>, <a class="reference external" href="../algorithms/Stitch1D-v3-1.hires.png">hires.png</a>, <a class="reference external" href="../algorithms/Stitch1D-v3-1.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/Stitch1D-v3-1.png" class="plot-directive" src="../_images/Stitch1D-v3-1.png" />
</figure>
<p><strong>Example - a basic example using stitch1D to stitch two point data workspaces together.</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Creates a Gaussian peak centered on mu and with width sigma.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span> <span class="n">sigma</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">mu</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>  <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">sigma</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># create two histograms with a single peak in each one</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">UnitX</span><span class="o">=</span><span class="s2">&quot;1/q&quot;</span><span class="p">,</span> <span class="n">DataX</span><span class="o">=</span><span class="n">x1</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">UnitX</span><span class="o">=</span><span class="s2">&quot;1/q&quot;</span><span class="p">,</span> <span class="n">DataX</span><span class="o">=</span><span class="n">x2</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># stitch the histograms together</span>
<span class="n">stitched</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">Stitch1D</span><span class="p">(</span><span class="n">LHSWorkspace</span><span class="o">=</span><span class="n">ws1</span><span class="p">,</span> <span class="n">RHSWorkspace</span><span class="o">=</span><span class="n">ws2</span><span class="p">,</span> <span class="n">StartOverlap</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">EndOverlap</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="c1"># plot the individual workspaces alongside the stitched one</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>

<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;ws1&#39;</span><span class="p">],</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ws1&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;ws2&#39;</span><span class="p">],</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ws2&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;stitched&#39;</span><span class="p">],</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;stitched&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># uncomment the following line to show the plot window</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../algorithms/Stitch1D-v3-2.py">Source code</a>, <a class="reference external" href="../algorithms/Stitch1D-v3-2.png">png</a>, <a class="reference external" href="../algorithms/Stitch1D-v3-2.hires.png">hires.png</a>, <a class="reference external" href="../algorithms/Stitch1D-v3-2.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/Stitch1D-v3-2.png" class="plot-directive" src="../_images/Stitch1D-v3-2.png" />
</figure>
<p><strong>Example - a practical example using reflectometry data and a scale factor.</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">try</span><span class="p">:</span>
   <span class="n">trans1</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;INTER00013463&#39;</span><span class="p">)</span>
   <span class="n">trans2</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;INTER00013464&#39;</span><span class="p">)</span>

   <span class="n">trans1_wav</span> <span class="o">=</span> <span class="n">CreateTransmissionWorkspaceAuto</span><span class="p">(</span><span class="n">trans1</span><span class="p">)</span>
   <span class="n">trans2_wav</span> <span class="o">=</span> <span class="n">CreateTransmissionWorkspaceAuto</span><span class="p">(</span><span class="n">trans2</span><span class="p">)</span>

   <span class="n">stitched_wav</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Stitch1D</span><span class="p">(</span><span class="n">trans1_wav</span><span class="p">,</span> <span class="n">trans2_wav</span><span class="p">,</span> <span class="n">UseManualScaleFactor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ManualScaleFactor</span><span class="o">=</span><span class="mf">0.85</span><span class="p">)</span>

   <span class="c1"># plot the individual and stitched workspaces next to each other</span>
   <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>

   <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">trans1_wav</span><span class="p">,</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">trans1_wav</span><span class="p">))</span>
   <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">trans2_wav</span><span class="p">,</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">trans2_wav</span><span class="p">))</span>
   <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
   <span class="c1"># use same y scale on both plots</span>
   <span class="n">ylimits</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
   <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stitched_wav</span><span class="p">,</span> <span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;stitched&#39;</span><span class="p">)</span>
   <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
   <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ylimits</span><span class="p">)</span>

   <span class="c1"># uncomment the following line to show the plot window</span>
   <span class="c1">#fig.show()</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cannot load data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../algorithms/Stitch1D-v3-3.py">Source code</a>)</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/inc/MantidAlgorithms/Stitch1D.h">Stitch1D.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/src/Stitch1D.cpp">Stitch1D.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Stitch-v1.html" title="Previous Chapter: Stitch v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Stitch v1</span>
    </a>
  </li>
  <li>
    <a href="Stitch1DMany-v1.html" title="Next Chapter: Stitch1DMany v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Stitch1DMany v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>