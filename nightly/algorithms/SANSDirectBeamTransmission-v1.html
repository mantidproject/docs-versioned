<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>SANSDirectBeamTransmission v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SANSFitShiftScale v1" href="SANSFitShiftScale-v1.html" />
    <link rel="prev" title="SANSDarkRunBackgroundCorrection v1" href="SANSDarkRunBackgroundCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SANSDirectBeamTransmission v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="sansdirectbeamtransmission-v1">
<span id="algm-sansdirectbeamtransmission"></span><span id="algm-sansdirectbeamtransmission-v1"></span><h1>SANSDirectBeamTransmission v1<a class="headerlink" href="#sansdirectbeamtransmission-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SANSDirectBeamTransmission-v1_dlg.png"><img alt="../_images/SANSDirectBeamTransmission-v1_dlg.png" class="screenshot" src="../_images/SANSDirectBeamTransmission-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>SANSDirectBeamTransmission</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p></li>
<li><p><a class="reference internal" href="#source" id="id5">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Compute transmission using the direct beam method</p>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SampleDataFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Allowed values: [‘xml’, ‘nxs’, ‘nxs.h5’]</p></td>
</tr>
<tr class="row-even"><td><p>EmptyDataFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Allowed values: [‘xml’, ‘nxs’, ‘nxs.h5’]</p></td>
</tr>
<tr class="row-odd"><td><p>BeamRadius</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>3</p></td>
<td><p>Beam radius [pixels]</p></td>
</tr>
<tr class="row-even"><td><p>ThetaDependent</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If true, a theta-dependent correction will be applied</p></td>
</tr>
<tr class="row-odd"><td><p>DarkCurrentFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Allowed values: [‘xml’, ‘nxs’, ‘nxs.h5’]</p></td>
</tr>
<tr class="row-even"><td><p>UseSampleDarkCurrent</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, the sample dark current will be used</p></td>
</tr>
<tr class="row-odd"><td><p>BeamCenterX</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Beam center position in X</p></td>
</tr>
<tr class="row-even"><td><p>BeamCenterY</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Beam center position in Y</p></td>
</tr>
<tr class="row-odd"><td><p>ReductionProperties</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>__sans_reduction_properties</p></td>
<td><p>Property manager name for the reduction</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Workspace containing the data corrected for the transmission.</p></td>
</tr>
<tr class="row-odd"><td><p>TransmissionWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace containing the fitted transmission distribution.</p></td>
</tr>
<tr class="row-even"><td><p>RawTransmissionWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace containing the transmission distribution before fitting.</p></td>
</tr>
<tr class="row-odd"><td><p>MeasuredTransmission</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>MeasuredError</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OutputMessage</p></td>
<td><p>Output</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Output message</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Worfklow algorithm used to compute and apply the sample transmission correction using
the direct beam method. The transmission is calculated by the
<a class="reference internal" href="CalculateTransmission-v1.html#algm-calculatetransmission"><span class="std std-ref">CalculateTransmission</span></a>
as follows:</p>
<p><span class="math notranslate nohighlight">\(T=\frac{\sum_{i;\ d(i,j)&lt;R}\ \sum_{j} \frac{I_{sample}(i,j)}{T_{sample}}}{\sum_{i;\ d(i,j)&lt;R}\ \sum_{j} \frac{I_{beam}(i,j)}{T_{beam}}}\)</span></p>
<p>where <span class="math notranslate nohighlight">\(I_{sample}\)</span> and <span class="math notranslate nohighlight">\(I_{beam}\)</span> are the pixel counts for the sample
data set and the direct beam data set, respectively. The sums for each data set runs
only over the pixels within a distance R of the beam center equal to the beam radius.
<span class="math notranslate nohighlight">\(T_{sample}\)</span> and <span class="math notranslate nohighlight">\(T_{beam}\)</span> are the counting times for each of the
two data sets. If the user chose to normalize the data using the beam monitor when
setting up the reduction process, the beam monitor will be used to normalize the
sample and direct beam data sets instead of the timer.
If the user chose to use a dark current data set when starting the reduction process,
that dark current data will be subtracted from both data sets before the transmission
is calculated.</p>
<p>For each detector pixel, the transmission correction is applied by the
<a class="reference internal" href="ApplyTransmissionCorrection-v1.html#algm-applytransmissioncorrection"><span class="std std-ref">ApplyTransmissionCorrection</span></a>
as follows:</p>
<p><span class="math notranslate nohighlight">\(I'(x,y)=\frac{I(x,y)}{T^{[1+\sec(2\theta)]/2}}
\sigma_{I'(x,y)}=[[{\frac{\sigma_I}{{T^{[1+\sec(2\theta)]/2}}}}]^2 + [{\frac{I(x,y)\sigma_T(\frac{1+\sec(2\theta)}{2})}{{T^{[\sec(2\theta)-1]/2}}}}]^2]^{1/2}\)</span></p>
<p>This algorithm is rarely called directly. It is called by
<a class="reference internal" href="HFIRSANSReduction-v1.html#algm-hfirsansreduction"><span class="std std-ref">HFIRSANSReduction</span></a> or <a class="reference internal" href="EQSANSDirectBeamTransmission-v1.html#algm-eqsansdirectbeamtransmission"><span class="std std-ref">EQSANSDirectBeamTransmission</span></a>.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Workflow/SANS/UsesPropertyManager.html">Workflow\SANS\UsesPropertyManager</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SANSDirectBeamTransmission.py">SANSDirectBeamTransmission.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SANSDarkRunBackgroundCorrection-v1.html" title="Previous Chapter: SANSDarkRunBackgroundCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANSDarkRunBa...</span>
    </a>
  </li>
  <li>
    <a href="SANSFitShiftScale-v1.html" title="Next Chapter: SANSFitShiftScale v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SANSFitShiftScale v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>