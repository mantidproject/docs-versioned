<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>CreateMD v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CreateMDHistoWorkspace v1" href="CreateMDHistoWorkspace-v1.html" />
    <link rel="prev" title="CreateLogTimeCorrection v1" href="CreateLogTimeCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">CreateMD v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="createmd-v1">
<span id="algm-createmd"></span><span id="algm-createmd-v1"></span><h1>CreateMD v1<a class="headerlink" href="#createmd-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/CreateMD-v1_dlg.png"><img alt="../_images/CreateMD-v1_dlg.png" class="screenshot" src="../_images/CreateMD-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>CreateMD</strong> dialog.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id5">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id6">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id7">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id8">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#setting-the-ub-matrix" id="id9">Setting the UB matrix</a></p></li>
<li><p><a class="reference internal" href="#goniometer-settings" id="id10">Goniometer Settings</a></p></li>
<li><p><a class="reference internal" href="#efix" id="id11">EFix</a></p></li>
<li><p><a class="reference internal" href="#merging-individually-converted-runs" id="id12">Merging Individually Converted Runs</a></p></li>
<li><p><a class="reference internal" href="#additional-information" id="id13">Additional Information</a></p></li>
<li><p><a class="reference internal" href="#workflow" id="id14">Workflow</a></p></li>
<li><p><a class="reference internal" href="#conversion-of-multiple-input-files-example" id="id15"><strong>Conversion Of Multiple Input Files Example</strong></a></p></li>
<li><p><a class="reference internal" href="#conversion-of-a-single-input-workspace-example" id="id16"><strong>Conversion Of A Single Input Workspace Example</strong></a></p>
<ul>
<li><p><a class="reference internal" href="#output" id="id17">Output</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#conversion-of-multiple-input-workspaces-example" id="id18"><strong>Conversion Of Multiple Input Workspaces Example</strong></a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id19">Output</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#multi-conversion-example-without-altering-original-workspaces-inplace-false" id="id20"><strong>Multi Conversion Example Without Altering Original Workspaces (InPlace=False)</strong></a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id21">Output</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#source" id="id22">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Creates an MDWorkspace in the Q3D, HKL frame</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="CreateMDWorkspace-v1.html#algm-createmdworkspace"><span class="std std-ref">CreateMDWorkspace</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>MDEventWorkspace with new data appended.</p></td>
</tr>
<tr class="row-odd"><td><p>DataSources</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input workspaces to process, or filenames to load and process</p></td>
</tr>
<tr class="row-even"><td><p>EFix</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>datasource energy values in meV</p></td>
</tr>
<tr class="row-odd"><td><p>Emode</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Direct</p></td>
<td><p>Analysis mode [‘Elastic’, ‘Direct’, ‘Indirect’]. Allowed values: [‘Elastic’, ‘Direct’, ‘Indirect’]</p></td>
</tr>
<tr class="row-even"><td><p>Alatt</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Lattice parameters</p></td>
</tr>
<tr class="row-odd"><td><p>Angdeg</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Lattice angles</p></td>
</tr>
<tr class="row-even"><td><p>u</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Lattice vector parallel to neutron beam</p></td>
</tr>
<tr class="row-odd"><td><p>v</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Lattice vector perpendicular to neutron beam in the horizontal plane</p></td>
</tr>
<tr class="row-even"><td><p>Psi</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Psi rotation in degrees. Optional or one entry per run.</p></td>
</tr>
<tr class="row-odd"><td><p>Gl</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>gl rotation in degrees. Optional or one entry per run.</p></td>
</tr>
<tr class="row-even"><td><p>Gs</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>gs rotation in degrees. Optional or one entry per run.</p></td>
</tr>
<tr class="row-odd"><td><p>InPlace</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Execute conversions to MD and Merge in one-step. Less memory overhead.</p></td>
</tr>
<tr class="row-even"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The name of the Nexus file to write, as a full or relative path. Only used if FileBackEnd is true. Allowed extensions: [‘.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>FileBackEnd</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, Filename must also be specified. The algorithm will create the specified file in addition to an output workspace. The workspace will load data from the file on demand in order to reduce memory use.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This workflow algorithm creates MDWorkspaces in the Q3D, HKL frame using <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD v1</span></a>.</p>
<p>Using the FileBackEnd and Filename properties the algorithm can produce a file-backed workspace.
Note that this will significantly increase the execution time of the algorithm.</p>
<section id="setting-the-ub-matrix">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Setting the UB matrix</a><a class="headerlink" href="#setting-the-ub-matrix" title="Permalink to this heading">¶</a></h3>
<p><em>u</em> and <em>v</em> are required. <em>u</em> and <em>v</em> are both 3-element vectors. These specify how the crystal’s axes were oriented relative to the spectrometer in the setup for which you define psi to be zero. <em>u</em> specifies the lattice vector that is parallel to the incident neutron beam, whilst <em>v</em> is a vector perpendicular to this in the horizontal plane. In <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> notation, <em>u</em> and <em>v</em> provide the U matrix. See <a class="reference internal" href="SetUB-v1.html#algm-setub"><span class="std std-ref">SetUB v1</span></a>. <em>Alatt</em> and <em>Angdeg</em> are the lattice parameters in Angstroms and lattice angles in degrees respectively. Both are 3-element vectors. These form the B-matrix.</p>
</section>
<section id="goniometer-settings">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Goniometer Settings</a><a class="headerlink" href="#goniometer-settings" title="Permalink to this heading">¶</a></h3>
<p>If goniometer settings have been provided then these will be applied to the input workspace(s). For multiple input workspaces, you will need to provide goniometer settings (<em>Psi</em>, <em>Gl</em>, <em>Gs</em>) as vectors where each element of the vector corresponds to the workspace in the order listed in <em>InputWorkspaces</em>. You do not need to provide the goniometer settings at all. If you run <a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><span class="std std-ref">SetGoniometer v1</span></a> individually on the input workspace prior to running CreateMD, then those settings will not be overwritten by CreateMD.</p>
</section>
<section id="efix">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">EFix</a><a class="headerlink" href="#efix" title="Permalink to this heading">¶</a></h3>
<p>The EFix value may be provided for input workspaces. Specifying a single value, will ensure that that value is applied to all input DataSources. EFix can also be provided as an array provided that the array is the same length as the DeataSources, in this case, the EFix values will be matched to the DataSources based on index. EFix has units of meV.</p>
</section>
<section id="merging-individually-converted-runs">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Merging Individually Converted Runs</a><a class="headerlink" href="#merging-individually-converted-runs" title="Permalink to this heading">¶</a></h3>
<p>If a sequence of input workspaces are provided, and <em>InPlace</em> is False, then these are individually processed as above, and are merged together via <a class="reference internal" href="MergeMD-v1.html#algm-mergemd"><span class="std std-ref">MergeMD v1</span></a>. Intermediate workspaces are not kept. If <em>InPlace</em> is applied conversion and merging are done in the same step. This requires less memory overhead, however input workspaces are altered.</p>
</section>
<section id="additional-information">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="Permalink to this heading">¶</a></h3>
<p>CreateMD steps use <a class="reference internal" href="ConvertToMDMinMaxGlobal-v1.html#algm-converttomdminmaxglobal"><span class="std std-ref">ConvertToMDMinMaxGlobal v1</span></a> to determine the min and max possible extents prior to running <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD v1</span></a> on each run.</p>
<figure class="align-default" id="id4">
<img alt="HoraceOrientation.png" src="../_images/HoraceOrientation.png" />
<figcaption>
<p><span class="caption-text"><a class="reference external" href="http://horace.isis.rl.ac.uk/Generating_SQW_files">Horace</a> style orientation used by CreateMD. DSPI and Omega in the image have no meaning in Mantid and are not required by this algorithm.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="workflow">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this heading">¶</a></h3>
<img alt="../_images/CreateMD-v1_wkflw.svg" src="../_images/CreateMD-v1_wkflw.svg" /></section>
<section id="conversion-of-multiple-input-files-example">
<h3><a class="toc-backref" href="#id15" role="doc-backlink"><strong>Conversion Of Multiple Input Files Example</strong></a><a class="headerlink" href="#conversion-of-multiple-input-files-example" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Create arrays of run numbers and corresponding values of psi</span>
<span class="n">run_numbers</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15052</span><span class="p">,</span> <span class="mi">15098</span><span class="p">)</span>
<span class="n">psi_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">92.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create list of file names from run numbers</span>
<span class="n">input_runs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;/path/to/data/instr_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">run_number</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.nxspe&#39;</span> <span class="k">for</span> <span class="n">run_number</span> <span class="ow">in</span> <span class="n">run_numbers</span><span class="p">]</span>

<span class="n">md_ws</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">input_runs</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">2.87</span><span class="p">,</span> <span class="mf">2.87</span><span class="p">,</span> <span class="mf">2.87</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="n">psi_array</span><span class="p">,</span> <span class="n">EFix</span><span class="o">=</span><span class="mf">400.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="conversion-of-a-single-input-workspace-example">
<h3><a class="toc-backref" href="#id16" role="doc-backlink"><strong>Conversion Of A Single Input Workspace Example</strong></a><a class="headerlink" href="#conversion-of-a-single-input-workspace-example" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create some input data.</span>
<span class="n">current_ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s1">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">)</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">current_ws</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;Ei&#39;</span><span class="p">,</span><span class="n">LogText</span><span class="o">=</span><span class="s1">&#39;3.0&#39;</span><span class="p">,</span><span class="n">LogType</span><span class="o">=</span><span class="s1">&#39;Number&#39;</span><span class="p">)</span>

<span class="c1"># Execute CreateMD</span>
<span class="n">new_mdew</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">current_ws</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Gs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Gl</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Show dimensionality and dimension names</span>
<span class="n">ndims</span> <span class="o">=</span> <span class="n">new_mdew</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ndims</span><span class="p">):</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">new_mdew</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<section id="output">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">Output</a><a class="headerlink" href="#output" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">H</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="p">]</span>
<span class="n">DeltaE</span>
</pre></div>
</div>
</section>
</section>
<section id="conversion-of-multiple-input-workspaces-example">
<h3><a class="toc-backref" href="#id18" role="doc-backlink"><strong>Conversion Of Multiple Input Workspaces Example</strong></a><a class="headerlink" href="#conversion-of-multiple-input-workspaces-example" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create multiple runs</span>
<span class="n">input_runs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">psi</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gl</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="n">current_ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s1">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;input_ws_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">input_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_ws</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
    <span class="n">psi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">gs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># Convert and merge</span>
<span class="n">new_merged</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">input_runs</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="n">psi</span><span class="p">,</span> <span class="n">Gl</span><span class="o">=</span><span class="n">gl</span><span class="p">,</span> <span class="n">Gs</span><span class="o">=</span><span class="n">gs</span><span class="p">,</span> <span class="n">EFix</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>

<span class="c1"># Show dimensionality and dimension names</span>
<span class="n">ndims</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ndims</span><span class="p">):</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<section id="id1">
<h4><a class="toc-backref" href="#id19" role="doc-backlink">Output</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">H</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="p">]</span>
<span class="n">DeltaE</span>
</pre></div>
</div>
</section>
</section>
<section id="multi-conversion-example-without-altering-original-workspaces-inplace-false">
<h3><a class="toc-backref" href="#id20" role="doc-backlink"><strong>Multi Conversion Example Without Altering Original Workspaces (InPlace=False)</strong></a><a class="headerlink" href="#multi-conversion-example-without-altering-original-workspaces-inplace-false" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create multiple runs</span>
<span class="n">input_runs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">psi</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gl</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="n">current_ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s1">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;input_ws_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">input_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_ws</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
    <span class="n">psi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">gs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># Convert and merge. ConversionToMD done in place.</span>
<span class="n">new_merged</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">input_runs</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="n">psi</span><span class="p">,</span> <span class="n">Gl</span><span class="o">=</span><span class="n">gl</span><span class="p">,</span> <span class="n">Gs</span><span class="o">=</span><span class="n">gs</span><span class="p">,</span> <span class="n">EFix</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">InPlace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Show dimensionality and dimension names</span>
<span class="n">ndims</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ndims</span><span class="p">):</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<section id="id2">
<h4><a class="toc-backref" href="#id21" role="doc-backlink">Output</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">H</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="p">]</span>
<span class="n">DeltaE</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms.html">MDAlgorithms</a></p>
</section>
</section>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ec01dd0095c93d22fbc1c7a502ff628a4fee9a76/Framework/MDAlgorithms/inc/MantidMDAlgorithms/CreateMD.h">CreateMD.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ec01dd0095c93d22fbc1c7a502ff628a4fee9a76/Framework/MDAlgorithms/src/CreateMD.cpp">CreateMD.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CreateLogTimeCorrection-v1.html" title="Previous Chapter: CreateLogTimeCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CreateLogTime...</span>
    </a>
  </li>
  <li>
    <a href="CreateMDHistoWorkspace-v1.html" title="Next Chapter: CreateMDHistoWorkspace v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CreateMDHisto... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>