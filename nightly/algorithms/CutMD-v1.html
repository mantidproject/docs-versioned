<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>CutMD v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CylinderAbsorption v1" href="CylinderAbsorption-v1.html" />
    <link rel="prev" title="CuboidGaugeVolumeAbsorption v1" href="CuboidGaugeVolumeAbsorption-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">CutMD v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="cutmd-v1">
<span id="algm-cutmd"></span><span id="algm-cutmd-v1"></span><h1>CutMD v1<a class="headerlink" href="#cutmd-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id2">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/CutMD-v1_dlg.png"><img alt="../_images/CutMD-v1_dlg.png" class="screenshot" src="../_images/CutMD-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>CutMD</strong> dialog.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#mdeventworkspaces" id="id7">MDEventWorkspaces</a></p></li>
<li><p><a class="reference internal" href="#mdhistoworkspaces" id="id8">MDHistoWorkspaces</a></p></li>
<li><p><a class="reference internal" href="#projection-binning" id="id9">Projection Binning</a></p></li>
<li><p><a class="reference internal" href="#creating-projections" id="id10">Creating Projections</a></p></li>
<li><p><a class="reference internal" href="#workflow" id="id11">Workflow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id1" id="id12">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id13">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Slices multidimensional workspaces using input projection information and binning limits.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="SliceMDHisto-v1.html#algm-slicemdhisto"><span class="std std-ref">SliceMDHisto</span></a>, <a class="reference internal" href="ProjectMD-v1.html#algm-projectmd"><span class="std std-ref">ProjectMD</span></a>, <a class="reference internal" href="SliceMD-v1.html#algm-slicemd"><span class="std std-ref">SliceMD</span></a>, <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>MDWorkspace to slice</p></td>
</tr>
<tr class="row-odd"><td><p>Projection</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td></td>
<td><p>Projection</p></td>
</tr>
<tr class="row-even"><td><p>P1Bin</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Projection 1 binning.</p></td>
</tr>
<tr class="row-odd"><td><p>P2Bin</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Projection 2 binning.</p></td>
</tr>
<tr class="row-even"><td><p>P3Bin</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Projection 3 binning.</p></td>
</tr>
<tr class="row-odd"><td><p>P4Bin</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Projection 4 binning.</p></td>
</tr>
<tr class="row-even"><td><p>P5Bin</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Projection 5 binning.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>IMDWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output cut workspace</p></td>
</tr>
<tr class="row-even"><td><p>NoPix</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If False creates a full MDEventWorkspaces as output. True to create an MDHistoWorkspace as output. This is DND only in Horace terminology.</p></td>
</tr>
<tr class="row-odd"><td><p>MaxRecursionDepth</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Sets the maximum recursion depth to use. Can be used to constrain the workspaces internal structure</p></td>
</tr>
<tr class="row-even"><td><p>InterpretQDimensionUnits</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Auto</p></td>
<td><p>How will the Q units of the input workspace be interpreted? This property will disappear in future versions of Mantid Auto : Figure it out based on the label units RLU : Force them to be rlu Q in A^-1 : Force them to be inverse angstroms. Allowed values: [‘Auto’, ‘RLU’, ‘Q in A^-1’]</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm performs slicing of multiDimensional data according to a chosen
projection, limits and binning steps.</p>
<p>The syntax is similar to that used by <a class="reference external" href="http://horace.isis.rl.ac.uk/Manipulating_and_extracting_data_from_SQW_files_and_objects#cut_sqw">Horace</a>.</p>
<p>Unlike most Mantid algorithms, CutMD can accept a list of workspaces as the
input workspace, given as the name of a workspace in the analysis data service
or the path to a workspace, or simply a workspace object in python. These will
all then be processed sequentially with the same options. The only requirement
is that the same number of output workspaces are also given so that CutMD knows
what to call each output workspace created.</p>
<section id="mdeventworkspaces">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">MDEventWorkspaces</a><a class="headerlink" href="#mdeventworkspaces" title="Permalink to this heading">¶</a></h3>
<p>For input of type <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a> the algorithm uses <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD v1</span></a> or
<a class="reference internal" href="SliceMD-v1.html#algm-slicemd"><span class="std std-ref">SliceMD v1</span></a> to achieve the binning of the data. The choice of child
algorithm used for slicing in this case is controlled by the NoPix option.</p>
</section>
<section id="mdhistoworkspaces">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">MDHistoWorkspaces</a><a class="headerlink" href="#mdhistoworkspaces" title="Permalink to this heading">¶</a></h3>
<p>If the input is an <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a> <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD v1</span></a> and <a class="reference internal" href="SliceMD-v1.html#algm-slicemd"><span class="std std-ref">SliceMD v1</span></a> are not made available as they needto get hold of the original MDEvents associated with an <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a> in order to perform the rebinning. As this information is missing from the MDHistoWorkspace images, those operations are forbidden. Instead, a limited subset of the operations are allowed, and are performed via <a class="reference internal" href="IntegrateMDHistoWorkspace-v1.html#algm-integratemdhistoworkspace"><span class="std std-ref">IntegrateMDHistoWorkspace v1</span></a>. In this case, the Projection and NoPix properties are ignored. See <a class="reference internal" href="IntegrateMDHistoWorkspace-v1.html#algm-integratemdhistoworkspace"><span class="std std-ref">IntegrateMDHistoWorkspace v1</span></a> for how the binning parameters are used.</p>
</section>
<section id="projection-binning">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Projection Binning</a><a class="headerlink" href="#projection-binning" title="Permalink to this heading">¶</a></h3>
<p>The ‘PnBin’ property, where n is between 1 and 5, is used to specify the binning for the nth dimension of the output workspace.
The dimension will be truncated to have extents ‘minimum’ and ‘maximum’, with ‘stepsize’ specifying the size of the bins inbetween.
‘(maximum - minimum)/stepsize’ is rounded down to produce an integer number, greater than or equal to 1, of equally-sized bins between ‘minimum’ and ‘maximum’.</p>
<p>Note that if the output workspace is an MDEventWorkspace (NoPix=False), these properties define the top-level box structure of the workspace.
If the MaxRecursionDepth property is set to higher than its default of 1 then if many events fall within a single box it may be split further,
see the documentation for <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a>.</p>
<p>The PnBin parameters must match one of these three formats:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Format</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[minimum, stepsize, maximum]</p></td>
<td><p>The dimension in the output workspace will extend
from ‘minimum’ to ‘maximum’ with bins of width
‘stepsize’.</p></td>
</tr>
<tr class="row-odd"><td><p>[minimum, maximum]</p></td>
<td><p>A single bin will be created between ‘minimum’ and
‘maximum’.</p></td>
</tr>
<tr class="row-even"><td><p>[stepsize]</p></td>
<td><p>The ‘minimum’ and ‘maximum’ are set to the dimension
limits; the workspace is not cut in this dimension.</p></td>
</tr>
</tbody>
</table>
<p>For ease of use, when using the python interface only, the ‘PBins’ keyword can be used in place of separate PnBins properties.
PBins accepts a tuple, or list, of PnBins parameters. The position in the list determines the dimension it corresponds to. See the <a class="reference internal" href="#usage">Usage</a> examples below.</p>
</section>
<section id="creating-projections">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Creating Projections</a><a class="headerlink" href="#creating-projections" title="Permalink to this heading">¶</a></h3>
<p>Projections are used by CutMD to transform the multidimensional data prior to
cutting it. Projections are provided to CutMD in the form of a <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a>.
The format of these workspaces is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>Specifies the dimension the row controls. Can be ‘u’,
‘v’, or ‘w’.</p></td>
</tr>
<tr class="row-odd"><td><p>value</p></td>
<td><p>V3D</p></td>
<td><p>A 3 dimensional vector specifying the axis for the
dimension. Example: [1,-1,0]</p></td>
</tr>
<tr class="row-even"><td><p>offset</p></td>
<td><p>double</p></td>
<td><p>The offset value to use for this dimension.</p></td>
</tr>
<tr class="row-odd"><td><p>type</p></td>
<td><p>string</p></td>
<td><p>The type/unit of this dimension. ‘r’ is RLU, ‘a’ is
inverse angstroms.</p></td>
</tr>
</tbody>
</table>
<p>A projection table should have three rows: one for u, one for v, and one for w.</p>
<p>There is a helper class called Projection that can be used to construct these
projection tables for you automatically. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">Projection</span>
<span class="c1"># Create an identity projection</span>
<span class="n">proj_id</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># Automatically infer third dimension as being orthogonal to the first two</span>
<span class="n">proj_rot</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Set other properties</span>
<span class="n">proj_prop</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">()</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1"># Set u offset to 100</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setOffset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="p">)</span> <span class="c1"># Set v offset to -5</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="c1"># Set v type to be RLU</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="c1"># Set w type to be inverse angstroms</span>

<span class="c1">#Create table workspaces from these projections</span>
<span class="n">ws_id</span> <span class="o">=</span> <span class="n">proj_id</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">()</span> <span class="c1"># Named ws_id</span>
<span class="n">proj_rot</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s2">&quot;ws_rot&quot;</span><span class="p">)</span> <span class="c1"># Name ws_rot</span>
</pre></div>
</div>
<p>When calling createWorkspace inside of algorithms like CutMD, the
OutputWorkspace name must be provided, or createWorkspace will not know what to
call the created workspace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Good:</span>
<span class="n">CutMD</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">Projection</span><span class="o">=</span><span class="n">proj</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;proj_ws&#39;</span><span class="p">),</span> <span class="o">...</span><span class="p">)</span>

<span class="c1">#Bad:</span>
<span class="n">CutMD</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">Projection</span><span class="o">=</span><span class="n">proj</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">(),</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="workflow">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this heading">¶</a></h3>
<img alt="../_images/CutMD-v1_wkflw.svg" src="../_images/CutMD-v1_wkflw.svg" /></section>
</section>
<section id="id1">
<h2><a class="toc-backref" href="#id12" role="doc-backlink"><span class="target" id="usage">Usage</span></a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Contrived example using projections:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">Projection</span>

<span class="n">to_cut</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s2">&quot;H,K,L,E&quot;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s2">&quot;U,U,U,V&quot;</span><span class="p">)</span>
<span class="c1"># Add two fake peaks so that we can see the effect of the basis transformation</span>

<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;to_cut&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>

<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;to_cut&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>

<span class="n">SetUB</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">to_cut</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">SetSpecialCoordinates</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">to_cut</span><span class="p">,</span> <span class="n">SpecialCoordinates</span><span class="o">=</span><span class="s1">&#39;HKL&#39;</span><span class="p">)</span>

<span class="c1">#Since we only specify u and v, w is automatically calculated to be the cross product of u and v</span>
<span class="n">projection</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">proj_ws</span> <span class="o">=</span> <span class="n">projection</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">()</span>

<span class="c1"># Apply the cut (PBins property sets the P1Bin, P2Bin, etc. properties for you)</span>
<span class="n">out_md</span> <span class="o">=</span> <span class="n">CutMD</span><span class="p">(</span><span class="n">to_cut</span><span class="p">,</span> <span class="n">Projection</span><span class="o">=</span><span class="n">proj_ws</span><span class="p">,</span> <span class="n">PBins</span><span class="o">=</span><span class="p">([</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">]),</span> <span class="n">NoPix</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">#Another way we can call CutMD:</span>
<span class="c1">#[out1, out2, out3] = CutMD([to_cut, &quot;some_other_file.nxs&quot;, &quot;some_workspace_name&quot;], ...)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of dimensions </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_md</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of dimensions not integrated </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">out_md</span><span class="o">.</span><span class="n">getNonIntegratedDimensions</span><span class="p">())))</span>
<span class="n">dim_dE</span> <span class="o">=</span> <span class="n">out_md</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;min dE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim_dE</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;max dE </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim_dE</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>number of dimensions 4
number of dimensions not integrated 3
min dE 5.0
max dE -5.0
</pre></div>
</div>
<p><strong>Example - CutMD on MDHistoWorkspace:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">signal</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">error</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
<span class="c1"># Create Histo workspace</span>
<span class="n">histo_ws</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="n">SignalInput</span><span class="o">=</span><span class="n">signal</span> <span class="p">,</span><span class="n">ErrorInput</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">NumberOfBins</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;X,Y&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;Q,Q&#39;</span><span class="p">)</span>

<span class="c1"># Cut the MDHistoWorkspace to give a single bin containing half the data</span>
<span class="n">cut</span><span class="o">=</span> <span class="n">CutMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">histo_ws</span><span class="p">,</span> <span class="n">PBins</span><span class="o">=</span><span class="p">[[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total signal in input = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">signal</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Half the volume should give half the signal = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cut</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Total signal in input = 100.0
Half the volume should give half the signal = 50.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/Slicing.html">MDAlgorithms\Slicing</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/MDAlgorithms/inc/MantidMDAlgorithms/CutMD.h">CutMD.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/MDAlgorithms/src/CutMD.cpp">CutMD.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CuboidGaugeVolumeAbsorption-v1.html" title="Previous Chapter: CuboidGaugeVolumeAbsorption v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CuboidGaugeVo...</span>
    </a>
  </li>
  <li>
    <a href="CylinderAbsorption-v1.html" title="Next Chapter: CylinderAbsorption v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CylinderAbsorption v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>