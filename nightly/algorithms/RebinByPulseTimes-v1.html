<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>RebinByPulseTimes v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RebinByTimeAtSample v1" href="RebinByTimeAtSample-v1.html" />
    <link rel="prev" title="Rebin2D v1" href="Rebin2D-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">RebinByPulseTimes v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="rebinbypulsetimes-v1">
<span id="algm-rebinbypulsetimes"></span><span id="algm-rebinbypulsetimes-v1"></span><h1>RebinByPulseTimes v1<a class="headerlink" href="#rebinbypulsetimes-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/RebinByPulseTimes-v1_dlg.png"><img alt="../_images/RebinByPulseTimes-v1_dlg.png" class="screenshot" src="../_images/RebinByPulseTimes-v1_dlg.png" style="width: 447px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>RebinByPulseTimes</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p></li>
<li><p><a class="reference internal" href="#example-of-use" id="id7">Example of Use</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Bins events according to pulse time. Binning parameters are specified relative to the start of the run.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin</span></a>, <a class="reference internal" href="RebinByTimeAtSample-v1.html#algm-rebinbytimeatsample"><span class="std std-ref">RebinByTimeAtSample</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IEventWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input workspace containing TOF events.</p></td>
</tr>
<tr class="row-odd"><td><p>Params</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A comma separated list of first bin boundary, width, last bin boundary. Optionally this can be followed by a comma and more widths and last boundary pairs. Values are in seconds since run start.</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An output workspace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Rebins an EventWorkspace according to the pulse times of each event
rather than the time of flight <a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin v1</span></a>. The Params inputs may
be expressed in an identical manner to the <a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin v1</span></a> algorithm. Param arguments are
in seconds since run start. Users may either provide a single value, which is interpreted as the
<em>step</em> (in seconds), or three comma separated values <em>start</em>, <em>step</em>,
<em>end</em>, where all units are in seconds, and start and end are relative to
the start of the run.</p>
<p>The x-axis is expressed in relative time to the start of the run in
seconds.</p>
<p>This algorithm may be used to diagnose problems with the electronics or
data collection. Typically, detectors should see a uniform distribution
of the events generated between the start and end of the run. This
algorithm allows anomalies to be detected.</p>
</section>
<section id="example-of-use">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Example of Use</a><a class="headerlink" href="#example-of-use" title="Permalink to this heading">¶</a></h2>
<p>This diagnostic algorithm is particularly useful when coupled with the
Instrument View. In the example below is a real-world usage example
where we were able to highlight issues with data collection on the ISIS
WISH instrument. Some blocks of tubes, where tubes are arranged
vertically, are missing neutrons within large block of pulse time as a
result of data-buffering. After running RebinByPulseTime, we were able
to find both, which banks were affected, as well as the missing pulse
times for each bank. The horizontal slider in the instrument view allows
us to easily integrate over a section of pulse time and see the results
as a colour map.</p>
<figure class="align-default" id="id2">
<img alt="RebinByPulseTime.png" src="../_images/RebinByPulseTime.png" />
<figcaption>
<p><span class="caption-text">Instrument view of WISH with data projected after rebinning by pulse times</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Rebinning an EventWorkspace by pulse times</strong></p>
<p>Input workspace has raw events</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load RAW event data</span>
<span class="n">event_ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="c1"># Start time</span>
<span class="n">start_time_in_seconds</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># End time</span>
<span class="n">end_time_in_seconds</span> <span class="o">=</span> <span class="mf">1e2</span>
<span class="c1"># Step size</span>
<span class="n">time_step_in_seconds</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># Perform the rebin</span>
<span class="n">pulse_t_ws</span> <span class="o">=</span> <span class="n">RebinByPulseTimes</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">event_ws</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="p">[</span><span class="n">start_time_in_seconds</span><span class="p">,</span> <span class="n">time_step_in_seconds</span><span class="p">,</span> <span class="n">end_time_in_seconds</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Events are rebinned into:  </span><span class="si">{}</span><span class="s2"> bins per histogram&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pulse_t_ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;X-axis relative start time in seconds:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pulse_t_ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;X-axis relative end time in seconds:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pulse_t_ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Events are rebinned into:  100 bins per histogram
X-axis relative start time in seconds:  0.0
X-axis relative end time in seconds:  100.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Transforms/Rebin.html">Transforms\Rebin</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/inc/MantidAlgorithms/RebinByPulseTimes.h">RebinByPulseTimes.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/src/RebinByPulseTimes.cpp">RebinByPulseTimes.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Rebin2D-v1.html" title="Previous Chapter: Rebin2D v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Rebin2D v1</span>
    </a>
  </li>
  <li>
    <a href="RebinByTimeAtSample-v1.html" title="Next Chapter: RebinByTimeAtSample v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">RebinByTimeAt... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>