<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LoadDNSSCD v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadDaveGrp v1" href="LoadDaveGrp-v1.html" />
    <link rel="prev" title="LoadDNSLegacy v1" href="LoadDNSLegacy-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadDNSSCD v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="loaddnsscd-v1">
<span id="algm-loaddnsscd"></span><span id="algm-loaddnsscd-v1"></span><h1>LoadDNSSCD v1<a class="headerlink" href="#loaddnsscd-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/LoadDNSSCD-v1_dlg.png"><img alt="../_images/LoadDNSSCD-v1_dlg.png" class="screenshot" src="../_images/LoadDNSSCD-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>LoadDNSSCD</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#restrictions" id="id6">Restrictions</a></p></li>
<li><p><a class="reference internal" href="#data-replication" id="id7">Data replication</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Load a list of DNS .d_dat files into a MDEventWorkspace.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="LoadDNSLegacy-v1.html#algm-loaddnslegacy"><span class="std std-ref">LoadDNSLegacy</span></a>, <a class="reference internal" href="LoadWANDSCD-v1.html#algm-loadwandscd"><span class="std std-ref">LoadWANDSCD</span></a>, <a class="reference internal" href="ConvertWANDSCDtoQ-v1.html#algm-convertwandscdtoq"><span class="std std-ref">ConvertWANDSCDtoQ</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Filenames</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Select one or more DNS SCD .d_dat files to load.Files must be measured at the same conditions. Allowed extensions: [‘.d_dat’]</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An output MDEventWorkspace.</p></td>
</tr>
<tr class="row-even"><td><p>NormalizationWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An output normalization MDEventWorkspace.</p></td>
</tr>
<tr class="row-odd"><td><p>Normalization</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>monitor</p></td>
<td><p>Algorithm will create a separate normalization workspace. Choose whether it should contain monitor counts or time. Allowed values: [‘monitor’, ‘time’]</p></td>
</tr>
<tr class="row-even"><td><p>LoadAs</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>HKL</p></td>
<td><p>Choose whether the algorithm should load raw dataor convert to H,K,L,dE space. Allowed values: [‘raw’, ‘HKL’]</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Lattice parameter a in Angstrom</p></td>
</tr>
<tr class="row-even"><td><p>b</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Lattice parameter b in Angstrom</p></td>
</tr>
<tr class="row-odd"><td><p>c</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Lattice parameter c in Angstrom</p></td>
</tr>
<tr class="row-even"><td><p>alpha</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>90</p></td>
<td><p>Angle between b and c in degrees</p></td>
</tr>
<tr class="row-odd"><td><p>beta</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>90</p></td>
<td><p>Angle between a and c in degrees</p></td>
</tr>
<tr class="row-even"><td><p>gamma</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>90</p></td>
<td><p>Angle between a and b in degrees</p></td>
</tr>
<tr class="row-odd"><td><p>OmegaOffset</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Angle in degrees between (HKL1) and the beam axisif the goniometer is at zero.</p></td>
</tr>
<tr class="row-even"><td><p>HKL1</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>1,1,0</p></td>
<td><p>Indices of the vector in reciprocal space in the horizontal plane at angle Omegaoffset, if the goniometer is at zero.</p></td>
</tr>
<tr class="row-odd"><td><p>HKL2</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,1</p></td>
<td><p>Indices of a second vector in reciprocal space in the horizontal plane not parallel to HKL1</p></td>
</tr>
<tr class="row-even"><td><p>TwoThetaLimits</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,180</p></td>
<td><p>Range (min, max) of scattering angles (2theta, in degrees) to consider. Everything out of this range will be cut.</p></td>
</tr>
<tr class="row-odd"><td><p>LoadHuberFrom</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td></td>
<td><p>A table workspace to load a list of raw sample rotation angles. Huber angles given in the data files will be ignored.</p></td>
</tr>
<tr class="row-even"><td><p>SaveHuberTo</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td></td>
<td><p>A workspace name to save a list of raw sample rotation angles.</p></td>
</tr>
<tr class="row-odd"><td><p>ElasticChannel</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Elastic channel number. Only for TOF data.</p></td>
</tr>
<tr class="row-even"><td><p>DeltaEmin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>-10</p></td>
<td><p>Minimal energy transfer to consider. Should be &lt;=0. Only for TOF data.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This algorithm does not perform any consistency check of the input data. It is the users responsibility to choose a physically reasonable dataset.</p>
</div>
<p>This algorithm loads a list  of DNS <cite>.d_dat</cite> data files into a <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a>. If the algorithm fails to process a file, this file will be ignored. In this case the algorithm produces a warning and continues to process further files. Only if no valid files are provided, the algorithm terminates with an error message.</p>
<p>This algorithm is meant to replace the <a class="reference internal" href="LoadDNSLegacy-v1.html#algm-loaddnslegacy"><span class="std std-ref">LoadDNSLegacy v1</span></a> for single crystal diffraction data.</p>
<p><strong>Output</strong></p>
<p>As a result, two workspaces are created:</p>
<ul class="simple">
<li><p><cite>OutputWorkspace</cite> contains the raw neutron counts.</p></li>
<li><p><cite>NormalizationWorkspace</cite> contains the chosen normalization data (either monitor counts or experiment duration time).</p></li>
</ul>
<p>If <em>LoadAs</em> is set to <em>HKL</em>, both workspaces have <span class="math notranslate nohighlight">\((H,K,L,dE)\)</span> dimensions. If <em>LoadAs</em> is set to <em>raw</em>,
both workspaces will have <span class="math notranslate nohighlight">\(\theta, \omega, t\)</span> dimensions, where <span class="math notranslate nohighlight">\(\theta\)</span> is the scattering angle,
<span class="math notranslate nohighlight">\(\omega\)</span> is the sample rotation angle, and <span class="math notranslate nohighlight">\(t\)</span> is the time of flight. In the latter case, parameters
<em>a, b, c, alpha, beta, gamma, OmegaOffset, HKL1, HKL2, DeltaEmin</em> will be ignored.
The metadata are loaded into time series sample logs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the further data reduction <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD v1</span></a> should be used to bin the data.</p>
</div>
</section>
<section id="restrictions">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Restrictions</a><a class="headerlink" href="#restrictions" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>This algorithm only supports the <em>DNS</em> instrument in its configuration with one detector bank (polarisation analysis).</p></li>
<li><p>This algorithm does not allow to merge datasets with different number of TOF channels.</p></li>
</ul>
</section>
<section id="data-replication">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Data replication</a><a class="headerlink" href="#data-replication" title="Permalink to this heading">¶</a></h2>
<p>For standard data (vanadium, NiCr, background) the sample rotation angle is assumed to be not important. These data are typically measured only for one sample rotation angle. The algorithm can replicate these data for the same sample rotation angles as a single crystal sample has been measured. For this purpose optional input fields <em>SaveHuberTo</em> and <em>LoadHuberFrom</em> can be used.</p>
<ul class="simple">
<li><p><em>SaveHuberTo</em> should contain a name of the <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> where sample rotation angles (Huber) read from the data files will be saved. If the specified workspace exists, it will be overwritten.</p></li>
<li><p><em>LoadHuberFrom</em> should contain a name of the <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a>. The workspace must exist and contain one column with the name <em>Huber(degrees)</em>, where the sample rotation angles are specified.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <em>LoadHuberFrom</em> option is applied, sample rotation angles in the data files will be ignored. Only sample rotation angles from the table will be considered.</p>
</div>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example 1 - Load a DNS .d_dat file to MDEventWorkspace:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># data file.</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;dn134011vana.d_dat&quot;</span>

<span class="c1"># lattice parameters</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">5.0855</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">5.0855</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">14.0191</span>
<span class="n">omega_offset</span> <span class="o">=</span> <span class="mf">225.0</span>
<span class="n">hkl1</span><span class="o">=</span><span class="s2">&quot;1,0,0&quot;</span>
<span class="n">hkl2</span><span class="o">=</span><span class="s2">&quot;0,0,1&quot;</span>
<span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span>
<span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span>
<span class="n">gamma</span><span class="o">=</span><span class="mf">120.0</span>

<span class="c1"># load data to MDEventWorkspace</span>
<span class="n">ws</span><span class="p">,</span> <span class="n">ws_norm</span><span class="p">,</span> <span class="n">huber_ws</span> <span class="o">=</span> <span class="n">LoadDNSSCD</span><span class="p">(</span><span class="n">FileNames</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">NormalizationWorkspace</span><span class="o">=</span><span class="s1">&#39;ws_norm&#39;</span><span class="p">,</span>
                                   <span class="n">Normalization</span><span class="o">=</span><span class="s1">&#39;monitor&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="n">beta</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="n">gamma</span><span class="p">,</span>
                                   <span class="n">OmegaOffset</span><span class="o">=</span><span class="n">omega_offset</span><span class="p">,</span> <span class="n">HKL1</span><span class="o">=</span><span class="n">hkl1</span><span class="p">,</span> <span class="n">HKL2</span><span class="o">=</span><span class="n">hkl2</span><span class="p">,</span> <span class="n">SaveHuberTo</span><span class="o">=</span><span class="s1">&#39;huber_ws&#39;</span><span class="p">)</span>

<span class="c1"># print output workspace information</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output Workspace Type is:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It has </span><span class="si">{0}</span><span class="s2"> events and </span><span class="si">{1}</span><span class="s2"> dimensions:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()):</span>
    <span class="n">dimension</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dimension </span><span class="si">{0}</span><span class="s2"> has name: </span><span class="si">{1}</span><span class="s2">, id: </span><span class="si">{2}</span><span class="s2">, Range: </span><span class="si">{3:.2f}</span><span class="s2"> to </span><span class="si">{4:.2f}</span><span class="s2"> </span><span class="si">{5}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span>
          <span class="n">dimension</span><span class="o">.</span><span class="n">getDimensionId</span><span class="p">(),</span>
          <span class="n">dimension</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
          <span class="n">dimension</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">(),</span>
          <span class="n">dimension</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">(),</span>
          <span class="n">dimension</span><span class="o">.</span><span class="n">getUnits</span><span class="p">()))</span>

<span class="c1"># print information about the table workspace</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;TableWorkspace &#39;</span><span class="si">{0}</span><span class="s2">&#39; has </span><span class="si">{1}</span><span class="s2"> row in the column &#39;</span><span class="si">{2}</span><span class="s2">&#39;.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">huber_ws</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span>
                                                                      <span class="n">huber_ws</span><span class="o">.</span><span class="n">rowCount</span><span class="p">(),</span>
                                                                      <span class="n">huber_ws</span><span class="o">.</span><span class="n">getColumnNames</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It contains sample rotation angle </span><span class="si">{}</span><span class="s2"> degrees&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">huber_ws</span><span class="o">.</span><span class="n">cell</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Output Workspace Type is:  MDEventWorkspace&lt;MDEvent,4&gt;
It has 24 events and 4 dimensions:
Dimension 0 has name: H, id: H, Range: -15.22 to 15.22 r.l.u.
Dimension 1 has name: K, id: K, Range: -15.22 to 15.22 r.l.u.
Dimension 2 has name: L, id: L, Range: -41.95 to 41.95 r.l.u.
Dimension 3 has name: DeltaE, id: DeltaE, Range: -10.00 to 4.64 r.l.u.
TableWorkspace &#39;huber_ws&#39; has 1 row in the column &#39;Huber(degrees)&#39;.
It contains sample rotation angle 79.0 degrees
</pre></div>
</div>
<p><strong>Example 2 - Specify scattering angle limits:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># data file.</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;dn134011vana.d_dat&quot;</span>

<span class="c1"># lattice parameters</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">5.0855</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">5.0855</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">14.0191</span>
<span class="n">omega_offset</span> <span class="o">=</span> <span class="mf">225.0</span>
<span class="n">hkl1</span><span class="o">=</span><span class="s2">&quot;1,0,0&quot;</span>
<span class="n">hkl2</span><span class="o">=</span><span class="s2">&quot;0,0,1&quot;</span>
<span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span>
<span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span>
<span class="n">gamma</span><span class="o">=</span><span class="mf">120.0</span>

<span class="c1"># scattering angle limits, degrees</span>
<span class="n">tth_limits</span> <span class="o">=</span> <span class="s2">&quot;20,70&quot;</span>

<span class="c1"># load data to MDEventWorkspace</span>
<span class="n">ws</span><span class="p">,</span> <span class="n">ws_norm</span><span class="p">,</span> <span class="n">huber_ws</span> <span class="o">=</span> <span class="n">LoadDNSSCD</span><span class="p">(</span><span class="n">FileNames</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">NormalizationWorkspace</span><span class="o">=</span><span class="s1">&#39;ws_norm&#39;</span><span class="p">,</span>
                                   <span class="n">Normalization</span><span class="o">=</span><span class="s1">&#39;monitor&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="n">beta</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="n">gamma</span><span class="p">,</span>
                                   <span class="n">OmegaOffset</span><span class="o">=</span><span class="n">omega_offset</span><span class="p">,</span> <span class="n">HKL1</span><span class="o">=</span><span class="n">hkl1</span><span class="p">,</span> <span class="n">HKL2</span><span class="o">=</span><span class="n">hkl2</span><span class="p">,</span> <span class="n">TwoThetaLimits</span><span class="o">=</span><span class="n">tth_limits</span><span class="p">)</span>

<span class="c1"># print output workspace information</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output Workspace Type is:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It has </span><span class="si">{0}</span><span class="s2"> events and </span><span class="si">{1}</span><span class="s2"> dimensions.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>

<span class="c1"># print normalization workspace information</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Normalization Workspace Type is:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws_norm</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It has </span><span class="si">{0}</span><span class="s2"> events and </span><span class="si">{1}</span><span class="s2"> dimensions.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws_norm</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">(),</span> <span class="n">ws_norm</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Output Workspace Type is:  MDEventWorkspace&lt;MDEvent,4&gt;
It has 10 events and 4 dimensions.
Normalization Workspace Type is:  MDEventWorkspace&lt;MDEvent,4&gt;
It has 10 events and 4 dimensions.
</pre></div>
</div>
<p><strong>Example 3 - Load sample rotation angles from the table</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># data file.</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;dn134011vana.d_dat&quot;</span>

<span class="c1"># construct table workspace with 10 raw sample rotation angles from 70 to 170 degrees</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">()</span>
<span class="n">table</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span> <span class="s2">&quot;double&quot;</span><span class="p">,</span> <span class="s2">&quot;Huber(degrees)&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">huber</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="n">table</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="n">huber</span><span class="p">])</span>

<span class="c1"># lattice parameters</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">5.0855</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">5.0855</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">14.0191</span>
<span class="n">omega_offset</span> <span class="o">=</span> <span class="mf">225.0</span>
<span class="n">hkl1</span><span class="o">=</span><span class="s2">&quot;1,0,0&quot;</span>
<span class="n">hkl2</span><span class="o">=</span><span class="s2">&quot;0,0,1&quot;</span>
<span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span>
<span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span>
<span class="n">gamma</span><span class="o">=</span><span class="mf">120.0</span>

<span class="c1"># load data to MDEventWorkspace</span>
<span class="n">ws</span><span class="p">,</span> <span class="n">ws_norm</span><span class="p">,</span> <span class="n">huber_ws</span> <span class="o">=</span> <span class="n">LoadDNSSCD</span><span class="p">(</span><span class="n">FileNames</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">NormalizationWorkspace</span><span class="o">=</span><span class="s1">&#39;ws_norm&#39;</span><span class="p">,</span>
                                   <span class="n">Normalization</span><span class="o">=</span><span class="s1">&#39;monitor&#39;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="n">beta</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="n">gamma</span><span class="p">,</span>
                                   <span class="n">OmegaOffset</span><span class="o">=</span><span class="n">omega_offset</span><span class="p">,</span> <span class="n">HKL1</span><span class="o">=</span><span class="n">hkl1</span><span class="p">,</span> <span class="n">HKL2</span><span class="o">=</span><span class="n">hkl2</span><span class="p">,</span> <span class="n">LoadHuberFrom</span><span class="o">=</span><span class="n">table</span><span class="p">)</span>

<span class="c1"># print output workspace information</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output Workspace Type is:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It has </span><span class="si">{0}</span><span class="s2"> events and </span><span class="si">{1}</span><span class="s2"> dimensions.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>

<span class="c1"># setting for the BinMD algorithm</span>
<span class="n">bvec0</span> <span class="o">=</span> <span class="s1">&#39;[100],unit,1,0,0,0&#39;</span>
<span class="n">bvec1</span> <span class="o">=</span> <span class="s1">&#39;[001],unit,0,0,1,0&#39;</span>
<span class="n">bvec2</span> <span class="o">=</span> <span class="s1">&#39;[010],unit,0,1,0,0&#39;</span>
<span class="n">bvec3</span> <span class="o">=</span> <span class="s1">&#39;dE,meV,0,0,0,1&#39;</span>
<span class="n">extents</span> <span class="o">=</span> <span class="s1">&#39;-2,1.5,-0.2,6.1,-10,10,-10,4.6&#39;</span>
<span class="n">bins</span> <span class="o">=</span> <span class="s1">&#39;10,10,1,1&#39;</span>
<span class="c1"># bin the data</span>
<span class="n">data_raw</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">BasisVector0</span><span class="o">=</span><span class="n">bvec0</span><span class="p">,</span> <span class="n">BasisVector1</span><span class="o">=</span><span class="n">bvec1</span><span class="p">,</span> <span class="n">BasisVector2</span><span class="o">=</span><span class="n">bvec2</span><span class="p">,</span>
                 <span class="n">BasisVector3</span><span class="o">=</span><span class="n">bvec3</span><span class="p">,</span> <span class="n">OutputExtents</span><span class="o">=</span><span class="n">extents</span><span class="p">,</span> <span class="n">OutputBins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">NormalizeBasisVectors</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="c1"># bin normalization</span>
<span class="n">data_norm</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">ws_norm</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">BasisVector0</span><span class="o">=</span><span class="n">bvec0</span><span class="p">,</span> <span class="n">BasisVector1</span><span class="o">=</span><span class="n">bvec1</span><span class="p">,</span> <span class="n">BasisVector2</span><span class="o">=</span><span class="n">bvec2</span><span class="p">,</span>
                  <span class="n">BasisVector3</span><span class="o">=</span><span class="n">bvec3</span><span class="p">,</span> <span class="n">OutputExtents</span><span class="o">=</span><span class="n">extents</span><span class="p">,</span> <span class="n">OutputBins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">NormalizeBasisVectors</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="c1"># normalize data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">/</span><span class="n">data_norm</span>

<span class="c1"># print reduced workspace information</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Reduced Workspace Type is:  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It has </span><span class="si">{}</span><span class="s2"> dimensions.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>
<span class="n">s</span> <span class="o">=</span>  <span class="n">data</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Signal at some points: </span><span class="si">{0:.4f}</span><span class="s2">, </span><span class="si">{1:.4f}</span><span class="s2">, </span><span class="si">{2:.4f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
      <span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">])))</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Output Workspace Type is:  MDEventWorkspace&lt;MDEvent,4&gt;
It has 240 events and 4 dimensions.
Reduced Workspace Type is:  MDHistoWorkspace
It has 4 dimensions.
Signal at some points: 0.0035, 0.0033, 0.0035
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/DataHandling.html">MDAlgorithms\DataHandling</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/MDAlgorithms/inc/MantidMDAlgorithms/LoadDNSSCD.h">LoadDNSSCD.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/MDAlgorithms/src/LoadDNSSCD.cpp">LoadDNSSCD.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadDNSLegacy-v1.html" title="Previous Chapter: LoadDNSLegacy v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadDNSLegacy v1</span>
    </a>
  </li>
  <li>
    <a href="LoadDaveGrp-v1.html" title="Next Chapter: LoadDaveGrp v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadDaveGrp v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>