<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ConvertWANDSCDtoQ v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ConvolutionFitSequential v1" href="ConvolutionFitSequential-v1.html" />
    <link rel="prev" title="ConvertUnitsUsingDetectorTable v1" href="ConvertUnitsUsingDetectorTable-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ConvertWANDSCDtoQ v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="convertwandscdtoq-v1">
<span id="algm-convertwandscdtoq"></span><span id="algm-convertwandscdtoq-v1"></span><h1>ConvertWANDSCDtoQ v1<a class="headerlink" href="#convertwandscdtoq-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ConvertWANDSCDtoQ-v1_dlg.png"><img alt="../_images/ConvertWANDSCDtoQ-v1_dlg.png" class="screenshot" src="../_images/ConvertWANDSCDtoQ-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>ConvertWANDSCDtoQ</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Convert the output of LoadWANDSCD to Q or HKL</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="LoadWANDSCD-v1.html#algm-loadwandscd"><span class="std std-ref">LoadWANDSCD</span></a>, <a class="reference internal" href="ConvertHFIRSCDtoMDE-v1.html#algm-converthfirscdtomde"><span class="std std-ref">ConvertHFIRSCDtoMDE</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input Workspace</p></td>
</tr>
<tr class="row-odd"><td><p>NormalisationWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td></td>
<td><p>Workspace to use for normalisation</p></td>
</tr>
<tr class="row-even"><td><p>UBWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td></td>
<td><p>Workspace containing the UB matrix to use</p></td>
</tr>
<tr class="row-odd"><td><p>Wavelength</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1.488</p></td>
<td><p>Wavelength to set the workspace</p></td>
</tr>
<tr class="row-even"><td><p>S1Offset</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Offset to apply (in degrees) to the s1 of the input workspace</p></td>
</tr>
<tr class="row-odd"><td><p>NormaliseBy</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Monitor</p></td>
<td><p>Normalise to monitor, time or None. Allowed values: [‘None’, ‘Time’, ‘Monitor’]</p></td>
</tr>
<tr class="row-even"><td><p>Frame</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Q_sample</p></td>
<td><p>Selects Q-dimensions of the output workspace. Allowed values: [‘Q_sample’, ‘HKL’]</p></td>
</tr>
<tr class="row-odd"><td><p>Uproj</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>1,0,0</p></td>
<td><p>Defines the first projection vector of the target Q coordinate system in HKL mode</p></td>
</tr>
<tr class="row-even"><td><p>Vproj</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,1,0</p></td>
<td><p>Defines the second projection vector of the target Q coordinate system in HKL mode</p></td>
</tr>
<tr class="row-odd"><td><p>Wproj</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,1</p></td>
<td><p>Defines the third projection vector of the target Q coordinate system in HKL mode</p></td>
</tr>
<tr class="row-even"><td><p>BinningDim0</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>-8.02,8.02,401</p></td>
<td><p>Binning parameters for the 0th dimension. Enter it as acomma-separated list of values with theformat: ‘minimum,maximum,number_of_bins’.</p></td>
</tr>
<tr class="row-odd"><td><p>BinningDim1</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>-0.82,0.82,41</p></td>
<td><p>Binning parameters for the 1st dimension. Enter it as acomma-separated list of values with theformat: ‘minimum,maximum,number_of_bins’.</p></td>
</tr>
<tr class="row-even"><td><p>BinningDim2</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>-8.02,8.02,401</p></td>
<td><p>Binning parameters for the 2nd dimension. Enter it as acomma-separated list of values with theformat: ‘minimum,maximum,number_of_bins’.</p></td>
</tr>
<tr class="row-odd"><td><p>KeepTemporaryWorkspaces</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If True the normalization and data workspaces in addition to the normalized data will be outputted</p></td>
</tr>
<tr class="row-even"><td><p>ObliquityParallaxCoefficient</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Geometrical correction for shift in vertical beam position due to wide beam.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output Workspace</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm will convert the output of <a class="reference internal" href="LoadWANDSCD-v1.html#algm-loadwandscd"><span class="std std-ref">LoadWANDSCD v1</span></a> in
either Q or HKL space. <a class="reference internal" href="FindPeaksMD-v1.html#algm-findpeaksmd"><span class="std std-ref">FindPeaksMD v1</span></a> can be run on the
output Q sample space, then the UB can be found and used to then
convert to HKL. The default binning ranges are good for converting to
Q sample with the default wavelength.</p>
<p>This algorithm will also work for data from DEMAND (HB3A).</p>
<p>The normalization is calculated in the same way as
<a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDNormSCD v1</span></a> but with the solid angle and flux coming from
the NormalisationWorkspace, normally vanadium. A brief introduction to
the multi-dimensional data normalization can be found <a class="reference internal" href="../concepts/MDNorm.html#mdnorm"><span class="std std-ref">here</span></a>.</p>
<p>When converting to HKL it will use the UB matrix from the UBWorkspace
if provided otherwise it will use the UB matrix from the
InputWorkspace. Uproj, Vproj and Wproj are only used when converting
to HKL Frame.</p>
<p>If the KeepTemporaryWorkspaces option is True the data and the
normalization in addition to the nomalized data will be
outputted. This allows you to run separate instances of
ConvertWANDSCDtoQ and combine the results. They will have names
“ws_data” and “ws_normalization” respectively.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Convert to Q</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load Data and normalisation</span>
<span class="n">LoadWANDSCD</span><span class="p">(</span><span class="n">IPTS</span><span class="o">=</span><span class="mi">7776</span><span class="p">,</span> <span class="n">RunNumbers</span><span class="o">=</span><span class="mi">26509</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span><span class="n">Grouping</span><span class="o">=</span><span class="s1">&#39;4x4&#39;</span><span class="p">)</span> <span class="c1"># Vanadium</span>
<span class="n">LoadWANDSCD</span><span class="p">(</span><span class="n">IPTS</span><span class="o">=</span><span class="mi">7776</span><span class="p">,</span> <span class="n">RunNumbers</span><span class="o">=</span><span class="s1">&#39;26640-27944&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">Grouping</span><span class="o">=</span><span class="s1">&#39;4x4&#39;</span><span class="p">)</span>
<span class="n">ConvertWANDSCDtoQ</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                  <span class="n">NormalisationWorkspace</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span>
                  <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;Q&#39;</span><span class="p">,</span>
                  <span class="n">BinningDim1</span><span class="o">=</span><span class="s1">&#39;-1,1,1&#39;</span><span class="p">)</span>

<span class="c1"># Plot workspace</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;Q&#39;</span><span class="p">],</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Intensity (arb. units)&#39;</span><span class="p">)</span>
<span class="c1">#fig.savefig(&#39;ConvertWANDSCDtoQ_Q.png&#39;)</span>
</pre></div>
</div>
<p>Output:</p>
<figure class="align-default">
<img alt="../_images/ConvertWANDSCDtoQ_Q.png" src="../_images/ConvertWANDSCDtoQ_Q.png" />
</figure>
<p><strong>Convert to HKL</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load Data and normalisation</span>
<span class="n">LoadWANDSCD</span><span class="p">(</span><span class="n">IPTS</span><span class="o">=</span><span class="mi">7776</span><span class="p">,</span> <span class="n">RunNumbers</span><span class="o">=</span><span class="mi">26509</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span><span class="n">Grouping</span><span class="o">=</span><span class="s1">&#39;4x4&#39;</span><span class="p">)</span> <span class="c1"># Vanadium</span>
<span class="n">LoadWANDSCD</span><span class="p">(</span><span class="n">IPTS</span><span class="o">=</span><span class="mi">7776</span><span class="p">,</span> <span class="n">RunNumbers</span><span class="o">=</span><span class="s1">&#39;26640-27944&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">Grouping</span><span class="o">=</span><span class="s1">&#39;4x4&#39;</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">UB</span><span class="o">=</span><span class="s1">&#39;0,0.1770619741,-0.00927942487,0.177304965,0,0,0,-0.00927942487,-0.177061974&#39;</span><span class="p">)</span>
<span class="n">ConvertWANDSCDtoQ</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                  <span class="n">NormalisationWorkspace</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">,</span>
                  <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;HKL&#39;</span><span class="p">,</span>
                  <span class="n">Frame</span><span class="o">=</span><span class="s1">&#39;HKL&#39;</span><span class="p">,</span>
                  <span class="n">BinningDim0</span><span class="o">=</span><span class="s1">&#39;-1,1,1&#39;</span><span class="p">,</span>
                  <span class="n">BinningDim1</span><span class="o">=</span><span class="s1">&#39;-2.02,7.02,226&#39;</span><span class="p">,</span>
                  <span class="n">BinningDim2</span><span class="o">=</span><span class="s1">&#39;-6.52,2.52,226&#39;</span><span class="p">)</span>

<span class="c1"># Plot workspace</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;HKL&#39;</span><span class="p">],</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Intensity (arb. units)&#39;</span><span class="p">)</span>
<span class="c1">#fig.savefig(&#39;ConvertWANDSCDtoQ_HKL.png&#39;)</span>
</pre></div>
</div>
<p>Output:</p>
<figure class="align-default">
<img alt="../_images/ConvertWANDSCDtoQ_HKL.png" src="../_images/ConvertWANDSCDtoQ_HKL.png" />
</figure>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Nexus.html">DataHandling\Nexus</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/ConvertWANDSCDtoQ.py">ConvertWANDSCDtoQ.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ConvertUnitsUsingDetectorTable-v1.html" title="Previous Chapter: ConvertUnitsUsingDetectorTable v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ConvertUnitsU...</span>
    </a>
  </li>
  <li>
    <a href="ConvolutionFitSequential-v1.html" title="Next Chapter: ConvolutionFitSequential v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ConvolutionFi... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>