<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ExtractFFTSpectrum v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ExtractMask v1" href="ExtractMask-v1.html" />
    <link rel="prev" title="ExportTimeSeriesLog v1" href="ExportTimeSeriesLog-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ExtractFFTSpectrum v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="extractfftspectrum-v1">
<span id="algm-extractfftspectrum"></span><span id="algm-extractfftspectrum-v1"></span><h1>ExtractFFTSpectrum v1<a class="headerlink" href="#extractfftspectrum-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ExtractFFTSpectrum-v1_dlg.png"><img alt="../_images/ExtractFFTSpectrum-v1_dlg.png" class="screenshot" src="../_images/ExtractFFTSpectrum-v1_dlg.png" style="width: 331px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>ExtractFFTSpectrum</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>This algorithm performs a Fast Fourier Transform on each spectrum in a workspace, and from the result takes the indicated spectrum and places it into the OutputWorkspace, so that you end up with one result spectrum for each input spectrum in the same workspace.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="FFT-v1.html#algm-fft"><span class="std std-ref">FFT</span></a>, <a class="reference internal" href="FFTDerivative-v1.html#algm-fftderivative"><span class="std std-ref">FFTDerivative</span></a>, <a class="reference internal" href="MaxEnt-v1.html#algm-maxent"><span class="std std-ref">MaxEnt</span></a>, <a class="reference internal" href="RealFFT-v1.html#algm-realfft"><span class="std std-ref">RealFFT</span></a>, <a class="reference internal" href="SassenaFFT-v1.html#algm-sassenafft"><span class="std std-ref">SassenaFFT</span></a>, <a class="reference internal" href="FFTSmooth-v2.html#algm-fftsmooth"><span class="std std-ref">FFTSmooth</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The input workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>InputImagWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The optional input workspace for the imaginary part.</p></td>
</tr>
<tr class="row-even"><td><p>FFTPart</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>2</p></td>
<td><p>Spectrum number, one of the six possible spectra output by the FFT algorithm</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The output workspace.</p></td>
</tr>
<tr class="row-even"><td><p>Shift</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Apply an extra phase equal to this quantity times 2*pi to the transform</p></td>
</tr>
<tr class="row-odd"><td><p>AutoShift</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Automatically calculate and apply phase shift. Zero on the X axis is assumed to be in the centre - if it is not, setting this property will automatically correct for this.</p></td>
</tr>
<tr class="row-even"><td><p>AcceptXRoundingErrors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Continue to process the data even if X values are not evenly spaced</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm iterates the <a class="reference internal" href="FFT-v1.html#algm-fft"><span class="std std-ref">FFT v1</span></a> algorithm on each spectrum of
InputWorkspace, computing the Fourier Transform and storing the
transformed spectrum in OutputWorkspace. If InputImagWorkspace is also
passed, then the pair spectrum <em>i</em> of InputWorkspace (real) and spectrum
<em>i</em> of InputImagWorkspace (real) are taken together as spectrum <em>i</em> of a
complex workspace, on which <a class="reference internal" href="FFT-v1.html#algm-fft"><span class="std std-ref">FFT v1</span></a> is applied.</p>
<p>The FFTPart parameter specifies which transform is selected from the
output of the <a class="reference internal" href="FFT-v1.html#algm-fft"><span class="std std-ref">FFT v1</span></a> algorithm:</p>
<p>For the case of input containing real and imaginary workspaces:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FFTPart</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Complete real part</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Complete imaginary part</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Complete transform modulus</p></td>
</tr>
</tbody>
</table>
<p>For the case of input containing no imaginary workspace:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>FFTPart</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Real part, positive frequencies</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Imaginary part, positive frequencies</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Modulus, positive frequencies</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Complete real part</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>Complete imaginary part</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>Complete transform modulus</p></td>
</tr>
</tbody>
</table>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Extract FFT spectrum from an exponential and a gaussian.</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>

<span class="c1"># Functions x and y defined over the time domain: z(t) = x(t) + i * y(t)</span>
<span class="n">dt</span><span class="o">=</span><span class="mf">0.001</span>
<span class="n">t</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">dt</span><span class="p">)</span>

<span class="c1"># Exponential decay in [-1,1] for the real part</span>
<span class="n">tau</span><span class="o">=</span><span class="mf">0.05</span>
<span class="n">x</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">numpy</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">tau</span><span class="p">)</span>
<span class="n">wsx</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Gaussian decay in [-1,1] for the imaginary part</span>
<span class="n">sigma</span><span class="o">=</span><span class="mf">0.05</span>
<span class="n">y</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="o">*</span><span class="n">t</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">sigma</span><span class="o">*</span><span class="n">sigma</span><span class="p">))</span>
<span class="n">wsy</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Extract the FFT spectrum from z(t) = x(t) + i * y(t)</span>
<span class="n">wsfr</span> <span class="o">=</span> <span class="n">ExtractFFTSpectrum</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">wsx</span><span class="p">,</span> <span class="n">InputImagWorkspace</span><span class="o">=</span><span class="n">wsy</span><span class="p">,</span> <span class="n">FFTPart</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># real part</span>
<span class="n">wsfi</span> <span class="o">=</span> <span class="n">ExtractFFTSpectrum</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">wsx</span><span class="p">,</span> <span class="n">InputImagWorkspace</span><span class="o">=</span><span class="n">wsy</span><span class="p">,</span> <span class="n">FFTPart</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># imaginary</span>

<span class="c1"># Test the real part with a fitting to the expected Lorentzian</span>
<span class="n">myFunc</span> <span class="o">=</span> <span class="s1">&#39;name=Lorentzian,Amplitude=0.05,PeakCentre=0,FWHM=6,ties=(PeakCentre=0)&#39;</span>
<span class="n">fit_output</span> <span class="o">=</span> <span class="n">Fit</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="n">myFunc</span><span class="p">,</span> <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;wsfr&#39;</span><span class="p">,</span> <span class="n">StartX</span><span class="o">=-</span><span class="mi">40</span><span class="p">,</span> <span class="n">EndX</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">CreateOutput</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">paramTable</span> <span class="o">=</span> <span class="n">fit_output</span><span class="o">.</span><span class="n">OutputParameters</span>  <span class="c1"># table containing the optimal fit parameters</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Theoretical FWHM = 1/(pi*tau)=6.367 -- Fitted FWHM value is: </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">paramTable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># Test the imaginary part with a fitting to the expected Gaussian</span>
<span class="n">myFunc</span> <span class="o">=</span> <span class="s1">&#39;name=Gaussian,Height=0.1,PeakCentre=0,Sigma=3.0, ties=(PeakCentre=0)&#39;</span>
<span class="n">fit_output</span> <span class="o">=</span> <span class="n">Fit</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="n">myFunc</span><span class="p">,</span> <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;wsfi&#39;</span><span class="p">,</span> <span class="n">StartX</span><span class="o">=-</span><span class="mi">15</span><span class="p">,</span> <span class="n">EndX</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">CreateOutput</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">paramTable</span> <span class="o">=</span> <span class="n">fit_output</span><span class="o">.</span><span class="n">OutputParameters</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Theoretical Sigma = 1/(2*pi*sigma)=3.183 -- Fitted Sigma value is: </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">paramTable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Theoretical FWHM = 1/(pi*tau)=6.367 -- Fitted FWHM value is: 6.367
Theoretical Sigma = 1/(2*pi*sigma)=3.183 -- Fitted Sigma value is: 3.183
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Arithmetic/FFT.html">Arithmetic\FFT</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/inc/MantidAlgorithms/ExtractFFTSpectrum.h">ExtractFFTSpectrum.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/src/ExtractFFTSpectrum.cpp">ExtractFFTSpectrum.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ExportTimeSeriesLog-v1.html" title="Previous Chapter: ExportTimeSeriesLog v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ExportTimeSer...</span>
    </a>
  </li>
  <li>
    <a href="ExtractMask-v1.html" title="Next Chapter: ExtractMask v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ExtractMask v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>