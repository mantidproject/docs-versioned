<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>MaskDetectorsIf v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MaskDetectorsInShape v1" href="MaskDetectorsInShape-v1.html" />
    <link rel="prev" title="MaskDetectors v1" href="MaskDetectors-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">MaskDetectorsIf v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="maskdetectorsif-v1">
<span id="algm-maskdetectorsif"></span><span id="algm-maskdetectorsif-v1"></span><h1>MaskDetectorsIf v1<a class="headerlink" href="#maskdetectorsif-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/MaskDetectorsIf-v1_dlg.png"><img alt="../_images/MaskDetectorsIf-v1_dlg.png" class="screenshot" src="../_images/MaskDetectorsIf-v1_dlg.png" style="width: 327px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>MaskDetectorsIf</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Masks detectors depending on the values in the input workspace.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="MaskDetectors-v1.html#algm-maskdetectors"><span class="std std-ref">MaskDetectors</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A 1D Workspace that contains values to select against</p></td>
</tr>
<tr class="row-odd"><td><p>Mode</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>SelectIf</p></td>
<td><p>Mode to select or deselect detectors based on comparison with values. Allowed values: [‘SelectIf’, ‘DeselectIf’]</p></td>
</tr>
<tr class="row-even"><td><p>Operator</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Equal</p></td>
<td><p>Operator to compare to given values. Allowed values: [‘Equal’, ‘NotEqual’, ‘Greater’, ‘GreaterEqual’, ‘Less’, ‘LessEqual’, ‘NotFinite’]</p></td>
</tr>
<tr class="row-odd"><td><p>Value</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>InputCalFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The name of the CalFile with grouping data. Allowed extensions: [‘.cal’]</p></td>
</tr>
<tr class="row-odd"><td><p>OutputCalFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The name of the CalFile with grouping data. Allowed extensions: [‘.cal’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The masked workspace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Iterates over the input workspace evaluating the test for each bin in each spectrum, and will select (or deselect) it is any of the bins match the test. There are two output modes:</p>
<dl class="simple">
<dt>Output to a calfile</dt><dd><p>For this mode the properties <code class="docutils literal notranslate"><span class="pre">InputCalFile</span></code> and <code class="docutils literal notranslate"><span class="pre">OutputCalFile</span></code> have to be set.
If the detectors should be masked it deselects all of
the contributing detectors in the output calfile. All other aspects of
the <code class="docutils literal notranslate"><span class="pre">InputCalFile</span></code> are copied over to the <code class="docutils literal notranslate"><span class="pre">OutputCalFile</span></code>.</p>
</dd>
<dt>Output to a workspace</dt><dd><p>For this mode the <code class="docutils literal notranslate"><span class="pre">OutputWorkspace</span></code> property has to be set. The algorithm masks the selected detectors (<code class="docutils literal notranslate"><span class="pre">Mode='SelectIf'</span></code>) or unmasks deselected ones (<code class="docutils literal notranslate"><span class="pre">Mode='DeselectIf'</span></code>) for the output workspace. Masking will clear the data in the spectra under question. Unmasking will just clear the masking flag but will not restore the data.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you select the NotFinite operator, the value property is ignored.  This operator finds values that are infinite or <a class="reference external" href="https://en.wikipedia.org/wiki/NaN">NaN.</a></p>
</div>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - mask spectra whose integral is below some limit</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1"># One spectrum has lower counts than the rest</span>
<span class="n">badIndex</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">Ys</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">dataY</span><span class="p">(</span><span class="n">badIndex</span><span class="p">)</span>
<span class="n">Ys</span> <span class="o">*=</span> <span class="mf">0.01</span>
<span class="n">integral</span> <span class="o">=</span> <span class="n">Integration</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="n">MaskDetectorsIf</span><span class="p">(</span><span class="n">integral</span><span class="p">,</span> <span class="n">Operator</span><span class="o">=</span><span class="s1">&#39;Less&#39;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">integral</span><span class="p">)</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MaskedWorkspace</span><span class="o">=</span><span class="n">integral</span><span class="p">)</span>
<span class="c1"># Inspect the result</span>
<span class="n">isMasked</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">spectrumInfo</span><span class="p">()</span><span class="o">.</span><span class="n">isMasked</span><span class="p">(</span><span class="n">badIndex</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Spectrum at index </span><span class="si">{}</span><span class="s1"> is masked? </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">badIndex</span><span class="p">,</span> <span class="n">isMasked</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Spectrum at index 3 is masked? True
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/Masking.html">Diffraction\Masking</a> | <a class="reference external" href="categories/Transforms/Masking.html">Transforms\Masking</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/inc/MantidAlgorithms/MaskDetectorsIf.h">MaskDetectorsIf.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/Algorithms/src/MaskDetectorsIf.cpp">MaskDetectorsIf.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="MaskDetectors-v1.html" title="Previous Chapter: MaskDetectors v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MaskDetectors v1</span>
    </a>
  </li>
  <li>
    <a href="MaskDetectorsInShape-v1.html" title="Next Chapter: MaskDetectorsInShape v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MaskDetectors... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>