<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LoadCIF v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadCalFile v1" href="LoadCalFile-v1.html" />
    <link rel="prev" title="LoadBBY v1" href="LoadBBY-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadCIF v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="loadcif-v1">
<span id="algm-loadcif"></span><span id="algm-loadcif-v1"></span><h1>LoadCIF v1<a class="headerlink" href="#loadcif-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/LoadCIF-v1_dlg.png"><img alt="../_images/LoadCIF-v1_dlg.png" class="screenshot" src="../_images/LoadCIF-v1_dlg.png" style="width: 447px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>LoadCIF</strong> dialog.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id4">Summary</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p></li>
<li><p><a class="reference internal" href="#required" id="id7">Required</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>This algorithm loads a CIF file using the PyCifRW package and assigns a CrystalStructure to the sample of the workspace.</p>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace</p></td>
<td><p>InOut</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Workspace into which the crystal structure is placed.</p></td>
</tr>
<tr class="row-odd"><td><p>InputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A CIF file containing a crystal structure. Allowed values: [‘cif’]</p></td>
</tr>
<tr class="row-even"><td><p>LoadUBMatrix</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Load UB-matrix from CIF file if available.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm uses <code class="docutils literal notranslate"><span class="pre">PyCifRW</span></code> to parse the supplied CIF-file and extract the information necessary to construct a
<code class="docutils literal notranslate"><span class="pre">CrystalStructure</span></code> object that is attached to the supplied workspace. For successfully loading a crystal structure,
the CIF-file must contain some mandatory fields, describing the three components that define the structure.</p>
<p><strong>Unit cell</strong></p>
<p>For the unit cell, at least <em>_cell_length_a</em> must be present. If <em>_cell_length_b</em> or <em>_cell_length_c</em> are absent, the
value is replaced with the one of <em>_cell_length_a</em>. Any absent item of <em>_cell_angle_alpha</em>, <em>_cell_angle_beta</em> or
<em>_cell_angle_gamma</em> is replaced with 90.</p>
<p><strong>Space group</strong></p>
<p>The space group is currently loaded based on one of the fields <em>_space_group_name_H-M_alt</em> or
<em>_symmetry_space_group_name_H-M</em>, where the former has precedence over the latter. The value has to correspond to one
of the registered space groups in Mantid (see the corresponding <a class="reference internal" href="../concepts/PointAndSpaceGroups.html#point-and-space-groups"><span class="std std-ref">concept page</span></a>).</p>
<p>If neither of the fields is present, the loader tries to recover by using the space group number in either
<em>_symmetry_int_tables_number</em> or <em>_space_group_it_number</em> where again, the former has precedence. This only works if
there is only one setting registered for the specified space group type, because otherwise the algorithm can not decide
which one to use.</p>
<p><strong>Atoms</strong></p>
<p>There needs to be a <em>loop_</em> with at least the following fields: <em>_atom_site_label</em>, <em>_atom_site_fract_x</em>,
<em>_atom_site_fract_y</em> and <em>_atom_site_fract_z</em>. Additionally, <em>_atom_site_type_symbol</em>, <em>_atom_site_occupancy</em> and
<em>_atom_site_U_iso_or_equiv</em> and <em>_atom_site_B_iso_or_equiv</em> (internally converted to U by dividing by <span class="math notranslate nohighlight">\(8\pi^2\)</span>
are recognized. The labels are expected to contain the element symbol, any non-letter characters (numbers, special
characters) are removed. The <em>_atom_site_label</em> is only used for this purpose when <em>_atom_site_type_symbol</em>
is not present.</p>
<p>The algorithm can also compute <span class="math notranslate nohighlight">\(U_{equiv}\)</span> from anisotropic ADPs <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> specified by the fields <em>_atom_site_aniso_u_11</em>,
<em>_atom_site_aniso_u_12</em>, <em>_atom_site_aniso_u_13</em>, <em>_atom_site_aniso_u_22</em>, <em>_atom_site_aniso_u_23</em> and
<em>_atom_site_aniso_u_33</em> (the <span class="math notranslate nohighlight">\(B\)</span>-based variant is recognized too, if both are present, <span class="math notranslate nohighlight">\(U\)</span> is used).
For this to work correctly, the field <em>_atom_site_aniso_label</em> has to be present and contain
the same strings as <em>_atom_site_label</em>. This calculation is only performed for atoms where the isotropic parameter is
missing or invalid. If neither isotropic nor anisotropic parameters are present for an atom, 0 is used.</p>
<p>Optionally, a <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> can be loaded from the CIF-file and applied to the workspace via the SetUB-algorithm. For this,
the <em>_diffrn_orient_matrix_UB_xy</em> fields have to be set.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>The equivalent isotropic displacement factor, R. X. Fischer &amp; E. Tillmanns, Acta Crystallogr. C, vol. 44, p. 775,
DOI: <a class="reference external" href="http://dx.doi.org/10.1107/S0108270187012745">10.1107/S0108270187012745</a></p>
</aside>
</aside>
</section>
<section id="required">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Required</a><a class="headerlink" href="#required" title="Permalink to this heading">¶</a></h2>
<p>This algorithm requires python package <code class="docutils literal notranslate"><span class="pre">PyCifRW</span></code>, available at the <a class="reference external" href="https://pypi.python.org/pypi/PyCifRW/4.1">python package index</a>
or through the operating system’s package manager. If the package is not present, this algorithm will not be available.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p>The following script loads a CIF-file and prints the space group of the crystal structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">LoadCIF</span><span class="p">(</span><span class="n">sample_ws</span><span class="p">,</span> <span class="s1">&#39;LoadCIF_example_file.cif&#39;</span><span class="p">)</span>

<span class="c1"># Get the space group from the crystal structure that was loaded</span>
<span class="n">crystal_structure</span> <span class="o">=</span> <span class="n">sample_ws</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span><span class="o">.</span><span class="n">getCrystalStructure</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Space group: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">crystal_structure</span><span class="o">.</span><span class="n">getSpaceGroup</span><span class="p">()</span><span class="o">.</span><span class="n">getHMSymbol</span><span class="p">()))</span>
</pre></div>
</div>
<p>The output is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Space</span> <span class="n">group</span><span class="p">:</span> <span class="n">F</span> <span class="n">d</span> <span class="o">-</span><span class="mi">3</span> <span class="n">m</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/DataHandling.html">Diffraction\DataHandling</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/LoadCIF.py">LoadCIF.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadBBY-v1.html" title="Previous Chapter: LoadBBY v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadBBY v1</span>
    </a>
  </li>
  <li>
    <a href="LoadCalFile-v1.html" title="Next Chapter: LoadCalFile v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadCalFile v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>