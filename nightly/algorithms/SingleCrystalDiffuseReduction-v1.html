<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>SingleCrystalDiffuseReduction v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SliceMD v1" href="SliceMD-v1.html" />
    <link rel="prev" title="SimulatedDensityOfStates v1" href="SimulatedDensityOfStates-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SingleCrystalDiffuseReduction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="singlecrystaldiffusereduction-v1">
<span id="algm-singlecrystaldiffusereduction"></span><span id="algm-singlecrystaldiffusereduction-v1"></span><h1>SingleCrystalDiffuseReduction v1<a class="headerlink" href="#singlecrystaldiffusereduction-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SingleCrystalDiffuseReduction-v1_dlg.png"><img alt="../_images/SingleCrystalDiffuseReduction-v1_dlg.png" class="screenshot" src="../_images/SingleCrystalDiffuseReduction-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>SingleCrystalDiffuseReduction</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#masking" id="id6">Masking</a></p></li>
<li><p><a class="reference internal" href="#background" id="id7">Background</a></p></li>
<li><p><a class="reference internal" href="#symmetries" id="id8">Symmetries</a></p></li>
<li><p><a class="reference internal" href="#temporary-workspaces" id="id9">Temporary Workspaces</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#workflow" id="id10">Workflow</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id11">Usage</a></p></li>
<li><p><a class="reference internal" href="#related-algorithms" id="id12">Related Algorithms</a></p></li>
<li><p><a class="reference internal" href="#source" id="id13">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Single Crystal Diffuse Scattering Reduction, normalisation, symmetry and background substraction</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a>, <a class="reference internal" href="MDNormSCDPreprocessIncoherent-v1.html#algm-mdnormscdpreprocessincoherent"><span class="std std-ref">MDNormSCDPreprocessIncoherent</span></a>, <a class="reference internal" href="MDNorm-v1.html#algm-mdnorm"><span class="std std-ref">MDNorm</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Files to combine in reduction. Allowed extensions: [‘_event.nxs’, ‘.nxs.h5’, ‘.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>Background</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Background run. Allowed extensions: [‘_event.nxs’, ‘.nxs.h5’, ‘.nxs’]</p></td>
</tr>
<tr class="row-even"><td><p>BackgroundScale</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The background will be scaled by this number before being subtracted.</p></td>
</tr>
<tr class="row-odd"><td><p>FilterByTofMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To exclude events that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds. Keep blank to load all events.</p></td>
</tr>
<tr class="row-even"><td><p>FilterByTofMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To exclude events that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds. Keep blank to load all events.</p></td>
</tr>
<tr class="row-odd"><td><p>ReuseSAFlux</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If True then if a previous SolidAngle and Flux has been loaded it will be reused otherwise it will be loaded.</p></td>
</tr>
<tr class="row-even"><td><p>SolidAngle</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input workspace containing momentum integrated vanadium (a measure of the solid angle). See <a class="reference internal" href="MDNormSCDPreprocessIncoherent-v1.html#algm-mdnormscdpreprocessincoherent"><span class="std std-ref">MDNormSCDPreprocessIncoherent</span></a> for details. Allowed extensions: [‘.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>Flux</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input workspace containing momentum dependent flux. See <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDnormSCD</span></a> for details. Allowed extensions: [‘.nxs’]</p></td>
</tr>
<tr class="row-even"><td><p>MomentumMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Minimum value in momentum. The max of this value and the flux momentum minimum will be used.</p></td>
</tr>
<tr class="row-odd"><td><p>MomentumMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Maximum value in momentum. The min of this value and the flux momentum maximum will be used.</p></td>
</tr>
<tr class="row-even"><td><p>UBMatrix</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Path to an ISAW-style UB matrix text file. See <a class="reference internal" href="LoadIsawUB-v1.html#algm-loadisawub"><span class="std std-ref">LoadIsawUB</span></a>. Allowed extensions: [‘.mat’, ‘.ub’, ‘.txt’]</p></td>
</tr>
<tr class="row-odd"><td><p>SetGoniometer</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Set which Goniometer to use. See <a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><span class="std std-ref">SetGoniometer</span></a></p></td>
</tr>
<tr class="row-even"><td><p>Goniometers</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>None, Specify Individually</p></td>
<td><p>Set the axes and motor names according to goniometers that we define in the code (Universal defined for SNS). Allowed values: [‘None, Specify Individually’, ‘Universal’]</p></td>
</tr>
<tr class="row-odd"><td><p>Axis0</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Axis0: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</p></td>
</tr>
<tr class="row-even"><td><p>Axis1</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Axis1: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</p></td>
</tr>
<tr class="row-odd"><td><p>Axis2</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Axis2: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</p></td>
</tr>
<tr class="row-even"><td><p>OmegaOffset</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Offset to apply to the omega rotation of the Goniometer. Need to provide one value for every run.</p></td>
</tr>
<tr class="row-odd"><td><p>LoadInstrument</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Load a different instrument IDF onto the data from a file. See <a class="reference internal" href="LoadInstrument-v1.html#algm-loadinstrument"><span class="std std-ref">LoadInstrument</span></a>. Allowed extensions: [‘.xml’]</p></td>
</tr>
<tr class="row-even"><td><p>ApplyCalibration</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td></td>
<td><p>Calibration will be applied using this TableWorkspace using <a class="reference internal" href="ApplyCalibration-v1.html#algm-applycalibration"><span class="std std-ref">ApplyCalibration</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>DetCal</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Load an ISAW DetCal calibration onto the data from a file. See <a class="reference internal" href="LoadIsawDetCal-v1.html#algm-loadisawdetcal"><span class="std std-ref">LoadIsawDetCal</span></a>. Allowed extensions: [‘.detcal’]</p></td>
</tr>
<tr class="row-even"><td><p>CopyInstrumentParameters</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The input workpsace from which <a class="reference internal" href="CopyInstrumentParameters-v1.html#algm-copyinstrumentparameters"><span class="std std-ref">CopyInstrumentParameters</span></a> will copy parameters to data</p></td>
</tr>
<tr class="row-odd"><td><p>MaskFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Masking file for masking. Supported file format is XML and ISIS ASCII. See <a class="reference internal" href="LoadMask-v1.html#algm-loadmask"><span class="std std-ref">LoadMask</span></a>. Allowed extensions: [‘.xml’, ‘.msk’]</p></td>
</tr>
<tr class="row-even"><td><p>SymmetryOperations</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>If specified the symmetry will be applied, can be space group name, point group name, or list individual symmetries.</p></td>
</tr>
<tr class="row-odd"><td><p>QDimension0</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>1,0,0</p></td>
<td><p>The first Q projection axis</p></td>
</tr>
<tr class="row-even"><td><p>QDimension1</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,1,0</p></td>
<td><p>The second Q projection axis</p></td>
</tr>
<tr class="row-odd"><td><p>QDimension2</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,1</p></td>
<td><p>The third Q projection axis</p></td>
</tr>
<tr class="row-even"><td><p>Dimension0Binning</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Binning for the 0th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension1Binning</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Binning for the 1th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</p></td>
</tr>
<tr class="row-even"><td><p>Dimension2Binning</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Binning for the 2th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</p></td>
</tr>
<tr class="row-odd"><td><p>KeepTemporaryWorkspaces</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If True the normalization and data workspaces in addition to the normalized data will be outputted</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output Workspace. If background is subtracted _data and _background workspaces will also be made.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Developed for CORELLI but should work on any instrument. This workflow
algorithm loops over a series of runs combining them with correct
normalisation, subtract the background and apply symmetry. The
resulting workspace is a <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a>
containing a volume of scattering.</p>
<p>The input filename follows the syntax from
<a class="reference internal" href="../api/python/mantid/api/MultipleFileProperty.html#mantid.api.MultipleFileProperty" title="mantid.api.MultipleFileProperty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MultipleFileProperty</span></code></a></p>
<p>This workflow makes use of <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a> and
<a class="reference internal" href="MDNorm-v1.html#algm-mdnorm"><span class="std std-ref">MDNorm</span></a> so these should be reviewed to better
understand all the options. An example of creating the Solid Angle and
Flux workspaces are included in <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDNormSCD</span></a>. <a class="reference internal" href="MDNormSCDPreprocessIncoherent-v1.html#algm-mdnormscdpreprocessincoherent"><span class="std std-ref">MDNormSCDPreprocessIncoherent</span></a> can be used to process Vanadium
data for the Solid Angle and Flux workspaces.</p>
<p>The resulting workspaces can be saved and loaded with <a class="reference internal" href="SaveMD-v2.html#algm-savemd"><span class="std std-ref">SaveMD</span></a> and <a class="reference internal" href="LoadMD-v1.html#algm-loadmd"><span class="std std-ref">LoadMD</span></a> respectively.</p>
<section id="masking">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Masking</a><a class="headerlink" href="#masking" title="Permalink to this heading">¶</a></h3>
<p>The mask from the solid angle workspace is copied to the
data. Additional masking is provided by a masking file. A masking file
can be created my masking a data file then saving it using
<a class="reference internal" href="SaveMask-v1.html#algm-savemask"><span class="std std-ref">SaveMask</span></a>.</p>
</section>
<section id="background">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Background</a><a class="headerlink" href="#background" title="Permalink to this heading">¶</a></h3>
<p>The background is processed the same as the data except that the
Goniometer is copied from the data before setting the <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a>. If a background is included three workspaces are
create. If “OutputWorkspace” is set to “ws” you will get the
following.</p>
<p>“ws_normalizedBackground” containing the normalised background.</p>
<p>“ws_normalizedData” containing the normalised data.</p>
<p>And “ws” where</p>
<div class="math notranslate nohighlight">
\[ws = ws\_normalizedData - ws\_normalizedBackground * BackgroundScale\]</div>
<p>Should the background scale not be correct this allows you to redo the
background subtraction without rerunning the reduction.</p>
<p>If no background is used then the “ws” is just the normalised data.</p>
</section>
<section id="symmetries">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Symmetries</a><a class="headerlink" href="#symmetries" title="Permalink to this heading">¶</a></h3>
<p>The SymmetryOperations parameters can either be defined as a
<a class="reference internal" href="../concepts/PointAndSpaceGroups.html#point-and-space-groups"><span class="std std-ref">point or space group</span></a> were all the
symmetries for that group is applied, or you can specify individual
<a class="reference internal" href="../concepts/SymmetryGroups.html#symmetry-groups"><span class="std std-ref">symmetries</span></a> to apply.</p>
<p>For example setting SymmetryOperations to space group “P 31 2 1”,
point group “321” or “x,y,z; -y,x-y,z; -x+y,-x,z; y,x,-z; x-y,-y,-z;
-x,-x+y,-z” are equivalent. Note these symmetries are on the real
lattice not reciprocal.</p>
</section>
<section id="temporary-workspaces">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Temporary Workspaces</a><a class="headerlink" href="#temporary-workspaces" title="Permalink to this heading">¶</a></h3>
<p>If the KeepTemporaryWorkspaces option is True the data and the
normalization in addition to the nomalized data will be
outputted. This allows you to run separate instances of
SingleCrystalDiffuseReduction and combine the results. They will have
names “ws_data” and “ws_normalization”
respectively.</p>
<p>Where</p>
<div class="math notranslate nohighlight">
\[ws\_normalizedData = \frac{ws\_data}{ws\_normalization}\]</div>
<p>If background is subtracted there will be similar
“ws_background_data” and
“ws_background_normalization” for the background.</p>
<p>Where</p>
<div class="math notranslate nohighlight">
\[ws\_normalizedBackground = \frac{ws\_background\_data}{ws\_backgournd\_normalization}\]</div>
</section>
</section>
<section id="workflow">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this heading">¶</a></h2>
<img alt="../_images/SingleCrystalDiffuseReduction-v1.svg" src="../_images/SingleCrystalDiffuseReduction-v1.svg" /></section>
<section id="usage">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Single file</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_single.png" src="../_images/SingleCrystalDiffuseReduction_corelli_single.png" />
</figure>
<p><strong>Multiple files</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple.png" />
</figure>
<p><strong>Single file with symmetry</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s2">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_single_sym.png" src="../_images/SingleCrystalDiffuseReduction_corelli_single_sym.png" />
</figure>
<p><strong>Multiple files with symmetry</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s2">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym.png" />
</figure>
<p><strong>Multiple files with symmetry and background substraction</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">Background</span><span class="o">=</span><span class="s1">&#39;CORELLI_28124&#39;</span><span class="p">,</span>
                              <span class="n">BackgroundScale</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,0.1,10.05&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s2">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg.png" />
</figure>
<p><strong>Reading in elastic Corelli autoreduced data</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/SNS/CORELLI/IPTS-15526/shared/autoreduce/CORELLI_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">run</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_elastic.nxs&#39;</span> <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">29782</span><span class="p">,</span><span class="mi">29818</span><span class="p">,</span><span class="mi">10</span><span class="p">)),</span>
                              <span class="n">Background</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/IPTS-15796/shared/autoreduce/CORELLI_28124_elastic.nxs&#39;</span><span class="p">,</span>
                              <span class="n">BackgroundScale</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,10.05,0.1&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.05,10.05,0.1&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s2">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_elastic.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_elastic.png" />
</figure>
<p><strong>Defining the axis to be [H,H,0], [H,-H,0], [0,0,L]</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">Background</span><span class="o">=</span><span class="s1">&#39;CORELLI_28124&#39;</span><span class="p">,</span>
                              <span class="n">BackgroundScale</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s1">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s2">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s2">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">QDimension0</span><span class="o">=</span><span class="s1">&#39;1,1,0&#39;</span><span class="p">,</span>
                              <span class="n">QDimension1</span><span class="o">=</span><span class="s1">&#39;1,-1,0&#39;</span><span class="p">,</span>
                              <span class="n">QDimension2</span><span class="o">=</span><span class="s1">&#39;0,0,1&#39;</span><span class="p">,</span>
                              <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-7.5375,0.075,7.5375&#39;</span><span class="p">,</span>
                              <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-13.165625,0.13100125,13.165625&#39;</span><span class="p">,</span>
                              <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s2">&quot;P 31 2 1&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">],</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_HH0.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_HH0.png" />
</figure>
</section>
<section id="related-algorithms">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Related Algorithms</a><a class="headerlink" href="#related-algorithms" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDNormSCD</span></a> is the algorithm performing the normalisation of a single file.</p>
<p><a class="reference internal" href="DeltaPDF3D-v1.html#algm-deltapdf3d"><span class="std std-ref">DeltaPDF3D</span></a> calculates the 3D-ΔPDF from the resulting workspace of this algorithm.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SingleCrystalDiffuseReduction.py">SingleCrystalDiffuseReduction.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SimulatedDensityOfStates-v1.html" title="Previous Chapter: SimulatedDensityOfStates v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SimulatedDens...</span>
    </a>
  </li>
  <li>
    <a href="SliceMD-v1.html" title="Next Chapter: SliceMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SliceMD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>