<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>CompareWorkspaces v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CompressEvents v1" href="CompressEvents-v1.html" />
    <link rel="prev" title="CompareSampleLogs v1" href="CompareSampleLogs-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">CompareWorkspaces v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="compareworkspaces-v1">
<span id="algm-compareworkspaces"></span><span id="algm-compareworkspaces-v1"></span><h1>CompareWorkspaces v1<a class="headerlink" href="#compareworkspaces-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/CompareWorkspaces-v1_dlg.png"><img alt="../_images/CompareWorkspaces-v1_dlg.png" class="screenshot" src="../_images/CompareWorkspaces-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>CompareWorkspaces</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Compares two workspaces for equality. This algorithm is mainly intended for use by the Mantid development team as part of the testing process.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="CheckWorkspacesMatch-v1.html#algm-checkworkspacesmatch"><span class="std std-ref">CheckWorkspacesMatch</span></a>, <a class="reference internal" href="CompareSampleLogs-v1.html#algm-comparesamplelogs"><span class="std std-ref">CompareSampleLogs</span></a>, <a class="reference internal" href="CloneWorkspace-v1.html#algm-cloneworkspace"><span class="std std-ref">CloneWorkspace</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace1</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the first input workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>Workspace2</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the second input workspace.</p></td>
</tr>
<tr class="row-even"><td><p>Tolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1e-10</p></td>
<td><p>The maximum amount by which values may differ between the workspaces.</p></td>
</tr>
<tr class="row-odd"><td><p>CheckType</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether to check that the data types (Workspace2D vs EventWorkspace) match.</p></td>
</tr>
<tr class="row-even"><td><p>CheckAxes</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether to check that the axes match.</p></td>
</tr>
<tr class="row-odd"><td><p>CheckSpectraMap</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether to check that the spectra-detector maps match.</p></td>
</tr>
<tr class="row-even"><td><p>CheckInstrument</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether to check that the instruments match.</p></td>
</tr>
<tr class="row-odd"><td><p>CheckMasking</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether to check that the bin masking matches.</p></td>
</tr>
<tr class="row-even"><td><p>CheckSample</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether to check that the sample (e.g. logs).</p></td>
</tr>
<tr class="row-odd"><td><p>ToleranceRelErr</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Treat tolerance as relative error rather then the absolute error. This is only applicable to Matrix workspaces.</p></td>
</tr>
<tr class="row-even"><td><p>CheckAllData</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Usually checking data ends when first mismatch occurs. This forces algorithm to check all data and print mismatch to the debug log. Very often such logs are huge so making it true should be the last option.</p></td>
</tr>
<tr class="row-odd"><td><p>NumberMismatchedSpectraToPrint</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Number of mismatched spectra from lowest to be listed.</p></td>
</tr>
<tr class="row-even"><td><p>DetailedPrintIndex</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mismatched spectra that will be printed out in details.</p></td>
</tr>
<tr class="row-odd"><td><p>Result</p></td>
<td><p>Output</p></td>
<td><p>boolean</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Messages</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p>compare_msgs</p></td>
<td><p>TableWorkspace containing messages about any mismatches detected</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Compares two workspaces for equality. This algorithm is mainly intended
for use by Mantid developers as part of the testing process.</p>
<p>The data values (X,Y and error) are always checked. The algorithm can
also optionally check the axes (this includes the units), the
spectra-detector map, the instrument (the name and parameter map) and
any bin masking.</p>
<p>In the case of <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspaces</span></a>, they are checked to
hold identical event lists. Comparisons between an EventList and a
Workspace2D always fail.</p>
<p>This algorithm has two outputs: A boolean “Result” that indicates whether
the workspaces matched (true) or not (false), and a TableWorkspace property
named “Messages” (workspace name defaults to “compare_msgs”) with three
columns. The first column contains messages about any mismatches that were
detected. The second and third columns are the names of the workspaces that
were being compared when the mismatch message was issues. If all the input
workspaces matched, the message workspace will be empty.</p>
<p>Please note that details about the comparisons will be only available when the log level is set to debug.</p>
<p>Checking option <cite>CheckInstrument</cite> will enable the following comparisons between the instruments embedded
in each of the two workspaces:</p>
<ul class="simple">
<li><p>instrument name</p></li>
<li><p>positions and rotations of detectors</p></li>
<li><p>mask of detectors</p></li>
<li><p>position of the source and sample</p></li>
<li><p>instrument parameters</p></li>
</ul>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Check that two workspaces are equal to one another:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">dataY</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY</span><span class="p">)</span>

<span class="c1">#create a copy of the workspace</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CloneWorkspace</span><span class="p">(</span><span class="n">ws1</span><span class="p">)</span>

<span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">ws2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Result: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">rowCount</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Result: True
0
</pre></div>
</div>
<p><strong>Example - Check that two workspaces match within a certain tolerance:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Create a workspace with some simple data</span>
<span class="n">dataX</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="n">dataY1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dataX</span><span class="p">)</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY1</span><span class="p">)</span>

<span class="c1"># Create a similar workspace, but with added noise</span>
<span class="n">dataY2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dataX</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_sample</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataX</span><span class="p">))</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY2</span><span class="p">)</span>

<span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">ws2</span><span class="p">)</span> <span class="c1"># Fails, they&#39;re not the same</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Result: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Displaying </span><span class="si">{}</span><span class="s2"> messages:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;Message&#39;: &#39;</span><span class="si">{Message}</span><span class="s2">&#39;, &#39;Workspace 1&#39;: &#39;{Workspace 1}&#39;, &#39;Workspace 2&#39;: &#39;{Workspace 2}&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">))</span>

<span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">ws2</span><span class="p">,</span> <span class="n">Tolerance</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> <span class="c1"># Passes, they&#39;re close enough</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Result: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Displaying </span><span class="si">{}</span><span class="s2"> messages:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">messages</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;Message&#39;: &#39;</span><span class="si">{Message}</span><span class="s2">&#39;, &#39;Workspace 1&#39;: &#39;{Workspace 1}&#39;, &#39;Workspace 2&#39;: &#39;{Workspace 2}&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">row</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Result: False
Displaying 1 messages:
&#39;Message&#39;: &#39;Data mismatch&#39;, &#39;Workspace 1&#39;: &#39;ws1&#39;, &#39;Workspace 2&#39;: &#39;ws2&#39;
Result: True
Displaying 0 messages:
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Utility/Workspaces.html">Utility\Workspaces</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/Algorithms/inc/MantidAlgorithms/CompareWorkspaces.h">CompareWorkspaces.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/Algorithms/src/CompareWorkspaces.cpp">CompareWorkspaces.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CompareSampleLogs-v1.html" title="Previous Chapter: CompareSampleLogs v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CompareSampleLogs v1</span>
    </a>
  </li>
  <li>
    <a href="CompressEvents-v1.html" title="Next Chapter: CompressEvents v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CompressEvents v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>