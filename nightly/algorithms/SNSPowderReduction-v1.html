<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>SNSPowderReduction v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SassenaFFT v1" href="SassenaFFT-v1.html" />
    <link rel="prev" title="SNSAppendGeometryToNexus v1" href="SNSAppendGeometryToNexus-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SNSPowderReduction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="snspowderreduction-v1">
<span id="algm-snspowderreduction"></span><span id="algm-snspowderreduction-v1"></span><h1>SNSPowderReduction v1<a class="headerlink" href="#snspowderreduction-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SNSPowderReduction-v1_dlg.png"><img alt="../_images/SNSPowderReduction-v1_dlg.png" class="screenshot" src="../_images/SNSPowderReduction-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>SNSPowderReduction</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#manipulating-the-data-with-constants" id="id6">Manipulating the data with constants</a></p></li>
<li><p><a class="reference internal" href="#about-filter-wall" id="id7">About Filter Wall</a></p></li>
<li><p><a class="reference internal" href="#calibration-grouping-and-masking" id="id8">Calibration, grouping, and masking</a></p></li>
<li><p><a class="reference internal" href="#characterization-runs" id="id9">Characterization runs</a></p></li>
<li><p><a class="reference internal" href="#caching" id="id10">Caching</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#workflow" id="id11">Workflow</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id12">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id13">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>The algorithm used for reduction of powder diffraction data obtained on SNS instruments (e.g. PG3)</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="DiffractionFocussing-v2.html#algm-diffractionfocussing"><span class="std std-ref">DiffractionFocussing</span></a>, <a class="reference internal" href="AlignAndFocusPowder-v1.html#algm-alignandfocuspowder"><span class="std std-ref">AlignAndFocusPowder</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Files to combine in reduction. Allowed extensions: [‘_event.nxs’, ‘.nxs.h5’]</p></td>
</tr>
<tr class="row-odd"><td><p>PreserveEvents</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If the InputWorkspace is an EventWorkspace, this will preserve the full event list (warning: this will use much more memory!).</p></td>
</tr>
<tr class="row-even"><td><p>DMin</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Minimum for Dspace axis. (Default 0.)</p></td>
</tr>
<tr class="row-odd"><td><p>DMax</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Maximum for Dspace axis. (Default 0.)</p></td>
</tr>
<tr class="row-even"><td><p>DeltaRagged</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Step parameter for rebin</p></td>
</tr>
<tr class="row-odd"><td><p>Sum</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Sum the runs. Does nothing for characterization runs</p></td>
</tr>
<tr class="row-even"><td><p>PushDataPositive</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>None</p></td>
<td><p>Add a constant to the data that makes it positive over the whole range. Allowed values: [‘None’, ‘ResetToZero’, ‘AddMinimum’]</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundNumber</p></td>
<td><p>Input</p></td>
<td><p>long list</p></td>
<td><p>0</p></td>
<td><p>If specified overrides value in CharacterizationRunsFile If -1 turns off correction.</p></td>
</tr>
<tr class="row-even"><td><p>VanadiumNumber</p></td>
<td><p>Input</p></td>
<td><p>long list</p></td>
<td><p>0</p></td>
<td><p>If specified overrides value in CharacterizationRunsFile. If -1 turns off correction.</p></td>
</tr>
<tr class="row-odd"><td><p>VanadiumBackgroundNumber</p></td>
<td><p>Input</p></td>
<td><p>long list</p></td>
<td><p>0</p></td>
<td><p>If specified overrides value in CharacterizationRunsFile. If -1 turns off correction.</p></td>
</tr>
<tr class="row-even"><td><p>CalibrationFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Allowed extensions: [‘.h5’, ‘.hd5’, ‘.hdf’, ‘.cal’]</p></td>
</tr>
<tr class="row-odd"><td><p>GroupingFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Overrides grouping from CalibrationFile. Allowed extensions: [‘.xml’]</p></td>
</tr>
<tr class="row-even"><td><p>CharacterizationRunsFile</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td></td>
<td><p>File with characterization runs denoted. Allowed values: [‘txt’]</p></td>
</tr>
<tr class="row-odd"><td><p>ExpIniFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Allowed extensions: [‘.ini’]</p></td>
</tr>
<tr class="row-even"><td><p>LorentzCorrection</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Multiply each spectrum by sin(theta) where theta is half of the Bragg angle</p></td>
</tr>
<tr class="row-odd"><td><p>UnwrapRef</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Reference total flight path for frame unwrapping. Zero skips the correction</p></td>
</tr>
<tr class="row-even"><td><p>LowResRef</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Reference DIFC for resolution removal. Zero skips the correction</p></td>
</tr>
<tr class="row-odd"><td><p>CropWavelengthMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Crop the data at this minimum wavelength. Overrides LowResRef.</p></td>
</tr>
<tr class="row-even"><td><p>CropWavelengthMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Crop the data at this maximum wavelength. Forces use of CropWavelengthMin.</p></td>
</tr>
<tr class="row-odd"><td><p>RemovePromptPulseWidth</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Width of events (in microseconds) near the prompt pulse to remove. 0 disables</p></td>
</tr>
<tr class="row-even"><td><p>MaxChunkSize</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Specify maximum Gbytes of file to read in one chunk.  Default is whole file.</p></td>
</tr>
<tr class="row-odd"><td><p>Binning</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,0</p></td>
<td><p>Positive is linear bins, negative is logorithmic</p></td>
</tr>
<tr class="row-even"><td><p>ResampleX</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Number of bins in x-axis. Non-zero value overrides “Params” property. Negative value means logarithmic binning.</p></td>
</tr>
<tr class="row-odd"><td><p>BinInDspace</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>If all three bin parameters a specified, whether they are in dspace (true) or time-of-flight (false)</p></td>
</tr>
<tr class="row-even"><td><p>StripVanadiumPeaks</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Subtract fitted vanadium peaks from the known positions.</p></td>
</tr>
<tr class="row-odd"><td><p>VanadiumFWHM</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>7</p></td>
<td><p>Default=7</p></td>
</tr>
<tr class="row-even"><td><p>VanadiumPeakTol</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.05</p></td>
<td><p>How far from the ideal position a vanadium peak can be during StripVanadiumPeaks. Default=0.05, negative turns off</p></td>
</tr>
<tr class="row-odd"><td><p>VanadiumSmoothParams</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>20,2</p></td>
<td><p>Default=20,2</p></td>
</tr>
<tr class="row-even"><td><p>VanadiumRadius</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.3175</p></td>
<td><p>Radius for CarpenterSampleCorrection</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundSmoothParams</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Default=off, suggested 20,2</p></td>
</tr>
<tr class="row-even"><td><p>FilterBadPulses</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>95</p></td>
<td><p>Filter out events measured while proton charge is more than 5% below average</p></td>
</tr>
<tr class="row-odd"><td><p>ScaleData</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Constant to multiply the data before writing out. This does not apply to PDFgetN files.</p></td>
</tr>
<tr class="row-even"><td><p>OffsetData</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Constant to add to the data before writing out. This does not apply to PDFgetN files.</p></td>
</tr>
<tr class="row-odd"><td><p>SaveAs</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>gsas</p></td>
<td><p>List of all output file types. Allowed values are ‘fullprof’, ‘gsas’, ‘nexus’, ‘pdfgetn’, and ‘topas’</p></td>
</tr>
<tr class="row-even"><td><p>OutputFilePrefix</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Overrides the default filename for the output file (Optional).</p></td>
</tr>
<tr class="row-odd"><td><p>OutputDirectory</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CacheDir</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>comma-delimited ascii string representation of a list of candidate cache directories</p></td>
</tr>
<tr class="row-odd"><td><p>CleanCache</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Remove all cache files within CacheDir</p></td>
</tr>
<tr class="row-even"><td><p>FinalDataUnits</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>dSpacing</p></td>
<td><p>Allowed values: [‘dSpacing’, ‘MomentumTransfer’]</p></td>
</tr>
<tr class="row-odd"><td><p>TypeOfCorrection</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>None</p></td>
<td><p>Specifies the Absorption Correction terms to calculate, if any. Allowed values: [‘None’, ‘SampleOnly’, ‘SampleAndContainer’, ‘FullPaalmanPings’]</p></td>
</tr>
<tr class="row-even"><td><p>SampleFormula</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Chemical formula of the sample</p></td>
</tr>
<tr class="row-odd"><td><p>SampleGeometry</p></td>
<td><p>Input</p></td>
<td><p>Dictionary</p></td>
<td><p>null</p></td>
<td><p>A dictionary of geometry parameters for the sample.</p></td>
</tr>
<tr class="row-even"><td><p>MeasuredMassDensity</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.1</p></td>
<td><p>Measured mass density of sample in g/cc</p></td>
</tr>
<tr class="row-odd"><td><p>SampleNumberDensity</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Number density of the sample in number of atoms per cubic Angstrom will be used instead of calculated</p></td>
</tr>
<tr class="row-even"><td><p>ContainerShape</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>PAC06</p></td>
<td><p>Defines the container geometry</p></td>
</tr>
<tr class="row-odd"><td><p>ContainerScaleFactor</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Factor to scale the container data</p></td>
</tr>
<tr class="row-even"><td><p>ElementSize</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The size of one side of an integration element cube in mm</p></td>
</tr>
<tr class="row-odd"><td><p>NumWavelengthBins</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1000</p></td>
<td><p>Number of wavelength bin to calculate the for absorption correction</p></td>
</tr>
<tr class="row-even"><td><p>SplittersWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td></td>
<td><p>Splitters workspace for split event workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>SplitInformationWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td></td>
<td><p>Name of table workspace containing information for splitters.</p></td>
</tr>
<tr class="row-even"><td><p>LowResolutionSpectraOffset</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>-1</p></td>
<td><p>If larger and equal to 0, then process low resolution TOF and offset is the spectra number. Otherwise, ignored.</p></td>
</tr>
<tr class="row-odd"><td><p>NormalizeByCurrent</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Normalize by current</p></td>
</tr>
<tr class="row-even"><td><p>CompressTOFTolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.01</p></td>
<td><p>Tolerance to compress events in TOF.</p></td>
</tr>
<tr class="row-odd"><td><p>FrequencyLogNames</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td><p>SpeedRequest1,Speed1,frequency,skf1.speed</p></td>
<td><p>Candidate log names for frequency</p></td>
</tr>
<tr class="row-even"><td><p>WaveLengthLogNames</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td><p>LambdaRequest,lambda,skf12.lambda,BL1B:Det:TH:BL:Lambda,freq</p></td>
<td><p>Candidate log names for wave length</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<section id="manipulating-the-data-with-constants">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Manipulating the data with constants</a><a class="headerlink" href="#manipulating-the-data-with-constants" title="Permalink to this heading">¶</a></h3>
<p>There are three properties which will modify the data after it is
reduced: <code class="docutils literal notranslate"><span class="pre">PushDataPositive</span></code>, <code class="docutils literal notranslate"><span class="pre">ScaleData</span></code>, <code class="docutils literal notranslate"><span class="pre">OffsetData</span></code>. These
options are all performed on the data after all other operations. They
will be done as</p>
<div class="math notranslate nohighlight">
\[wksp = ScaleData * wksp + OffsetData\]</div>
<p>followed by <a class="reference internal" href="ResetNegatives-v1.html#algm-resetnegatives"><span class="std std-ref">ResetNegatives</span></a> with
<code class="docutils literal notranslate"><span class="pre">AddMinimum</span></code> being <code class="docutils literal notranslate"><span class="pre">True</span></code> if
<code class="docutils literal notranslate"><span class="pre">PushDataPositive='AddMinimum'</span></code>. <a class="reference internal" href="ResetNegatives-v1.html#algm-resetnegatives"><span class="std std-ref">ResetNegatives</span></a> is not run when <code class="docutils literal notranslate"><span class="pre">PushDataPositive='None'</span></code>.</p>
</section>
<section id="about-filter-wall">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">About Filter Wall</a><a class="headerlink" href="#about-filter-wall" title="Permalink to this heading">¶</a></h3>
<p>Filter wall is enabled by setting <code class="docutils literal notranslate"><span class="pre">FilterCharacterizations</span></code> property
to true.  Then the <code class="docutils literal notranslate"><span class="pre">_getTimeFilterWall</span></code> routine is used to build the
filter wall from the data defined by <code class="docutils literal notranslate"><span class="pre">SplitInformationWorkspace</span></code> and
<code class="docutils literal notranslate"><span class="pre">SplittersWorkspace</span></code> properties.  Time filter wall is used in
<code class="docutils literal notranslate"><span class="pre">_loadData</span></code> to load data in a certain range of time. Here is how the
filter is used:</p>
<ol class="arabic simple">
<li><p>There is NO filter if filter wall is <code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></li>
<li><p>There is NO lower boundary of the filter wall if <code class="docutils literal notranslate"><span class="pre">wall[0]</span></code> is
<code class="docutils literal notranslate"><span class="pre">ZERO</span></code></p></li>
<li><p>There is NO upper boundary of the filter wall if <code class="docutils literal notranslate"><span class="pre">wall[1]</span></code> is
<code class="docutils literal notranslate"><span class="pre">ZERO</span></code></p></li>
</ol>
<p>More information is found in <a class="reference internal" href="../concepts/EventFiltering.html#eventfiltering"><span class="std std-ref">Event Filtering</span></a>.</p>
</section>
<section id="calibration-grouping-and-masking">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Calibration, grouping, and masking</a><a class="headerlink" href="#calibration-grouping-and-masking" title="Permalink to this heading">¶</a></h3>
<p>There are two properties related to calibration (<code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code>
and <code class="docutils literal notranslate"><span class="pre">GroupingFile</span></code>) and three implicit workspace dependencies
(<code class="docutils literal notranslate"><span class="pre">&lt;instrument&gt;_mask</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;instrument&gt;_group</span></code>, and
<code class="docutils literal notranslate"><span class="pre">&lt;instrument&gt;_cal</span></code>). If the workspaces do not exist, they will be
created during the algorithm’s execution.</p>
<p>If specified, the <code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code> is loaded using
<a class="reference internal" href="LoadDiffCal-v1.html#algm-loaddiffcal"><span class="std std-ref">LoadDiffCal v1</span></a>. If the <code class="docutils literal notranslate"><span class="pre">GroupingFile</span></code> is specified, the
grouping it specifies takes precedence over the one that is in the
<code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code>. <a class="reference internal" href="LoadDetectorsGroupingFile-v1.html#algm-loaddetectorsgroupingfile"><span class="std std-ref">LoadDetectorsGroupingFile v1</span></a> performs
the loading. The order of preference in which to use is (first found wins):</p>
<ul class="simple">
<li><p>Calibration: <code class="docutils literal notranslate"><span class="pre">&lt;instrument&gt;_cal</span></code>, then <code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code></p></li>
<li><p>Grouping: <code class="docutils literal notranslate"><span class="pre">&lt;instrument&gt;_group</span></code> workspace, then <code class="docutils literal notranslate"><span class="pre">GroupingFile</span></code>,
then <code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code></p></li>
<li><p>Masking: <code class="docutils literal notranslate"><span class="pre">&lt;instrument&gt;_mask</span></code>, then <code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code></p></li>
</ul>
<p><a class="reference internal" href="AlignAndFocusPowder-v1.html#algm-alignandfocuspowder"><span class="std std-ref">AlignAndFocusPowder v1</span></a> does the actual resolution of which information to use.</p>
</section>
<section id="characterization-runs">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Characterization runs</a><a class="headerlink" href="#characterization-runs" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">CharacterizationRunsFile</span></code>, <code class="docutils literal notranslate"><span class="pre">ExpIniFilename</span></code>,
<code class="docutils literal notranslate"><span class="pre">BackgroundNumber</span></code>, <code class="docutils literal notranslate"><span class="pre">VanadiumNumber</span></code>, <code class="docutils literal notranslate"><span class="pre">VanadiumBackgroundNumber</span></code>
all contribute to determine which runs to use for background
subtraction and normalization. Specifying the various <code class="docutils literal notranslate"><span class="pre">*Number</span></code>
properties as <code class="docutils literal notranslate"><span class="pre">0</span></code>, indicates using the values found in the
files. Specifying <code class="docutils literal notranslate"><span class="pre">-1</span></code> indicates to not do the corrections at
all. The files are loaded using <a class="reference internal" href="PDLoadCharacterizations-v1.html#algm-pdloadcharacterizations"><span class="std std-ref">PDLoadCharacterizations v1</span></a>
which also contains the focus positions. Which runs to used are
determined by <a class="reference internal" href="PDDetermineCharacterizations-v1.html#algm-pddeterminecharacterizations"><span class="std std-ref">PDDetermineCharacterizations v1</span></a>.</p>
</section>
<section id="caching">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Caching</a><a class="headerlink" href="#caching" title="Permalink to this heading">¶</a></h3>
<p>The result of time-consuming tasks that need not be repeated, such as calculating the absorption
correction of a sample for every value of the temperature in a heating experiment, can be stored
as cache files in a cache directory. These cache files will be loaded if property <cite>CacheDir</cite>
is set. User can clean the cache files by setting property <cite>CleanCache</cite> to reclaim drive space
or to prevent accidental misuse, such as reducing with an instrument of a different geometry
and/or calibration. Cleaning the cache takes place immediately before reduction.</p>
</section>
</section>
<section id="workflow">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this heading">¶</a></h2>
<img alt="../_images/SNSPowderReduction-v1_workflow.svg" src="../_images/SNSPowderReduction-v1_workflow.svg" /><img alt="../_images/SNSPowderReduction-v1_vanadium.svg" src="../_images/SNSPowderReduction-v1_vanadium.svg" /><img alt="../_images/SNSPowderReduction-v1_process_container.svg" src="../_images/SNSPowderReduction-v1_process_container.svg" /><img alt="../_images/SNSPowderReduction-v1_focusandsum.svg" src="../_images/SNSPowderReduction-v1_focusandsum.svg" /><img alt="../_images/SNSPowderReduction-v1_focuschunks_workflow.svg" src="../_images/SNSPowderReduction-v1_focuschunks_workflow.svg" /><img alt="../_images/SNSPowderReduction-v1_loadandsum.svg" src="../_images/SNSPowderReduction-v1_loadandsum.svg" /></section>
<section id="usage">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>This is a worksflow algorithm used to process and the results of
powder diffraction scattering experimens on SNS
instruments. Processing data from instruments not at SNS is
unsupported. Sample usage can be found in the <a class="reference external" href="https://github.com/mantidproject/mantid/blob/master/Testing/SystemTests/tests/analysis/SNSPowderRedux.py">system tests</a>.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/SNSPowderReduction.py">SNSPowderReduction.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SNSAppendGeometryToNexus-v1.html" title="Previous Chapter: SNSAppendGeometryToNexus v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SNSAppendGeom...</span>
    </a>
  </li>
  <li>
    <a href="SassenaFFT-v1.html" title="Next Chapter: SassenaFFT v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SassenaFFT v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>