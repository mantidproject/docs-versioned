<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>PlotPeakByLogValue v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plus v1" href="Plus-v1.html" />
    <link rel="prev" title="PlotAsymmetryByLogValue v1" href="PlotAsymmetryByLogValue-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">PlotPeakByLogValue v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="plotpeakbylogvalue-v1">
<span id="algm-plotpeakbylogvalue"></span><span id="algm-plotpeakbylogvalue-v1"></span><h1>PlotPeakByLogValue v1<a class="headerlink" href="#plotpeakbylogvalue-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/PlotPeakByLogValue-v1_dlg.png"><img alt="../_images/PlotPeakByLogValue-v1_dlg.png" class="screenshot" src="../_images/PlotPeakByLogValue-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>PlotPeakByLogValue</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id3">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id4">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id5">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id6">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#output-workspace-format" id="id7">Output workspace format</a></p></li>
<li><p><a class="reference internal" href="#minimizer-setup" id="id8">Minimizer setup</a></p></li>
<li><p><a class="reference internal" href="#exclusion" id="id9">Exclusion</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id10">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id11">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Fits a number of spectra with the same function.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Input</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A list of sources of data to fit.  Sources can be either workspace names or file names followed optionally by a list of spectra/workspace-indices  or values using the notation described in the description section of the help page.</p></td>
</tr>
<tr class="row-odd"><td><p>Spectrum</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Set a spectrum to fit.  However, if spectra lists (or workspace-indices/values lists) are specified in the Input parameter string these take precedence.</p></td>
</tr>
<tr class="row-even"><td><p>WorkspaceIndex</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Set a workspace-index to fit (alternative option to Spectrum). However, if spectra lists (or workspace-indices/values lists) are specified in the Input parameter string,  or the Spectrum parameter integer, these take precedence.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The output TableWorkspace</p></td>
</tr>
<tr class="row-even"><td><p>Function</p></td>
<td><p>InOut</p></td>
<td><p>Function</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Parameters defining the fitting function and its initial values</p></td>
</tr>
<tr class="row-odd"><td><p>LogValue</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Name of the log value to plot the parameters against. Default: use spectra numbers.</p></td>
</tr>
<tr class="row-even"><td><p>StartX</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>A value of x in, or on the low x boundary of, the first bin to include in the fit (default lowest value of x)</p></td>
</tr>
<tr class="row-odd"><td><p>EndX</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>A value in, or on the high x boundary of, the last bin the fitting range (default the highest value of x)</p></td>
</tr>
<tr class="row-even"><td><p>FitType</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Sequential</p></td>
<td><p>Defines the way of setting initial values.  If set to ‘Sequential’ every next fit starts with parameters returned by the previous fit.  If set to ‘Individual’ each fit starts with the same initial values defined in the Function property. Allowed values: [‘Sequential’, ‘Individual’]</p></td>
</tr>
<tr class="row-odd"><td><p>PassWSIndexToFunction</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>For each spectrum in Input pass its workspace index to all functions thathave attribute WorkspaceIndex.</p></td>
</tr>
<tr class="row-even"><td><p>Minimizer</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Levenberg-Marquardt</p></td>
<td><p>Minimizer to use for fitting. Minimizers available are ‘Levenberg-Marquardt’, ‘Simplex’, ‘FABADA’, ‘Conjugate gradient (Fletcher-Reeves imp.)’, ‘Conjugate gradient (Polak-Ribiere imp.)’ and ‘BFGS’</p></td>
</tr>
<tr class="row-odd"><td><p>CostFunction</p></td>
<td><p>InOut</p></td>
<td><p>string</p></td>
<td><p>Least squares</p></td>
<td><p>Cost functions to use for fitting. Cost functions available are ‘Least squares’ and ‘Ignore positive peaks’. Allowed values: [‘Least squares’, ‘Poisson’, ‘Rwp’, ‘Unweighted least squares’]</p></td>
</tr>
<tr class="row-even"><td><p>MaxIterations</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>500</p></td>
<td><p>Stop after this number of iterations if a good fit is not found</p></td>
</tr>
<tr class="row-odd"><td><p>PeakRadius</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>A value of the peak radius the peak functions should use. A peak radius defines an interval on the x axis around the centre of the peak where its values are calculated. Values outside the interval are not calculated and assumed zeros.Numerically the radius is a whole number of peak widths (FWHM) that fit into the interval on each side from the centre. The default value of 0 means the whole x axis.</p></td>
</tr>
<tr class="row-even"><td><p>CreateOutput</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Set to true to create output workspaces with the results of the fit(default is false).</p></td>
</tr>
<tr class="row-odd"><td><p>OutputCompositeMembers</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true and CreateOutput is true then the value of each member of a Composite Function is also output.</p></td>
</tr>
<tr class="row-even"><td><p>ConvolveMembers</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true and OutputCompositeMembers is true members of any Convolution are output convolved with corresponding resolution</p></td>
</tr>
<tr class="row-odd"><td><p>EvaluationType</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>CentrePoint</p></td>
<td><p>The way the function is evaluated: CentrePoint or Histogram. Allowed values: [‘CentrePoint’, ‘Histogram’]</p></td>
</tr>
<tr class="row-even"><td><p>Exclude</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>A list of pairs of real numbers, defining the regions to exclude from the fit for all spectra.</p></td>
</tr>
<tr class="row-odd"><td><p>ExcludeMultiple</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>A list of Exclusion ranges, defining the regions to exclude from the fit for each spectra. Must have the same number of sets as the number of the spectra.</p></td>
</tr>
<tr class="row-even"><td><p>IgnoreInvalidData</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Flag to ignore infinities, NaNs and data with zero errors.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputFitStatus</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Flag to output fit status information which consists of the fit OutputStatus and the OutputChiSquared</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm fits a series of spectra with the same function. Each
spectrum is fit independently and the result is a table of fitting
parameters unique for each spectrum. The sources for the spectra are
defined in the Input property. The Input property expects a list of
spectra identifiers separated by semicolons (;). An identifier is itself
a comma-separated list of values. The first value is the name of the
source. It can be either a workspace name or a name of a file (RAW or
Nexus). If it is a name of a <a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><span class="std std-ref">WorkspaceGroup</span></a> all its
members will be included in the fit. The second value selects a spectrum
within the workspace or file. It is an integer number with a prefix
defining the meaning of the number: “sp” for a spectrum number, “i” for
a workspace index, or “v” for a range of values on the numeric axis
associated with the workspace index. For example, sp12, i125, v0.5:2.3.
If the data source is a file only the spectrum number option is
accepted. The third value of the spectrum identifier is optional period
number. It is used if the input file contains multiperiod data. In case
of workspaces this third parameter is ignored. This are examples of
Input property</p>
<div class="line-block">
<div class="line">`` “test1,i2; MUSR00015189.nxs,sp3; MUSR00015190.nxs,sp3; MUSR00015191.nxs,sp3”``</div>
<div class="line">`` “test2,v1.1:3.2”``</div>
<div class="line">`` “test3,v” - fit all spectra in workspace test3``</div>
</div>
<p>Internally PlotPeakByLogValue uses <a class="reference internal" href="Fit-v1.html#algm-fit"><span class="std std-ref">Fit v1</span></a> algorithm to perform
fitting and the following properties have the same meaning as in
<a class="reference internal" href="Fit-v1.html#algm-fit"><span class="std std-ref">Fit v1</span></a>: StartX, EndX, Minimizer, CostFunction. Property
FitType defines the way of setting initial values. If it is set to
“Sequential” every next fit starts with parameters returned by the
previous fit. If set to “Individual” each fit starts with the same
initial values defined in the Function property.</p>
<p>The Function property can be a single domain function in which case this
function is used to fit each of the inputs, or it can be a multi-domain function.
In the latter case the number of domains must equal the number of inputs and
each input is fitted to the equivalent function from the multi-domain function.</p>
<p>LogValue property specifies a log value to be included into the output.
If this property is empty the values of axis 1 will be used instead.
Setting this property to “SourceName” makes the first column of the
output table contain the names of the data sources (files or
workspaces).</p>
<section id="output-workspace-format">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Output workspace format</a><a class="headerlink" href="#output-workspace-format" title="Permalink to this heading">¶</a></h3>
<figure class="align-default" id="id2">
<img alt="PlotPeakByLogValue_Output.png" src="../_images/PlotPeakByLogValue_Output.png" />
<figcaption>
<p><span class="caption-text">PlotPeakByLogValue_Output.png</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>In this example a group of three Matrix workspaces were fitted with a
<a class="reference internal" href="../fitting/fitfunctions/Gaussian.html#func-gaussian"><span class="std std-ref">Gaussian</span></a> on a linear background.</p>
<p>The output workspace is a table in which rows correspond to the spectra
in the order they (spectra) appear in the Input property. The first
column of the table has the log values. It is followed by pairs of
columns with parameter values and fitting errors. If a parameter was
fixed or tied the error will be zero. If the function being fitted is
a Peak function, a column for its integrated intensity is added after its
parameter columns. Here is an example of the output workspace:</p>
</section>
<section id="minimizer-setup">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Minimizer setup</a><a class="headerlink" href="#minimizer-setup" title="Permalink to this heading">¶</a></h3>
<p>It is possible to supply a fully configured minimizer via the Minimizer
property, this can also include several flags that are used to indicate the
workspace name and workspace index that has been fitted (useful for fitting using
a minimizer that output workspaces (i.e. FABADA)).</p>
<p>The possible flags are:</p>
<dl class="simple">
<dt><code class="code docutils literal notranslate"><span class="pre">$wsname</span></code></dt><dd><p>The name of the workspace being fitted</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">$wsindex</span></code></dt><dd><p>The index of the spectrum being fitted</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">$basename</span></code></dt><dd><p>A convenience flag for <code class="code docutils literal notranslate"><span class="pre">$wsname_$wsindex</span></code> (the same format the fit
result and parameter output takes)</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">$outputname</span></code></dt><dd><p>The output workspace name (i.e. the value of the OutputWorkspace property).</p>
</dd>
<dt><code class="code docutils literal notranslate"><span class="pre">$OutputFitStatus</span></code></dt><dd><p>Optional flag determining whether to output fit status and chi square for each fit</p>
</dd>
</dl>
</section>
<section id="exclusion">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Exclusion</a><a class="headerlink" href="#exclusion" title="Permalink to this heading">¶</a></h3>
<p>It is possible to include exclusion regions that will not be used when calculating the fit.
This can be done with the <cite>Exclude</cite> parameter which will use the same range for each
spectra being fitted. This range is given as a list or string containing an even number of
values defining exclusion boundaries e.g. <cite>“-0.1, -0.05, 0.05, 0.3”</cite> will exclude values
between -0.1 and -0.05, and 0.05 and 0.3.
If each spectra requires different exclusion ranges <cite>ExcludeMultiple</cite> can be used, this parameter
contains a list of <cite>Exclude</cite> style parameters. For example if there are 3 spectra being fitted
the to use <cite>ExcludeMultiple</cite> you would need to give a list with 3 values e.g.
<cite>[“-0.1, -0.05”, “0.05, 0.3”, “0.0,0.0”]</cite> will mask the first between -0.1 and -0.05, the second
between 0.05 and 0.3. The third spectra will me masked between 0.0 and 0.0 i.e. it will not be
masked.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - fitting a single spectrum of in a workspace:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;name=Gaussian,Height=10.0041,PeakCentre=10098.6,Sigma=48.8581;name=FlatBackground,A0=0.3&quot;</span>
<span class="n">peaks</span> <span class="o">=</span> <span class="n">PlotPeakByLogValue</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">Spectrum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example - sequentially fitting a workspace:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;name=Gaussian,Height=10.0041,PeakCentre=10098.6,Sigma=48.8581;name=FlatBackground,A0=0.3&quot;</span>

<span class="c1">#create string of workspaces to fit (ws,i0; ws,i1, ws,i2 ...)</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="p">[</span><span class="n">ws</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;,i</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())]</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workspaces</span><span class="p">)</span>

<span class="n">peaks</span> <span class="o">=</span> <span class="n">PlotPeakByLogValue</span><span class="p">(</span><span class="n">workspaces</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">Spectrum</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#get peak centres for comparison</span>
<span class="n">peak_centres</span> <span class="o">=</span> <span class="n">peaks</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;f0.PeakCentre&#39;</span><span class="p">)</span>
<span class="n">ref</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">peak_centres</span><span class="p">))</span>
<span class="n">ref</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mf">10098.6</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">peak_centres</span><span class="p">,</span> <span class="mf">1e-3</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p><strong>Example - sequentially fitting a workspace with Output Status:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;name=Gaussian,Height=10.0041,PeakCentre=10098.6,Sigma=48.8581;name=FlatBackground,A0=0.3&quot;</span>

<span class="c1">#create string of workspaces to fit (ws,i0; ws,i1, ws,i2 ...)</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="p">[</span><span class="n">ws</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;,i</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())]</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workspaces</span><span class="p">)</span>

<span class="n">peaks</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">chi2</span> <span class="o">=</span> <span class="n">PlotPeakByLogValue</span><span class="p">(</span><span class="n">workspaces</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">Spectrum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">OutputFitStatus</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Print status of first 10 fits</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fit status = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fit chi2 = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chi2</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Fit status = [&#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;]
Fit chi2 = [  5.09648779e-08   6.89426130e-09   9.33124574e-10   1.26539259e-10
   1.73025195e-11   2.45555803e-12   4.06465408e-13   1.04496124e-13
   4.79987355e-14   3.01813222e-14]
</pre></div>
</div>
<p><strong>Example - Fitting multiDomain function:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">function</span> <span class="o">=</span> <span class="n">mantid</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">FunctionFactory</span><span class="o">.</span><span class="n">createInitializedMultiDomainFunction</span><span class="p">(</span><span class="s2">&quot;name=Gaussian,Height=10.0041,PeakCentre=10098.6,Sigma=48.8581;name=FlatBackground,A0=0.3&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

<span class="c1">#create string of workspaces to fit (ws,i0; ws,i1, ws,i2 ...)</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="p">[</span><span class="n">ws</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;,i</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())]</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workspaces</span><span class="p">)</span>

<span class="n">peaks</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">chi2</span> <span class="o">=</span> <span class="n">PlotPeakByLogValue</span><span class="p">(</span><span class="n">workspaces</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">Spectrum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">OutputFitStatus</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Print status of first 10 fits</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fit status = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fit chi2 = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chi2</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Fit status = [&#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;, &#39;success&#39;]
Fit chi2 = [  5.09648779e-08   6.89426130e-09   9.33124574e-10   1.26539259e-10
   1.73025195e-11   2.45555803e-12   4.06465408e-13   1.04496124e-13
   4.79987355e-14   3.01813222e-14]
</pre></div>
</div>
<p><strong>Example - :</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;name=Gaussian,Height=10.0041,PeakCentre=10098.6,Sigma=48.8581;name=FlatBackground,A0=0.3&quot;</span>

<span class="c1">#create string of workspaces to fit (ws,i0; ws,i1, ws,i2 ...)</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="p">[</span><span class="n">ws</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;,i</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
<span class="n">workspaces</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">workspaces</span><span class="p">)</span>

<span class="n">exclude_range</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;5000,7500&quot;</span><span class="p">,</span> <span class="s2">&quot;7500,12500&quot;</span><span class="p">,</span> <span class="s2">&quot;0.0,0.0&quot;</span><span class="p">]</span>

<span class="n">peaks</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">chi2</span> <span class="o">=</span> <span class="n">PlotPeakByLogValue</span><span class="p">(</span><span class="n">workspaces</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">Spectrum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">OutputFitStatus</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ExcludeMultiple</span><span class="o">=</span><span class="n">exclude_range</span><span class="p">)</span>

<span class="c1"># Print status of first 10 fits</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fit status = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fit chi2 = [</span><span class="si">{0:.4e}</span><span class="s2">, </span><span class="si">{1:.4e}</span><span class="s2">, </span><span class="si">{2:.4e}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chi2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">chi2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">chi2</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Fit status = [&#39;success&#39;, &#39;success&#39;, &#39;success&#39;]
Fit chi2 = [5.0965e-08, 0.0000e+00, 6.8943e-09]
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Optimization.html">Optimization</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/13e7f0547cfe096095781821611f9c6151283ad7/Framework/CurveFitting/inc/MantidCurveFitting/Algorithms/PlotPeakByLogValue.h">PlotPeakByLogValue.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/13e7f0547cfe096095781821611f9c6151283ad7/Framework/CurveFitting/src/Algorithms/PlotPeakByLogValue.cpp">PlotPeakByLogValue.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PlotAsymmetryByLogValue-v1.html" title="Previous Chapter: PlotAsymmetryByLogValue v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PlotAsymmetry...</span>
    </a>
  </li>
  <li>
    <a href="Plus-v1.html" title="Next Chapter: Plus v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Plus v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>