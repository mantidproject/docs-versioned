<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>BASISPowderDiffraction v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="BASISReduction v1" href="BASISReduction-v1.html" />
    <link rel="prev" title="BASISDiffraction v1" href="BASISDiffraction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">BASISPowderDiffraction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="basispowderdiffraction-v1">
<span id="algm-basispowderdiffraction"></span><span id="algm-basispowderdiffraction-v1"></span><h1>BASISPowderDiffraction v1<a class="headerlink" href="#basispowderdiffraction-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/BASISPowderDiffraction-v1_dlg.png"><img alt="../_images/BASISPowderDiffraction-v1_dlg.png" class="screenshot" src="../_images/BASISPowderDiffraction-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>BASISPowderDiffraction</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#developer-s-corner" id="id7">Developer’s Corner</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-the-previous-pulse" id="id8">Adding the Previous Pulse</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Diffraction pattern for powder samples</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a>, <a class="reference internal" href="BASISCrystalDiffraction-v1.html#algm-basiscrystaldiffraction"><span class="std std-ref">BASISCrystalDiffraction</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RunNumbers</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Sample run numbers</p></td>
</tr>
<tr class="row-odd"><td><p>DoFluxNormalization</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Do we normalize data by incoming flux?</p></td>
</tr>
<tr class="row-even"><td><p>FluxNormalizationType</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Monitor</p></td>
<td><p>Flux Normalization Type. Allowed values: [‘Monitor’, ‘Proton Charge’, ‘Duration’]</p></td>
</tr>
<tr class="row-odd"><td><p>MomentumTransferBins</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0.1,0.0025,2.5</p></td>
<td><p>Momentum transfer binning scheme</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output reduced workspace</p></td>
</tr>
<tr class="row-odd"><td><p>MaskFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>/SNS/BSS/shared/autoreduce/new_masks_08_12_2015/BASIS_Mask_default_diff.xml</p></td>
<td><p>See documentation for latest mask files. Allowed extensions: [‘.xml’]</p></td>
</tr>
<tr class="row-even"><td><p>BackgroundRuns</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Background run numbers</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundScale</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The background will be scaled by this number before being subtracted.</p></td>
</tr>
<tr class="row-even"><td><p>OutputBackground</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td></td>
<td><p>Reduced workspace for background runs</p></td>
</tr>
<tr class="row-odd"><td><p>VanadiumRuns</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Vanadium run numbers</p></td>
</tr>
<tr class="row-even"><td><p>RemoveTemporaryWorkspaces</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Remove temporary workspaces and files</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p><strong>Run numbers</strong>:
All run numbers provided will be reduced together as an aggregate sample.
Example:
2144-2147,2156 will reduce runs from (and including) 2144 up to
(and including) 2147, plus 2156.</p>
<p><strong>Flux Normalization Type</strong>:
Normalize the number of counts by either: (1) counts recorded in the monitor,
(2) total proton charge, or (3) run duration. This flux normalization is
separately applied to the aggregate sample, aggregate vanadium, and
aggregated background.</p>
<p><strong>Mask file</strong>: The default file (BASIS_Mask_default_diff.xml) masks all
inelastic detectors as well as the tips of the diffraction tubes. The file
is in directory /SNS/BSS/shared/autoreduce/new_masks_08_12_2015.</p>
<p><strong>OutputWorkspace</strong>: a one-histogram <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a>
is produced containing the intensities versus momentum transfer <cite>Q</cite>. In addition, a
workspace of same name plus suffix <cite>_angle</cite> is produced. The latter workspace
contains intensities versus scattering angle. If background runs are
provided, these workspaces contain the intensities of the sample minus those
of the background.</p>
<p><strong>BackgroundRuns</strong>: one or more run numbers to describe the background.
Background runs are reduced together.</p>
<p><strong>BackgroundScale</strong>: background intensities are rescaled by this number
when subtracting background from sample.</p>
<p><strong>OutputBackground</strong>: if populated, a one-histogram
<a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> is produced containing the
background intensities versus momentum transfer <cite>Q</cite>. In addition, a
workspace of same name plus suffix <cite>_angle</cite> is produced. The latter workspace
contains intensities versus scattering angle. Rescaling of the
background intensities is not applied when producing these workspaces.</p>
<p><strong>VanadiumRuns</strong>: a set of runs to be reduced jointly provide an incoherent
and isotropic scattering to determine instrument efficiency per detector. If
no vanadium is provided, all detectors are assumed to have the same efficiency.
The vanadium intensity is integrated in each detector and used to normalize
both the sample and the background intensities.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Determine powder diffraction pattern:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">BASISPowderDiffraction</span>
<span class="n">BASISPowderDiffraction</span><span class="p">(</span><span class="n">RunNumbers</span><span class="o">=</span><span class="s1">&#39;74799&#39;</span><span class="p">,</span>
                       <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;powder&#39;</span><span class="p">,</span>
                       <span class="n">BackgroundRuns</span><span class="o">=</span><span class="s1">&#39;75527&#39;</span><span class="p">,</span>
                       <span class="n">OutputBackground</span><span class="o">=</span><span class="s1">&#39;background&#39;</span>
                       <span class="n">VanadiumRuns</span><span class="o">=</span><span class="s1">&#39;64642&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/BASISPowderDiffraction.png" src="../_images/BASISPowderDiffraction.png" />
</figure>
<p>The color image shows the nine diffraction detectors with a Bragg peak spilling
intensity on the edges of two tubes at a scattering angle of 60 degrees.</p>
</section>
<section id="developer-s-corner">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Developer’s Corner</a><a class="headerlink" href="#developer-s-corner" title="Permalink to this heading">¶</a></h2>
<section id="adding-the-previous-pulse">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Adding the Previous Pulse</a><a class="headerlink" href="#adding-the-previous-pulse" title="Permalink to this heading">¶</a></h3>
<p>because of the legacy hardware used at BASIS (ROC2 instead of ROC5),
the diffraction detectors frame is forced to coincide with the
inelastic detectors frame, introducing a shift in the minimal TOF.</p>
<p>In the figures below, we have represented the TOF and wavelength dependence
of the intensities for the monitors (black), sample from the current
pulse (red), and sample from the previous pulse (green)</p>
<p><strong>111 Reflection:</strong></p>
<figure class="align-default">
<img alt="../_images/BASISPowderDiffraction_2.png" src="../_images/BASISPowderDiffraction_2.png" />
</figure>
<p><strong>311 Reflection:</strong></p>
<figure class="align-default">
<img alt="../_images/BASISPowderDiffraction_2.png" src="../_images/BASISPowderDiffraction_2.png" />
</figure>
<p>The figures show that the “slow” neutrons from the previous pulse should be
accounted as the fast neutrons for the current pulse.</p>
<p>The solution is to: (1) pile together events from the previous and current
pulses; (2) discard events with under-represented wavelegths. We use the
monitor counts for the last step.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</section>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/BASISPowderDiffraction.py">BASISPowderDiffraction.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="BASISDiffraction-v1.html" title="Previous Chapter: BASISDiffraction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; BASISDiffraction v1</span>
    </a>
  </li>
  <li>
    <a href="BASISReduction-v1.html" title="Next Chapter: BASISReduction v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">BASISReduction v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>