<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>PDDetermineCharacterizations v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PDFFourierTransform v1" href="PDFFourierTransform-v1.html" />
    <link rel="prev" title="PDConvertReciprocalSpace v1" href="PDConvertReciprocalSpace-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">PDDetermineCharacterizations v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="pddeterminecharacterizations-v1">
<span id="algm-pddeterminecharacterizations"></span><span id="algm-pddeterminecharacterizations-v1"></span><h1>PDDetermineCharacterizations v1<a class="headerlink" href="#pddeterminecharacterizations-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/PDDetermineCharacterizations-v1_dlg.png"><img alt="../_images/PDDetermineCharacterizations-v1_dlg.png" class="screenshot" src="../_images/PDDetermineCharacterizations-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>PDDetermineCharacterizations</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#determining-frequency-and-wavelength" id="id5">Determining Frequency and Wavelength</a></p></li>
<li><p><a class="reference internal" href="#propertymanager-contents" id="id6">PropertyManager Contents</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Determines the characterizations of a workspace.</p>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace with logs to help identify frequency and wavelength</p></td>
</tr>
<tr class="row-odd"><td><p>Characterizations</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></p></td>
<td></td>
<td><p>Table of characterization information</p></td>
</tr>
<tr class="row-even"><td><p>ReductionProperties</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>__pd_reduction_properties</p></td>
<td><p>Property manager name for the reduction</p></td>
</tr>
<tr class="row-odd"><td><p>BackRun</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td><p>0</p></td>
<td><p>Empty container run to use. 0 to use value in table, -1 to not use.</p></td>
</tr>
<tr class="row-even"><td><p>NormRun</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td><p>0</p></td>
<td><p>Normalization run to use. 0 to use value in table, -1 to not use.</p></td>
</tr>
<tr class="row-odd"><td><p>NormBackRun</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td><p>0</p></td>
<td><p>Normalization background run to use. 0 to use value in table, -1 to not use.</p></td>
</tr>
<tr class="row-even"><td><p>EmptyEnv</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td><p>0</p></td>
<td><p>Empty sample environment run to use. 0 to use value in table, -1 to not use.</p></td>
</tr>
<tr class="row-odd"><td><p>EmptyInstr</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td><p>0</p></td>
<td><p>Empty instrument run to use. 0 to use value in table, -1 to not use.</p></td>
</tr>
<tr class="row-even"><td><p>FrequencyLogNames</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td><p>SpeedRequest1,Speed1,frequency,skf1.speed</p></td>
<td><p>Candidate log names for frequency</p></td>
</tr>
<tr class="row-odd"><td><p>WaveLengthLogNames</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td><p>LambdaRequest,lambda,skf12.lambda,BL1B:Det:TH:BL:Lambda,freq</p></td>
<td><p>Candidate log names for wave length</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm takes an <code class="docutils literal notranslate"><span class="pre">InputWorkspace</span></code> and <code class="docutils literal notranslate"><span class="pre">Characterizations</span></code>
<a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> and
creates a PropertyManager with the appropriate characterization runs.
This is done by determining the effective accelerator frequency and
center wavelength and choosing the appropriate row from the table.</p>
<p>This algorithm is one of the workflow algorithms that helps
<a class="reference internal" href="SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction v1</span></a> and its child algorithm
<a class="reference internal" href="AlignAndFocusPowder-v1.html#algm-alignandfocuspowder"><span class="std std-ref">AlignAndFocusPowder v1</span></a>.</p>
<section id="determining-frequency-and-wavelength">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Determining Frequency and Wavelength</a><a class="headerlink" href="#determining-frequency-and-wavelength" title="Permalink to this heading">¶</a></h3>
<p>The frequency is found by inspecting the logs (in order)
<code class="docutils literal notranslate"><span class="pre">SpeedRequest1</span></code>, <code class="docutils literal notranslate"><span class="pre">Speed1</span></code>, and <code class="docutils literal notranslate"><span class="pre">frequency</span></code>. Whichever one has a
nonzero value is used.  Simlilarly, the wavelength is taken by
inspecting <code class="docutils literal notranslate"><span class="pre">LambdaRequest</span></code> then <code class="docutils literal notranslate"><span class="pre">Lambda</span></code>. If either the frequency
or wavelength cannot be determined, the algorithm will return a
default PropertyManager with mostly zeros.</p>
</section>
<section id="propertymanager-contents">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">PropertyManager Contents</a><a class="headerlink" href="#propertymanager-contents" title="Permalink to this heading">¶</a></h3>
<p>The PropertyManager will have the following keys and values. Listed in
the table is also their default values. The “Alg Property” column is
what property of this algorithm is used to override what is in the
table. For all of those properties, “0” is interpreted as use the
information from the supplied table, “-1” is interpreted as set the
value to zero in the resulting <code class="docutils literal notranslate"><span class="pre">PropertyManager</span></code>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Alg Property</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>frequency</p></td>
<td><p>double</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>wavelength</p></td>
<td><p>double</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>bank</p></td>
<td><p>integer</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>vanadium</p></td>
<td><p>integerarray</p></td>
<td><p>[0]</p></td>
<td><p>NormRun</p></td>
</tr>
<tr class="row-even"><td><p>vanadium_background</p></td>
<td><p>integerarray</p></td>
<td><p>[0]</p></td>
<td><p>NormBackRun</p></td>
</tr>
<tr class="row-odd"><td><p>container</p></td>
<td><p>integerarray</p></td>
<td><p>[0]</p></td>
<td><p>BackRun</p></td>
</tr>
<tr class="row-even"><td><p>empty_environment</p></td>
<td><p>integerarray</p></td>
<td><p>[0]</p></td>
<td><p>EmptyEnv</p></td>
</tr>
<tr class="row-odd"><td><p>empty_instrument</p></td>
<td><p>integerarray</p></td>
<td><p>[0]</p></td>
<td><p>EmptyInstr</p></td>
</tr>
<tr class="row-even"><td><p>d_min</p></td>
<td><p>string</p></td>
<td><p>“”</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>d_max</p></td>
<td><p>string</p></td>
<td><p>“”</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>tof_min</p></td>
<td><p>double</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>tof_max</p></td>
<td><p>double</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>wavelength_min</p></td>
<td><p>double</p></td>
<td><p>0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>wavelength_max</p></td>
<td><p>double</p></td>
<td><p>0</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>In the case of extra columns existing in the <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> denoting <code class="docutils literal notranslate"><span class="pre">SampleContainer</span></code> information: if the
<code class="docutils literal notranslate"><span class="pre">SampleContainer</span></code> isn’t a property on the workspace, or the value
isn’t one of the column labels, the value of the <code class="docutils literal notranslate"><span class="pre">container</span></code> column
in the supplied <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> will be used
instead.</p>
<p>For a description of the  <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a>
see <a class="reference internal" href="PDLoadCharacterizations-v1.html#algm-pdloadcharacterizations"><span class="std std-ref">PDLoadCharacterizations</span></a>.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Workflow/Diffraction/UsesPropertyManager.html">Workflow\Diffraction\UsesPropertyManager</a></p>
</section>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/Algorithms/inc/MantidAlgorithms/PDDetermineCharacterizations.h">PDDetermineCharacterizations.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/Algorithms/src/PDDetermineCharacterizations.cpp">PDDetermineCharacterizations.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PDConvertReciprocalSpace-v1.html" title="Previous Chapter: PDConvertReciprocalSpace v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PDConvertReci...</span>
    </a>
  </li>
  <li>
    <a href="PDFFourierTransform-v1.html" title="Next Chapter: PDFFourierTransform v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PDFFourierTra... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>