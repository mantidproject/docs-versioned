<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>IndirectILLReductionFWS v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IndirectILLReductionQENS v1" href="IndirectILLReductionQENS-v1.html" />
    <link rel="prev" title="IndirectILLReductionDIFF v1" href="IndirectILLReductionDIFF-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">IndirectILLReductionFWS v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="indirectillreductionfws-v1">
<span id="algm-indirectillreductionfws"></span><span id="algm-indirectillreductionfws-v1"></span><h1>IndirectILLReductionFWS v1<a class="headerlink" href="#indirectillreductionfws-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/IndirectILLReductionFWS-v1_dlg.png"><img alt="../_images/IndirectILLReductionFWS-v1_dlg.png" class="screenshot" src="../_images/IndirectILLReductionFWS-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>IndirectILLReductionFWS</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#input" id="id6">Input</a></p></li>
<li><p><a class="reference internal" href="#output" id="id7">Output</a></p></li>
<li><p><a class="reference internal" href="#workflow" id="id8">Workflow</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id10">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Performs fixed-window scan (FWS) multiple file reduction (both elastic and inelastic) for ILL indirect geometry data, instrument IN16B.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="IndirectILLReductionQENS-v1.html#algm-indirectillreductionqens"><span class="std std-ref">IndirectILLReductionQENS</span></a>, <a class="reference internal" href="IndirectILLEnergyTransfer-v1.html#algm-indirectillenergytransfer"><span class="std std-ref">IndirectILLEnergyTransfer</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Run</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Run number(s) of sample run(s). Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundRun</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td></td>
<td><p>Run number(s) of background (empty can) run(s). Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-even"><td><p>CalibrationRun</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td></td>
<td><p>Run number(s) of vanadium calibration run(s). Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>CalibrationBackgroundRun</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td></td>
<td><p>Run number(s) of background (empty can) run(s) for vanadium run. Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-even"><td><p>Observable</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>sample.temperature</p></td>
<td><p>Scanning observable, a Sample Log entry</p></td>
</tr>
<tr class="row-odd"><td><p>SortXAxis</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether or not to sort the x-axis</p></td>
</tr>
<tr class="row-even"><td><p>BackgroundScalingFactor</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Scaling factor for background subtraction</p></td>
</tr>
<tr class="row-odd"><td><p>CalibrationBackgroundScalingFactor</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Scaling factor for background subtraction for vanadium calibration</p></td>
</tr>
<tr class="row-even"><td><p>BackgroundOption</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Sum</p></td>
<td><p>Whether to sum or interpolate the background runs. Allowed values: [‘Sum’, ‘Interpolate’]</p></td>
</tr>
<tr class="row-odd"><td><p>CalibrationOption</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Sum</p></td>
<td><p>Whether to sum or interpolate the calibration runs. Allowed values: [‘Sum’, ‘Interpolate’]</p></td>
</tr>
<tr class="row-even"><td><p>CalibrationBackgroundOption</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Sum</p></td>
<td><p>Whether to sum or interpolate the background run for calibration runs. Allowed values: [‘Sum’, ‘Interpolate’]</p></td>
</tr>
<tr class="row-odd"><td><p>MapFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Filename of the detector grouping map file to use.  By default all the pixels will be summed per each tube.  Use .map or .xml file (see GroupDetectors documentation) only if different range is needed for each tube. Allowed values: [‘map’, ‘xml’]</p></td>
</tr>
<tr class="row-even"><td><p>ManualPSDIntegrationRange</p></td>
<td><p>Input</p></td>
<td><p>long list</p></td>
<td><p>1,128</p></td>
<td><p>Integration range of vertical pixels in each PSD tube.  By default all the pixels will be summed per each tube.  Use this option if the same range (other than default) is needed for all the tubes.</p></td>
</tr>
<tr class="row-odd"><td><p>Analyser</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>silicon</p></td>
<td><p>Analyser crystal. Allowed values: [‘silicon’]</p></td>
</tr>
<tr class="row-even"><td><p>Reflection</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>111</p></td>
<td><p>Analyser reflection. Allowed values: [‘111’, ‘311’]</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>WorkspaceGroup</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output workspace group</p></td>
</tr>
<tr class="row-even"><td><p>SpectrumAxis</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>SpectrumNumber</p></td>
<td><p>The spectrum axis conversion target. Allowed values: [‘SpectrumNumber’, ‘2Theta’, ‘Q’, ‘Q2’]</p></td>
</tr>
<tr class="row-odd"><td><p>DiscardSingleDetectors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether to discard the spectra of single detectors.</p></td>
</tr>
<tr class="row-even"><td><p>ManualInelasticPeakChannels</p></td>
<td><p>Input</p></td>
<td><p>long list</p></td>
<td><p>-1,-1</p></td>
<td><p>The channel indices for the inelastic peak positions in the beginning and in the end of the spectra; by default the maxima of the monitor spectrum will be used for this. The intensities will be integrated symmetrically around each peak.</p></td>
</tr>
<tr class="row-odd"><td><p>GroupDetectors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Group the pixels using the range, tube-by-tube (default) or in a custom way;  it is not recommended to group the detectors at this stage,  in order to get absorption corrections right,  however the default value is True for backwards compatibility.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm performs Fixed Window Scan (FWS) data reduction (both Elastic and Inelastic) for IN16B indirect geometry instrument at ILL.
It uses internally the <a class="reference internal" href="IndirectILLEnergyTransfer-v1.html#algm-indirectillenergytransfer"><span class="std std-ref">IndirectILLEnergyTransfer</span></a> algorithm.</p>
</section>
<section id="input">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Input</a><a class="headerlink" href="#input" title="Permalink to this heading">¶</a></h2>
<p>Multiple files following the syntax given in
<a class="reference internal" href="../api/python/mantid/api/MultipleFileProperty.html#mantid.api.MultipleFileProperty" title="mantid.api.MultipleFileProperty"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MultipleFileProperty</span></code></a>.</p>
</section>
<section id="output">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Output</a><a class="headerlink" href="#output" title="Permalink to this heading">¶</a></h2>
<p>A <a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><span class="std std-ref">WorkspaceGroup</span></a> that contains as many workspaces as many distinct Doppler’s energy values were present in input files list (including E=0 for EFWS).
Each Workspace in the group will have the given observable as the x-axis and as many bins, as many files were given corresponding to the same energy.
Y-axis will be detector angle, and the values would be the intensities integrated over the whole spectra (for EFWS) or over the two peaks
(symmetric around each peak) at the beginning and the end of the spectra (for IFWS).
Scanning observable can be any numeric or time-stamp-like string parameter.
See <code class="docutils literal notranslate"><span class="pre">sample.*</span></code> or e.g. <code class="docutils literal notranslate"><span class="pre">start_time</span></code> in Sample Logs.
<code class="docutils literal notranslate"><span class="pre">BackgroundRun</span></code> s, <code class="docutils literal notranslate"><span class="pre">CalibrationBackgroundRun</span></code> s and <code class="docutils literal notranslate"><span class="pre">CalibrationRun</span></code> s will be averaged (default) or interpolated over all the observable points according to the option.
Interpolation is provided by <a class="reference internal" href="SplineInterpolation-v1.html#algm-splineinterpolation"><span class="std std-ref">SplineInterpolation</span></a>, which does cubic spline (or linear for 2 points only) interpolation inside the range and
flat extrapolation beyond the range. For the moment it does not give errors on interpolated results.
Interpolated subtraction or calibration is recommended only if there is a strong dependence on the observable and many measured points in the data to be interpolated.</p>
</section>
<section id="workflow">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this heading">¶</a></h2>
<img alt="../_images/IndirectILLReductionFWS-v1_wkflw.svg" src="../_images/IndirectILLReductionFWS-v1_wkflw.svg" /></section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example: EFWS+IFWS</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">IndirectILLReductionFWS</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN16B/083072:083077.nxs&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Result is now a WorkspaceGroup, which has </span><span class="si">{:d}</span><span class="s2"> workspaces, one per each energy value&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;first item, called </span><span class="si">{}</span><span class="s2"> corresponds to energy value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span><span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;it has </span><span class="si">{:d}</span><span class="s2"> histograms and </span><span class="si">{:d}</span><span class="s2"> bins, one per each temperature&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span><span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Result is now a WorkspaceGroup, which has 3 workspaces, one per each energy value
first item, called ws_0.0_red corresponds to energy value of 0.0
it has 18 histograms and 2 bins, one per each temperature
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Workflow/MIDAS.html">Workflow\MIDAS</a> | <a class="reference external" href="categories/Workflow/Inelastic.html">Workflow\Inelastic</a> | <a class="reference external" href="categories/Inelastic/Indirect.html">Inelastic\Indirect</a> | <a class="reference external" href="categories/Inelastic/Reduction.html">Inelastic\Reduction</a> | <a class="reference external" href="categories/ILL/Indirect.html">ILL\Indirect</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/IndirectILLReductionFWS.py">IndirectILLReductionFWS.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="IndirectILLReductionDIFF-v1.html" title="Previous Chapter: IndirectILLReductionDIFF v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; IndirectILLRe...</span>
    </a>
  </li>
  <li>
    <a href="IndirectILLReductionQENS-v1.html" title="Next Chapter: IndirectILLReductionQENS v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IndirectILLRe... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>