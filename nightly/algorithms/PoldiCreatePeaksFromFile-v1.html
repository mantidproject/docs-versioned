<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>PoldiCreatePeaksFromFile v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PoldiDataAnalysis v1" href="PoldiDataAnalysis-v1.html" />
    <link rel="prev" title="PoldiCreatePeaksFromCell v1" href="PoldiCreatePeaksFromCell-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">PoldiCreatePeaksFromFile v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="poldicreatepeaksfromfile-v1">
<span id="algm-poldicreatepeaksfromfile"></span><span id="algm-poldicreatepeaksfromfile-v1"></span><h1>PoldiCreatePeaksFromFile v1<a class="headerlink" href="#poldicreatepeaksfromfile-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/PoldiCreatePeaksFromFile-v1_dlg.png"><img alt="../_images/PoldiCreatePeaksFromFile-v1_dlg.png" class="screenshot" src="../_images/PoldiCreatePeaksFromFile-v1_dlg.png" style="width: 401px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>PoldiCreatePeaksFromFile</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#required" id="id6">Required</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id7">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id8">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>The algorithm reads a POLDI crystal structure file and creates a WorkspaceGroup that contains tableswith the expected reflections.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="PoldiCreatePeaksFromCell-v1.html#algm-poldicreatepeaksfromcell"><span class="std std-ref">PoldiCreatePeaksFromCell</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A file with POLDI crystal data. Allowed values: [‘dat’]</p></td>
</tr>
<tr class="row-odd"><td><p>LatticeSpacingMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.5</p></td>
<td><p>Lowest allowed lattice spacing.</p></td>
</tr>
<tr class="row-even"><td><p>LatticeSpacingMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Largest allowed lattice spacing.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>WorkspaceGroup with reflection tables.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Some steps in the analysis of POLDI data require that detected peaks are indexed. This can be done by using
<a class="reference internal" href="PoldiIndexKnownCompounds-v1.html#algm-poldiindexknowncompounds"><span class="std std-ref">PoldiIndexKnownCompounds v1</span></a>, which accepts a table with unindexed peaks and one or more workspaces with
calculated peaks corresponding to the crystal structures that are expected in the sample. These can be calculated
using the algorithm <a class="reference internal" href="PoldiCreatePeaksFromCell-v1.html#algm-poldicreatepeaksfromcell"><span class="std std-ref">PoldiCreatePeaksFromCell v1</span></a>. Calling this algorithm over and over with the same
parameters is not practical, but storing the tables is not practical either, since lattice parameters may change
slightly from sample to sample.</p>
<p>PoldiCreatePeaksFromFile reads a text file which contains one or more crystal structure definitions. Since the
analysis requires information mainly about the lattice and the symmetry, the format is very simple. The following
block shows how such a file would look when there are two compounds:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># The name may contain letters, numbers and _
Iron_FCC {
    # Up to 6 values in the order a, b, c, alpha, beta, gamma.
    # Lattice parameters are given in Angstrom.
    Lattice: 3.65
    Spacegroup: F m -3 m
    Atoms: {
        # Element x y z are mandatory. Optional occupancy and isotropic ADP (in Angstrom^2)
        Fe 0.0 0.0 0.0
    }
}

Iron_BCC {
    Lattice: 2.88
    Spacegroup: F m -3 m
    Atoms: {
        Fe 0.0 0.0 0.0
    }
}
</pre></div>
</div>
<p>Note that only the atoms in the asymmetric unit need to be specified, the space group is used to generate all
equivalent atoms. This information is used to determine systematic absences, while the space group is also used by
some POLDI algorithms to obtain the point group to get reflection multiplicities and more. Anything that follows the
<code class="docutils literal notranslate"><span class="pre">#</span></code>-character is considered a comment and is ignored by the parser to allow documentation of the crystal structures
if necessary.</p>
<p>The algorithm will always produce a WorkspaceGroup which contains as many peak tables as compounds specified in the
file.</p>
</section>
<section id="required">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Required</a><a class="headerlink" href="#required" title="Permalink to this heading">¶</a></h2>
<p>This algorithm requires python package <code class="docutils literal notranslate"><span class="pre">pyparsing</span></code>, available at the <a class="reference external" href="https://pypi.python.org/pypi/pyparsing">python package index</a>
or through the operating system’s package manager. If the package is not present, this algorithm will not be available.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p>The following usage example takes up the file showed above and passes it to the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create two tables with expected peaks directly from a file</span>
<span class="n">compounds</span> <span class="o">=</span> <span class="n">PoldiCreatePeaksFromFile</span><span class="p">(</span><span class="s1">&#39;PoldiCrystalFileExample.dat&#39;</span><span class="p">,</span> <span class="n">LatticeSpacingMin</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="n">compound_count</span> <span class="o">=</span> <span class="n">compounds</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of loaded compounds: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">compound_count</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">compound_count</span><span class="p">):</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">compounds</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compound </span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1"> has </span><span class="si">{}</span><span class="s1"> reflections in the resolution range.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>  <span class="n">ws</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
</pre></div>
</div>
<p>The script produces a WorkspaceGroup which contains a table with reflections for each compound in the file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">loaded</span> <span class="n">compounds</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Compound</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Iron_FCC</span> <span class="n">has</span> <span class="mi">11</span> <span class="n">reflections</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">resolution</span> <span class="nb">range</span><span class="o">.</span>
<span class="n">Compound</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Iron_BCC</span> <span class="n">has</span> <span class="mi">8</span> <span class="n">reflections</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">resolution</span> <span class="nb">range</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/SINQ/Poldi.html">SINQ\Poldi</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/PoldiCreatePeaksFromFile.py">PoldiCreatePeaksFromFile.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PoldiCreatePeaksFromCell-v1.html" title="Previous Chapter: PoldiCreatePeaksFromCell v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PoldiCreatePe...</span>
    </a>
  </li>
  <li>
    <a href="PoldiDataAnalysis-v1.html" title="Next Chapter: PoldiDataAnalysis v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PoldiDataAnalysis v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>