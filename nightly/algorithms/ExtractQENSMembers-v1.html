<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ExtractQENSMembers v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ExtractSingleSpectrum v1" href="ExtractSingleSpectrum-v1.html" />
    <link rel="prev" title="ExtractPolarizationEfficiencies v1" href="ExtractPolarizationEfficiencies-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ExtractQENSMembers v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="extractqensmembers-v1">
<span id="algm-extractqensmembers"></span><span id="algm-extractqensmembers-v1"></span><h1>ExtractQENSMembers v1<a class="headerlink" href="#extractqensmembers-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ExtractQENSMembers-v1_dlg.png"><img alt="../_images/ExtractQENSMembers-v1_dlg.png" class="screenshot" src="../_images/ExtractQENSMembers-v1_dlg.png" style="width: 362px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>ExtractQENSMembers</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id5">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id6">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Extracts the fit members from a QENS fit</p>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The input workspace used in the fit. Ignored if ‘InputWorkspaces’ property is provided.</p></td>
</tr>
<tr class="row-odd"><td><p>InputWorkspaces</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>List of the workspaces used in the fit.</p></td>
</tr>
<tr class="row-even"><td><p>ResultWorkspace</p></td>
<td><p>Input</p></td>
<td><p>WorkspaceGroup</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The result group workspace produced in a QENS fit.</p></td>
</tr>
<tr class="row-odd"><td><p>RenameConvolvedMembers</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, renames the n-th ‘Convolution’ member, to the n-th supplied name in the ConvolvedMembers property.</p></td>
</tr>
<tr class="row-even"><td><p>ConvolvedMembers</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>A list of the names of the members which were convolved before being output by the fit routine. These must be provided in the same order as originally provided to the fit.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>WorkspaceGroup</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The output workspace group, containing the fit members.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Extracts the fit members from a QENS fit and stores each of them in a group workspace.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load sample and resolution files</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;irs26176_graphite002_red.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;irs26176_graphite002_red&#39;</span><span class="p">)</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;irs26173_graphite002_red.nxs&#39;</span><span class="p">)</span>

<span class="c1"># Set up fit algorithm parameters</span>
<span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;name=LinearBackground,A0=0,A1=0,ties=(A0=0.000000,A1=0.0);</span>
<span class="s2">(composite=Convolution,FixResolution=true,NumDeriv=true;</span>
<span class="s2">name=Resolution,Workspace=resolution,WorkspaceIndex=0;</span>
<span class="s2">name=Lorentzian,Amplitude=1,PeakCentre=0,FWHM=0.0175)&quot;&quot;&quot;</span>
<span class="n">startX</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.547608</span>
<span class="n">endX</span> <span class="o">=</span> <span class="mf">0.543217</span>
<span class="n">specMin</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">specMax</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">convolve</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Convolve the fitted model components with the resolution</span>
<span class="n">minimizer</span> <span class="o">=</span> <span class="s2">&quot;Levenberg-Marquardt&quot;</span>
<span class="n">maxIt</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">output_ws_name</span> <span class="o">=</span> <span class="s2">&quot;irs26176_graphite002_conv_1LFixF_s0_to_9&quot;</span>

<span class="c1"># Run ConvolutionFitSequential algorithm</span>
<span class="n">ConvolutionFitSequential</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">Function</span><span class="o">=</span><span class="n">function</span><span class="p">,</span>
                         <span class="n">PassWSIndexToFunction</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">StartX</span><span class="o">=</span><span class="n">startX</span><span class="p">,</span> <span class="n">EndX</span><span class="o">=</span><span class="n">endX</span><span class="p">,</span>
                         <span class="n">SpecMin</span><span class="o">=</span><span class="n">specMin</span><span class="p">,</span> <span class="n">SpecMax</span><span class="o">=</span><span class="n">specMax</span><span class="p">,</span> <span class="n">OutputCompositeMembers</span><span class="o">=</span><span class="n">convolve</span><span class="p">,</span> <span class="n">ConvolveMembers</span><span class="o">=</span><span class="n">convolve</span><span class="p">,</span>
                         <span class="n">Minimizer</span><span class="o">=</span><span class="n">minimizer</span><span class="p">,</span> <span class="n">MaxIterations</span><span class="o">=</span><span class="n">maxIt</span><span class="p">,</span>
                         <span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">output_ws_name</span><span class="p">)</span>

<span class="c1"># Extract members from the output of the ConvolutionFitSequential algorithm</span>
<span class="n">members_ws</span> <span class="o">=</span> <span class="n">ExtractQENSMembers</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">ResultWorkspace</span><span class="o">=</span><span class="n">output_ws_name</span><span class="o">+</span><span class="s2">&quot;_Workspaces&quot;</span><span class="p">,</span>
                                <span class="n">RenameConvolvedMembers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ConvolvedMembers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Lorentzian&quot;</span><span class="p">],</span>
                                <span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">output_ws_name</span><span class="o">+</span><span class="s2">&quot;_Members&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">member_ws</span> <span class="ow">in</span> <span class="n">members_ws</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">member_ws</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Data
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Calc
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Diff
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_LinearBackground
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Lorentzian
</pre></div>
</div>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load sample and resolution files</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;irs26176_graphite002_red.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;irs26176_graphite002_red&#39;</span><span class="p">)</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;irs26173_graphite002_red.nxs&#39;</span><span class="p">)</span>

<span class="c1"># Set up fit algorithm parameters</span>
<span class="n">function</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;name=LinearBackground,A0=0,A1=0,ties=(A0=0.000000,A1=0.0);</span>
<span class="s2">(composite=Convolution,FixResolution=true,NumDeriv=true;</span>
<span class="s2">name=Resolution,Workspace=resolution,WorkspaceIndex=0;</span>
<span class="s2">name=Lorentzian,Amplitude=1,PeakCentre=0,FWHM=0.0175)&quot;&quot;&quot;</span>
<span class="n">startX</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.547608</span>
<span class="n">endX</span> <span class="o">=</span> <span class="mf">0.543217</span>
<span class="n">specMin</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">specMax</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">convolve</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Convolve the fitted model components with the resolution</span>
<span class="n">minimizer</span> <span class="o">=</span> <span class="s2">&quot;Levenberg-Marquardt&quot;</span>
<span class="n">maxIt</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">output_ws_name</span> <span class="o">=</span> <span class="s2">&quot;irs26176_graphite002_conv_1LFixF_s0_to_9&quot;</span>

<span class="c1"># Run ConvolutionFitSequential algorithm with ExtractMembers property</span>
<span class="n">ConvolutionFitSequential</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span> <span class="n">Function</span><span class="o">=</span><span class="n">function</span><span class="p">,</span> <span class="n">PassWSIndexToFunction</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">StartX</span><span class="o">=</span><span class="n">startX</span><span class="p">,</span> <span class="n">EndX</span><span class="o">=</span><span class="n">endX</span><span class="p">,</span> <span class="n">SpecMin</span><span class="o">=</span><span class="n">specMin</span><span class="p">,</span> <span class="n">SpecMax</span><span class="o">=</span><span class="n">specMax</span><span class="p">,</span> <span class="n">OutputCompositeMembers</span><span class="o">=</span><span class="n">convolve</span><span class="p">,</span>
                         <span class="n">ConvolveMembers</span><span class="o">=</span><span class="n">convolve</span><span class="p">,</span> <span class="n">Minimizer</span><span class="o">=</span><span class="n">minimizer</span><span class="p">,</span> <span class="n">MaxIterations</span><span class="o">=</span><span class="n">maxIt</span><span class="p">,</span>
                         <span class="n">ExtractMembers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">output_ws_name</span><span class="p">)</span>

<span class="n">members_ws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">output_ws_name</span> <span class="o">+</span> <span class="s2">&quot;_Members&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">member_ws</span> <span class="ow">in</span> <span class="n">members_ws</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">member_ws</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Data
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Calc
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Diff
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_LinearBackground
irs26176_graphite002_conv_1LFixF_s0_to_9_Members_Lorentzian
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Workflow/MIDAS.html">Workflow\MIDAS</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/WorkflowAlgorithms/inc/MantidWorkflowAlgorithms/ExtractQENSMembers.h">ExtractQENSMembers.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/WorkflowAlgorithms/src/ExtractQENSMembers.cpp">ExtractQENSMembers.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ExtractPolarizationEfficiencies-v1.html" title="Previous Chapter: ExtractPolarizationEfficiencies v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ExtractPolari...</span>
    </a>
  </li>
  <li>
    <a href="ExtractSingleSpectrum-v1.html" title="Next Chapter: ExtractSingleSpectrum v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ExtractSingle... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>