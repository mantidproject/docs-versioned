<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>SelectCellWithForm v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SelectNexusFilesByMetadata v1" href="SelectNexusFilesByMetadata-v1.html" />
    <link rel="prev" title="SelectCellOfType v1" href="SelectCellOfType-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SelectCellWithForm v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="selectcellwithform-v1">
<span id="algm-selectcellwithform"></span><span id="algm-selectcellwithform-v1"></span><h1>SelectCellWithForm v1<a class="headerlink" href="#selectcellwithform-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SelectCellWithForm-v1_dlg.png"><img alt="../_images/SelectCellWithForm-v1_dlg.png" class="screenshot" src="../_images/SelectCellWithForm-v1_dlg.png" style="width: 366px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>SelectCellWithForm</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Select a conventional cell with a specific form number, corresponding to the UB stored with the sample for this peaks works space.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="FindUBUsingFFT-v1.html#algm-findubusingfft"><span class="std std-ref">FindUBUsingFFT</span></a>, <a class="reference internal" href="FindUBUsingIndexedPeaks-v1.html#algm-findubusingindexedpeaks"><span class="std std-ref">FindUBUsingIndexedPeaks</span></a>, <a class="reference internal" href="FindUBUsingLatticeParameters-v1.html#algm-findubusinglatticeparameters"><span class="std std-ref">FindUBUsingLatticeParameters</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PeaksWorkspace</p></td>
<td><p>InOut</p></td>
<td><p>IPeaksWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input Peaks Workspace</p></td>
</tr>
<tr class="row-odd"><td><p>FormNumber</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Form number for the desired cell</p></td>
</tr>
<tr class="row-even"><td><p>Apply</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Update UB and re-index the peaks</p></td>
</tr>
<tr class="row-odd"><td><p>Tolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.12</p></td>
<td><p>Indexing Tolerance</p></td>
</tr>
<tr class="row-even"><td><p>NumIndexed</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>The number of indexed peaks if apply==true.</p></td>
</tr>
<tr class="row-odd"><td><p>AverageError</p></td>
<td><p>Output</p></td>
<td><p>number</p></td>
<td></td>
<td><p>The average HKL indexing error if apply==true.</p></td>
</tr>
<tr class="row-even"><td><p>AllowPermutations</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Allow permutations of conventional cells</p></td>
</tr>
<tr class="row-odd"><td><p>TransformationMatrix</p></td>
<td><p>Output</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>The transformation matrix</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Given a PeaksWorkspace with a <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> corresponding to a Niggli
reduced cell, this algorithm will allow the user to select a
conventional cell corresponding to a specific form number from the
Mighell paper. If the apply flag is not set, the information about the
selected cell will just be displayed. If the apply flag is set, the
<a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> associated with the sample in the PeaksWorkspace
will be updated to a <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> corresponding to the selected
cell AND the peaks will be re-indexed using the new <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a>.
The output transformation matrix <span class="math notranslate nohighlight">\(M\)</span> will change <span class="math notranslate nohighlight">\(UB\)</span> to <span class="math notranslate nohighlight">\(UBM^{-1}\)</span>
and map each <span class="math notranslate nohighlight">\((HKL)\)</span> vector to <span class="math notranslate nohighlight">\(M(HKL)\)</span>. It can be further
used by the <a class="reference internal" href="TransformHKL-v1.html#algm-transformhkl"><span class="std std-ref">TransformHKL</span></a> algorithm.
NOTE: The possible conventional cells, together with the corresponding errors
in the cell scalars can be seen by running the
<a class="reference internal" href="ShowPossibleCells-v1.html#algm-showpossiblecells"><span class="std std-ref">ShowPossibleCells</span></a> algorithm, provided the
stored <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a> corresponds to a Niggli reduced cell.</p>
<p>This algorithm is based on the paper: Alan D. Mighell, <em>Lattice
Symmetry and Identification—The Fundamental Role of Reduced Cells in
Materials Characterization.</em> Journal of research of the National
Institute of Standards and Technology <strong>106.6</strong> (2001): 983, available
from: <a class="reference external" href="http://nvlpubs.nist.gov/nistpubs/jres/106/6/j66mig.pdf">nvlpubs</a>.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example:</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span><span class="o">=</span><span class="n">LoadIsawPeaks</span><span class="p">(</span><span class="s2">&quot;TOPAZ_3007.peaks&quot;</span><span class="p">)</span>
<span class="n">FindUBUsingFFT</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">MinD</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span><span class="n">MaxD</span><span class="o">=</span><span class="mf">13.0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Lattice before SelectCellWithForm:&quot;</span><span class="p">)</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span><span class="o">.</span><span class="n">getOrientedLattice</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.9f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">lattice</span><span class="o">.</span><span class="n">a</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">b</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">c</span><span class="p">(),</span>
                                             <span class="n">lattice</span><span class="o">.</span><span class="n">alpha</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">beta</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">gamma</span><span class="p">()]))</span>
<span class="n">SelectCellWithForm</span><span class="p">(</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s1">&#39;ws&#39;</span><span class="p">,</span> <span class="n">FormNumber</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">Apply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Lattice after SelectCellWithForm:&quot;</span><span class="p">)</span>
<span class="n">lattice</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span><span class="o">.</span><span class="n">getOrientedLattice</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.9f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">lattice</span><span class="o">.</span><span class="n">a</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">b</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">c</span><span class="p">(),</span>
                                             <span class="n">lattice</span><span class="o">.</span><span class="n">alpha</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">beta</span><span class="p">(),</span> <span class="n">lattice</span><span class="o">.</span><span class="n">gamma</span><span class="p">()]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Lattice before SelectCellWithForm:
8.605818643 11.935925461 11.941812766 107.429088323 98.752912466 98.951193475

Lattice after SelectCellWithForm:
14.131051152 19.247332564 8.605818643 89.881170675 105.071333770 89.970386662
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Crystal/Cell.html">Crystal\Cell</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ae5920090788fe85703dcb99039251b0d956c4b7/Framework/Crystal/inc/MantidCrystal/SelectCellWithForm.h">SelectCellWithForm.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ae5920090788fe85703dcb99039251b0d956c4b7/Framework/Crystal/src/SelectCellWithForm.cpp">SelectCellWithForm.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SelectCellOfType-v1.html" title="Previous Chapter: SelectCellOfType v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SelectCellOfType v1</span>
    </a>
  </li>
  <li>
    <a href="SelectNexusFilesByMetadata-v1.html" title="Next Chapter: SelectNexusFilesByMetadata v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SelectNexusFi... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>