<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>CalculateCoverageDGS v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CalculateDIFC v1" href="CalculateDIFC-v1.html" />
    <link rel="prev" title="CalculateCountRate v1" href="CalculateCountRate-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">CalculateCoverageDGS v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="calculatecoveragedgs-v1">
<span id="algm-calculatecoveragedgs"></span><span id="algm-calculatecoveragedgs-v1"></span><h1>CalculateCoverageDGS v1<a class="headerlink" href="#calculatecoveragedgs-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/CalculateCoverageDGS-v1_dlg.png"><img alt="../_images/CalculateCoverageDGS-v1_dlg.png" class="screenshot" src="../_images/CalculateCoverageDGS-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>CalculateCoverageDGS</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Calculate the reciprocal space coverage for direct geometry spectrometers</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><span class="std std-ref">SetGoniometer</span></a>, <a class="reference internal" href="SetUB-v1.html#algm-setub"><span class="std std-ref">SetUB</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>Q1Basis</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>1,0,0</p></td>
<td><p>Q1 projection direction in the x,y,z format. Q1, Q2, Q3 must not be coplanar</p></td>
</tr>
<tr class="row-even"><td><p>Q2Basis</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,1,0</p></td>
<td><p>Q2 projection direction in the x,y,z format. Q1, Q2, Q3 must not be coplanar</p></td>
</tr>
<tr class="row-odd"><td><p>Q3Basis</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,1</p></td>
<td><p>Q3 projection direction in the x,y,z format. Q1, Q2, Q3 must not be coplanar</p></td>
</tr>
<tr class="row-even"><td><p>IncidentEnergy</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Incident energy. If set, will override Ei in the input workspace</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension1</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Q1</p></td>
<td><p>Dimension to bin or integrate. Allowed values: [‘Q1’, ‘Q2’, ‘Q3’, ‘DeltaE’]</p></td>
</tr>
<tr class="row-even"><td><p>Dimension1Min</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension1 minimum value. If empty will take minimum possible value.</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension1Max</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension1 maximum value. If empty will take maximum possible value.</p></td>
</tr>
<tr class="row-even"><td><p>Dimension1Step</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension1 step size. If empty the dimension will be integrated between minimum and maximum values</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension2</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Q2</p></td>
<td><p>Dimension to bin or integrate. Allowed values: [‘Q1’, ‘Q2’, ‘Q3’, ‘DeltaE’]</p></td>
</tr>
<tr class="row-even"><td><p>Dimension2Min</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension2 minimum value. If empty will take minimum possible value.</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension2Max</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension2 maximum value. If empty will take maximum possible value.</p></td>
</tr>
<tr class="row-even"><td><p>Dimension2Step</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension2 step size. If empty the dimension will be integrated between minimum and maximum values</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension3</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Q3</p></td>
<td><p>Dimension to bin or integrate. Allowed values: [‘Q1’, ‘Q2’, ‘Q3’, ‘DeltaE’]</p></td>
</tr>
<tr class="row-even"><td><p>Dimension3Min</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension3 minimum value. If empty will take minimum possible value.</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension3Max</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension3 maximum value. If empty will take maximum possible value.</p></td>
</tr>
<tr class="row-even"><td><p>Dimension3Step</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension3 step size. If empty the dimension will be integrated between minimum and maximum values</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension4</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>DeltaE</p></td>
<td><p>Dimension to bin or integrate. Allowed values: [‘Q1’, ‘Q2’, ‘Q3’, ‘DeltaE’]</p></td>
</tr>
<tr class="row-even"><td><p>Dimension4Min</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension4 minimum value. If empty will take minimum possible value.</p></td>
</tr>
<tr class="row-odd"><td><p>Dimension4Max</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension4 maximum value. If empty will take maximum possible value.</p></td>
</tr>
<tr class="row-even"><td><p>Dimension4Step</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Dimension4 step size. If empty the dimension will be integrated between minimum and maximum values</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A name for the output data MDHistoWorkspace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>The algorithm calculates what part of the reciprocal space is covered by direct geometry spectrometers. It is supposed to be used
in planning tools. The input workspace should contain the incident energy log, a goniometer, and the <a class="reference internal" href="../concepts/Lattice.html#lattice"><span class="std std-ref">UB matrix</span></a>. The
incident energy can be overwritten by setting the IncidentEnergy parameter. The output is an MDHisto workspace. You can visualize it with
<a class="reference internal" href="../workbench/sliceviewer.html#sliceviewer"><span class="std std-ref">Sliceviewer</span></a>.</p>
<p>The parameters Q1Basis, Q2Basis, Q3Basis can be used to look at different directions in the reciprocal space, such as [H,H,0]</p>
<p>DimensionI, where I is from 1 to 4, allows one to select in which order Q1, Q2, Q3, DeltaE are stored in the output workspace.
The algorithm will complain if you select the same dimension twice.
For each dimension one can define minimum, maximum, and step size.
If no minimum/maximum are set for DeltaE, these are chosen to be +/-Ei.
If not specified, minimum/maximum for the Q dimensions are calculated based on the instrument geometry, incident energy,
minimum/maximum for DeltaE, and lattice parameters.</p>
<p>The algorithm calculates detector trajectories in the reciprocal space and sets to 1 the corresponding points in the output workspace.
All other points are 0.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - CalculateCoverageDGS</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">w</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s2">&quot;CNCS_7860&quot;</span><span class="p">)</span>
<span class="n">w</span><span class="o">=</span><span class="n">ConvertUnits</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">w</span><span class="p">,</span><span class="n">Target</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">EMode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">EFixed</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">Axis0</span><span class="o">=</span><span class="s1">&#39;30,0,1,0,1&#39;</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
<span class="n">w</span><span class="o">=</span><span class="n">Rebin</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="s1">&#39;-3,0.1,3&#39;</span><span class="p">,</span> <span class="n">PreserveEvents</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="n">coverage</span><span class="o">=</span><span class="n">CalculateCoverageDGS</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">IncidentEnergy</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">Dimension1Min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">Dimension1Max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Dimension1Step</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>
    <span class="n">Dimension2Min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">Dimension2Max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Dimension2Step</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">Dimension3Min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">Dimension3Max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Dimension3Step</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">Dimension4Min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Dimension4Max</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Dimension4Step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># Print the result</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You cover </span><span class="si">{:.0f}</span><span class="s2"> MD bins out of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">coverage</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span><span class="n">coverage</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>You cover 506 MD bins out of 3000
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Inelastic/Planning.html">Inelastic\Planning</a> | <a class="reference external" href="categories/MDAlgorithms/Planning.html">MDAlgorithms\Planning</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/8b6be077efd75a1eee39b81bc5971c6c51c44283/Framework/MDAlgorithms/inc/MantidMDAlgorithms/CalculateCoverageDGS.h">CalculateCoverageDGS.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/8b6be077efd75a1eee39b81bc5971c6c51c44283/Framework/MDAlgorithms/src/CalculateCoverageDGS.cpp">CalculateCoverageDGS.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CalculateCountRate-v1.html" title="Previous Chapter: CalculateCountRate v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CalculateCountRate v1</span>
    </a>
  </li>
  <li>
    <a href="CalculateDIFC-v1.html" title="Next Chapter: CalculateDIFC v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CalculateDIFC v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>