<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>DgsReduction v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DgsRemap v1" href="DgsRemap-v1.html" />
    <link rel="prev" title="DgsProcessDetectorVanadium v1" href="DgsProcessDetectorVanadium-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">DgsReduction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="dgsreduction-v1">
<span id="algm-dgsreduction"></span><span id="algm-dgsreduction-v1"></span><h1>DgsReduction v1<a class="headerlink" href="#dgsreduction-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/DgsReduction-v1_dlg.png"><img alt="../_images/DgsReduction-v1_dlg.png" class="screenshot" src="../_images/DgsReduction-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>DgsReduction</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#workflow" id="id5">Workflow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Top-level workflow algorithm for DGS reduction.</p>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SampleInputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing the sample data to reduce. Allowed extensions: [‘_event.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>SampleInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace to be reduced</p></td>
</tr>
<tr class="row-even"><td><p>SampleInputMonitorWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>A monitor workspace associated with the input sample workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>DetCalFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>A detector calibration file.</p></td>
</tr>
<tr class="row-even"><td><p>RelocateDetectors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Move detectors to position specified in cal file.</p></td>
</tr>
<tr class="row-odd"><td><p>IncidentEnergyGuess</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the value of the incident energy guess in meV.</p></td>
</tr>
<tr class="row-even"><td><p>UseIncidentEnergyGuess</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Use the incident energy guess as the actual value (will not be calculated).</p></td>
</tr>
<tr class="row-odd"><td><p>TimeZeroGuess</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the value of time zero offset in microseconds.</p></td>
</tr>
<tr class="row-even"><td><p>Monitor1SpecId</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Spectrum No for the first monitor to use in Ei calculation.</p></td>
</tr>
<tr class="row-odd"><td><p>Monitor2SpecId</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Spectrum No for the second monitor to use in Ei calculation.</p></td>
</tr>
<tr class="row-even"><td><p>EnergyTransferRange</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>A comma separated list of first bin boundary, width, last bin boundary. Negative width value indicates logarithmic binning.</p></td>
</tr>
<tr class="row-odd"><td><p>SofPhiEIsDistribution</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>The final S(Phi, E) data is made to be a distribution.</p></td>
</tr>
<tr class="row-even"><td><p>HardMaskFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>A file or workspace containing a hard mask. Allowed extensions: [‘.xml’]</p></td>
</tr>
<tr class="row-odd"><td><p>GroupingFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>A file containing grouping (mapping) information. Allowed extensions: [‘.xml’]</p></td>
</tr>
<tr class="row-even"><td><p>ShowIntermediateWorkspaces</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Flag to show the intermediate workspaces (diagnostic mask, integrated detector vanadium, integrated absolute units) from the reduction.</p></td>
</tr>
<tr class="row-odd"><td><p>IncidentBeamNormalisation</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>None</p></td>
<td><p>Options for incident beam normalisation on data. Allowed values: [‘None’, ‘ByCurrent’, ‘ToMonitor’]</p></td>
</tr>
<tr class="row-even"><td><p>MonitorIntRangeLow</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the lower bound for monitor integration.</p></td>
</tr>
<tr class="row-odd"><td><p>MonitorIntRangeHigh</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the upper bound for monitor integration.</p></td>
</tr>
<tr class="row-even"><td><p>TimeIndepBackgroundSub</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, time-independent background will be calculated and removed.</p></td>
</tr>
<tr class="row-odd"><td><p>TibTofRangeStart</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the lower TOF bound for time-independent background subtraction.</p></td>
</tr>
<tr class="row-even"><td><p>TibTofRangeEnd</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the upper TOF bound for time-independent background subtraction.</p></td>
</tr>
<tr class="row-odd"><td><p>CorrectKiKf</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Apply the ki/kf correction.</p></td>
</tr>
<tr class="row-even"><td><p>DetectorVanadiumInputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing the sample detector vanadium data to reduce. Allowed extensions: [‘_event.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>DetectorVanadiumInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Sample detector vanadium workspace to be reduced</p></td>
</tr>
<tr class="row-even"><td><p>DetectorVanadiumInputMonitorWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>A monitor workspace associated with the input sample detector vanadium workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>SaveProcessedDetVan</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Save the processed detector vanadium workspace</p></td>
</tr>
<tr class="row-even"><td><p>SaveProcDetVanFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Provide a filename for saving the processed detector vanadium. Allowed extensions: [‘.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>UseProcessedDetVan</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, treat the detector vanadium as processed. This includes not running diagnostics on the processed data.</p></td>
</tr>
<tr class="row-even"><td><p>UseBoundsForDetVan</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, integrate the detector vanadium over a given range.</p></td>
</tr>
<tr class="row-odd"><td><p>DetVanIntRangeLow</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the lower bound for integrating the detector vanadium.</p></td>
</tr>
<tr class="row-even"><td><p>DetVanIntRangeHigh</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Set the upper bound for integrating the detector vanadium.</p></td>
</tr>
<tr class="row-odd"><td><p>DetVanIntRangeUnits</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Energy</p></td>
<td><p>Options for the units on the detector vanadium integration. Allowed values: [‘Energy’, ‘Wavelength’, ‘TOF’]</p></td>
</tr>
<tr class="row-even"><td><p>HighCounts</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors above this threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>LowCounts</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors below this threshold.</p></td>
</tr>
<tr class="row-even"><td><p>LowOutlier</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Lower bound defining outliers as fraction of median value</p></td>
</tr>
<tr class="row-odd"><td><p>HighOutlier</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Upper bound defining outliers as fraction of median value</p></td>
</tr>
<tr class="row-even"><td><p>MedianTestHigh</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors above this threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>MedianTestLow</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors below this threshold.</p></td>
</tr>
<tr class="row-even"><td><p>MedianTestLevelsUp</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Mask detectors below this threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>MedianTestCorrectForSolidAngle</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Flag to correct for solid angle efficiency.</p></td>
</tr>
<tr class="row-even"><td><p>ErrorBarCriterion</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Some selection criteria for the detector tests.</p></td>
</tr>
<tr class="row-odd"><td><p>DetectorVanadium2InputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing detector vanadium data to compare against. Allowed extensions: [‘_event.nxs’]</p></td>
</tr>
<tr class="row-even"><td><p>DetectorVanadium2InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Detector vanadium workspace to compare against</p></td>
</tr>
<tr class="row-odd"><td><p>DetectorVanadium2InputMonitorWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>A monitor workspace associated with the input comparison detector vanadium workspace.</p></td>
</tr>
<tr class="row-even"><td><p>DetVanRatioVariation</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors if the time variation is above this threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundCheck</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, run a background check on detector vanadium.</p></td>
</tr>
<tr class="row-even"><td><p>SamBkgMedianTestHigh</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors above this threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>SamBkgMedianTestLow</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors below this threshold.</p></td>
</tr>
<tr class="row-even"><td><p>SamBkgErrorBarCriterion</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Some selection criteria for the detector tests.</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundTofStart</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Start TOF for the background check.</p></td>
</tr>
<tr class="row-even"><td><p>BackgroundTofEnd</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>End TOF for the background check.</p></td>
</tr>
<tr class="row-odd"><td><p>RejectZeroBackground</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, check the background region for anomolies.</p></td>
</tr>
<tr class="row-even"><td><p>PsdBleed</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, perform a PSD bleed test.</p></td>
</tr>
<tr class="row-odd"><td><p>MaxFramerate</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The maximum framerate to check.</p></td>
</tr>
<tr class="row-even"><td><p>IgnoredPixels</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>A list of pixels to ignore in the calculations.</p></td>
</tr>
<tr class="row-odd"><td><p>DoAbsoluteUnits</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, perform an absolute units normalisation.</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsSampleInputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The sample (vanadium) file used in the absolute units normalisation.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsSampleInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The sample (vanadium) workspace for absolute units normalisation.</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsSampleInputMonitorWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>A monitor workspace associated with the input absolute units sample workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsGroupingFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Grouping file for absolute units normalisation.</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsDetectorVanadiumInputFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>The detector vanadium file used in the absolute units normalisation.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsDetectorVanadiumInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The detector vanadium workspace for absolute units normalisation.</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsDetectorVanadiumInputMonitorWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>A monitor workspace associated with the input absolute units sample detector vanadium workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsIncidentEnergy</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The incident energy for the vanadium sample.</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsMinimumEnergy</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The minimum energy for the integration range.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsMaximumEnergy</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The maximum energy for the integration range.</p></td>
</tr>
<tr class="row-even"><td><p>VanadiumMass</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The mass of vanadium.</p></td>
</tr>
<tr class="row-odd"><td><p>SampleMass</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The mass of sample.</p></td>
</tr>
<tr class="row-even"><td><p>SampleRmm</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The rmm of sample.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsLowOutlier</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Lower bound defining outliers as fraction of median value</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsHighOutlier</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Upper bound defining outliers as fraction of median value</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsMedianTestHigh</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors above this threshold.</p></td>
</tr>
<tr class="row-even"><td><p>AbsUnitsMedianTestLow</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Mask detectors below this threshold.</p></td>
</tr>
<tr class="row-odd"><td><p>AbsUnitsErrorBarCriterion</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Some selection criteria for the detector tests.</p></td>
</tr>
<tr class="row-even"><td><p>DoPowderDataConversion</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Flag to switch on converting DeltaE to SQW.</p></td>
</tr>
<tr class="row-odd"><td><p>PowderMomTransferRange</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>A comma separated list of first bin boundary, width, last bin boundary. Negative width value indicates logarithmic binning.</p></td>
</tr>
<tr class="row-even"><td><p>SavePowderNexusFile</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Flag to use to save a processed NeXus file for powder data.</p></td>
</tr>
<tr class="row-odd"><td><p>SavePowderNexusFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Provide a filename for saving the processed powder data. Allowed extensions: [‘.nxs’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Provide a name for the output workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>ReductionProperties</p></td>
<td><p>Output</p></td>
<td><p>string</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This is the top-level workflow algorithm for direct geometry
spectrometer data reduction. This algorithm is responsible for gathering
the necessary parameters and generating calls to other workflow or
standard algorithms.</p>
<section id="workflow">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this heading">¶</a></h3>
<p>Parameters for the child algorithms are not shown due to the sheer number.
They will be detailed in the child algorithm diagrams. Items in
parallelograms are output workspaces from their respective algorithms.
Not all output workspaces are subsequently used by other algorithms.</p>
<img alt="../_images/DgsReduction-v1_wkflw.svg" src="../_images/DgsReduction-v1_wkflw.svg" /></section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - Simplest SNS Script</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SNS&quot;</span>
<span class="c1"># SNS reduction does not require IncidentEnergyGuess since the NeXus</span>
<span class="c1"># files contain an EnergyRequest log.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputFile</span><span class="o">=</span><span class="s2">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">)</span>
<span class="c1"># More than one output from DgsReduction</span>
<span class="c1"># (E vs Phi Workspace, Name of Property Manager)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># Check the conversion</span>
<span class="n">xaxis</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;X axis = </span><span class="si">{}</span><span class="s2"> / </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xaxis</span><span class="o">.</span><span class="n">caption</span><span class="p">(),</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">symbol</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Energy mode = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">getEMode</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>X axis = Energy transfer / meV
Energy mode = Direct
Workspace type = Workspace2D
</pre></div>
</div>
<p><strong>Example - Simplest ISIS Script</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ISIS&quot;</span>
<span class="c1"># ISIS reduction required IncidentEnergyGuess since RAW files don&#39;t</span>
<span class="c1"># have a corresponding log.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputFile</span><span class="o">=</span><span class="s2">&quot;MAR11001.raw&quot;</span><span class="p">,</span>
                  <span class="n">IncidentEnergyGuess</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="c1"># More than one output from DgsRedution</span>
<span class="c1"># (E vs Phi Workspace, Name of Property Manager)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># Check the conversion</span>
<span class="n">xaxis</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;X axis = </span><span class="si">{}</span><span class="s2"> / </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xaxis</span><span class="o">.</span><span class="n">caption</span><span class="p">(),</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">symbol</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Energy mode = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">getEMode</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>X axis = Energy transfer / meV
Energy mode = Direct
Workspace type = Workspace2D
</pre></div>
</div>
<p><strong>Example - Get as Eventworkspace for SNS</strong></p>
<p>The following shows that event data can be the result of the redcuction instead of
histogram data.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SNS&quot;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputFile</span><span class="o">=</span><span class="s2">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">,</span>
                  <span class="n">IncidentBeamNormalisation</span><span class="o">=</span><span class="s2">&quot;ByCurrent&quot;</span><span class="p">,</span>
                  <span class="n">SofPhiEIsDistribution</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of events = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Workspace type = EventWorkspace
Number of events = 78037
</pre></div>
</div>
<p><strong>Example - Correct Data Before Reduction for SNS</strong></p>
<p>The following is a contrived example to show that the data can be loaded and
corrected and/or filtered before passing it to the algorithm. The key here is that
the *InputWorkspace properties must be used. It also shows a couple of more
properties being used.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SNS&quot;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">,</span> <span class="n">LoadMonitors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">valC3</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getRun</span><span class="p">()[</span><span class="s1">&#39;Phase3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getStatistics</span><span class="p">()</span><span class="o">.</span><span class="n">median</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">FilterByLogValue</span><span class="p">(</span><span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LogName</span><span class="o">=</span><span class="s2">&quot;Phase3&quot;</span><span class="p">,</span> <span class="n">MinimumValue</span><span class="o">=</span><span class="n">valC3</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span>
                      <span class="n">MaximumValue</span><span class="o">=</span><span class="n">valC3</span><span class="o">+</span><span class="mf">0.3</span><span class="p">)</span>
<span class="c1"># Although CNCS doesn&#39;t use its monitors, this is how instruments that do need</span>
<span class="c1"># to call the algorithm.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SampleInputMonitorWorkspace</span><span class="o">=</span><span class="n">monitor</span><span class="p">,</span>
                  <span class="n">IncidentBeamNormalisation</span><span class="o">=</span><span class="s2">&quot;ByCurrent&quot;</span><span class="p">,</span> <span class="n">SofPhiEIsDistribution</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of events = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Workspace type = EventWorkspace
Number of events = 2178
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Workflow/Inelastic.html">Workflow\Inelastic</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/WorkflowAlgorithms/inc/MantidWorkflowAlgorithms/DgsReduction.h">DgsReduction.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c02ae4cb378648e7336cc15b6678a80eb5d20757/Framework/WorkflowAlgorithms/src/DgsReduction.cpp">DgsReduction.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="DgsProcessDetectorVanadium-v1.html" title="Previous Chapter: DgsProcessDetectorVanadium v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; DgsProcessDet...</span>
    </a>
  </li>
  <li>
    <a href="DgsRemap-v1.html" title="Next Chapter: DgsRemap v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">DgsRemap v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>