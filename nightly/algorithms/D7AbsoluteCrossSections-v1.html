<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>D7AbsoluteCrossSections v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="D7YIGPositionCalibration v1" href="D7YIGPositionCalibration-v1.html" />
    <link rel="prev" title="D4ILLReduction v1" href="D4ILLReduction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">D7AbsoluteCrossSections v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="d7absolutecrosssections-v1">
<span id="algm-d7absolutecrosssections"></span><span id="algm-d7absolutecrosssections-v1"></span><h1>D7AbsoluteCrossSections v1<a class="headerlink" href="#d7absolutecrosssections-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id8">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/D7AbsoluteCrossSections-v1_dlg.png"><img alt="../_images/D7AbsoluteCrossSections-v1_dlg.png" class="screenshot" src="../_images/D7AbsoluteCrossSections-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>D7AbsoluteCrossSections</strong> dialog.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id9">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id10">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id11">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id12">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#sampleandenvironmentproperties" id="id13">SampleAndEnvironmentProperties</a></p></li>
<li><p><a class="reference internal" href="#cross-section-separation-method" id="id14">Cross-section separation method</a></p></li>
<li><p><a class="reference internal" href="#sample-data-normalisation" id="id15">Sample data normalisation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id16">Usage</a></p></li>
<li><p><a class="reference internal" href="#references" id="id17">References</a></p></li>
<li><p><a class="reference internal" href="#source" id="id18">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Separates magnetic, nuclear coherent, and incoherent components for diffraction and spectroscopy data,and corrects the sample data for detector efficiency and normalises it to the chosen standard.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="D7YIGPositionCalibration-v1.html#algm-d7yigpositioncalibration"><span class="std std-ref">D7YIGPositionCalibration</span></a>, <a class="reference internal" href="PolDiffILLReduction-v1.html#algm-poldiffillreduction"><span class="std std-ref">PolDiffILLReduction</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>WorkspaceGroup</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The input workspace with spin-flip and non-spin-flip data.</p></td>
</tr>
<tr class="row-odd"><td><p>RotatedXYZWorkspace</p></td>
<td><p>Input</p></td>
<td><p>WorkspaceGroup</p></td>
<td></td>
<td><p>The workspace used in 10p method when data is taken as two XYZ measurements rotated by 45 degress.</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p>WorkspaceGroup</p></td>
<td></td>
<td><p>The output workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>CrossSectionSeparationMethod</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>None</p></td>
<td><p>What type of cross-section separation to perform. Allowed values: [‘None’, ‘Z’, ‘XYZ’, ‘10p’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputUnits</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Default</p></td>
<td><p>The choice to display the output as a function of detector twoTheta, the momentum exchange, the 2D momentum exchange, or as a function of momentum and energy exchange. Default will provide output appropriate to the technique used. Allowed values: [‘Default’, ‘TwoTheta’, ‘Q’, ‘Qxy’, ‘Qw’, ‘Input’]</p></td>
</tr>
<tr class="row-odd"><td><p>NormalisationMethod</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>None</p></td>
<td><p>Method to correct detector efficiency and normalise data. Allowed values: [‘None’, ‘Vanadium’, ‘Incoherent’, ‘Paramagnetic’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputTreatment</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Individual</p></td>
<td><p>Which treatment of the provided scan should be used to create output. Allowed values: [‘Individual’, ‘Merge’]</p></td>
</tr>
<tr class="row-odd"><td><p>MeasurementTechnique</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Powder</p></td>
<td><p>What type of measurement technique has been used to collect the data. Allowed values: [‘Powder’, ‘SingleCrystal’, ‘TOF’]</p></td>
</tr>
<tr class="row-even"><td><p>SampleAndEnvironmentProperties</p></td>
<td><p>Input</p></td>
<td><p>Dictionary</p></td>
<td><p>null</p></td>
<td><p>Dictionary for the information about sample and its environment.</p></td>
</tr>
<tr class="row-odd"><td><p>ScatteringAngleBinSize</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.5</p></td>
<td><p>Scattering angle bin size in degrees used for expressing scan data on a single TwoTheta axis.</p></td>
</tr>
<tr class="row-even"><td><p>VanadiumInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>WorkspaceGroup</p></td>
<td></td>
<td><p>The name of the vanadium workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>QBinning</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Manual Q-binning parameters.</p></td>
</tr>
<tr class="row-even"><td><p>AbsoluteUnitsNormalisation</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether or not express the output in absolute units.</p></td>
</tr>
<tr class="row-odd"><td><p>IsotropicMagnetism</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether the paramagnetism is isotropic (Steward, Ehlers) or anisotropic (Schweika).</p></td>
</tr>
<tr class="row-even"><td><p>ClearCache</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether or not to delete intermediate workspaces.</p></td>
</tr>
<tr class="row-odd"><td><p>DebugMode</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether to create and show all intermediate workspaces at each correction step.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This is the algorithm that performs cross-section separation and allows for sample data normalisation to absolute scale.
The cross-section separation provides information about magnetic, nuclear coherent, and spin-incoherent contributions to the measured cross-section.
The absolute scale normalisation uses either the output from cross-section separation or a vanadium reference sample for polarised diffraction and spectroscopy data measured
by D7 instrument at the ILL.</p>
<p>Three types of cross-section separation are supported: <cite>Z</cite>, <cite>XYZ</cite>, and <cite>10p</cite>, for which 2, 6, and 10 distributions with spin-flip and non-spin-flip cross-sections
are required. In addition, the XYZ cross-section separation can be executed either assuming isotropic magnetism, such as in Ref. <a class="footnote-reference brackets" href="#ehlers" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>, or when the magnetism cannot
be assumed to be isotropic, for example in single crystals, as described in Ref. <a class="footnote-reference brackets" href="#schweika" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>. Which set of equations is used is controlled by setting <cite>IsotropicMagnetism</cite>
to either <cite>True</cite> or <cite>False</cite>. The expected input for the cross-section separation is a workspace group containing spin-flip and non-spin-flip
cross-sections, with the following order of axis directions: Z, Y, X, X-Y, X+Y. This step can be skipped by setting <cite>CrossSectionSeparationMethod</cite> parameter to <cite>‘None’</cite>.</p>
<p>Three ways of sample data normalisation are supported: <cite>Vanadium</cite>, <cite>Paramagnetic</cite>, and <cite>Incoherent</cite>, for which either the output from vanadium data reduction,
or from the cross-section separation (magnetic and spin-incoherent respectively) is used. This step can also be skipped by setting <cite>NormalisationMethod</cite> parameter
to <cite>‘None’</cite>.</p>
<p><cite>MeasurementTechnique</cite> property allows to distinguish between data reduced as <cite>Powder</cite>, <cite>SingleCrystal</cite>, or <cite>TOF</cite> by <a class="reference internal" href="PolDiffILLReduction-v1.html#algm-poldiffillreduction"><span class="std std-ref">PolDiffILLReduction</span></a>.
<cite>Paramagnetic</cite> and <cite>Incoherent</cite> data normalisation approaches are not possible when the was data reduced in the <cite>TOF</cite> mode.</p>
<p>The choice for the output units are set with <cite>OutputUnits</cite> property. The options are: <cite>TwoTheta</cite>, <cite>Q</cite>, <cite>Qxy</cite>, <cite>Qw</cite>, <cite>Default</cite>, and <cite>Input</cite>. The first two are the most relevant
for <cite>Powder</cite> measurement technique. Single crystal data would be best shown on the <cite>Qx</cite> - <cite>Qy</cite> plane, which can be achieved by setting <cite>OutputUnit</cite> to <cite>Qxy</cite>. The <cite>TOF</cite>-mode
specific output unit is <cite>Qw</cite>, which allows to obtain data on the momentum exchange (Q) - energy exchange plane (<cite>w</cite>, which stands for <span class="math notranslate nohighlight">\(\omega\)</span>). The <cite>Input</cite> setting allows for
preserving the input unit without undergoing any conversions, which can be useful when trying to find a source of issue in the reduction. The <cite>Default</cite> mode will show the most
relevant output, depending on the technique. It will be equivalent to <cite>Q</cite> option for <cite>Powder</cite> data, <cite>Qxy</cite> for single crystal, and in the TOF mode, it will be a group of data
as a function of spectrum number versus energy exchange (equivalent to <cite>Input</cite> in TOF), <span class="math notranslate nohighlight">\(2\theta\)</span> versus energy exchange, and <span class="math notranslate nohighlight">\(S (Q, \omega)\)</span> distribution (as in <cite>Qw</cite>).</p>
<p>For the TOF-mode, it is possible to provide user-defined binning for the momentum-exchange axis, used by <a class="reference internal" href="SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon</span></a> algorithm. If this
property is not defined, the algorithm will automatically provide non-equidistant binning that is suitable for the data distribution.</p>
<p>This algorithm is indended to be invoked on sample data that is fully corrected and needs to be normalised to an appropriate scale.</p>
<section id="sampleandenvironmentproperties">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">SampleAndEnvironmentProperties</a><a class="headerlink" href="#sampleandenvironmentproperties" title="Permalink to this heading">¶</a></h3>
<p>This property is a dictionary containing all of the information about the sample and its environment, in the same fashion as in <a class="reference internal" href="PolDiffILLReduction-v1.html#algm-poldiffillreduction"><span class="std std-ref">PolDiffILLReduction</span></a>.
This information is used for proper normalisation of the given sample.</p>
<p>The following keys need to be defined:</p>
<ul class="simple">
<li><p><em>SampleMass</em></p></li>
<li><p><em>FormulaUnitMass</em></p></li>
<li><p><em>SampleSpin</em> if the <cite>NormalisationMethod</cite> is set to <cite>Paramagnetic</cite></p></li>
<li><p><em>IncoherentCrossSection</em> if the <cite>NormalisationMethod</cite> is set to <cite>Incoherent</cite> and <cite>AbsoluteUnitsNormalisation</cite> is <em>True</em></p></li>
</ul>
<p>Keys required when the <cite>MeasurementTechnique</cite> is <cite>SingleCrystal</cite>:</p>
<ul class="simple">
<li><p><em>KiXAngle</em> - angle between the incident momentum and X-axis</p></li>
<li><p><em>OmegaShift</em> - omega offset</p></li>
</ul>
<p>Optional keys when the <cite>MeasurementTechnique</cite> is <cite>SingleCrystal</cite>:</p>
<ul class="simple">
<li><p><em>fld</em></p></li>
<li><p><em>nQ</em></p></li>
</ul>
<p><cite>nQ</cite> allows the user to decide how many bins should the <cite>Q_{x}</cite> and <cite>Q_{y}</cite> axes be split into, 80 by default. <cite>fld</cite> is used to decide whether to expand the distribution symmetrically
to the negative side of <cite>Q_{x}</cite> and <cite>Q_{y}</cite> axes, equal to 1 (<cite>True</cite>) by default.</p>
</section>
<section id="cross-section-separation-method">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Cross-section separation method</a><a class="headerlink" href="#cross-section-separation-method" title="Permalink to this heading">¶</a></h3>
<p>Below are presented formulae used to separate magnetic (M), nuclear coherent (N), and spin-incoherent (I) cross-sections using
spin-flip <span class="math notranslate nohighlight">\(\left(\frac{d\sigma}{d\Omega}\right)_{\text{sf}}\)</span> and non-spin-flip <span class="math notranslate nohighlight">\(\left(\frac{d\sigma}{d\Omega}\right)_{\text{nsf}}\)</span>
cross-sections from the provided input <a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><span class="std std-ref">WorkspaceGroup</span></a>.</p>
<ol class="arabic simple">
<li><p>Z</p></li>
</ol>
<p>At least two separate measurements along the same axis with opposite spin orientations are needed for this method to work. Usually, the measured axis is the ‘Z’ axis that is colinear with the beam axis, thus the spin-flip and non-spin-flip cross-sections are measured along the longitudinal axis. This method does not allow for separation of magnetic cross-section.</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}N &amp;= \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}} - \frac{1}{2} \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}}\\I &amp;= \frac{3}{2} \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}}\end{aligned}\end{align} \]</div>
<p>In this case, the magnetic cross-section cannot be separated from data.</p>
<ol class="arabic simple" start="2">
<li><p>XYZ</p></li>
</ol>
<p>This method is an expansion of the Z method, that requires measurements of spin-flip and non-spin-flip cross-sections along three orthogonal axes. This method allows for separation of magnetic cross-section from nuclear coherent and spin-incoherent.</p>
<p>The following set of equations applies to the isotropic magnetism case, such as in powder samples, and are based on Ref. <a class="footnote-reference brackets" href="#steward" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> and <a class="footnote-reference brackets" href="#ehlers" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}T &amp;= \frac{1}{3} \cdot \left( \left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}}  \right)\\N &amp;= \frac{1}{6} \cdot \left(2 \cdot \left( \left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}} \right) - \left( \left( \frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{sf}} + \left( \frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{sf}} + \left( \frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}} \right) \right)\\M_{\text{nsf}} &amp;= 2 \cdot \left(2 \cdot \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}} - \left(\frac{d\sigma_{x}}{\text{d}\Omega}\right)_{\text{nsf}} - \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{nsf}} \right)\\M_{\text{sf}} &amp;= 2 \cdot \left(\left(\frac{d\sigma_{x}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{sf}} -2 \cdot \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}} \right)\\M_{\text{av}} &amp;= \frac{1}{2} \left( M_{\text{nsf}} + M_{\text{sf}} \right)\\I &amp;= \frac{1}{2} \cdot \left(\left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}} \right) - M_{\text{av}}\end{aligned}\end{align} \]</div>
<p>The equations below apply to the case of anisotropic magnetism, such as in single crystals, and are based on Ref. <a class="footnote-reference brackets" href="#schweika" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>. The total cross-section is calculated the same way in both cases.</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}N &amp;= \frac{1}{2} \left( \left( \frac{\text{d}\sigma_{x}}{\text{d}\Omega} \right)_{\text{nsf}} + \left( \frac{\text{d}\sigma_{y}}{\text{d}\Omega} \right)_{\text{nsf}} - \left( \frac{\text{d}\sigma_{z}}{\text{d}\Omega} \right)_{\text{sf}} \right)\\I &amp;= \frac{3}{2} \left( \frac{ \left( \frac{\text{d}\sigma_{x}}{\text{d}\Omega} \right)_{\text{nsf}} - \left( \frac{\text{d}\sigma_{y}}{\text{d}\Omega} \right)_{\text{nsf}}}{\text{cos}^{2}{\alpha} - \text{sin}^{2}{\alpha}} + \left( \frac{\text{d}\sigma_{z}}{\text{d}\Omega} \right)_{\text{sf}} \right)\\M_{\perp \text{y}} &amp;= \left( \frac{\text{d}\sigma_{z}}{\text{d}\Omega} \right)_{\text{sf}} - \frac{2}{3} I\\M_{\perp \text{z}} &amp;= \left( \frac{\text{d}\sigma_{z}}{\text{d}\Omega} \right)_{\text{nsf}} - \frac{1}{3} I - N\\M_{\text{av}} &amp;= \frac{1}{2} \left( M_{\perp \text{y}} + M_{\perp \text{z}} \right),\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha\)</span> is the Sharpf angle, which for elastic scattering is equal to half of the (signed) in-plane scattering angle and <span class="math notranslate nohighlight">\(\theta_{0}\)</span> is an experimentally fixed offset (see more in Ref. <a class="footnote-reference brackets" href="#sharpf" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>).</p>
<ol class="arabic simple" start="3">
<li><p>10-point</p></li>
</ol>
<p>The 10-point method is an expansion of the XYZ method, that requires measurements of spin-flip and non-spin-flip cross-sections along three orthogonal axes as in the XYZ and two additional axes that are rotated by 45 degrees around the Z axis, labelled <cite>‘x-y’</cite> and <cite>‘x+y’</cite>. Similarly to the XYZ method, it is possible to separate magnetic cross-section from nuclear coherent and spin-incoherent ones, and additionally the method offers a possibility to separate the magnetic cross-section and the term dependent on azimuthal angle.</p>
<div class="math notranslate nohighlight">
\[\alpha = \theta - \theta_{0} - \frac{\pi}{2},\]</div>
<p>where <span class="math notranslate nohighlight">\(\alpha\)</span> is the Sharpf angle, which for elastic scattering is equal to half of the (signed) in-plane scattering angle and <span class="math notranslate nohighlight">\(\theta_{0}\)</span> is an experimentally fixed offset (see more in Ref. <a class="footnote-reference brackets" href="#sharpf" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>).</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}M_{1} &amp;= (2 c_{0} - 4) \cdot \left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{nsf}} + (2c_{0} + 2) \cdot \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{nsf}} + (2-4c_{0}) \cdot \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}}\\M_{2} &amp;= (2 c_{4} - 4) \cdot \left(\frac{\text{d}\sigma_{x+y}}{\text{d}\Omega}\right)_{\text{nsf}} + (2c_{4} + 2) \cdot \left(\frac{\text{d}\sigma_{x-y}}{\text{d}\Omega}\right)_{\text{nsf}} + (2-4c_{4}) \cdot \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}}\\M &amp;= M_{1} \cdot \text{cos}(2\alpha) + M_{2} \cdot \text{sin}(2\alpha),\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(c_{0} = \text{cos}^{2} \alpha\)</span> and <span class="math notranslate nohighlight">\(c_{4} = \text{cos}^{2} (\alpha - \frac{\pi}{4})\)</span></p>
<div class="math notranslate nohighlight">
\[\begin{split}N = \frac{1}{12} \cdot \left(2 \cdot \left( \left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{nsf}} + 2 \cdot \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{x+y}}{\text{d}\Omega}\right)_{\text{nsf}} + \left(\frac{\text{d}\sigma_{x-y}}{\text{d}\Omega}\right)_{\text{nsf}} \right) \right. \\ - \left. \left( \left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{x+y}}{\text{d}d\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{x-y}}{\text{d}\Omega}\right)_{\text{sf}} \right) \right)\end{split}\]</div>
<div class="math notranslate nohighlight">
\[I = \frac{1}{4} \cdot \left(\left(\frac{\text{d}\sigma_{x}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{y}}{\text{d}d\Omega}\right)_{\text{sf}} + 2 \cdot \left(\frac{\text{d}\sigma_{z}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{x+y}}{\text{d}\Omega}\right)_{\text{sf}} + \left(\frac{\text{d}\sigma_{x-y}}{\text{d}\Omega}\right)_{\text{sf}} - M \right)\]</div>
</section>
<section id="sample-data-normalisation">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Sample data normalisation</a><a class="headerlink" href="#sample-data-normalisation" title="Permalink to this heading">¶</a></h3>
<p>The sample data normalisation is the final step of data reduction of D7 sample, and allows to simultaneously correct for detector efficiency and set the output to the absolute scale.</p>
<p>There are three options for the normalisation; it uses either the input from a reference sample with a well-known cross-section, namely vanadium, or the output from the cross-section separation, either magnetic or spin-incoherent cross-sections. A relative normalisation of the sample workspace to the detector with the highest counts is always performed.</p>
<div class="math notranslate nohighlight">
\[S (\#, \pm \text{, chn/t/meV)} = I (\#, \pm \text{, chn/t/meV)} \cdot D (\#, \pm \text{, chn/t/meV)},\]</div>
<p>where <cite>I</cite> is the sample intensity distribution corrected for all effects, and <cite>D</cite> is the normalisation factor.</p>
<ol class="arabic simple">
<li><p>Vanadium</p></li>
</ol>
<p>If the data is to be expressed in absolute units, the normalisation factor is the reduced vanadium data, normalised by the number of moles of the sample material <span class="math notranslate nohighlight">\(N_{S}\)</span>:</p>
<div class="math notranslate nohighlight">
\[D (\#, \pm \text{, chn/t/meV)} = \frac{1}{N_{S}} \cdot V^{-1} (\#, \pm \text{, chn/t/meV)}\]</div>
<p>If data is not to be expressed in absolute units, the normalisation factor depends only on the vanadium input:</p>
<div class="math notranslate nohighlight">
\[D (\#, \pm \text{, chn/t/meV)} = V^{-1} (\#, \pm \text{, chn/t/meV)}\]</div>
<ol class="arabic simple" start="2">
<li><p>Paramagnetic</p></li>
</ol>
<p>This normalisation is not valid for TOF data, and requires input from XYZ or 10-point cross-section separation. The paramagnetic measurement does not need to have background subtracted, as the background is self-subtracted in an XYZ measurement.</p>
<div class="math notranslate nohighlight">
\[D (\#) = \frac{2}{3} \frac{(\gamma r_{0})^{2} S(S+1)}{P (\#)},\]</div>
<p>where <span class="math notranslate nohighlight">\(\gamma\)</span> is the neutron gyromagnetic ratio, <span class="math notranslate nohighlight">\(r_{0}\)</span> is the electron’s classical radius, and S is the spin of the sample.</p>
<ol class="arabic simple" start="3">
<li><p>Spin-incoherent</p></li>
</ol>
<p>Similarly to the paramagnetic normalisation, it is also not valid for TOF data, and requires input from XYZ or 10-point cross-section separation. This normalisation assumes that the spin-incoherent contribution is isotropic and flat in <span class="math notranslate nohighlight">\(Q\)</span>.</p>
<p>The data can be put on absolute scale if the nuclear-spin-incoherent (NSI) cross-section for the sample is known, then:</p>
<div class="math notranslate nohighlight">
\[D (\#) = \frac{\text{d} \sigma_{NSI}}{\text{d} \Omega} \frac{1}{NSI (\#)}.\]</div>
<p>If only the detector efficiency is to be corrected, then it is sufficient to use only the nuclear-spin-incoherent cross-section input:</p>
<div class="math notranslate nohighlight">
\[D (\#) = \frac{\text{max}(NSI (\#))}{NSI (\#)}.\]</div>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p><strong>Example - D7AbsoluteCrossSections - XYZ cross-section separation of vanadium data</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampleProperties</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span> <span class="mf">2.932</span><span class="p">,</span> <span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span> <span class="mf">50.942</span><span class="p">}</span>

<span class="n">Load</span><span class="p">(</span><span class="s1">&#39;ILL/D7/vanadium_xyz.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_xyz&#39;</span><span class="p">)</span> <span class="c1"># loads already reduced data</span>
<span class="n">D7AbsoluteCrossSections</span><span class="p">(</span>
           <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_xyz&#39;</span><span class="p">,</span>
           <span class="n">CrossSectionSeparationMethod</span><span class="o">=</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span>
           <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">sampleProperties</span><span class="p">,</span>
           <span class="n">OutputTreatment</span><span class="o">=</span><span class="s1">&#39;Merge&#39;</span><span class="p">,</span>
           <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span>
           <span class="n">OutputUnits</span><span class="o">=</span><span class="s1">&#39;TwoTheta&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of separated cross-sections: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;xyz&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
<span class="n">Integration</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;xyz&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sum_coherent&#39;</span><span class="p">)</span>
<span class="n">Integration</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;xyz&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sum_incoherent&#39;</span><span class="p">)</span>
<span class="n">Divide</span><span class="p">(</span><span class="n">LHSWorkspace</span><span class="o">=</span><span class="s1">&#39;sum_incoherent&#39;</span><span class="p">,</span> <span class="n">RHSWorkspace</span><span class="o">=</span><span class="s1">&#39;sum_coherent&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;ratio&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ratio of spin-incoherent to nuclear coherent cross-sections measured for vanadium is equal to: </span><span class="si">{0:.0f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;ratio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Number of separated cross-sections: 6
Ratio of spin-incoherent to nuclear coherent cross-sections measured for vanadium is equal to: 170
</pre></div>
</div>
<p><strong>Example - D7AbsoluteCrossSections - Sample normalisation to vanadium data</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampleProperties</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span> <span class="mf">2.932</span><span class="p">,</span> <span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span> <span class="mf">182.54</span><span class="p">}</span>

<span class="n">Load</span><span class="p">(</span><span class="s1">&#39;ILL/D7/396993_reduced.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_input&#39;</span><span class="p">)</span>
<span class="n">GroupWorkspaces</span><span class="p">(</span><span class="n">InputWorkspaces</span><span class="o">=</span><span class="s1">&#39;vanadium_input&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_data&#39;</span><span class="p">)</span>
<span class="n">Load</span><span class="p">(</span><span class="s1">&#39;ILL/D7/397004_reduced.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data&#39;</span><span class="p">)</span>
<span class="n">D7AbsoluteCrossSections</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;normalised_sample_vanadium&#39;</span><span class="p">,</span>
                        <span class="n">CrossSectionSeparationMethod</span><span class="o">=</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span> <span class="n">NormalisationMethod</span><span class="o">=</span><span class="s1">&#39;Vanadium&#39;</span><span class="p">,</span>
                        <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">sampleProperties</span><span class="p">,</span>
                        <span class="n">VanadiumInputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_data&#39;</span><span class="p">,</span> <span class="n">AbsoluteUnitsNormalisation</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of entries in the normalised data is: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;normalised_sample_vanadium&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The number of entries in the normalised data is: 6
</pre></div>
</div>
<p><strong>Example - D7D7AbsoluteCrossSections - Sample normalisation to paramagnetic cross-section</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampleProperties</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span> <span class="mf">2.932</span><span class="p">,</span> <span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span> <span class="mf">182.54</span><span class="p">,</span> <span class="s1">&#39;SampleSpin&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">}</span>

<span class="n">Load</span><span class="p">(</span><span class="s1">&#39;ILL/D7/397004_reduced.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data&#39;</span><span class="p">)</span>
<span class="n">D7AbsoluteCrossSections</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;normalised_sample_magnetic&#39;</span><span class="p">,</span>
                        <span class="n">CrossSectionSeparationMethod</span><span class="o">=</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span> <span class="n">NormalisationMethod</span><span class="o">=</span><span class="s1">&#39;Paramagnetic&#39;</span><span class="p">,</span>
                        <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">sampleProperties</span><span class="p">,</span> <span class="n">AbsoluteUnitsNormalisation</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of entries in the normalised data is: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;normalised_sample_magnetic&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The number of entries in the normalised data is: 6
</pre></div>
</div>
<p><strong>Example - D7D7AbsoluteCrossSections - Single crystal sample XYZ cross-section separation</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampleProperties</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span> <span class="mf">2.932</span><span class="p">,</span> <span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span> <span class="mf">182.54</span><span class="p">,</span> <span class="s1">&#39;OmegaShift&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;KiXAngle&#39;</span><span class="p">:</span> <span class="mf">45.0</span><span class="p">}</span>

<span class="n">Load</span><span class="p">(</span><span class="s1">&#39;ILL/D7/399870_400288_by_25.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data&#39;</span><span class="p">)</span>
<span class="n">D7AbsoluteCrossSections</span><span class="p">(</span>
  <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data&#39;</span><span class="p">,</span>
  <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_data_qxy&#39;</span><span class="p">,</span>
  <span class="n">CrossSectionSeparationMethod</span><span class="o">=</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span>
  <span class="n">NormalisationMethod</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span>
  <span class="n">OutputUnits</span><span class="o">=</span><span class="s1">&#39;Qxy&#39;</span><span class="p">,</span>
  <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">sampleProperties</span><span class="p">,</span>
  <span class="n">AbsoluteUnitsNormalisation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
  <span class="n">IsotropicMagnetism</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">MeasurementTechnique</span><span class="o">=</span><span class="s1">&#39;SingleCrystal&#39;</span><span class="p">,</span>
  <span class="n">ClearCache</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of entries in the output data is: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;sample_data_qxy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The number of entries in the output data is: 6
</pre></div>
</div>
<p><strong>Example - D7D7AbsoluteCrossSections - Time-of-flight measurement with Z-only cross-section separation</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_dictionary_H2O</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span><span class="mf">0.874</span><span class="p">,</span> <span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span><span class="mf">18.0</span><span class="p">,</span> <span class="s1">&#39;SampleChemicalFormula&#39;</span><span class="p">:</span><span class="s1">&#39;H2O&#39;</span><span class="p">}</span>

<span class="n">Load</span><span class="p">(</span><span class="s1">&#39;ILL/D7/395639_reduced.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;h2O_ws&#39;</span><span class="p">)</span>
<span class="n">D7AbsoluteCrossSections</span><span class="p">(</span>
  <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;h2O_ws&#39;</span><span class="p">,</span>
  <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;h2O_reduced&#39;</span><span class="p">,</span>
  <span class="n">CrossSectionSeparationMethod</span><span class="o">=</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span>
  <span class="n">NormalisationMethod</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span>
  <span class="n">OutputUnits</span><span class="o">=</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span>
  <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">sample_dictionary_H2O</span><span class="p">,</span>
  <span class="n">AbsoluteUnitsNormalisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">MeasurementTechnique</span><span class="o">=</span><span class="s1">&#39;TOF&#39;</span><span class="p">,</span>
  <span class="n">ClearCache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
  <span class="n">QBinning</span><span class="o">=</span><span class="s1">&#39;-5,0.04,1.5&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of entries in the output data is: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;h2O_reduced&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The number of entries in the output data is: 9
</pre></div>
</div>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="sharpf" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id6">1</a>,<a role="doc-backlink" href="#id7">2</a>)</span>
<p>Scharpf, O. and Capellmann, H.
<em>The XYZ‐Difference Method with Polarized Neutrons and the Separation of Coherent, Spin Incoherent, and Magnetic Scattering Cross Sections in a Multidetector</em>
Physica Status Solidi (A) <strong>135</strong> (1993) 359-379
<a class="reference external" href="https://doi.org/10.1002/pssa.2211350204">doi: 10.1002/pssa.2211350204</a></p>
</aside>
<aside class="footnote brackets" id="steward" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Stewart, J. R. and Deen, P. P. and Andersen, K. H. and Schober, H. and Barthelemy, J.-F. and Hillier, J. M. and Murani, A. P. and Hayes, T. and Lindenau, B.
<em>Disordered materials studied using neutron polarization analysis on the multi-detector spectrometer, D7</em>
Journal of Applied Crystallography <strong>42</strong> (2009) 69-84
<a class="reference external" href="https://doi.org/10.1107/S0021889808039162">doi: 10.1107/S0021889808039162</a></p>
</aside>
<aside class="footnote brackets" id="ehlers" role="note">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id4">2</a>)</span>
<p>Ehlers G., Stewart J. R., Wildes A. R., Deen P. P., and Andersen K. H.
<em>Generalization of the classical xyz-polarization analysis technique to out-of-plane and inelastic scattering</em>
Review of Scientific Instruments <strong>84</strong> (2013), 093901
<a class="reference external" href="https://doi.org/10.1063/1.4819739">doi: 10.1063/1.4819739</a></p>
</aside>
<aside class="footnote brackets" id="schweika" role="note">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id2">1</a>,<a role="doc-backlink" href="#id5">2</a>)</span>
<p>Schweika W.
<em>XYZ-polarisation analysis of diffuse magnetic neutron scattering from single crystals</em>
J. Phys.: Conf. Ser. <strong>211</strong> (2010) 012026
<a class="reference external" href="https://doi.org/10.1088/1742-6596/211/1/012026">doi: 10.1088/1742-6596/211/1/012026</a></p>
</aside>
</aside>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/ILL/Diffraction.html">ILL\Diffraction</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/D7AbsoluteCrossSections.py">D7AbsoluteCrossSections.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="D4ILLReduction-v1.html" title="Previous Chapter: D4ILLReduction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; D4ILLReduction v1</span>
    </a>
  </li>
  <li>
    <a href="D7YIGPositionCalibration-v1.html" title="Next Chapter: D7YIGPositionCalibration v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">D7YIGPosition... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>