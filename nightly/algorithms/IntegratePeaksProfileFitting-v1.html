<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>IntegratePeaksProfileFitting v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IntegratePeaksSkew v1" href="IntegratePeaksSkew-v1.html" />
    <link rel="prev" title="IntegratePeaksMDHKL v1" href="IntegratePeaksMDHKL-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">IntegratePeaksProfileFitting v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="integratepeaksprofilefitting-v1">
<span id="algm-integratepeaksprofilefitting"></span><span id="algm-integratepeaksprofilefitting-v1"></span><h1>IntegratePeaksProfileFitting v1<a class="headerlink" href="#integratepeaksprofilefitting-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/IntegratePeaksProfileFitting-v1_dlg.png"><img alt="../_images/IntegratePeaksProfileFitting-v1_dlg.png" class="screenshot" src="../_images/IntegratePeaksProfileFitting-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>IntegratePeaksProfileFitting</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p></li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#similar-algorithms" id="id5">Similar algorithms</a></p></li>
<li><p><a class="reference internal" href="#inputs" id="id6">Inputs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#instrument-defined-parameters" id="id7">Instrument-Defined Parameters</a></p></li>
<li><p><a class="reference internal" href="#calculations" id="id8">Calculations</a></p>
<ul>
<li><p><a class="reference internal" href="#constructing-the-measured-intensity-distribution" id="id9">Constructing the Measured Intensity Distribution</a></p></li>
<li><p><a class="reference internal" href="#fitting-the-time-of-flight-coordinate" id="id10">Fitting the Time-of-Flight Coordinate</a></p></li>
<li><p><a class="reference internal" href="#fitting-the-non-tof-coordinate" id="id11">Fitting the Non-TOF Coordinate</a></p></li>
<li><p><a class="reference internal" href="#integrating-the-model" id="id12">Integrating the Model</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id13">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id14">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Fits a series of peaks using 3D profile fitting as an Ikeda-Carpenter function by a bivariate gaussian.</p>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OutputPeaksWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>PeaksWorkspace with integrated peaks</p></td>
</tr>
<tr class="row-odd"><td><p>OutputParamsWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>MatrixWorkspace with fit parameters</p></td>
</tr>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input Sample MDHistoWorkspace or MDEventWorkspace in HKL.</p></td>
</tr>
<tr class="row-odd"><td><p>PeaksWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>PeaksWorkspace with peaks to be integrated.</p></td>
</tr>
<tr class="row-even"><td><p>UBFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing the UB Matrix in ISAW format. Leave blank to use loaded UB Matrix. Allowed extensions: [‘.mat’]</p></td>
</tr>
<tr class="row-odd"><td><p>ModeratorCoefficientsFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing the Pade coefficients describing moderator emission versus energy. Allowed extensions: [‘.dat’]</p></td>
</tr>
<tr class="row-even"><td><p>StrongPeakParamsFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>File containing strong peaks profiles.  If left blank, strong peaks will be fit first. Allowed extensions: [‘.pkl’]</p></td>
</tr>
<tr class="row-odd"><td><p>IntensityCutoff</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Minimum number of counts to force a profile</p></td>
</tr>
<tr class="row-even"><td><p>EdgeCutoff</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Pixels within EdgeCutoff from a detector edge will be have a profile forced.</p></td>
</tr>
<tr class="row-odd"><td><p>FracStop</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.05</p></td>
<td><p>Fraction of max counts to include in peak selection.</p></td>
</tr>
<tr class="row-even"><td><p>MinpplFrac</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.9</p></td>
<td><p>Min fraction of predicted background level to check</p></td>
</tr>
<tr class="row-odd"><td><p>MaxpplFrac</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1.1</p></td>
<td><p>Max fraction of predicted background level to check</p></td>
</tr>
<tr class="row-even"><td><p>DQMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.15</p></td>
<td><p>Largest total side length (in Angstrom) to consider for profile fitting.</p></td>
</tr>
<tr class="row-odd"><td><p>PeakNumber</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>-1</p></td>
<td><p>Which Peak to fit.  Leave negative for all.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm performs integration of single crystal Bragg peaks by fitting
the intensity distribution as a 3D distribution made of an Ikeda-Carpenter
function (TOF coordinate) and a bivariate Normal distribution.</p>
<section id="similar-algorithms">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Similar algorithms</a><a class="headerlink" href="#similar-algorithms" title="Permalink to this heading">¶</a></h3>
<p>See <a class="reference internal" href="IntegratePeaksMD-v2.html#algm-integratepeaksmd"><span class="std std-ref">IntegratePeaksMD v2</span></a> or <a class="reference internal" href="IntegrateEllipsoids-v3.html#algm-integrateellipsoids"><span class="std std-ref">IntegrateEllipsoids v3</span></a> for peak-minus-background
integration algorithms in reciprocal space.</p>
</section>
<section id="inputs">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Inputs</a><a class="headerlink" href="#inputs" title="Permalink to this heading">¶</a></h3>
<p>The algorithms takes two input workspaces:</p>
<ul class="simple">
<li><p>A MDEventWorkspace containing the events in multi-dimensional space.
This would be the output of
<a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD v1</span></a>.</p></li>
<li><p>As well as a PeaksWorkspace containing single-crystal peak locations.
This could be the output of <a class="reference internal" href="FindPeaksMD-v1.html#algm-findpeaksmd"><span class="std std-ref">FindPeaksMD v1</span></a> or <a class="reference internal" href="PredictPeaks-v1.html#algm-predictpeaks"><span class="std std-ref">PredictPeaks v1</span></a>.  All peaks should
be from the same run.</p></li>
<li><p>The OutputPeaksWorkspace will contain a copy of the input PeaksWorkspace,
with the integrated intensities and errors changed.</p></li>
<li><p>The OutputParamsWorkspace is a TableWorkspace containing the fit parameters.
Peaks which could not be fit are omitted.</p></li>
</ul>
</section>
</section>
<section id="instrument-defined-parameters">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Instrument-Defined Parameters</a><a class="headerlink" href="#instrument-defined-parameters" title="Permalink to this heading">¶</a></h2>
<p>In addition to the input parameters defined above, there are several other parameters
to be aware of which are pre-defined for each instrument.  The instrument is determined
from the instrument that is loaded into PeaksWorkspace. If the instrument parameters file
does not contain parameters, the algorithm defaults to MaNDi parameters. Default
values are below:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>MaNDi</p></th>
<th class="head"><p>TOPAZ</p></th>
<th class="head"><p>CORELLI</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DQPixel</p></td>
<td><p>The side length for each
voxel used for fitting.
Units: 1/Angstrom</p></td>
<td><p>0.003</p></td>
<td><p>0.006</p></td>
<td><p>0.007</p></td>
</tr>
<tr class="row-odd"><td><p>FracHKL</p></td>
<td><p>The distance between peaks
(in fraction of hkl) that
is used for fitting.</p></td>
<td><p>0.25</p></td>
<td><p>0.25</p></td>
<td><p>0.25</p></td>
</tr>
<tr class="row-even"><td><p>MinDtBinWidth</p></td>
<td><p>The smallest time bin used
for fitting the TOF profile
Units: microseconds</p></td>
<td><p>15</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>MaxDtBinWidth</p></td>
<td><p>The largest time bin used
for fitting the TOF profile
Units: microseconds</p></td>
<td><p>50</p></td>
<td><p>15</p></td>
<td><p>60</p></td>
</tr>
<tr class="row-even"><td><p>NTheta</p></td>
<td><p>The number of bins along
the scattering direction
used for BVG fitting.</p></td>
<td><p>50</p></td>
<td><p>50</p></td>
<td><p>50</p></td>
</tr>
<tr class="row-odd"><td><p>NPhi</p></td>
<td><p>The number of bins along
the azimuthal direction
used for BVG fitting.</p></td>
<td><p>50</p></td>
<td><p>50</p></td>
<td><p>50</p></td>
</tr>
</tbody>
</table>
</section>
<section id="calculations">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Calculations</a><a class="headerlink" href="#calculations" title="Permalink to this heading">¶</a></h2>
<p>This algorithm will fit a set of peaks in a PeaksWorkspace.  The intensity profile
is fit to an MDHisto workspace formed around the peak location.</p>
<section id="constructing-the-measured-intensity-distribution">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Constructing the Measured Intensity Distribution</a><a class="headerlink" href="#constructing-the-measured-intensity-distribution" title="Permalink to this heading">¶</a></h3>
<p>To construct the measured distribution to be fit, a histogram of events is made around the peak.
This histogram is in (q<sub>x</sub>,  q<sub>y</sub>, q<sub>z</sub>) and composed of voxels of side
length <strong>DQPixel</strong>.  To minimize the effect of neighboring peaks on profile fitting, the variable
<strong>qMask</strong> is used to only consider a region around the peak in (h,k,l) space.  It will filter voxels
outside of (h ± <strong>FracHKL</strong>, k ± <strong>FracHKL</strong>, l ± <strong>FracHKL</strong>) from calculations used for profile
fitting. In practice, values of 0.25 &lt; <strong>fracHKL</strong> &lt; 0.5 seem to work best.</p>
</section>
<section id="fitting-the-time-of-flight-coordinate">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Fitting the Time-of-Flight Coordinate</a><a class="headerlink" href="#fitting-the-time-of-flight-coordinate" title="Permalink to this heading">¶</a></h3>
<p>The time-of-flight (TOF), t, of each voxel is determined as:</p>
<div class="math notranslate nohighlight">
\[t = k \times \frac{(L_1 + L_2)\sin(\theta)}{|\vec{q}|}\]</div>
<p>The events are histogrammed by their <cite>t</cite> values to create a TOF profile.  This profile can then be fit
to the Ikeda Carpenter function.  To separate the peak and background, different levels of intensity are
filtered out.  The predicted background level is determined as the average background not near the peak or off the edge
and values within <strong>Minppl_frac</strong> and <strong>Maxppl_frac</strong> times the predicted value are tried.  The best fit to the expected
moderator emission (determined by the moderator coefficients defined in <strong>ModeratorCoefficientsFile</strong>) is
taken and these voxels are considered to be signal.</p>
</section>
<section id="fitting-the-non-tof-coordinate">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Fitting the Non-TOF Coordinate</a><a class="headerlink" href="#fitting-the-non-tof-coordinate" title="Permalink to this heading">¶</a></h3>
<p>TOF goes as <span class="math notranslate nohighlight">\(1/|\vec{q}|\)</span> and so it is natural to use spherical coordinate.  In that sense, the other two coordinates
are  <span class="math notranslate nohighlight">\((q_{\theta} ,  q_{\phi_az})\)</span> - along the scattering angle and azimuthal angle, respectively.  From the
MDHisto Workspace (filtered by <strong>qMask</strong> and using only the signal voxels from the TOF fight), a 2D histogram is constructed
which is fit to a bivariate normal distribution.  The histogram has <strong>NTheta</strong> <span class="math notranslate nohighlight">\(\times\)</span> <strong>NPhi</strong> bins.</p>
<p>For weak peaks or peaks near detector edges, the 2D histogram likely does not reflect the full profile.  To address this, the
profile of the nearest strong peaks is forced when doing the BVG fit.  The profile is fit (allowed to vary 10% in
<span class="math notranslate nohighlight">\(\sigma_x, \sigma_y, \rho\)</span> ) and location and amplitude are not fixed.  Weak peaks are defined as peaks with fewer
than <strong>IntensityCutoff</strong> counts from peak-minus-background integration or within <strong>EdgeCutoff</strong> pixels of the detector edge.</p>
<p>The strong peaks library can be generated in two ways.  First, it can be provided as an input file through <strong>StrongPeakParamsFile</strong>.
The <strong>StrongPeakParamsFile</strong> should be a .pkl file which contains a Numpy array containing the parameters used for strong peaks.
Alternatively, if no file is provided, the algorithm will go through and fit strong peaks first, building the strong peaks library
as it goes.  After fitting all of the strong peaks, defined as peaks with spherical intensities above <strong>IntensityCutoff</strong> and further
than <strong>EdgeCutoff</strong> pixels from the edge, it will fit weak peaks using those profiles. For initial guesses, the algorithm will fit
the first 30 peaks using the instrument default parameters.  After that, it will use already fit peaks to determine initial guesses.</p>
</section>
<section id="integrating-the-model">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Integrating the Model</a><a class="headerlink" href="#integrating-the-model" title="Permalink to this heading">¶</a></h3>
<p>The final intensity profile is given by</p>
<div class="math notranslate nohighlight">
\[Y(\vec{q}) = A \times Y_{TOF}(\vec{q}) \times Y_{BVG}(\vec{q}) + B\]</div>
<p>where <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> are scaling constants.  Here the background is assumed to be constant <span class="math notranslate nohighlight">\(B\)</span> over the volume of
the peak, so the model of the peak itself is <span class="math notranslate nohighlight">\(Y_{model}(\vec{q}) = A \times Y_{TOF}(\vec{q}) \times Y_{BVG}(\vec{q})\)</span>.
The peak intensity <span class="math notranslate nohighlight">\(I\)</span>, is given by summing <span class="math notranslate nohighlight">\(Y_{model}(\vec{q})\)</span> over voxels which are greater than <strong>FracStop</strong> of the maximum.</p>
<p><span class="math notranslate nohighlight">\(\sigma(I)\)</span> is given  as</p>
<div class="math notranslate nohighlight">
\[\sigma(I) = \sqrt{\Sigma N_{obs} + \Sigma N_{BG} + \frac{\Sigma N_{obs}(N_{obs}-N_{model})^2}{\Sigma N_{obs}}}\]</div>
<p>where the first two terms come from Poissionian statistics and the final term is the variance of the fit. Those
sums are over the same voxels used to calculate intensity.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Example - IntegratePeaksProfileFitting</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;/SNS/MANDI/IPTS-8776/0/5921/NeXus/MANDI_5921_event.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;MANDI_5921_event&#39;</span><span class="p">)</span>
<span class="linenos"> 2</span> <span class="n">MANDI_5921_md</span> <span class="o">=</span> <span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;MANDI_5921_event&#39;</span><span class="p">,</span>  <span class="n">QDimensions</span><span class="o">=</span><span class="s1">&#39;Q3D&#39;</span><span class="p">,</span> <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s1">&#39;Elastic&#39;</span><span class="p">,</span>
<span class="linenos"> 3</span>                          <span class="n">Q3DFrames</span><span class="o">=</span><span class="s1">&#39;Q_lab&#39;</span><span class="p">,</span> <span class="n">QConversionScales</span><span class="o">=</span><span class="s1">&#39;Q in A^-1&#39;</span><span class="p">,</span>
<span class="linenos"> 4</span>                          <span class="n">MinValues</span><span class="o">=</span><span class="s1">&#39;-5, -5, -5&#39;</span><span class="p">,</span> <span class="n">Maxvalues</span><span class="o">=</span><span class="s1">&#39;5, 5, 5&#39;</span><span class="p">,</span> <span class="n">MaxRecursionDepth</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="linenos"> 5</span>                          <span class="n">LorentzCorrection</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 6</span> <span class="n">LoadIsawPeaks</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;/SNS/MANDI/shared/ProfileFitting/demo_5921.integrate&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks_ws&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span> <span class="n">IntegratePeaksProfileFitting</span><span class="p">(</span><span class="n">OutputPeaksWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks_ws_out&#39;</span><span class="p">,</span> <span class="n">OutputParamsWorkspace</span><span class="o">=</span><span class="s1">&#39;params_ws&#39;</span><span class="p">,</span>
<span class="linenos"> 9</span>         <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;MANDI_5921_md&#39;</span><span class="p">,</span> <span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks_ws&#39;</span><span class="p">,</span>
<span class="linenos">10</span>         <span class="n">UBFile</span><span class="o">=</span><span class="s1">&#39;/SNS/MANDI/shared/ProfileFitting/demo_5921.mat&#39;</span><span class="p">,</span> <span class="n">MinpplFrac</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">MaxpplFrac</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span>
<span class="linenos">11</span>         <span class="n">ModeratorCoefficientsFile</span><span class="o">=</span><span class="s1">&#39;/SNS/MANDI/shared/ProfileFitting/franz_coefficients_2017.dat&#39;</span><span class="p">,</span>
<span class="linenos">12</span>         <span class="n">StrongPeakParamsFile</span><span class="o">=</span><span class="s1">&#39;/SNS/MANDI/shared/ProfileFitting/strongPeakParams_beta_lac_mut_mbvg.pkl&#39;</span><span class="p">,</span>
<span class="linenos">13</span>         <span class="n">peakNumber</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Crystal/Integration.html">Crystal\Integration</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/13e7f0547cfe096095781821611f9c6151283ad7/Framework/PythonInterface/plugins/algorithms/IntegratePeaksProfileFitting.py">IntegratePeaksProfileFitting.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="IntegratePeaksMDHKL-v1.html" title="Previous Chapter: IntegratePeaksMDHKL v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; IntegratePeak...</span>
    </a>
  </li>
  <li>
    <a href="IntegratePeaksSkew-v1.html" title="Next Chapter: IntegratePeaksSkew v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IntegratePeaksSkew v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>