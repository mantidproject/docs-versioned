<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Abins2D v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AbsorptionCorrection v1" href="AbsorptionCorrection-v1.html" />
    <link rel="prev" title="Abins v1" href="Abins-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Abins2D v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="abins2d-v1">
<span id="algm-abins2d"></span><span id="algm-abins2d-v1"></span><h1>Abins2D v1<a class="headerlink" href="#abins2d-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/Abins2D-v1_dlg.png"><img alt="../_images/Abins2D-v1_dlg.png" class="screenshot" src="../_images/Abins2D-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>Abins2D</strong> dialog.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#credits" id="id4">Credits</a></p></li>
<li><p><a class="reference internal" href="#summary" id="id5">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id6">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id7">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id8">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id10">Source</a></p></li>
<li><p><a class="reference internal" href="#references" id="id11">References</a></p></li>
</ul>
</nav>
<section id="credits">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Credits</a><a class="headerlink" href="#credits" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>Author:</dt><dd><p>Adam Jackson</p>
</dd>
</dl>
</section>
<section id="summary">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Calculates inelastic neutron scattering over 2D (q,ω) space.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="Abins-v1.html#algm-abins"><span class="std std-ref">Abins</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VibrationalOrPhononFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>File with the data from a vibrational or phonon calculation. Allowed values: [‘phonon’, ‘out’, ‘outmol’, ‘log’, ‘xml’, ‘yaml’, ‘castep_bin’, ‘hdf5’]</p></td>
</tr>
<tr class="row-odd"><td><p>AbInitioProgram</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>CASTEP</p></td>
<td><p>An ab initio program which was used for vibrational or phonon calculation. Allowed values: [‘CASTEP’, ‘CRYSTAL’, ‘DMOL3’, ‘FORCECONSTANTS’, ‘GAUSSIAN’, ‘VASP’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name to give the output workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>TemperatureInKelvin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>10</p></td>
<td><p>Temperature in K for which dynamical structure factor S should be calculated.</p></td>
</tr>
<tr class="row-even"><td><p>Atoms</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>List of atoms to use to calculate partial S.If left blank, workspaces with S for all types of atoms will be calculated. Element symbols will be interpreted as a sum of all atoms of that element in the cell. ‘atomN’ or ‘atom_N’ (where N is a positive integer) will be interpreted as individual atoms, indexing from 1 following the order of the input data.</p></td>
</tr>
<tr class="row-odd"><td><p>SumContributions</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Sum the partial dynamical structure factors into a single workspace.</p></td>
</tr>
<tr class="row-even"><td><p>SaveAscii</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Write workspaces to .ascii files after computing them.</p></td>
</tr>
<tr class="row-odd"><td><p>ScaleByCrossSection</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Incoherent</p></td>
<td><p>Scale the partial dynamical structure factors by the scattering cross section. Allowed values: [‘Total’, ‘Incoherent’, ‘Coherent’]</p></td>
</tr>
<tr class="row-even"><td><p>QuantumOrderEventsNumber</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>1</p></td>
<td><p>Number of quantum order effects included in the calculation (1 -&gt; FUNDAMENTALS, 2-&gt; first overtone + FUNDAMENTALS + 2nd order combinations. Allowed values: [‘1’, ‘2’]</p></td>
</tr>
<tr class="row-odd"><td><p>Autoconvolution</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Estimate higher quantum orders by convolution with fundamental spectrum.</p></td>
</tr>
<tr class="row-even"><td><p>EnergyUnits</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>cm-1</p></td>
<td><p>Energy units for output workspace and experimental file. Allowed values: [‘cm-1’, ‘meV’]</p></td>
</tr>
<tr class="row-odd"><td><p>Instrument</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Ideal2D</p></td>
<td><p>Name of an instrument for which analysis should be performed. Allowed values: [‘Ideal2D’, ‘PANTHER’, ‘MAPS’, ‘MARI’, ‘MERLIN’]</p></td>
</tr>
<tr class="row-even"><td><p>Chopper</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Chopper package. Allowed values: [‘’, ‘A’, ‘G’, ‘R’, ‘S’]</p></td>
</tr>
<tr class="row-odd"><td><p>IncidentEnergy</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>4100</p></td>
<td><p>Incident energy in EnergyUnits</p></td>
</tr>
<tr class="row-even"><td><p>ChopperFrequency</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Chopper frequency in Hz</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Abins2D is a plugin for Mantid which allows scientists to generate theoretical inelastic neutron scattering spectra (INS) in 2-D <span class="math notranslate nohighlight">\((|\mathbf{q}|,\omega)\)</span> space, accounting for the limitations of real-world measurements.</p>
<p>The intensity is calculated in the “almost-isotropic” incoherent powder-averaging approximation, as used in the 1-D <a class="reference internal" href="Abins-v1.html#algm-abins"><span class="std std-ref">Abins</span></a> algorithm.
Different 2-D INS instruments may be selected, along with instrument parameters (incident energy, chopper settings) that determine the accessible <span class="math notranslate nohighlight">\((|\mathbf{q}|,\omega)\)</span> region and energy resolution.
More information about the implemented working equations can be found <a class="reference internal" href="../concepts/DynamicalStructureFactorFromAbInitio.html#dynamicalstructurefactorfromabinitio"><span class="std std-ref">here</span></a>.</p>
<p>Abins requires data from existing lattice dynamics calculations to determine the phonon mode frequencies and displacements. These are used to compute INS intensities; higher-order phonons may be approximated as combinations of fundamental modes.
Several file formats are supported for frequency and displacement data at given <span class="math notranslate nohighlight">\(\mathbf{q}\)</span>-points: CASTEP (.phonon), CRYSTAL (.out), GAUSSIAN (.log), DMOL3 (.outmol) or VASP (.xml).
For VASP XML inputs, it is also permitted to use a “selective dynamics” in which some atoms are frozen.
In this case, data is only available for the moving atoms and contributions from the other atoms are omitted from the calculated spectrum.
This may be a suitable model for systems where the frozen atoms form a rigid substrate (e.g. a noble metal surface) for an adsorbed molecule of lightweight atoms.
It is not recommended where there is significant vibrational coupling between frozen and moving atoms, or where substrate modes would occupy a similar frequency range to the adsorbate.</p>
<p>Alternatively, force-constants data can be provided and a fine <span class="math notranslate nohighlight">\(\mathbf{q}\)</span>-point mesh will be sampled automatically.
In this case the supported formats are CASTEP (.castep_bin generated with <code class="docutils literal notranslate"><span class="pre">phonon_write_force_constants</span> <span class="pre">=</span> <span class="pre">True</span></code>)
and Phonopy (<em>phonopy.yaml</em> file generated with <code class="docutils literal notranslate"><span class="pre">INCLUDE_ALL</span> <span class="pre">=</span> <span class="pre">.TRUE.</span></code>)</p>
<p>After a successful run, results are written to a Mantid Workspace Group; by default this is divided by element and quantum order.
The user can also request contributions from individual atoms (e.g. ‘atom_1’, the first atom listed in the input
data) or types of atom (for example for benzene two element symbols: C, H).</p>
<p>Abins2D is under active development; please direct feature requests and bug reports to Dr. Sanghamitra Mukhopadhyay and Dr. Adam Jackson.
If you are developing or modifying Abins(2D), see the <a class="reference internal" href="../concepts/AbinsImplementation.html#abinsimplementation"><span class="std std-ref">Abins: Implementation details</span></a> notes which outline some of the key conventions, practices and pitfalls.</p>
<p>If Abins is used as part of your data analysis routines, please cite the relevant reference <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p><strong>Example - loading CASTEP phonon data:</strong></p>
<p>A minimal example, relying heavily on default parameters:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">benzene_wrk</span> <span class="o">=</span> <span class="n">Abins2D</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">benzene_wrk</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output: (note that only the fundamental excitations are included)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>benzene_wrk_C_total
benzene_wrk_C
benzene_wrk_H_total
benzene_wrk_H
</pre></div>
</div>
<p><strong>Example - using more arguments:</strong></p>
<p>In practice we would usually select an instrument, incident energy,
and enable all available quantum orders (2 + autoconvolution). Setting
“Total” cross-section applies the “incoherent approximation”; although
Abins only (so far) calculates the incoherent contribution, coherent
weights can be added for a slight improvement to the predicted
spectrum.  (If the spectrum is dominated by coherent scattering, this
approximation may not be the appropriate tool.)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">wrk_verbose</span><span class="o">=</span><span class="n">Abins2D</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">,</span>
                    <span class="n">TemperatureInKelvin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">Instrument</span><span class="o">=</span><span class="s2">&quot;MAPS&quot;</span><span class="p">,</span>
                    <span class="n">Atoms</span><span class="o">=</span><span class="s2">&quot;H, atom1, atom2&quot;</span><span class="p">,</span> <span class="n">SumContributions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">Autoconvolution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">ScaleByCrossSection</span><span class="o">=</span><span class="s2">&quot;Total&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created </span><span class="si">{</span><span class="n">wrk_verbose</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="si">}</span><span class="s2"> workspaces&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;including </span><span class="si">{</span><span class="n">wrk_verbose</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Created 34 workspaces
including wrk_verbose_atom_1_total
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Simulation.html">Simulation</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/Abins2D.py">Abins2D.py</a></p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<ol class="upperalpha simple" start="11">
<li><p>Dymkowski, S. F. Parker, F. Fernandez-Alonso and S. Mukhopadhyay,  “AbINS: The modern software for INS interpretation” , Physica B, doi:10.1016/j.physb.2018.02.034 (2018).</p></li>
</ol>
</aside>
</aside>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Abins-v1.html" title="Previous Chapter: Abins v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Abins v1</span>
    </a>
  </li>
  <li>
    <a href="AbsorptionCorrection-v1.html" title="Next Chapter: AbsorptionCorrection v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">AbsorptionCor... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>