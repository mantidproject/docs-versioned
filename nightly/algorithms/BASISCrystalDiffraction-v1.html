<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>BASISCrystalDiffraction v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="BASISDiffraction v1" href="BASISDiffraction-v1.html" />
    <link rel="prev" title="AverageLogData v1" href="AverageLogData-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">BASISCrystalDiffraction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="basiscrystaldiffraction-v1">
<span id="algm-basiscrystaldiffraction"></span><span id="algm-basiscrystaldiffraction-v1"></span><h1>BASISCrystalDiffraction v1<a class="headerlink" href="#basiscrystaldiffraction-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/BASISCrystalDiffraction-v1_dlg.png"><img alt="../_images/BASISCrystalDiffraction-v1_dlg.png" class="screenshot" src="../_images/BASISCrystalDiffraction-v1_dlg.png" style="width: 349px;" /></a>
<figcaption>
<p><span class="caption-text"><strong>BASISCrystalDiffraction</strong> dialog.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#determine-single-crystal-diffraction" id="id6">Determine Single Crystal Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#sample-orientation" id="id7">Sample orientation</a></p></li>
<li><p><a class="reference internal" href="#diffraction-preferences" id="id8">Diffraction preferences</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id10">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Multiple-file BASIS crystal reduction for diffraction detectors.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="AlignDetectors-v1.html#algm-aligndetectors"><span class="std std-ref">AlignDetectors</span></a>, <a class="reference internal" href="DiffractionFocussing-v2.html#algm-diffractionfocussing"><span class="std std-ref">DiffractionFocussing</span></a>, <a class="reference internal" href="SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RunNumbers</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Sample run numbers</p></td>
</tr>
<tr class="row-odd"><td><p>MaskFile</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>/SNS/BSS/shared/autoreduce/new_masks_08_12_2015/BASIS_Mask_default_diff.xml</p></td>
<td><p>See documentation for latest mask files. Allowed extensions: [‘.xml’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output Workspace. If background is subtracted, _data and _background workspaces will also be generated</p></td>
</tr>
<tr class="row-odd"><td><p>BackgroundRuns</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Background run numbers</p></td>
</tr>
<tr class="row-even"><td><p>BackgroundScale</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>The background will be scaled by this number before being subtracted.</p></td>
</tr>
<tr class="row-odd"><td><p>VanadiumRuns</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Vanadium run numbers</p></td>
</tr>
<tr class="row-even"><td><p>PsiAngleLog</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>SE50Rot</p></td>
<td><p>log entry storing rotation of the samplearound the vertical axis</p></td>
</tr>
<tr class="row-odd"><td><p>PsiOffset</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Add this quantity to PsiAngleLog</p></td>
</tr>
<tr class="row-even"><td><p>LatticeSizes</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,0</p></td>
<td><p>three item comma-separated list “a, b, c”</p></td>
</tr>
<tr class="row-odd"><td><p>LatticeAngles</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>90,90,90</p></td>
<td><p>three item comma-separated list “alpha, beta, gamma”</p></td>
</tr>
<tr class="row-even"><td><p>VectorU</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>1,0,0</p></td>
<td><p>three item, comma-separated, HKL indexesof the diffracting plane</p></td>
</tr>
<tr class="row-odd"><td><p>VectorV</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,1,0</p></td>
<td><p>three item, comma-separated, HKL indexesof the direction perpendicular to VectorVand the vertical axis</p></td>
</tr>
<tr class="row-even"><td><p>Uproj</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>1,0,0</p></td>
<td><p>three item comma-separated Abscissa viewof the diffraction pattern</p></td>
</tr>
<tr class="row-odd"><td><p>Vproj</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,1,0</p></td>
<td><p>three item comma-separated Ordinate viewof the diffraction pattern</p></td>
</tr>
<tr class="row-even"><td><p>Wproj</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td><p>0,0,1</p></td>
<td><p>Hidden axis view</p></td>
</tr>
<tr class="row-odd"><td><p>NBins</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>400</p></td>
<td><p>number of bins in the HKL slice</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p><strong>Run numbers</strong>:
The syntax for the run numbers designation allows runs to be segregated
into sets. The semicolon symbol “;” is used to separate the runs into sets.
Runs within each set are jointly reduced. However, when
<em>Single Crystal Diffraction</em> is selected, all run numbers provided will be reduced
together.</p>
<p>Examples:</p>
<ul class="simple">
<li><p>2144-2147,2149,2156  is a single set. All runs jointly reduced.</p></li>
<li><p>2144-2147,2149;2156  is set 2144-2147,2149 and set 2156. The sets are reduced separately from each other (except for <em>Single Crystal Diffraction</em>).</p></li>
</ul>
<p><strong>Mask file</strong>: The default mask (BASIS_Mask_default_diff.xml) covers all
inelastic detectors as well as the tips of the diffraction tubes. The file
is in directory /SNS/BSS/shared/autoreduce/new_masks_08_12_2015.</p>
<p><strong>Lambda Range</strong>: a list containing a minimum and maximum values are required.
Incoming neutrons with a wavelength outside this range will be filtered out.
The default range is [5.86, 6.75].</p>
<p><strong>OutputWorkspace</strong>: a two-dimensional <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a>
containing the intensities projected onto the reciprocal slice, integrated over
the independent axis <em>Wproj</em>. The diffraction pattern can be visualized with
the <a class="reference internal" href="../workbench/sliceviewer.html#sliceviewer"><span class="std std-ref">Sliceviewer</span></a>.</p>
<p><strong>Background runs</strong>: one or more run numbers to describe the background, and a
scaling factor between zero and one.</p>
<p><strong>Vanadium runs</strong>: a set of runs to be reduced jointly provide an incoherent
and isotropic scattering to determine instrument efficiency per detector. If
no vanadium is provided, all detectors are assumed to have the same efficiency</p>
<section id="determine-single-crystal-diffraction">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Determine Single Crystal Diffraction</a><a class="headerlink" href="#determine-single-crystal-diffraction" title="Permalink to this heading">¶</a></h3>
<p>Creates a diffraction pattern from a set of runs
implementing a rotational scan of the sample around the vertical axis. The
corresponding goniometer’s rotation should be logged under log name
<strong>PsiAngleLog</strong>. Option <strong>PsiOffset</strong> allows user to enter a shift for this
angle.</p>
<section id="sample-orientation">
<h4><a class="toc-backref" href="#id7" role="doc-backlink">Sample orientation</a><a class="headerlink" href="#sample-orientation" title="Permalink to this heading">¶</a></h4>
<p><strong>VectorU</strong>: Vector along k_i, when goniometer is at offset.</p>
<p><strong>VectorV</strong>: In plane vector perpendicular to VectorU, when goniometer is at
offset.</p>
</section>
<section id="diffraction-preferences">
<h4><a class="toc-backref" href="#id8" role="doc-backlink">Diffraction preferences</a><a class="headerlink" href="#diffraction-preferences" title="Permalink to this heading">¶</a></h4>
<p>Most of the scattering occurs in the plane defined by VectorU and VectorV.
Please choose Uproj and Vproj defining a plane that is as close as possible
to the scattering plane.</p>
<p><strong>Uproj</strong>: Defines the first projection vector. Default (1,0,0).</p>
<p><strong>Vproj</strong>: Defines the second projection vector. Default (0,1,0).</p>
<p><strong>Wproj</strong>: Defines the third projection vector. Default (0,0,1).</p>
<p><strong>Nbins</strong>: the diffraction pattern to be viewed is partitioned into an
Nbins x Nbins grid, each grid rectangle assigned a particular scattered
intensity.</p>
<p>If background is provided, two additional workspaces
are generated. Workspace <em>_bkg</em> will contain the scattered intensity by the
background, and workspace <em>_dat</em> will contain the scattered intensity by
the sample with <em>no</em> background subtracted.</p>
<p><em>Timing</em>: 10 to 15 seconds per sample run. A typical scan made up of 50 runs
will take about 10 minutes to complete.</p>
</section>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Determine single crystal diffraction pattern:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">BASISCrystalDiffraction</span>
<span class="n">BASISCrystalDiffraction</span><span class="p">(</span><span class="n">RunNumbers</span><span class="o">=</span><span class="s1">&#39;74799-74869&#39;</span><span class="p">,</span>
                 <span class="n">VanadiumRuns</span><span class="o">=</span><span class="s1">&#39;75524-75526&#39;</span><span class="p">,</span>
                 <span class="n">BackgroundRuns</span><span class="o">=</span><span class="s1">&#39;75527&#39;</span><span class="p">,</span>
                 <span class="n">PsiAngleLog</span><span class="o">=</span><span class="s1">&#39;SE50Rot&#39;</span><span class="p">,</span>
                 <span class="n">PsiOffset</span><span class="o">=-</span><span class="mf">27.0</span><span class="p">,</span>
                 <span class="n">LatticeSizes</span><span class="o">=</span><span class="p">[</span><span class="mf">10.71</span><span class="p">,</span> <span class="mf">10.71</span><span class="p">,</span> <span class="mf">10.71</span><span class="p">],</span>
                 <span class="n">LatticeAngles</span><span class="o">=</span><span class="p">[</span><span class="mf">90.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">],</span>
                 <span class="n">VectorU</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="n">VectorV</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                 <span class="n">Uproj</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="n">Vproj</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                 <span class="n">Wproj</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="n">Nbins</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
                 <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;peaks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/BASISCrystalDiffraction.png" src="../_images/BASISCrystalDiffraction.png" />
</figure>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/aa570da6f199141cd8ad987bf9b9b9281a1b5e33/Framework/PythonInterface/plugins/algorithms/BASISCrystalDiffraction.py">BASISCrystalDiffraction.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="AverageLogData-v1.html" title="Previous Chapter: AverageLogData v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; AverageLogData v1</span>
    </a>
  </li>
  <li>
    <a href="BASISDiffraction-v1.html" title="Next Chapter: BASISDiffraction v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">BASISDiffraction v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>