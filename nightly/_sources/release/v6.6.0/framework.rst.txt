=================
Framework Changes
=================

.. contents:: Table of Contents
   :local:

New Features
------------
- the approach for inverting large tridiagonal matrices has been improved so that the analytical method can still be used even for large matrices, resulting in a performance improvement. This type of matrix inversion is used when calculating the interpolation errors when performing spline interpolation
- HDF5 has been upgraded to v1.12 along with h5py to version 3.

Algorithms
----------

New features
############
- To allow files saved with :ref:`SaveAscii2 <algm-SaveAscii-v2>` to be reloaded into Mantid and preserve rebinning behaviour, a ``Distribution=true`` flag is now written in the file header if the workspace is a Distribution. In this case, a column header is always written, even if the Save property ``ColumnHeader`` is set to false.
- To load an Ascii file, that was saved without a Distribution header flag, and set it as a Distribution, execute :ref:`LoadAscii2 <algm-LoadAscii-v2>` with property ``ForceDistributionTrue=true``
- Add error calculation to :ref:`DiscusMultipleScatteringCorrection <algm-DiscusMultipleScatteringCorrection>` following similar approach to :ref:`algm-MonteCarloAbsorption`
- The `LoadSANS1MLZ  <https://docs.mantidproject.org/nightly/algorithms/LoadSANS1MLZ.html>`_ algorithm now can be used to load raw files with extension ``.001`` generated by the SANS-1 instrument at MLZ, as well as to load reduced files with extension ``.002``.
- Added support for removal of instrument information from workspace - see :ref:`RemoveInstrumentGeometry <algm-RemoveInstrumentGeometry>`. This will allow saving smaller nexus files.
- remove the MuscatData, MuscatFunc and MuscatSofQW algorithms. The functionality provided by these algorithms is now provided by the :ref:`DiscusMultipleScatteringCorrection <algm-DiscusMultipleScatteringCorrection>` algorithm
- Add support for a beam profile (specified in :ref:`SetBeam <algm-SetBeam>`) to :ref:`DiscusMultipleScatteringCorrection <algm-DiscusMultipleScatteringCorrection>`

Bugfixes
############
- The algorithm GUI for UpdateInstrumentFromFile now accepts .DAT files for the Filename property.
- Reworked loadPropertyCommon to fix an issue with loading MDE worksapces taking long time to load
- fix problem with the :ref:`ConvolveWorkspaces  <algm-ConvolveWorkspaces>` algorithm when run on input workspaces with different x ranges. The x range of the output workspace was being taken from the resolution workspace instead of the data workspace
- Fix problem in :ref:`CreateSampleWorkspace <algm-CreateSampleWorkspace>` where functions were evaluated at left hand bin edge instead of bin centre. The algorithm :ref:`FindEPP <algm-FindEPP>` has also been updated with a similar change

Fit Functions
-------------

New features
############


Bugfixes
############



Data Objects
------------

New features
############


Bugfixes
############
- Fixed a minor bug in LoadNXSPE that caused an invalid value for PSI when the corresponding entry in the NXSPE file is empty


Python
------

New features
############
- MantidPython and MantidNotebook have been removed. For help accessing the mantid algorithms and methods
  in python and jupyter notebooks, check out the instructions in :ref:`PythonNotebook`.

Bugfixes
############



MantidWorkbench
---------------

See :doc:`mantidworkbench`.
:ref:`Release 6.6.0 <v6.6.0>`