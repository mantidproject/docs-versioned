<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Matplotlib in Mantid</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Basic 1D and Tiled Plots" href="1DPlotsHelp.html" />
    <link rel="prev" title="&lt;no title&gt;" href="../api/python/changes.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
        
        
          
            <li class="nav-item nav-item-this"><a href="">Matplotlib in Mantid</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="matplotlib-in-mantid">
<span id="plotting"></span><h1>Matplotlib in Mantid<a class="headerlink" href="#matplotlib-in-mantid" title="Permalink to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p><strong>Other Plotting Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="../tutorials/python_in_mantid/plotting/02_scripting_plots.html#scripting-plots"><span class="std std-ref">Formatting Plots with a script</span></a></p></li>
<li><p><a class="reference internal" href="../tutorials/mantid_basic_course/loading_and_displaying_data/06_formatting_plots.html#formatting-plots"><span class="std std-ref">Formatting Plots with the User Interface</span></a></p></li>
<li><p><a class="reference external" href="https://matplotlib.org/3.1.1/users/navigation_toolbar.html#navigation-keyboard-shortcuts">Matplotlib Keyboard Shortcuts</a></p></li>
</ul>
<p><strong>Help Documentation</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="1DPlotsHelp.html#basic-1d-plots"><span class="std std-ref">Basic 1D and Tiled Plots</span></a></p></li>
<li><p><a class="reference internal" href="WaterfallPlotsHelp.html#waterfall-plots"><span class="std std-ref">Waterfall Plots</span></a></p></li>
<li><p><a class="reference internal" href="ColorfillPlotsHelp.html#colorfill-plots"><span class="std std-ref">Colorfill and Contour Plots</span></a></p></li>
<li><p><a class="reference internal" href="3DPlotsHelp.html#d-plots"><span class="std std-ref">3D Plots: Surface and Wireframe</span></a></p></li>
<li><p><a class="reference internal" href="MeshPlotHelp.html#mesh-plots"><span class="std std-ref">3D Mesh Plots for Sample Shapes</span></a></p></li>
</ul>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id4">Introduction</a></p></li>
<li><p><a class="reference internal" href="#showing-saving-figures" id="id5">Showing/saving figures</a></p></li>
<li><p><a class="reference internal" href="#simple-plots" id="id6">Simple plots</a></p></li>
<li><p><a class="reference internal" href="#custom-colors" id="id7">Custom Colors</a></p>
<ul>
<li><p><a class="reference internal" href="#custom-color-cycle-line-1d-plots" id="id8">Custom Color Cycle (Line / 1D plots)</a></p></li>
<li><p><a class="reference internal" href="#custom-colormap-mantidworkbench" id="id9">Custom Colormap (MantidWorkbench)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#plotting-sample-logs" id="id10">Plotting Sample Logs</a></p></li>
<li><p><a class="reference internal" href="#complex-plots" id="id11">Complex plots</a></p></li>
<li><p><a class="reference internal" href="#change-matplotlib-defaults" id="id12">Change Matplotlib Defaults</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>Mantid can now use <a class="reference external" href="https://matplotlib.org/">Matplotlib</a> to produce figures.
There are several advantages of using this software package:</p>
<ul class="simple">
<li><p>it is python based, so it can easily be incorporated into Mantid scripts</p></li>
<li><p>there is a large user community, and therefore excellent documentation and examples are available</p></li>
<li><p>it is easy to change from plotting on the screen to produce publication quality plots in various image formats</p></li>
</ul>
<p>While Matplotlib is using data arrays for inputs in the plotting routines,
it is now possible to also use several types on Mantid workspaces instead.
For a detailed list of functions that use workspaces, see the documentation
of the <a class="reference internal" href="../api/python/mantid/plots/index.html#mantid-plots"><span class="std std-ref">mantid.plots</span></a> module.</p>
<p>This page is intended to provide examples about how to use different
Matplotlib commands for several types of common task that Mantid users are interested in.</p>
<p>To understand the matplotlib vocabulary, a useful tool is the <a class="reference external" href="https://matplotlib.org/examples/showcase/anatomy.html">“anatomy of a figure”</a>, also shown below.</p>
<p>(<a class="reference external" href="../plotting/index-1.py">Source code</a>, <a class="reference external" href="../plotting/index-1.png">png</a>, <a class="reference external" href="../plotting/index-1.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-1.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-1.png" class="plot-directive" src="../_images/index-1.png" />
</figure>
<p>Here are some of the highlights:</p>
<ul class="simple">
<li><p><strong>Figure</strong> is the main container in matplotlib. You can think of it as the page</p></li>
<li><p><strong>Axes</strong> is the coordinate system. It contains most of the figure elements, such as Axis, Line2D, Text.
One can have multiple Axes objects in one Figure</p></li>
<li><p><strong>Axis</strong> is the container for the ticks and labels for the x and y axis of the plot</p></li>
</ul>
</section>
<section id="showing-saving-figures">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Showing/saving figures</a><a class="headerlink" href="#showing-saving-figures" title="Permalink to this heading">¶</a></h2>
<p>There are two main ways that one can visualize images produced by matplotlib. The first one
is to pop up a window with the required graph. For that, we use the <cite>show()</cite> function of the figure.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1">#some code to generate figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>If one wants to save the output, the figure object has a function called <cite>savefig</cite>.
The main argument of savefig is the filename. Matplotlib will figure out the format of the figure
from the file extension. The ‘png’, ‘ps’, ‘eps’, and ‘pdf’ extensions will work with
almost any backend. For more information, see the documentation of
<a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure.savefig">Figure.savefig</a>
Just replace the code above with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c1">#some code to generate figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;plot1.png&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;plot1.eps&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Sometimes one wants to save a multi-page pdf document. Here is how to do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_pdf</span> <span class="kn">import</span> <span class="n">PdfPages</span>

<span class="k">with</span> <span class="n">PdfPages</span><span class="p">(</span><span class="s1">&#39;/home/andrei/Desktop/multipage_pdf.pdf&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pdf</span><span class="p">:</span>
    <span class="c1">#page1</span>
    <span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Page1&#39;</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="c1">#page2</span>
    <span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Page2&#39;</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="simple-plots">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Simple plots</a><a class="headerlink" href="#simple-plots" title="Permalink to this heading">¶</a></h2>
<p>For matrix workspaces, if we use the <cite>mantid</cite> projection, one can plot the data in a similar
fashion as the plotting of arrays in matplotlib. Moreover, one can combine the two in the same figure</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span>

<span class="c1"># Create a workspace that has a Gaussian peak</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y</span> <span class="o">+=</span> <span class="n">err</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">)</span>

<span class="c1"># Plot - note that the projection=&#39;mantid&#39; keyword is passed to all axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;rs&#39;</span><span class="p">)</span> <span class="c1"># plot the workspace with errorbars, using red squares</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="s1">&#39;k-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Initial guess&#39;</span><span class="p">)</span> <span class="c1"># plot the initial guess with black line</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span> <span class="c1"># show the legend</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-2.py">Source code</a>, <a class="reference external" href="../plotting/index-2.png">png</a>, <a class="reference external" href="../plotting/index-2.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-2.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-2.png" class="plot-directive" src="../_images/index-2.png" />
</figure>
<p>Some data should be visualized as two dimensional colormaps</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span><span class="p">,</span> <span class="n">ConvertToMD</span><span class="p">,</span> <span class="n">BinMD</span><span class="p">,</span> <span class="n">ConvertUnits</span><span class="p">,</span> <span class="n">Rebin</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LogNorm</span>

<span class="c1"># generate a nice 2D multi-dimensional workspace</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">ConvertUnits</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">Target</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">EMode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">EFixed</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="s1">&#39;-3,0.025,3&#39;</span><span class="p">,</span> <span class="n">PreserveEvents</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">md</span> <span class="o">=</span> <span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                 <span class="n">QDimensions</span><span class="o">=</span><span class="s1">&#39;|Q|&#39;</span><span class="p">,</span>
                 <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">)</span>
<span class="n">sqw</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">md</span><span class="p">,</span>
            <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;|Q|,0,3,100&#39;</span><span class="p">,</span>
            <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;DeltaE,-3,3,100&#39;</span><span class="p">)</span>

<span class="c1">#2D plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">sqw</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">LogNorm</span><span class="p">())</span>
<span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Intensity (arb. units)&#39;</span><span class="p">)</span> <span class="c1">#add text to colorbar</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-3.py">Source code</a>)</p>
<p>One can then change properties of the plot. Here is an example that
changes the label of the data, changes the label of the x and y axis,
changes the limits for the y axis, adds a title, change tick orientations,
and adds a grid</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span>

<span class="c1"># Create a workspace that has a Gaussian peak</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mf">50.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">10.</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mf">20.</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mf">20.</span><span class="p">)</span>
<span class="n">y</span> <span class="o">+=</span> <span class="n">err</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">)</span>

<span class="c1"># Plot - note that the projection=&#39;mantid&#39; keyword is passed to all axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;rs&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="s1">&#39;k-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Initial guess&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Better energy estimate ($10^3\mu eV$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Neutron counts&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Gaussian example&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-4.py">Source code</a>, <a class="reference external" href="../plotting/index-4.png">png</a>, <a class="reference external" href="../plotting/index-4.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-4.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-4.png" class="plot-directive" src="../_images/index-4.png" />
</figure>
<p>Let’s create now a figure with two panels. In the upper part we show the workspace as
above, but we add a fit, In the bottom part we add the difference.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span><span class="p">,</span> <span class="n">Fit</span>

<span class="c1"># Create a workspace that has a Gaussian peak</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y</span> <span class="o">+=</span> <span class="n">err</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Fit</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s1">&#39;name=LinearBackground,A0=10,A1=0.;name=Gaussian,Height=60.,PeakCentre=10.,Sigma=3.&#39;</span><span class="p">,</span>
             <span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
             <span class="n">Output</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
             <span class="n">OutputCompositeMembers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># The handle to the output workspace is result.OutputWorkspace. The first spectrum is the data,</span>
<span class="c1"># the second is the fit, the third is the difference. Subsequent spectra are the calculated</span>
<span class="c1"># functions of each of the components of the fit (here LinearBackground and Gaussian)</span>
<span class="c1"># Note that the difference spectrum has 0 errors. One can copy the errors from data</span>
<span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="o">.</span><span class="n">setE</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="o">.</span><span class="n">readE</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="c1">#do the plotting</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax_top</span><span class="p">,</span> <span class="n">ax_bottom</span><span class="p">]</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                                        <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                        <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;height_ratios&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]},</span>
                                        <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>

<span class="n">ax_top</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="p">,</span><span class="s1">&#39;rs&#39;</span><span class="p">,</span><span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="p">,</span><span class="s1">&#39;b-&#39;</span><span class="p">,</span><span class="n">wkspIndex</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Fit&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Neutron counts&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>
<span class="n">ax_bottom</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="p">,</span><span class="s1">&#39;ko&#39;</span><span class="p">,</span><span class="n">wkspIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_bottom</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>
<span class="n">ax_bottom</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Difference&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-5.py">Source code</a>, <a class="reference external" href="../plotting/index-5.png">png</a>, <a class="reference external" href="../plotting/index-5.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-5.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-5.png" class="plot-directive" src="../_images/index-5.png" />
</figure>
<p>One can do twin axes as well:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>

<span class="c1"># Create some mock data</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">data1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="n">ws1</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">data1</span><span class="p">,</span><span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;MomentumTransfer&#39;</span><span class="p">)</span>
<span class="n">ws2</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">data2</span><span class="p">,</span><span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;MomentumTransfer&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span><span class="s1">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;exp&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ws2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;sin&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-6.py">Source code</a>, <a class="reference external" href="../plotting/index-6.png">png</a>, <a class="reference external" href="../plotting/index-6.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-6.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-6.png" class="plot-directive" src="../_images/index-6.png" />
</figure>
</section>
<section id="custom-colors">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Custom Colors</a><a class="headerlink" href="#custom-colors" title="Permalink to this heading">¶</a></h2>
<section id="custom-color-cycle-line-1d-plots">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Custom Color Cycle (Line / 1D plots)</a><a class="headerlink" href="#custom-color-cycle-line-1d-plots" title="Permalink to this heading">¶</a></h3>
<p>The Default Color Cycle doesn’t have to be used. Here is an example where a Custom Color Cycle is chosen. Make sure to fill the list <cite>custom_colors</cite> with either the HTML hex codes (eg. #b3457f) or recognised names for the desired colours.
Both can be found <a class="reference external" href="https://www.rapidtables.com/web/color/html-color-codes.html">online</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">ws</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="s1">&#39;GEM40979.raw&#39;</span><span class="p">)</span>
<span class="n">Number</span> <span class="o">=</span> <span class="mi">12</span> <span class="c1"># How many Spectra to Plot</span>

<span class="n">prop_cycle</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.prop_cycle&#39;</span><span class="p">]</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">prop_cycle</span><span class="o">.</span><span class="n">by_key</span><span class="p">()[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="c1"># 10 colors in default cycle</span>

<span class="sd">&#39;&#39;&#39;Change the following two parameters as you wish&#39;&#39;&#39;</span>
<span class="n">custom_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#0000ffff&#39;</span><span class="p">,</span> <span class="s1">&#39;salmon&#39;</span><span class="p">,</span><span class="s1">&#39;#00ff00ff&#39;</span><span class="p">]</span> <span class="c1"># I&#39;ve chosen Blue, Salmon, Green</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Number</span><span class="p">):</span>
   <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">specNum</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Default&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Number</span><span class="p">):</span>
   <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">specNum</span><span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">custom_colors</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">custom_colors</span><span class="p">)])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Custom&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Line Plots: Color Cycle&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;x-large&#39;</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-7.py">Source code</a>)</p>
</section>
<section id="custom-colormap-mantidworkbench">
<span id="id1"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">Custom Colormap (MantidWorkbench)</a><a class="headerlink" href="#custom-colormap-mantidworkbench" title="Permalink to this heading">¶</a></h3>
<p>You can view the premade Colormaps <a class="reference external" href="https://matplotlib.org/2.2.3/gallery/color/colormap_reference.html?highlight=colormap">here</a>.
These Colormaps can be registered and remain for the current session, but need to be rerun if Mantid has been reopened. Choose the location to Save your Colormap file wisely, outside of your MantidInstall folder!</p>
<p>The following methods show how to Load, Convert from MantidPlot format, Create from Scratch and Visualise a Custom Colormap.</p>
<ul class="simple">
<li><p>If you already have a Colormap file in an (N by 4) format, with all values between 0 and 1, then use:</p></li>
</ul>
<p><em>1a. Load Colormap and Register</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span><span class="p">,</span> <span class="n">LinearSegmentedColormap</span>

<span class="n">Cmap_Name</span> <span class="o">=</span> <span class="s1">&#39;Beach&#39;</span> <span class="c1"># Colormap name</span>
<span class="n">Loaded_Cmap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;C:\Path</span><span class="se">\t</span><span class="s2">o\File\Filename.txt&quot;</span><span class="p">)</span>
<span class="c1"># Register the Loaded Colormap</span>
<span class="n">Listed_CustomCmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">Loaded_Cmap</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">Cmap_Name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">Cmap_Name</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span> <span class="n">Listed_CustomCmap</span><span class="p">)</span>

<span class="c1"># Create and register the reverse colormap</span>
<span class="n">Res</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Loaded_Cmap</span><span class="p">)</span>
<span class="n">Reverse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">Res</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Res</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
      <span class="n">Reverse</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">Loaded_Cmap</span><span class="p">[</span><span class="n">Res</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)][</span><span class="n">j</span><span class="p">]</span>

<span class="n">Listed_CustomCmap_r</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">Reverse</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">Cmap_Name</span> <span class="o">+</span> <span class="s1">&#39;_r&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">Cmap_Name</span> <span class="o">+</span> <span class="s1">&#39;_r&#39;</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span> <span class="n">Listed_CustomCmap_r</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If you have a Colormap file in a Mantid format (N by 3) with all values between 0 and 255, firstly <strong>rename the file extension from .map to .txt</strong>, then use:</p></li>
</ul>
<p><em>1b. Convert Mantid Colormap and Register</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span><span class="p">,</span> <span class="n">LinearSegmentedColormap</span>

<span class="n">Cmap_Name</span> <span class="o">=</span> <span class="s1">&#39;Beach&#39;</span>
<span class="n">Loaded_Cmap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;/Path/to/file/Beach.txt&quot;</span><span class="p">)</span>

<span class="n">Res</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Loaded_Cmap</span><span class="p">)</span>
<span class="n">Cmap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">Res</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Res</span><span class="p">):</span>
  <span class="sd">&#39;&#39;&#39;Normalise RGB values, Add 4th column alpha set to 1&#39;&#39;&#39;</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Loaded_Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span> <span class="o">/</span> <span class="mi">255</span>
  <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="sd">&#39;&#39;&#39;Checks all values b/w 0 and 1&#39;&#39;&#39;</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
          <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Values must be between 0 and 1, one of the above is &gt; 1&#39;</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
          <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Values must be between 0 and 1, one of the above is negative&#39;</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="k">pass</span>

<span class="c1">#np.savetxt(&quot;C:\Path\to\File\Filename.txt&quot;,Cmap) #uncomment to save to file</span>

<span class="c1"># Register the Loaded Colormap</span>
<span class="n">Listed_CustomCmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">Cmap</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">Cmap_Name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">Cmap_Name</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span> <span class="n">Listed_CustomCmap</span><span class="p">)</span>

<span class="c1"># Create and register the reverse colormap</span>
<span class="n">Reverse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">Res</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Res</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
      <span class="n">Reverse</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">Cmap</span><span class="p">[</span><span class="n">Res</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)][</span><span class="n">j</span><span class="p">]</span>

<span class="n">Listed_CustomCmap_r</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">Reverse</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">Cmap_Name</span> <span class="o">+</span> <span class="s1">&#39;_r&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">Cmap_Name</span> <span class="o">+</span> <span class="s1">&#39;_r&#39;</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span> <span class="n">Listed_CustomCmap_r</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To Create a Colormap from scratch, use:</p></li>
</ul>
<p><em>1c. Create and Register</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span><span class="p">,</span> <span class="n">LinearSegmentedColormap</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">Cmap_Name</span> <span class="o">=</span> <span class="s1">&#39;Beach&#39;</span> <span class="c1"># Colormap name</span>
<span class="n">Res</span> <span class="o">=</span> <span class="mi">500</span> <span class="c1"># Resolution of your Colormap (number of steps in colormap)</span>

<span class="n">Re</span> <span class="o">=</span> <span class="n">Res</span><span class="o">-</span><span class="mi">1</span>
<span class="n">Cmap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">Res</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Res</span><span class="p">):</span>
  <span class="sd">&#39;&#39;&#39;Input functions inside float(), Divide by Res to normalise&#39;&#39;&#39;</span>
  <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Res</span><span class="p">)</span>   <span class="o">/</span> <span class="n">Res</span>       <span class="c1">#Red   #just 1</span>
  <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>     <span class="o">/</span> <span class="n">Re</span>        <span class="c1">#Green #+ve i divisible by Res-1 = Re</span>
  <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Res</span><span class="o">-</span><span class="n">i</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="n">Res</span><span class="o">**</span><span class="mi">2</span> <span class="c1">#Blue  #Make sure Norm_factor correct</span>
  <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="sd">&#39;&#39;&#39;Checks all values b/w 0 and 1&#39;&#39;&#39;</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
          <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Values must be between 0 and 1, one of the above is &gt; 1&#39;</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="n">Cmap</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
          <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Values must be between 0 and 1, one of the above is Negative&#39;</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="k">pass</span>

<span class="c1">#np.savetxt(&quot;C:\Path\to\File\Filename.txt&quot;,Cmap) #uncomment to save to file</span>

<span class="n">Listed_CustomCmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">Cmap</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="n">Cmap_Name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">Cmap_Name</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="n">Listed_CustomCmap</span><span class="p">)</span>

<span class="c1"># Create and register the reverse colormap</span>
<span class="n">Reverse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">Res</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Res</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
      <span class="n">Reverse</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">Cmap</span><span class="p">[</span><span class="n">Res</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)][</span><span class="n">j</span><span class="p">]</span>

<span class="n">Listed_CustomCmap_r</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">Reverse</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">Cmap_Name</span> <span class="o">+</span> <span class="s1">&#39;_r&#39;</span><span class="p">)</span> <span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">Cmap_Name</span> <span class="o">+</span> <span class="s1">&#39;_r&#39;</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span> <span class="n">Listed_CustomCmap_r</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the Custom Colormap has been registered, right-click on a workspace and produce a colorfill plot. In Figure Options (Gear Icon in Plot Figure), under the Images Tab, you can use the drop down-menu to select the new Colormap, and use the check-box to select its Reverse!</p>
<ul class="simple">
<li><p>Otherwise, use a script like this (from above in Section “Simple Plots”) to plot with your new Colormap:</p></li>
</ul>
<p><em>2. Plot New Colormap</em> (change the “cmap” name in line 12 accordingly)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span><span class="p">,</span> <span class="n">ConvertToMD</span><span class="p">,</span> <span class="n">BinMD</span><span class="p">,</span> <span class="n">ConvertUnits</span><span class="p">,</span> <span class="n">Rebin</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LogNorm</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s1">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">ConvertUnits</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">Target</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">EMode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">EFixed</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="s1">&#39;-3,0.025,3&#39;</span><span class="p">,</span> <span class="n">PreserveEvents</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">md</span> <span class="o">=</span> <span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">QDimensions</span><span class="o">=</span><span class="s1">&#39;|Q|&#39;</span><span class="p">,</span><span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">)</span>
<span class="n">sqw</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">md</span><span class="p">,</span><span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;|Q|,0,3,100&#39;</span><span class="p">,</span><span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;DeltaE,-3,3,100&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">sqw</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Beach&#39;</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">LogNorm</span><span class="p">())</span>
<span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Intensity (arb. units)&#39;</span><span class="p">)</span> <span class="c1">#add text to colorbar</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-8.py">Source code</a>)</p>
<p>Colormaps can also be created with the <a class="reference external" href="https://colormap.readthedocs.io/en/latest/">colormap package</a> or by <a class="reference external" href="https://matplotlib.org/3.1.0/tutorials/colors/colormap-manipulation.html">concatenating existing colormaps</a>.</p>
</section>
</section>
<section id="plotting-sample-logs">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Plotting Sample Logs</a><a class="headerlink" href="#plotting-sample-logs" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../api/python/mantid/plots/index.html#mantid.plots.MantidAxes.plot" title="mantid.plots.MantidAxes.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">mantid.plots.MantidAxes.plot</span></code></a> function can show sample logs. By default,
the time axis represents the time since the first proton charge pulse (the
beginning of the run), but one can also plot absolute time using <cite>FullTime=True</cite></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span>

<span class="n">w</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="s1">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;ChopperStatus5&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;From run start&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;ChopperStatus5&#39;</span><span class="p">,</span><span class="n">FullTime</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Absolute time&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-9.py">Source code</a>)</p>
<p>Note that the parasite axes in matplotlib do not accept the projection keyword.
So one needs to use <a class="reference internal" href="../api/python/mantid/plots/index.html#mantid.plots.axesfunctions.plot" title="mantid.plots.axesfunctions.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">mantid.plots.axesfunctions.plot</span></code></a> instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">mantid.plots.axesfunctions</span> <span class="k">as</span> <span class="nn">axesfuncs</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span>
<span class="n">w</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="s1">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;ChopperStatus5&#39;</span><span class="p">)</span>
<span class="n">axt</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">twiny</span><span class="p">()</span>
<span class="n">axesfuncs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">axt</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;ChopperStatus5&#39;</span><span class="p">,</span> <span class="n">FullTime</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-10.py">Source code</a>)</p>
</section>
<section id="complex-plots">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Complex plots</a><a class="headerlink" href="#complex-plots" title="Permalink to this heading">¶</a></h2>
<p>One common type of a slightly more complex figure involves drawing an inset.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span><span class="p">,</span> <span class="n">FFT</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">250</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mf">1.1</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="mf">7.</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">0.01</span><span class="o">+</span><span class="n">x</span><span class="o">/</span><span class="mf">200.</span><span class="p">)</span>
<span class="n">w</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">err</span><span class="p">,</span><span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;tof&#39;</span><span class="p">)</span>
<span class="n">fft</span><span class="o">=</span><span class="n">FFT</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

<span class="c1"># make all ticks point in</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;in&#39;</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;in&#39;</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;projection&#39;</span><span class="p">:</span><span class="s1">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;ks&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Asymmetry&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.72</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">],</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fft</span><span class="p">,</span><span class="n">specNum</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency (MHz)&#39;</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;|FFT|&#39;</span><span class="p">)</span>
<span class="c1"># note that thight_layout will produce a warning here &quot;This figure includes</span>
<span class="c1"># Axes that are not compatible with tight_layout, so its results might be incorrect.&quot;</span>
<span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">UserWarning</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-11.py">Source code</a>, <a class="reference external" href="../plotting/index-11.png">png</a>, <a class="reference external" href="../plotting/index-11.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-11.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-11.png" class="plot-directive" src="../_images/index-11.png" />
</figure>
<p>Plotting dispersion curves  on multiple panels can also be done using matplotlib:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib.gridspec</span> <span class="kn">import</span> <span class="n">GridSpec</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateMDHistoWorkspace</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>

<span class="c1"># Generate nice (fake) dispersion data</span>
<span class="c1"># Gamma to K</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.333</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">60</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
<span class="n">omega_hh</span> <span class="o">=</span> <span class="mf">20.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">I_hh</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">*</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">signal</span> <span class="o">=</span> <span class="n">I_hh</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">omega_hh</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">signal</span><span class="p">[</span><span class="n">y</span><span class="o">&gt;</span><span class="mi">25</span><span class="o">+</span><span class="mi">100</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">ws1</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                           <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;0,0.3333,0,60&#39;</span><span class="p">,</span>
                           <span class="n">SignalInput</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
                           <span class="n">ErrorInput</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">signal</span><span class="p">),</span>
                           <span class="n">NumberOfBins</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">,</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span>
                           <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;Dim1,Dim2&#39;</span><span class="p">,</span>
                           <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;MomentumTransfer,EnergyTransfer&#39;</span><span class="p">)</span>
<span class="c1"># K to M</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span> <span class="p">(</span><span class="mf">0.333</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
<span class="n">omega_hm2h</span><span class="o">=</span><span class="mf">20.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">0.333</span><span class="p">))</span>
<span class="n">signal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">omega_hm2h</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">signal</span><span class="p">[</span><span class="n">y</span><span class="o">&gt;</span><span class="mi">35</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">ws2</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                           <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;0.3333,0.5,0,60&#39;</span><span class="p">,</span>
                           <span class="n">SignalInput</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
                           <span class="n">ErrorInput</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">signal</span><span class="p">),</span>
                           <span class="n">NumberOfBins</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">,</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span>
                           <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;Dim1,Dim2&#39;</span><span class="p">,</span>
                           <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;MomentumTransfer,EnergyTransfer&#39;</span><span class="p">)</span>


<span class="n">d</span><span class="o">=</span><span class="mf">6.7</span>
<span class="n">a</span><span class="o">=</span><span class="mf">2.454</span>
<span class="c1">#Gamma is (0,0,0)</span>
<span class="c1">#A is (0,0,1/2)</span>
<span class="c1">#K is (1/3,1/3,0)</span>
<span class="c1">#M is (1/2,0,0)</span>
<span class="n">gamma_a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">d</span>
<span class="n">gamma_m</span><span class="o">=</span><span class="mf">2.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.</span><span class="p">)</span><span class="o">/</span><span class="n">a</span>
<span class="n">m_k</span><span class="o">=</span><span class="mf">2.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">a</span>
<span class="n">gamma_k</span><span class="o">=</span><span class="mf">4.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">a</span>

<span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">GridSpec</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
              <span class="n">width_ratios</span><span class="o">=</span><span class="p">[</span><span class="n">gamma_k</span><span class="p">,</span><span class="n">m_k</span><span class="p">,</span><span class="n">gamma_m</span><span class="p">,</span><span class="n">gamma_a</span><span class="p">],</span>
              <span class="n">wspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ws1</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ws2</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">17.</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>


<span class="c1">#Adjust plotting parameters</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;E (meV)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">40.</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$[\epsilon,\epsilon,0], 0 \leq \epsilon \leq 1/3$&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;$\Gamma$&#39;</span><span class="p">,</span><span class="s1">&#39;$K$&#39;</span><span class="p">])</span>
<span class="c1">#ax1.spines[&#39;right&#39;].set_visible(False)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$[1/3+\epsilon,1/3-2\epsilon,0], 0 \leq \epsilon \leq 1/6$&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;$M$&#39;</span><span class="p">])</span>
<span class="c1">#ax2.spines[&#39;left&#39;].set_visible(False)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>

<span class="c1">#invert axis</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$[\epsilon,0,0], 1/2 \geq \epsilon \geq 0$&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;$\Gamma$&#39;</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>

<span class="n">ax4</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$[0,0,\epsilon], 0 \leq \epsilon \leq 1/2$&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;$A$&#39;</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-12.py">Source code</a>, <a class="reference external" href="../plotting/index-12.png">png</a>, <a class="reference external" href="../plotting/index-12.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-12.pdf">pdf</a>)</p>
<figure class="align-default">
<img alt="../_images/index-12.png" class="plot-directive" src="../_images/index-12.png" />
</figure>
</section>
<section id="change-matplotlib-defaults">
<span id="mpldefaults"></span><h2><a class="toc-backref" href="#id12" role="doc-backlink">Change Matplotlib Defaults</a><a class="headerlink" href="#change-matplotlib-defaults" title="Permalink to this heading">¶</a></h2>
<p>It is possible to alter the default appearance of Matplotlib plots, e.g. linewidths, label sizes,
colour cycles etc. This is most readily achieved by setting the <code class="docutils literal notranslate"><span class="pre">rcParams</span></code> at the start of a
Mantid Workbench session. The example below shows a plot with the default line width, followed be resetting the parameters with <code class="docutils literal notranslate"><span class="pre">rcParams</span></code>. An example with many of the
editable parameters is available at <a class="reference external" href="https://matplotlib.org/users/customizing.html">the Matplotlib site</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Set up the data</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">offsets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Create array with shifted-sine curve along each column</span>
<span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">phi</span><span class="p">)</span> <span class="k">for</span> <span class="n">phi</span> <span class="ow">in</span> <span class="n">offsets</span><span class="p">])</span>
<span class="c1"># Plot the data</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yy</span><span class="p">)</span>

<span class="c1">## Reset the parameters</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.facecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">)</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;grid.linestyle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;--&#39;</span>
<span class="c1"># Plot the data</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yy</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-13.py">Source code</a>)</p>
<figure class="align-default" id="id2">
<img alt="../_images/index-13_00.png" class="plot-directive" src="../_images/index-13_00.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href="../plotting/index-13_00.png">png</a>, <a class="reference external" href="../plotting/index-13_00.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-13_00.pdf">pdf</a>)</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="../_images/index-13_01.png" class="plot-directive" src="../_images/index-13_01.png" />
<figcaption>
<p><span class="caption-text">(<a class="reference external" href="../plotting/index-13_01.png">png</a>, <a class="reference external" href="../plotting/index-13_01.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-13_01.pdf">pdf</a>)</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>For much more on customising the graph appearance see the <a class="reference external" href="https://matplotlib.org/users/dflt_style_changes.html">Matplotlib documentation</a>.</p>
<p>A list of some common properties you might want to change and the keywords to set:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Parameter</p></td>
<td><p>Keyword</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>Error bar cap</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">errorbar.capsize</span></code></p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Line width</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">lines.linewidth</span></code></p></td>
<td><p>1.25</p></td>
</tr>
<tr class="row-even"><td><p>Grid on/off</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">axes.grid</span></code></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p>Ticklabel size</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">xtick.labelsize</span></code>
<code class="docutils literal notranslate"><span class="pre">ytick.labelsize</span></code></p></td>
<td><p>medium</p></td>
</tr>
<tr class="row-even"><td><p>Minor ticks on/off</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">xtick.minor.visible</span></code>
<code class="docutils literal notranslate"><span class="pre">ytick.minor.visible</span></code></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p>Face colour</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">axes.facecolor</span></code></p></td>
<td><p>white</p></td>
</tr>
<tr class="row-even"><td><p>Font type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">font.family</span></code></p></td>
<td><p>sans-serif</p></td>
</tr>
</tbody>
</table>
<p>A much fuller list of properties is avialble <a class="reference external" href="https://matplotlib.org/users/customizing.html">in the Matplotlib documentation</a>.</p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="../api/python/changes.html" title="Previous Chapter: <no title>"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; <no title></span>
    </a>
  </li>
  <li>
    <a href="1DPlotsHelp.html" title="Next Chapter: Basic 1D and Tiled Plots"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Basic 1D and ... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>