<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Introduction</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tube Calibration Introduction" href="TubeCalibrationIntroduction.html" />
    <link rel="prev" title="Corelli Tube Calibration" href="TubeCalibrationCorelli.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Concepts</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Calibration</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Introduction</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="introduction">
<span id="tube-calibration-examples"></span><h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h1>
<p>You will find lots of examples to run the calibration tool inside the
<strong>MANTIDINSTALL</strong>/scripts/Calibration/Examples folder (<a class="reference external" href="https://github.com/mantidproject/mantid/tree/master/scripts/Calibration/Examples">github
link</a>).
Where <strong>MANTIDINSTALL</strong> usually points to C:/MandtidInstall on Windows
machines and to /opt/Mantid on linux machines.</p>
<p>The examples shows how the calibration tools available in Mantid can be
used to calibrate three different real instruments inside ISIS facility
(<a class="reference external" href="http://www.isis.stfc.ac.uk/instruments/merlin/">MERLIN</a>,
<a class="reference external" href="http://www.isis.stfc.ac.uk/instruments/maps/">MAPS</a> and
<a class="reference external" href="http://www.isis.stfc.ac.uk/instruments/wish/">WISH</a>). There is also
a presentation about the tube calibration where you may also find
interesting examples on how to use the calibration tools
(<a class="reference external" href="http://www.mantidproject.org/images/b/bc/Tube_Calibration.pdf">Tube_Calibration.pdf</a>).</p>
<p>In what follows, it will be shown how you can use some of these
examples. Mantid needs to know where the files are in order to execute
these examples. For Merlin the examples uses the run 12024 found in
cycle_11_5, for MAPS the run 14919 in cycle_09_05, for WISH the run
17701 in cycle_11_1.</p>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<section id="running-tubecalibdemowish-simple-py">
<h3>Running TubeCalibDemoWish_Simple.py<a class="headerlink" href="#running-tubecalibdemowish-simple-py" title="Permalink to this heading">¶</a></h3>
<a class="reference internal image-reference" href="../../_images/MultipleScriptsZoomed.png"><img alt="center" src="../../_images/MultipleScriptsZoomed.png" style="width: 300px;" /></a>
<p>In MantidWorkbench write the following lines in a new script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">Examples</span> <span class="kn">import</span> <span class="n">TubeCalibDemoWish_Simple</span> <span class="k">as</span> <span class="n">wish</span>
<span class="n">wish</span><span class="o">.</span><span class="n">CalibrateWish</span><span class="p">(</span><span class="mi">17701</span><span class="p">,</span> <span class="s1">&#39;03&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The results are, uncalibrated WISH panel 03:</p>
<img alt="../../_images/UncalibratedWish.png" src="../../_images/UncalibratedWish.png" />
<p>Calibrated panel 03:</p>
<img alt="../../_images/CalibratedWish.png" src="../../_images/CalibratedWish.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These images were taken from the InstrumentView having
<em>Autoscaling</em> enabled, <em>ColorMap</em> set to Log10 and using the
<em>Cylindrical Y</em> perspective.</p>
</div>
</section>
<section id="running-tubecalibdemomaps-all-py">
<h3>Running TubeCalibDemoMaps_All.py<a class="headerlink" href="#running-tubecalibdemomaps-all-py" title="Permalink to this heading">¶</a></h3>
<p>Write the following lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">Examples</span> <span class="kn">import</span> <span class="n">TubeCalibDemoMaps_All</span> <span class="k">as</span> <span class="n">maps</span>
</pre></div>
</div>
<p>TubeCalibDemoMaps_All defines 8 examples. It shows how the tube
calibration was used to improve the calibration of MAPS going from a
simple example, to the investigation on how to improve the results till
a final example.</p>
<p>If you open the whole file, you will have to uncomment the example that
you want to execute and them Menu-&gt;Execute-&gt;Execute_All.</p>
<p>If you are writing the script, them you can select the examples by
calling the functions as in the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">Examples</span> <span class="kn">import</span> <span class="n">TubeCalibDemoMaps_All</span> <span class="k">as</span> <span class="n">maps</span>
<span class="n">maps</span><span class="o">.</span><span class="n">calibrateB2Window</span><span class="p">(</span><span class="s1">&#39;MAP14919.raw&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The results are, Uncalibrated MAPS B2 window (lower part) instrument:</p>
<a class="reference internal image-reference" href="../../_images/UncalibratedMAPS.png"><img alt="../../_images/UncalibratedMAPS.png" src="../../_images/UncalibratedMAPS.png" style="width: 500px;" /></a>
<p>Calibrated MAPS B2 window:</p>
<a class="reference internal image-reference" href="../../_images/CalibratedMAPS.png"><img alt="../../_images/CalibratedMAPS.png" src="../../_images/CalibratedMAPS.png" style="width: 500px;" /></a>
</section>
<section id="running-tubecalibdemomerlin-py">
<h3>Running TubeCalibDemoMerlin.py<a class="headerlink" href="#running-tubecalibdemomerlin-py" title="Permalink to this heading">¶</a></h3>
<p>MERLIN instruments are loaded with already calibrated values. The
calibration works nicely with these files, but if you want to see the
uncalibrated file you can do it. Look at <a class="reference internal" href="../Howtoresetdetectorscalibration.html#how-to-reset-detectors-calibration"><span class="std std-ref">How to reset detectors
calibration</span></a>.</p>
<p>Open file scripts/Calibration/Examples/TubeCalibDemoMerlin.py on Script
Window Console or, alternatively, write the following lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">Examples</span> <span class="kn">import</span> <span class="n">TubeCalibDemoMerlin</span> <span class="k">as</span> <span class="n">mer</span>
<span class="n">mer</span><span class="o">.</span><span class="n">calibrateMerlin</span><span class="p">(</span><span class="s1">&#39;MER12024.raw&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The results are, Uncalibrated MERLIN instrument:</p>
<img alt="../../_images/UncalibratedMerlin.png" src="../../_images/UncalibratedMerlin.png" />
<p>Calibrated MERLIN instrument:</p>
<a class="reference internal image-reference" href="../../_images/calibratedMantidMerlin.png"><img alt="../../_images/calibratedMantidMerlin.png" src="../../_images/calibratedMantidMerlin.png" style="width: 500px;" /></a>
</section>
<section id="running-tubecalibdemowish-5panels-py">
<h3>Running TubeCalibDemoWish_5panels.py<a class="headerlink" href="#running-tubecalibdemowish-5panels-py" title="Permalink to this heading">¶</a></h3>
<p>This example extends the work presented for the calibration of a single
panel in WISH to 5 panels.</p>
<p>To execute it, open the TubeCalibDemoWish_5panels.py inside mantid and
run it. The data files were collected in the cycle_11_1.</p>
<p>It uses the python feature of kwargs to selectively pass parameters to
the calibrate function and in this way append the calibration data for
the panels.</p>
<p>The picture below show part of two panels that result from the
calibration (they are rotated):</p>
<a class="reference internal image-reference" href="../../_images/CalibratedWish5Panels.jpg"><img alt="../../_images/CalibratedWish5Panels.jpg" src="../../_images/CalibratedWish5Panels.jpg" style="width: 800px;" /></a>
<p><strong>Category</strong>: <a class="reference external" href="../categories/Calibration.html">Calibration</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="TubeCalibrationCorelli.html" title="Previous Chapter: Corelli Tube Calibration"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Corelli Tube ...</span>
    </a>
  </li>
  <li>
    <a href="TubeCalibrationIntroduction.html" title="Next Chapter: Tube Calibration Introduction"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Tube Calibrat... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>