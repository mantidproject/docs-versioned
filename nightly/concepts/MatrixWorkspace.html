<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Matrix Workspace</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="McStas - A neutron ray-trace simulation package" href="McStas.html" />
    <link rel="prev" title="Materials" href="Materials.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Concepts</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Matrix Workspace</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="matrix-workspace">
<span id="matrixworkspace"></span><h1>Matrix Workspace<a class="headerlink" href="#matrix-workspace" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#what-information-is-in-a-matrix-workspace" id="id1">What information is in a Matrix Workspace</a></p></li>
<li><p><a class="reference internal" href="#working-with-matrix-workspaces-in-python" id="id2">Working with Matrix Workspaces in Python</a></p>
<ul>
<li><p><a class="reference internal" href="#accessing-workspaces" id="id3">Accessing Workspaces</a></p></li>
<li><p><a class="reference internal" href="#matrix-workspace-properties" id="id4">Matrix Workspace Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#instrument" id="id5">Instrument</a></p></li>
<li><p><a class="reference internal" href="#run-to-access-logs-and-other-run-information" id="id6">Run - to access logs, and other run information</a></p></li>
<li><p><a class="reference internal" href="#axes" id="id7">Axes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#matrix-workspace-operations" id="id8">Matrix Workspace Operations</a></p></li>
<li><p><a class="reference internal" href="#accessing-data" id="id9">Accessing Data</a></p></li>
<li><p><a class="reference internal" href="#workspace-algebra" id="id10">Workspace algebra</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#other-information-on-workspaces" id="id11">Other Information on Workspaces</a></p></li>
</ul>
</nav>
<p>A Matrix Workspace is a generic name for a family which contains measured (or derived) data (Y) with associated errors (E) and an axis (X) giving information about where the the measurement was made. The Matrix Workspace forms a 2D structure, more details on this will be provided below. This is the most common structure for storing data in  Mantid. This covers several more detailed workspace types including:</p>
<ul class="simple">
<li><p><a class="reference internal" href="Workspace2D.html#workspace2d"><span class="std std-ref">Workspace2D</span></a> - A workspace for holding 2D, acuumulated data in memory, this is the most commonly used to store histograms.</p></li>
<li><p><a class="reference internal" href="EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a> - A workspace that retains the individual neutron event data.</p></li>
</ul>
<section id="what-information-is-in-a-matrix-workspace">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">What information is in a Matrix Workspace</a><a class="headerlink" href="#what-information-is-in-a-matrix-workspace" title="Permalink to this heading">¶</a></h2>
<p>All Matrix Workspaces contain one or more rows of data. A single row is formed of a set of arrays (Y, E, X). For example, the output of a single detector in a white-beam measuring wavelength would form a single row. In this scenario The x-axis (or “horizontal axis”) has units of length for wavelength, and Y would be the counts at each wavelength. The rows may have no correlation to each other. However, they are usually marked and sorted by some other attribute, such as detector number, or scattering angle. We call this row axis the “vertical axis”. Axis have <a class="reference internal" href="UnitFactory.html#unit-factory"><span class="std std-ref">Units</span></a>.</p>
<p>Also they may contain:</p>
<ul class="simple">
<li><p><a class="reference internal" href="Sample.html#sample"><span class="std std-ref">Sample</span></a> and sample environment data</p></li>
<li><p><a class="reference internal" href="Run.html#run"><span class="std std-ref">Run</span></a> logs</p></li>
<li><p>Usable geometry may be present, for example to determine the position of each detector, see <a class="reference internal" href="InstrumentAccessLayers.html#instrumentaccesslayers"><span class="std std-ref">here</span></a> for more information</p></li>
<li><p>Spectra - detector mapping, and other spectra level information see <a class="reference internal" href="InstrumentAccessLayers.html#instrumentaccesslayers"><span class="std std-ref">here</span></a>.</p></li>
<li><p><a class="reference internal" href="HistogramData.html#histogramdata"><span class="std std-ref">Histogram</span></a> information</p></li>
<li><p>A list of ‘masked’ bins</p></li>
</ul>
</section>
<section id="working-with-matrix-workspaces-in-python">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Working with Matrix Workspaces in Python</a><a class="headerlink" href="#working-with-matrix-workspaces-in-python" title="Permalink to this heading">¶</a></h2>
<p>As alluded to above, Matrix Workspace is an abstraction. Matrix Workspace provides access to the majority of the common information for all 2D workspaces in its family, without needing to know all the details of how that data is actually stored.</p>
<p>Matrix Workspaces have all the data and operations of the base <a class="reference internal" href="Workspace.html#workspace"><span class="std std-ref">Workspace</span></a> class, but add operations to access the 2D data itself a useful way.</p>
<p>You can look at the <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid-api-matrixworkspace"><span class="std std-ref">Matrix Workspace API reference</span></a> for a full list of properties and operations, but here are some of the key ones.</p>
<section id="accessing-workspaces">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Accessing Workspaces</a><a class="headerlink" href="#accessing-workspaces" title="Permalink to this heading">¶</a></h3>
<p>The methods for getting a variable to a Matrix Workspace is the same as shown in the <a class="reference internal" href="WorkingWithWorspaces.html#workspace-accessing-workspaces"><span class="std std-ref">Workspace</span></a> help page.</p>
<p>If you want to check if a variable points to something that is a Matrix Workspace you can use this:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">MatrixWorkspace</span>

<span class="n">histoWS</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">WorkspaceType</span><span class="o">=</span><span class="s2">&quot;Histogram&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">histoWS</span><span class="p">,</span> <span class="n">MatrixWorkspace</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">histoWS</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; is a &quot;</span> <span class="o">+</span> <span class="n">histoWS</span><span class="o">.</span><span class="n">id</span><span class="p">()</span> <span class="o">+</span> \
             <span class="s2">&quot; and can be treated as a Matrix Workspace&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">For more Matrix Workspace types&quot;</span><span class="p">)</span>
<span class="n">eventWS</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">WorkspaceType</span><span class="o">=</span><span class="s2">&quot;Event&quot;</span><span class="p">)</span>
<span class="n">svWS</span> <span class="o">=</span> <span class="n">CreateSingleValuedWorkspace</span><span class="p">()</span>
<span class="n">tableWS</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">()</span>
<span class="n">groupWS</span> <span class="o">=</span> <span class="n">GroupWorkspaces</span><span class="p">(</span><span class="s2">&quot;histoWS,eventWS&quot;</span><span class="p">)</span>
<span class="n">mdWS</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-10,10,-10,10,-10,10&#39;</span><span class="p">,</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A,B,C&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U,U,U&#39;</span><span class="p">)</span>
<span class="n">mdHistoWS</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-3,3,-10,10&#39;</span><span class="p">,</span><span class="n">SignalInput</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">ErrorInput</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span>\
                           <span class="n">NumberOfBins</span><span class="o">=</span><span class="s1">&#39;10,10&#39;</span><span class="p">,</span><span class="n">Names</span><span class="o">=</span><span class="s1">&#39;Dim1,Dim2&#39;</span><span class="p">,</span><span class="n">Units</span><span class="o">=</span><span class="s1">&#39;MomentumTransfer,EnergyTransfer&#39;</span><span class="p">)</span>

<span class="n">myWorkspaceList</span> <span class="o">=</span> <span class="p">[</span><span class="n">histoWS</span><span class="p">,</span><span class="n">eventWS</span><span class="p">,</span><span class="n">svWS</span><span class="p">,</span><span class="n">tableWS</span><span class="p">,</span><span class="n">mdWS</span><span class="p">,</span><span class="n">mdHistoWS</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is Matrix Workspace?</span><span class="se">\t</span><span class="s2">Type&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ws</span> <span class="ow">in</span> <span class="n">myWorkspaceList</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0}</span><span class="se">\t</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MatrixWorkspace</span><span class="p">),</span> <span class="n">ws</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>histoWS is a Workspace2D and can be treated as a Matrix Workspace

For more Matrix Workspace types
Is Matrix Workspace? Type
True        Workspace2D
True        EventWorkspace
True        WorkspaceSingleValue
False       TableWorkspace
False       MDEventWorkspace&lt;MDLeanEvent,3&gt;
False       MDHistoWorkspace
</pre></div>
</div>
</section>
<section id="matrix-workspace-properties">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Matrix Workspace Properties</a><a class="headerlink" href="#matrix-workspace-properties" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To find out the number of histograms in a workspace use getNumberHistograms()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of histograms = </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>

<span class="c1"># To find out the number of bins along the x-axis use blocksize()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of bins = </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="c1"># To find out the bin containing a value use yIndexOfX()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;bin index containing 502.2 for a histogram (0 by default) = </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">yIndexOfX</span><span class="p">(</span><span class="mf">502.2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;bin index containing 997.1 for histogram 272 = </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">yIndexOfX</span><span class="p">(</span><span class="mf">997.1</span><span class="p">,</span><span class="mi">272</span><span class="p">)))</span>

<span class="c1"># To find a workspace index from a spectrum number</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;workspace index for histogram 272 = </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getIndexFromSpectrumNumber</span><span class="p">(</span><span class="mi">272</span><span class="p">)))</span>
<span class="c1"># To get the Run Number use getRunNumber()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;run number = </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getRunNumber</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>number of histograms = 922
number of bins = 2663
bin index containing 502.2 for a histogram (0 by default) = 19
bin index containing 997.1 for histogram 272 = 39
workspace index for histogram 272 = 271
run number = 11015
</pre></div>
</div>
<section id="instrument">
<h4><a class="toc-backref" href="#id5" role="doc-backlink">Instrument</a><a class="headerlink" href="#instrument" title="Permalink to this heading">¶</a></h4>
<p>You can get access to the <a class="reference internal" href="Instrument.html#instrument"><span class="std std-ref">Instrument</span></a> for a workspace with</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">instrument</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
</pre></div>
</div>
<p>For the properties and operations of the instrument look at the <a class="reference internal" href="Instrument.html#instrument"><span class="std std-ref">Instrument help</span></a>.</p>
</section>
<section id="run-to-access-logs-and-other-run-information">
<h4><a class="toc-backref" href="#id6" role="doc-backlink">Run - to access logs, and other run information</a><a class="headerlink" href="#run-to-access-logs-and-other-run-information" title="Permalink to this heading">¶</a></h4>
<p>You can get access to the <a class="reference internal" href="Run.html#run"><span class="std std-ref">Run</span></a> for a workspace with</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span>
</pre></div>
</div>
<p>For the properties and operations of the run object and how to access log data look at the <a class="reference internal" href="Run.html#run"><span class="std std-ref">Run help</span></a>.</p>
</section>
<section id="axes">
<h4><a class="toc-backref" href="#id7" role="doc-backlink">Axes</a><a class="headerlink" href="#axes" title="Permalink to this heading">¶</a></h4>
<p>Axes are used primarily for labeling plots, but are also used as validation criteria for several algorithms.
You can list out the axes of a workspace using the following code.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateSampleWorkspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">axes</span><span class="p">()):</span>
    <span class="n">axis</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Axis </span><span class="si">{0}</span><span class="s2"> is a </span><span class="si">{1}{2}{3}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span>
                                           <span class="s2">&quot;Spectrum Axis&quot;</span> <span class="k">if</span> <span class="n">axis</span><span class="o">.</span><span class="n">isSpectra</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                           <span class="s2">&quot;Text Axis&quot;</span> <span class="k">if</span> <span class="n">axis</span><span class="o">.</span><span class="n">isText</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                                           <span class="s2">&quot;Numeric Axis&quot;</span> <span class="k">if</span> <span class="n">axis</span><span class="o">.</span><span class="n">isNumeric</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

    <span class="n">unit</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> caption:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">caption</span><span class="p">()))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> symbol:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">symbol</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Axis 0 is a Numeric Axis
   caption:Time-of-flight
   symbol:microsecond
Axis 1 is a Spectrum Axis
   caption:Spectrum
   symbol:
</pre></div>
</div>
<p><strong>Setting the axisLabel</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateSampleWorkspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">axis</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Create a new axis</span>
<span class="n">axis</span><span class="o">.</span><span class="n">setUnit</span><span class="p">(</span><span class="s2">&quot;Label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;Temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">)</span>

<span class="n">unit</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New caption:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">caption</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New symbol:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">symbol</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>New caption:Temperature
New symbol:K
</pre></div>
</div>
<p><strong>Replacing the Axis</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">NumericAxis</span>

<span class="n">axis</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">unit</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Old caption:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">caption</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Old symbol:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">symbol</span><span class="p">()))</span>

<span class="c1"># Create a new axis</span>
<span class="n">newAxis</span> <span class="o">=</span> <span class="n">NumericAxis</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())</span>
<span class="n">newAxis</span><span class="o">.</span><span class="n">setUnit</span><span class="p">(</span><span class="s2">&quot;Label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;Temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">)</span>

<span class="c1"># Set the vertical axis values</span>
<span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()):</span>
    <span class="n">tempValue</span> <span class="o">=</span> <span class="n">idx</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="mi">25</span> <span class="c1"># some made up value</span>
    <span class="n">newAxis</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">tempValue</span><span class="p">)</span>

<span class="c1"># Replace axis 1 with the new axis</span>
<span class="n">ws</span><span class="o">.</span><span class="n">replaceAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">newAxis</span><span class="p">)</span>

<span class="n">axis</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">unit</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New caption:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">caption</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New symbol:</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit</span><span class="o">.</span><span class="n">symbol</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New values: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">axis</span><span class="o">.</span><span class="n">extractValues</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Old caption:Spectrum
Old symbol:
New caption:Temperature
New symbol:K
New values: [ 25. 28. ... 2785. 2788.]
</pre></div>
</div>
<p><strong>Setting the Y Label</strong></p>
<figure class="align-right">
<img alt="PlotMatrixWorkspaceYUnitElephants.png" src="../_images/PlotMatrixWorkspaceYUnitElephants.png" />
</figure>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">YUnitLabel</span><span class="p">())</span>
<span class="n">ws</span><span class="o">.</span><span class="n">setYUnitLabel</span><span class="p">(</span><span class="s2">&quot;Elephants&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">YUnitLabel</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Counts
Elephants
</pre></div>
</div>
</section>
</section>
<section id="matrix-workspace-operations">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Matrix Workspace Operations</a><a class="headerlink" href="#matrix-workspace-operations" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># To create a copy of a workspace</span>
<span class="n">wsClone</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
<span class="c1"># or</span>
<span class="n">wsClone</span> <span class="o">=</span> <span class="n">CloneWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>

<span class="c1"># To check if two variables point to the same workspace</span>
<span class="k">if</span> <span class="n">ws</span> <span class="o">==</span> <span class="n">wsClone</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;They are the same workspace&quot;</span><span class="p">)</span>

<span class="c1"># To check if two workspaces have equal values</span>
<span class="k">if</span> <span class="n">ws</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">wsClone</span><span class="p">,</span> <span class="n">tolerance</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;They have the same data&quot;</span><span class="p">)</span>

<span class="c1"># To create a copy of a workspace</span>
<span class="n">wsWavelength</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">convertUnits</span><span class="p">(</span><span class="n">Target</span><span class="o">=</span><span class="s2">&quot;Wavelength&quot;</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">wsWavelength</span> <span class="o">=</span> <span class="n">ConvertUnits</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">Target</span><span class="o">=</span><span class="s2">&quot;Wavelength&quot;</span><span class="p">)</span>

<span class="c1"># To rebin the workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">rebin</span><span class="p">(</span><span class="n">Params</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Params</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>

<span class="c1"># Mask detectors or spectra (or use the MaskDetectors algorithm</span>
<span class="n">ws</span><span class="o">.</span><span class="n">maskDetectors</span><span class="p">(</span><span class="n">SpectraList</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">ws</span><span class="o">.</span><span class="n">maskDetectors</span><span class="p">(</span><span class="n">WorkspaceIndexList</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="mi">105</span><span class="p">))</span>
<span class="n">ws</span><span class="o">.</span><span class="n">maskDetectors</span><span class="p">(</span><span class="n">DetectorList</span><span class="o">=</span><span class="p">[</span><span class="mi">150</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">170</span><span class="p">])</span>

<span class="c1"># To delete the workspace</span>
<span class="n">ws</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="c1"># or</span>
<span class="n">DeleteWorkspace</span><span class="p">(</span><span class="n">wsClone</span><span class="p">)</span>
<span class="c1"># Do not access the python variable again as you will get a RuntimeError</span>
<span class="c1"># e.g. RuntimeError: Variable invalidated, data has been deleted.</span>
</pre></div>
</div>
</section>
<section id="accessing-data">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Accessing Data</a><a class="headerlink" href="#accessing-data" title="Permalink to this heading">¶</a></h3>
<p>A Matrix Workspace is essentially a 2D list of binned data where a workspace index, starting at 0, gives access to the data fields in each spectra.</p>
<p>The data is accessed using the <code class="docutils literal notranslate"><span class="pre">readX()</span></code>, <code class="docutils literal notranslate"><span class="pre">readY()</span></code> and <code class="docutils literal notranslate"><span class="pre">readE()</span></code> commands. Each of these commands takes a number that refers to the index on the workspace and returns a list of the data for that workspace index, i.e</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the Y vector for the second row of data</span>
<span class="n">y_data2</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">y_data2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Or in loop access. Print the first value in all spectra</span>
<span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()):</span>
    <span class="c1">#Note the round brackets followed by the square brackets</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="n">index</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>There are more examples how to <a class="reference internal" href="../tutorials/python_in_mantid/further_alg_ws/07_extract_manipulate_data.html#extract-manipulate-data"><span class="std std-ref">Extract and manipulate workspace data here</span></a>.</p>
</section>
<section id="workspace-algebra">
<span id="matrixworkspace-algebra"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">Workspace algebra</a><a class="headerlink" href="#workspace-algebra" title="Permalink to this heading">¶</a></h3>
<p>Matrix Workspaces can have algebraic operations applied to them directly without the need to call a specific algorithm, e.g. <a class="reference internal" href="../algorithms/Plus-v1.html#algm-plus"><span class="std std-ref">Plus</span></a></p>
<p>The expected operations of +,-,*,/ are supported with either a single number or another workspace as the second argument, e.g.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">w1</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;workspace1&#39;</span><span class="p">]</span>
<span class="n">w2</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;workspace2&#39;</span><span class="p">]</span>

<span class="c1"># Sum the two workspaces and place the output into a third</span>
<span class="n">w3</span> <span class="o">=</span> <span class="n">w1</span> <span class="o">+</span> <span class="n">w2</span>

<span class="c1"># Multiply the new workspace by 2 and place the output into a new workspace</span>
<span class="n">w4</span> <span class="o">=</span> <span class="n">w3</span> <span class="o">*</span> <span class="mi">2</span>
</pre></div>
</div>
<p>It is also possible to replace one of the input workspaces using one of +=,-=,*=,/= e.g.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Multiply a workspace by 2 and replace w1 with the output</span>
<span class="n">w1</span> <span class="o">*=</span> <span class="mf">2.0</span>

<span class="c1"># Add &#39;workspace2&#39; to &#39;workspace1&#39; and replace &#39;workspace1&#39; with the output</span>
<span class="n">w1</span> <span class="o">+=</span> <span class="n">w2</span>
</pre></div>
</div>
</section>
</section>
<section id="other-information-on-workspaces">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Other Information on Workspaces</a><a class="headerlink" href="#other-information-on-workspaces" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="Workspace.html#workspace"><span class="std std-ref">Workspace</span></a> - Overview of workspaces, which include the following classes:</dt><dd><ul>
<li><p><a class="reference internal" href="#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> - A base class that contains
among others:</p>
<ul>
<li><p>WorkspaceSingleValue - Holds a single number (and X &amp; error value,
if desired). Mainly used for workspace algebra, e.g. to divide all
bins in a 2D workspace by a single value.</p></li>
<li><p><a class="reference internal" href="Workspace2D.html#workspace2d"><span class="std std-ref">Workspace2D</span></a> - A workspace for holding two
dimensional data in memory, this is the most commonly used
workspace.</p></li>
<li><p><a class="reference internal" href="EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a> - A workspace that retains the
individual neutron event data.</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> - A workspace holding data in
rows of columns having a particular type (e.g. text, integer, …).</p></li>
<li><p><a class="reference internal" href="WorkspaceGroup.html#workspacegroup"><span class="std std-ref">WorkspaceGroup</span></a> - A container for a collection of
workspaces. Algorithms given a group as input run sequentially on
each member of the group.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Category</strong>: <a class="reference external" href="../api/python/mantid/api/categories/Concepts.html">Concepts</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Materials.html" title="Previous Chapter: Materials"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Materials</span>
    </a>
  </li>
  <li>
    <a href="McStas.html" title="Next Chapter: McStas - A neutron ray-trace simulation package"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">McStas - A ne... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>