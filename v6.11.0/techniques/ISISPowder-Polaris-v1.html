<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ISIS Powder Diffraction Scripts - POLARIS Reference</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=06de18c4"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ISIS Powder Diffraction Scripts - SampleDetails Reference" href="ISISPowder-SampleDetails-v1.html" />
    <link rel="prev" title="ISIS Powder Diffraction Scripts - PEARL Reference" href="ISISPowder-Pearl-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.11</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Techniques</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ISIS Powder Diffraction Scripts - POLARIS Reference</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="isis-powder-diffraction-scripts-polaris-reference">
<span id="isis-powder-diffraction-polaris-ref"></span><h1>ISIS Powder Diffraction Scripts - POLARIS Reference<a class="headerlink" href="#isis-powder-diffraction-scripts-polaris-reference" title="Link to this heading">Â¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#creating-polaris-object" id="id9">Creating POLARIS Object</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id10">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#methods" id="id11">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#create-vanadium" id="id12">create_vanadium</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id13">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#focus" id="id14">focus</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id15">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#set-sample" id="id16">set_sample</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id17">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#create-total-scattering-pdf" id="id18">create_total_scattering_pdf</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id19">Example</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#calibration-mapping-file" id="id20">Calibration Mapping File</a></p>
<ul>
<li><p><a class="reference internal" href="#id6" id="id21">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id22">Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#calibration-directory" id="id23">calibration_directory</a></p></li>
<li><p><a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref" id="id24">calibration_mapping_file</a></p></li>
<li><p><a class="reference internal" href="#mode" id="id25">mode</a></p></li>
<li><p><a class="reference internal" href="#config-file" id="id26">config_file</a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections" id="id27">do_absorb_corrections</a></p></li>
<li><p><a class="reference internal" href="#do-van-normalisation" id="id28">do_van_normalisation</a></p></li>
<li><p><a class="reference internal" href="#van-normalisation-method" id="id29">van_normalisation_method</a></p></li>
<li><p><a class="reference internal" href="#empty-can-subtraction-method" id="id30">empty_can_subtraction_method</a></p></li>
<li><p><a class="reference internal" href="#file-ext" id="id31">file_ext</a></p></li>
<li><p><a class="reference internal" href="#first-cycle-run-no" id="id32">first_cycle_run_no</a></p></li>
<li><p><a class="reference internal" href="#input-mode" id="id33">input_mode</a></p></li>
<li><p><a class="reference internal" href="#multiple-scattering" id="id34">multiple_scattering</a></p></li>
<li><p><a class="reference internal" href="#output-directory" id="id35">output_directory</a></p></li>
<li><p><a class="reference internal" href="#paalman-pings-events-per-point" id="id36">paalman_pings_events_per_point</a></p></li>
<li><p><a class="reference internal" href="#per-detector-vanadium" id="id37">per_detector_vanadium</a></p></li>
<li><p><a class="reference internal" href="#run-number" id="id38">run_number</a></p></li>
<li><p><a class="reference internal" href="#sample-empty" id="id39">sample_empty</a></p></li>
<li><p><a class="reference internal" href="#suffix" id="id40">suffix</a></p></li>
<li><p><a class="reference internal" href="#user-name" id="id41">user_name</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-parameters" id="id42">Advanced Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#focused-cropping-values" id="id43">focused_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#grouping-file-name" id="id44">grouping_file_name</a></p></li>
<li><p><a class="reference internal" href="#vanadium-peaks-masking-file" id="id45">vanadium_peaks_masking_file</a></p></li>
<li><p><a class="reference internal" href="#nxs-filename" id="id46">nxs_filename</a></p></li>
<li><p><a class="reference internal" href="#gss-filename" id="id47">gss_filename</a></p></li>
<li><p><a class="reference internal" href="#dat-files-directory" id="id48">dat_files_directory</a></p></li>
<li><p><a class="reference internal" href="#tof-xye-filename" id="id49">tof_xye_filename</a></p></li>
<li><p><a class="reference internal" href="#dspacing-xye-filename" id="id50">dspacing_xye_filename</a></p></li>
<li><p><a class="reference internal" href="#sample-empty-scale" id="id51">sample_empty_scale</a></p></li>
<li><p><a class="reference internal" href="#raw-data-cropping-values" id="id52">raw_data_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#spline-coefficient" id="id53">spline_coefficient</a></p></li>
<li><p><a class="reference internal" href="#spline-coeff-per-detector" id="id54">spline_coeff_per_detector</a></p></li>
<li><p><a class="reference internal" href="#vanadium-cropping-values" id="id55">vanadium_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#vanadium-sample-details" id="id56">Vanadium sample details</a></p>
<ul>
<li><p><a class="reference internal" href="#chemical-formula" id="id57">chemical_formula</a></p></li>
<li><p><a class="reference internal" href="#cylinder-sample-height" id="id58">cylinder_sample_height</a></p></li>
<li><p><a class="reference internal" href="#cylinder-sample-radius" id="id59">cylinder_sample_radius</a></p></li>
<li><p><a class="reference internal" href="#cylinder-position" id="id60">cylinder_position</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#references" id="id61">References</a></p></li>
</ul>
</nav>
<section id="creating-polaris-object">
<span id="creating-polaris-object-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">Creating POLARIS Object</a><a class="headerlink" href="#creating-polaris-object" title="Link to this heading">Â¶</a></h2>
<p>This method assumes you are familiar with the concept of objects in Python.
If not more details can be read here: <a class="reference internal" href="ISISPowder-Tutorials.html#intro-to-objects-isis-powder-diffraction-ref"><span class="std std-ref">A quick introduction to objects</span></a></p>
<p>To create a POLARIS object the following parameters are required:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-directory-polaris-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a></p></li>
<li><p><a class="reference internal" href="#output-directory-polaris-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a></p></li>
<li><p><a class="reference internal" href="#user-name-polaris-isis-powder-diffraction-ref"><span class="std std-ref">user_name</span></a></p></li>
</ul>
<p>Optionally a configuration file may be specified if one exists
using the following parameter:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#config-file-polaris-isis-powder-diffraction-ref"><span class="std std-ref">config_file</span></a></p></li>
</ul>
<p>See <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><span class="std std-ref">Using configuration files</span></a>
on YAML configuration files for more details</p>
<section id="example">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Example</a><a class="headerlink" href="#example" title="Link to this heading">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">isis_powder</span> <span class="kn">import</span> <span class="n">Polaris</span>

<span class="n">calibration_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span>

<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="n">calibration_dir</span><span class="p">,</span>
                          <span class="n">output_directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
                          <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">)</span>

<span class="c1"># Optionally we could provide a configuration file like so</span>
<span class="c1"># Notice how the file name ends with .yaml</span>
<span class="n">config_file_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\config_file.yaml</span>
<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file_path</span><span class="p">,</span>
                          <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="methods">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Methods</a><a class="headerlink" href="#methods" title="Link to this heading">Â¶</a></h2>
<p>The following methods can be executed on a POLARIS object:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a></p></li>
<li><p><a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a></p></li>
<li><p><a class="reference internal" href="#set-sample-polaris-isis-powder-diffraction-ref"><span class="std std-ref">set_sample</span></a></p></li>
</ul>
<p>For information on creating a POLARIS object see:
<a class="reference internal" href="#creating-polaris-object-isis-powder-diffraction-ref"><span class="std std-ref">Creating POLARIS Object</span></a></p>
<section id="create-vanadium">
<span id="create-vanadium-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">create_vanadium</a><a class="headerlink" href="#create-vanadium" title="Link to this heading">Â¶</a></h3>
<p>The <em>create_vanadium</em> method allows a user to process a vanadium run.
Whilst processing the vanadium run the scripts can apply any corrections
the user enables and will spline the resulting workspace(s) for later focusing.</p>
<p>On POLARIS the following parameters are required when executing <em>create_vanadium</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a></p></li>
<li><p><a class="reference internal" href="#first-cycle-run-no-polaris-isis-powder-diffraction-ref"><span class="std std-ref">first_cycle_run_no</span></a></p></li>
</ul>
<p>The following may optionally be set.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#mode-polaris-isis-powder-diffraction-ref"><span class="std std-ref">mode</span></a></p></li>
<li><p><a class="reference internal" href="#multiple-scattering-polaris-isis-powder-diffraction-ref"><span class="std std-ref">multiple_scattering</span></a></p></li>
<li><p><a class="reference internal" href="#per-detector-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">per_detector_vanadium</span></a></p></li>
</ul>
<section id="id1">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">Example</a><a class="headerlink" href="#id1" title="Link to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                                <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;PDF&quot;</span><span class="p">,</span> <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                <span class="n">first_cycle_run_no</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">multiple_scattering</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="focus">
<span id="focus-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">focus</a><a class="headerlink" href="#focus" title="Link to this heading">Â¶</a></h3>
<p>The <em>focus</em> method processes the user specified run(s). It aligns,
focuses and optionally applies corrections if the user has requested them.</p>
<p>On POLARIS the following parameters are required when executing <em>focus</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a></p></li>
<li><p><a class="reference internal" href="#do-van-normalisation-polaris-isis-powder-diffraction-ref"><span class="std std-ref">do_van_normalisation</span></a></p></li>
<li><p><a class="reference internal" href="#input-mode-polaris-isis-powder-diffraction-ref"><span class="std std-ref">input_mode</span></a></p></li>
<li><p><a class="reference internal" href="#run-number-polaris-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a></p></li>
</ul>
<p>The following parameters may also be optionally set:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#mode-polaris-isis-powder-diffraction-ref"><span class="std std-ref">mode</span></a></p></li>
<li><p><a class="reference internal" href="#multiple-scattering-polaris-isis-powder-diffraction-ref"><span class="std std-ref">multiple_scattering</span></a></p></li>
<li><p><a class="reference internal" href="#file-ext-polaris-isis-powder-diffraction-ref"><span class="std std-ref">file_ext</span></a></p></li>
<li><p><a class="reference internal" href="#sample-empty-polaris-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty</span></a></p></li>
<li><p><a class="reference internal" href="#suffix-polaris-isis-powder-diffraction-ref"><span class="std std-ref">suffix</span></a></p></li>
<li><p><a class="reference internal" href="#empty-can-subtraction-method-isis-powder-diffraction-ref"><span class="std std-ref">empty_can_subtraction_method</span></a></p></li>
<li><p><a class="reference internal" href="#paalman-pings-events-per-point-isis-powder-diffraction-ref"><span class="std std-ref">paalman_pings_events_per_point</span></a></p></li>
<li><p><a class="reference internal" href="#per-detector-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">per_detector_vanadium</span></a></p></li>
<li><p><a class="reference internal" href="#van-normalisation-method-isis-powder-diffraction-ref"><span class="std std-ref">van_normalisation_method</span></a></p></li>
</ul>
<section id="id2">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">Example</a><a class="headerlink" href="#id2" title="Link to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                      <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;Rietveld&quot;</span><span class="p">,</span> <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="n">file_ext</span><span class="o">=</span><span class="s2">&quot;.s01&quot;</span><span class="p">,</span> <span class="n">input_mode</span><span class="o">=</span><span class="s2">&quot;Individual&quot;</span><span class="p">,</span>
                      <span class="n">run_number</span><span class="o">=</span><span class="s2">&quot;100-110&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="set-sample">
<span id="set-sample-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id16" role="doc-backlink">set_sample</a><a class="headerlink" href="#set-sample" title="Link to this heading">Â¶</a></h3>
<p>The <em>set_sample</em> method allows a user to specify a SampleDetails
object which contains the sample properties used when
<a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a> is <strong>True</strong>
whilst focusing.</p>
<p>For more details on the SampleDetails object and how to set
it see: <a class="reference internal" href="ISISPowder-SampleDetails-v1.html#isis-powder-diffraction-sampledetails-ref"><span class="std std-ref">ISIS Powder Diffraction Scripts - SampleDetails Reference</span></a></p>
<p>The following parameter is required when calling <em>set_sample</em></p>
<ul class="simple">
<li><p><em>sample</em> - This must be a SampleDetails object with the
material set already.</p></li>
</ul>
<section id="id3">
<h4><a class="toc-backref" href="#id17" role="doc-backlink">Example</a><a class="headerlink" href="#id3" title="Link to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sample_obj</span> <span class="o">=</span> <span class="n">SampleDetails</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">sample_obj</span><span class="o">.</span><span class="n">set_material</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">polaris_example</span><span class="o">.</span><span class="n">set_sample</span><span class="p">(</span><span class="n">sample</span><span class="o">=</span><span class="n">sample_obj</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="create-total-scattering-pdf">
<span id="create-total-scattering-pdf-polaris-isis-powder-ref"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink">create_total_scattering_pdf</a><a class="headerlink" href="#create-total-scattering-pdf" title="Link to this heading">Â¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Total scattering support is not yet fully implemented.
Any results obtaining from using the below routine in its current
state should not be considered accurate or complete.</p>
</div>
<p>The <em>create_total_scattering_pdf</em> method allows a user to create a Pair Distribution Function (PDF)
from focused POLARIS data, with a view to performing further total scattering analysis.</p>
<p>This function takes as input a workspace group containing focussed data that has been normalized as a differential cross section. The input can be generated by running
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> with van_normalisation_method=Absolute.</p>
<p>The function performs the following processing:</p>
<ul>
<li><p>converts the x units of the workspace group containing the differential cross section to momentum transfer</p></li>
<li><p>calculates the Placzek self scattering algorithm using the workflow algorithm <a class="reference internal" href="../algorithms/TotScatCalculateSelfScattering-v1.html#algm-totscatcalculateselfscattering"><span class="std std-ref">TotScatCalculateSelfScattering v1</span></a>.
This internally calculates a per detector Placzek correction using <a class="reference internal" href="../algorithms/CalculatePlaczek-v1.html#algm-calculateplaczek"><span class="std std-ref">CalculatePlaczek v1</span></a> and then focusses the correction using <a class="reference internal" href="../algorithms/GroupDetectors-v2.html#algm-groupdetectors"><span class="std std-ref">GroupDetectors v2</span></a></p></li>
<li><p>subtracts the Placzek self scattering correction from the differential cross section</p></li>
<li><p>converts the differential cross-section into an <span class="math notranslate nohighlight">\(S(Q) - 1\)</span> distribution using the following equation. This is based on equations 5, 9 and 19 in <a class="footnote-reference brackets" href="#keen" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>:</p>
<div class="math notranslate nohighlight">
\[S(Q) - 1 = (\frac{d\sigma_s}{d\Omega}(Q) - \langle\overline{b^2}\rangle) / \langle\overline{b}\rangle^2 = (\frac{d\sigma_s}{d\Omega}(Q) - \frac{\sigma_s}{4 \pi}) / \frac{\sigma_{coh}}{4 \pi}\]</div>
<div class="line-block">
<div class="line">where <span class="math notranslate nohighlight">\(\sigma_s\)</span> is the total scattering cross section, <span class="math notranslate nohighlight">\(\sigma_{coh}\)</span> is the coherent scattering cross section, <span class="math notranslate nohighlight">\(b\)</span> is the scattering length.</div>
<div class="line">The angled brackets indicate averaging across chemical formula units while the overline indicates averaging across isotopes and spin states for an individual element</div>
</div>
</li>
<li><p>converts the <span class="math notranslate nohighlight">\(S(Q) - 1\)</span> distribution into a PDF using <a class="reference internal" href="../algorithms/PDFFourierTransform-v2.html#algm-pdffouriertransform"><span class="std std-ref">PDFFourierTransform v2</span></a></p></li>
</ul>
<p>The input is specified using the run_number parameter. The input workspace group for this run number must
either be loaded in Mantid with the naming format given by the <em>focus</em> method:</p>
<p><em>&lt;run number&gt;-Results-&lt;TOF/D&gt;</em></p>
<p>for example:</p>
<p>12345-Results-TOF</p>
<p>Or a focused file with the same name format must be in the <a class="reference internal" href="#output-directory-polaris-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a> specified when creating the POLARIS object.</p>
<p>The output PDF can be customized with the following parameters:</p>
<ul class="simple">
<li><p>By calling with <cite>pdf_type</cite> the type of PDF output can be specified, with the option of <cite>G(r)</cite>,
<cite>g(r)</cite>, <cite>RDF(r)</cite> (defaults to <cite>G(r)</cite>).</p></li>
<li><p>By calling with <cite>merge_banks=True</cite> a PDF will be generated based on the weighted sum of the detector
banks performed using supplied Q limits <cite>q_lims=q_limits</cite>, q_limits can be in the form of an array or
with shape (2, x) where x is the number of banks, or a string containing the directory
of an appropriately formatted <cite>.lim</cite> file. To exclude any of the banks use -1 as the value for that bank in each list.
By default or specifically called with <cite>merge_banks=False</cite> a PDF will be generated for each bank within the focused_workspace.</p></li>
<li><p>By calling with <cite>delta_q</cite> which will calculate the PDF after rebinning the Q workspace to have bin width <cite>delta_r</cite>.</p></li>
<li><p>By calling with <cite>delta_r</cite> which will calculate the PDF with bin width of <cite>delta_q</cite>.</p></li>
<li><p>By calling with <cite>lorch_filter</cite> will calculate the PDF with a Lorth Filter if set to <cite>True</cite></p></li>
<li><p>By calling with <cite>freq_params</cite> a fourier filter will be performed on the focused signal removing any
components from atomic distances outside of the parameters. The parameters must be given as list:
[lower], or [lower, upper]. The upper bound serves to remove noise from the spectrum density, by default
when a fourier filter is performed this is set to 1000 to minimise loss of detail while still being computationally
efficient.</p></li>
<li><p>By calling with <cite>debug=True</cite> which will retain the intermediate self scattering correction workspace.</p></li>
<li><p>By calling with <cite>placzek_order</cite> the Placzek correction order can be specified, with the option of 1 or 2 (defaults to 1).</p></li>
<li><p>By calling with <cite>sample_temp</cite> the user can override the sample temperature provided in the logs. It defaults to using values from the logs if available.</p></li>
<li><p>By calling with <cite>pdf_output_name</cite>, the name of the output PDF will be set to the user-provided name. If not specified, the output will be the run number suffixed with the PDF type.</p></li>
</ul>
<section id="id5">
<h4><a class="toc-backref" href="#id19" role="doc-backlink">Example</a><a class="headerlink" href="#id5" title="Link to this heading">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Include all the banks</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">create_total_scattering_pdf</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">,</span>
                                            <span class="n">merge_banks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                            <span class="n">q_lims</span><span class="o">=</span><span class="p">[[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">40</span><span class="p">]],</span>
                                            <span class="n">output_binning</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span>
                                            <span class="n">pdf_type</span><span class="o">=</span><span class="s1">&#39;G(r)&#39;</span><span class="p">,</span>
                                            <span class="n">freq_params</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># Exclude the 2nd and 4th banks</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">create_total_scattering_pdf</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">,</span>
                                            <span class="n">merge_banks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                            <span class="n">q_lims</span><span class="o">=</span><span class="p">[[</span><span class="mf">2.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">40</span><span class="p">]],</span>
                                            <span class="n">output_binning</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">20</span><span class="p">],</span>
                                            <span class="n">pdf_type</span><span class="o">=</span><span class="s1">&#39;G(r)&#39;</span><span class="p">,</span>
                                            <span class="n">freq_params</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="calibration-mapping-file">
<span id="calibration-mapping-polaris-isis-powder-ref"></span><h2><a class="toc-backref" href="#id20" role="doc-backlink">Calibration Mapping File</a><a class="headerlink" href="#calibration-mapping-file" title="Link to this heading">Â¶</a></h2>
<p>The calibration mapping file holds the mapping between
run numbers, current label, offset filename and the empty
and vanadium numbers.</p>
<p>For more details on the calibration mapping file see:
<a class="reference internal" href="ISISPowder-Tutorials.html#cycle-mapping-files-isis-powder-diffraction-ref"><span class="std std-ref">Cycle mapping files</span></a></p>
<p>The layout on POLARIS should look as follows for each block
substituting the below values for appropriate values:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nt">1-100</span><span class="p">:</span>
<span class="linenos">2</span><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_1&quot;</span>
<span class="linenos">3</span><span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span>
<span class="linenos">4</span><span class="w">  </span><span class="nt">PDF</span><span class="p">:</span>
<span class="linenos">5</span><span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">6</span><span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="linenos">7</span><span class="w">  </span><span class="nt">Rietveld</span><span class="p">:</span>
<span class="linenos">8</span><span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="linenos">9</span><span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;40&quot;</span>
</pre></div>
</div>
<p>Lines 5 and 6 in this example set the vanadium and empty run numbers for
chopper off mode. Lines 8 and 9 set the vanadium and empty for chopper
on mode.</p>
<section id="id6">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Example</a><a class="headerlink" href="#id6" title="Link to this heading">Â¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">1-100</span><span class="p">:</span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_1&quot;</span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span>
<span class="w">  </span><span class="nt">PDF</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span>
<span class="w">  </span><span class="nt">Rietveld</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30&quot;</span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;40&quot;</span>

<span class="nt">101-</span><span class="p">:</span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_2&quot;</span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span>
<span class="w">  </span><span class="nt">PDF</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;110&quot;</span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span>
<span class="w">  </span><span class="nt">Rietveld</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;130&quot;</span>
<span class="w">    </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;140&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Link to this heading">Â¶</a></h2>
<p>The following parameters for POLARIS are intended for regular use
when using the ISIS Powder scripts.</p>
<section id="calibration-directory">
<span id="calibration-directory-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id23" role="doc-backlink">calibration_directory</a><a class="headerlink" href="#calibration-directory" title="Link to this heading">Â¶</a></h3>
<p>This parameter should be the full path to the calibration folder.
Within the folder the following should be present:</p>
<ul class="simple">
<li><p>Grouping .cal file (see: <a class="reference internal" href="#grouping-file-name-polaris-isis-powder-diffraction-ref"><span class="std std-ref">grouping_file_name</span></a>)</p></li>
<li><p>Masking file (see: <a class="reference internal" href="#masking-file-name-polaris-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_peaks_masking_file</span></a>)</p></li>
<li><p>Folder(s) with the label name specified in mapping file (e.g. â1_1â)
- Inside each folder should be the offset file with name specified in mapping file</p></li>
</ul>
<p>The script will also save out vanadium splines into the relevant
label folder which are subsequently loaded and used within the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="calibration-mapping-file-polaris-isis-powder-diffraction-ref">
<span id="id7"></span><h3><a class="toc-backref" href="#id24" role="doc-backlink">calibration_mapping_file</a><a class="headerlink" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref" title="Link to this heading">Â¶</a></h3>
<p>This parameter gives the full path to the YAML file containing the
calibration mapping. For more details on this file see:
<a class="reference internal" href="#calibration-mapping-polaris-isis-powder-ref"><span class="std std-ref">Calibration Mapping File</span></a></p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice the filename always ends in .yaml</span>
<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\file\calibration_mapping.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="mode">
<span id="mode-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id25" role="doc-backlink">mode</a><a class="headerlink" href="#mode" title="Link to this heading">Â¶</a></h3>
<p><em>optional</em></p>
<p>The current chopper mode to use in the
<a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
and <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.
This determines which vanadium and empty run numbers
to use whilst processing.</p>
<p>Accepted values are: <strong>PDF</strong> or <strong>Rietveld</strong></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>If this value is not set, mantid will attempt to deduce it from
the frequency logs.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;PDF&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;Rietveld&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="config-file">
<span id="config-file-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id26" role="doc-backlink">config_file</a><a class="headerlink" href="#config-file" title="Link to this heading">Â¶</a></h3>
<p>The full path to the YAML configuration file. This file is
described in detail here: <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><span class="std std-ref">Using configuration files</span></a>
It is recommended to set this parameter at object creation instead
of on a method as it will warn if any parameters are overridden
in the scripting window.</p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice the filename always ends in .yaml</span>
<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\file\configuration.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="do-absorb-corrections">
<span id="do-absorb-corrections-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink">do_absorb_corrections</a><a class="headerlink" href="#do-absorb-corrections" title="Link to this heading">Â¶</a></h3>
<p>Indicates whether to perform vanadium absorption corrections
in <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a> mode.
In <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> mode
sample absorption corrections require the sample be
set first with the <a class="reference internal" href="#set-sample-polaris-isis-powder-diffraction-ref"><span class="std std-ref">set_sample</span></a>
method.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="c1"># Or (this assumes sample details have already been set)</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="do-van-normalisation">
<span id="do-van-normalisation-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id28" role="doc-backlink">do_van_normalisation</a><a class="headerlink" href="#do-van-normalisation" title="Link to this heading">Â¶</a></h3>
<p>Indicates whether to divide the focused workspace within
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> mode with a
previously generated vanadium spline.</p>
<p>This requires a vanadium to have been previously created
with the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">do_van_normalisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="van-normalisation-method">
<span id="van-normalisation-method-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink">van_normalisation_method</a><a class="headerlink" href="#van-normalisation-method" title="Link to this heading">Â¶</a></h3>
<p>Indicates whether a relative or absolute normalisation should
be performed. The possible values are âRelativeâ and âAbsoluteâ.</p>
<p>This parameter is optional. The default value when <a class="reference internal" href="#mode-polaris-isis-powder-diffraction-ref"><span class="std std-ref">mode</span></a> =âRietveldâ is âRelativeâ. The default value when mode=âPDFâ is âAbsoluteâ.</p>
<p>If âAbsoluteâ is selected then the measured intensity is multipled by the following additional factor to give a differential cross section (which is based on equation 8 in <a class="footnote-reference brackets" href="#howe" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>):</p>
<div class="math notranslate nohighlight">
\[\frac{\rho_v V_v \sigma_v}{4 \pi \rho_s V_s}\]</div>
<p>where <span class="math notranslate nohighlight">\(\rho=\)</span> number density, <span class="math notranslate nohighlight">\(V=\)</span> volume of material in the beam and the subscripts <span class="math notranslate nohighlight">\(v\)</span> and <span class="math notranslate nohighlight">\(s\)</span> indicate Vanadium and sample respectively.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">van_normalisation_method</span><span class="o">=</span><span class="s2">&quot;Absolute&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="empty-can-subtraction-method">
<span id="empty-can-subtraction-method-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id30" role="doc-backlink">empty_can_subtraction_method</a><a class="headerlink" href="#empty-can-subtraction-method" title="Link to this heading">Â¶</a></h3>
<p>Sets the empty can subtraction type used in the <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method. This parameter
is optional and can be set to either <code class="docutils literal notranslate"><span class="pre">&quot;Simple&quot;</span></code> (default) or <code class="docutils literal notranslate"><span class="pre">&quot;PaalmanPings&quot;</span></code>. In <code class="docutils literal notranslate"><span class="pre">&quot;PaalmanPings&quot;</span></code> mode,
the absorption correction is applied by <a class="reference internal" href="../algorithms/PaalmanPingsMonteCarloAbsorption-v1.html#algm-paalmanpingsmontecarloabsorption"><span class="std std-ref">PaalmanPingsMonteCarloAbsorption</span></a>,
followed by <a class="reference internal" href="../algorithms/ApplyPaalmanPingsCorrection-v1.html#algm-applypaalmanpingscorrection"><span class="std std-ref">ApplyPaalmanPingsCorrection</span></a>. Additionally, in this mode
the <a class="reference internal" href="#paalman-pings-events-per-point-isis-powder-diffraction-ref"><span class="std std-ref">paalman_pings_events_per_point</span></a> parameter can be utilised.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">empty_can_subtraction_method</span><span class="o">=</span><span class="s2">&quot;PaalmanPings&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="file-ext">
<span id="file-ext-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id31" role="doc-backlink">file_ext</a><a class="headerlink" href="#file-ext" title="Link to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>Specifies a file extension to use when using the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>This should be used to process partial runs. When
processing full runs (i.e. completed runs) it should not
be specified as Mantid will automatically determine the
best extension to use.</p>
<p><em>Note: A leading dot (.) is not required but
is preferred for readability</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">file_ext</span><span class="o">=</span><span class="s2">&quot;.s01&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="first-cycle-run-no">
<span id="first-cycle-run-no-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id32" role="doc-backlink">first_cycle_run_no</a><a class="headerlink" href="#first-cycle-run-no" title="Link to this heading">Â¶</a></h3>
<p>Indicates a run from the current cycle to use when calling
<a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>.
This does not have the be the first run of the cycle or
the run number corresponding to the vanadium. However it
must be in the correct cycle according to the
<a class="reference internal" href="#calibration-mapping-polaris-isis-powder-ref"><span class="std std-ref">Calibration Mapping File</span></a>.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In this example assume we mean a cycle with run numbers 100-200</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">first_cycle_run_no</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="input-mode">
<span id="input-mode-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink">input_mode</a><a class="headerlink" href="#input-mode" title="Link to this heading">Â¶</a></h3>
<p>Indicates how to interpret the parameter
<a class="reference internal" href="#run-number-polaris-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a> whilst
calling the <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>
method.
If the input_mode is set to <em>Summed</em> it will process
to sum all runs specified. If set to <em>Individual</em> it
will process all runs individually (i.e. One at a time)</p>
<p>Accepted values are: <strong>Summed</strong> and <strong>Individual</strong></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">input_mode</span><span class="o">=</span><span class="s2">&quot;Summed&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="multiple-scattering">
<span id="multiple-scattering-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id34" role="doc-backlink">multiple_scattering</a><a class="headerlink" href="#multiple-scattering" title="Link to this heading">Â¶</a></h3>
<p><em>optional</em></p>
<p>Indicates whether to account for the effects of multiple scattering
when calculating absorption corrections.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p><em>Note: Calculating multiple scattering effects will add around
10-30 minutes to the script runtime depending on the speed of
the computer you are using</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">multiple_scattering</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">multiple_scattering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="output-directory">
<span id="output-directory-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id35" role="doc-backlink">output_directory</a><a class="headerlink" href="#output-directory" title="Link to this heading">Â¶</a></h3>
<p>Specifies the path to the output directory to save resulting files
into. The script will automatically create a folder
with the label determined from the
<a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a>
and within that create another folder for the current
<a class="reference internal" href="#user-name-polaris-isis-powder-diffraction-ref"><span class="std std-ref">user_name</span></a>.</p>
<p>Within this folder processed data will be saved out in
several formats.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">output_directory</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="paalman-pings-events-per-point">
<span id="paalman-pings-events-per-point-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id36" role="doc-backlink">paalman_pings_events_per_point</a><a class="headerlink" href="#paalman-pings-events-per-point" title="Link to this heading">Â¶</a></h3>
<p>Sets the number of EventsPerPoint to use in the
<a class="reference internal" href="../algorithms/PaalmanPingsMonteCarloAbsorption-v1.html#algm-paalmanpingsmontecarloabsorption"><span class="std std-ref">PaalmanPingsMonteCarloAbsorption</span></a>. The default value is 1000.
This parameter is only used when <a class="reference internal" href="#empty-can-subtraction-method-isis-powder-diffraction-ref"><span class="std std-ref">empty_can_subtraction_method</span></a> is set to <code class="docutils literal notranslate"><span class="pre">&quot;PaalmanPings&quot;</span></code>.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">paalman_pings_events_per_point</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="per-detector-vanadium">
<span id="per-detector-vanadium-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id37" role="doc-backlink">per_detector_vanadium</a><a class="headerlink" href="#per-detector-vanadium" title="Link to this heading">Â¶</a></h3>
<p>Determines whether the Vanadium normalisation is performed at the detector level or the bank level. The default value is False (bank level).
The parameter should be supplied to both the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a> and <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> methods (or supplied in the parameter list when creating the POLARIS object) if a reduction based on a per detector Vanadium normalisation is required.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">isis_powder</span> <span class="kn">import</span> <span class="n">Polaris</span>

<span class="n">calibration_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span>

<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="n">calibration_dir</span><span class="p">,</span>
                          <span class="n">output_directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
                          <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span>
                          <span class="n">per_detector_vanadium</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run-number">
<span id="run-number-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id38" role="doc-backlink">run_number</a><a class="headerlink" href="#run-number" title="Link to this heading">Â¶</a></h3>
<p>Specifies the run number(s) to process when calling the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>This parameter accepts a single value or a range
of values with the following syntax:</p>
<p><strong>-</strong> : Indicates a range of runs inclusive
(e.g. <em>1-10</em> would process 1, 2, 3â¦.8, 9, 10)</p>
<p><strong>,</strong> : Indicates a gap between runs
(e.g. <em>1, 3, 5, 7</em> would process run numbers 1, 3, 5, 7)</p>
<p>These can be combined like so:
<em>1-3, 5, 8-10</em> would process run numbers 1, 2, 3, 5, 8, 9, 10.</p>
<p>In addition the <a class="reference internal" href="#input-mode-polaris-isis-powder-diffraction-ref"><span class="std std-ref">input_mode</span></a>
parameter determines what effect a range of inputs has
on the data to be processed</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process run number 1, 3, 5, 6, 7</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s2">&quot;1, 3, 5-7&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or just a single run</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="sample-empty">
<span id="sample-empty-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink">sample_empty</a><a class="headerlink" href="#sample-empty" title="Link to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a/several sample empty run(s)
to subtract from the run in the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.
If multiple runs are specified it will sum these runs
before subtracting the result.</p>
<p>This input uses the same syntax as
<a class="reference internal" href="#run-number-polaris-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a>.
Please visit the above page for more details.</p>
<p><em>Note: If this parameter is set to</em> <strong>True</strong>
<a class="reference internal" href="#sample-empty-scale-polaris-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty_scale</span></a>
<em>must also be set.</em> This is set to 1.0 by default.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Our sample empty is a single number</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or a range of numbers</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty</span><span class="o">=</span><span class="s2">&quot;100-110&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="suffix">
<span id="suffix-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id40" role="doc-backlink">suffix</a><a class="headerlink" href="#suffix" title="Link to this heading">Â¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a suffix to append the names of output files
during a focus.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;-corr&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="user-name">
<span id="user-name-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id41" role="doc-backlink">user_name</a><a class="headerlink" href="#user-name" title="Link to this heading">Â¶</a></h3>
<p>Specifies the name of the current user when creating a
new POLARIS object. This is only used when saving data to
sort data into respective user folders.
See <a class="reference internal" href="#output-directory-polaris-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a>
for more details.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-parameters">
<h2><a class="toc-backref" href="#id42" role="doc-backlink">Advanced Parameters</a><a class="headerlink" href="#advanced-parameters" title="Link to this heading">Â¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These values are not intended to be changed and should
reflect optimal defaults for the instrument. For more
details please read:
<a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><span class="std std-ref">Instrument advanced properties</span></a></p>
<p>This section is mainly intended to act as reference of the
current settings distributed with Mantid</p>
</div>
<p>All values changed in the advanced configuration file
requires the user to restart Mantid for the new values to take effect.
Please read <a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><span class="std std-ref">Instrument advanced properties</span></a>
before proceeding to change values within the advanced configuration file.</p>
<section id="focused-cropping-values">
<span id="focused-cropping-values-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id43" role="doc-backlink">focused_cropping_values</a><a class="headerlink" href="#focused-cropping-values" title="Link to this heading">Â¶</a></h3>
<p>Indicates a list of TOF values to crop the focused workspace
which was created by <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>
on a bank by bank basis.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a smaller
TOF window than the <a class="reference internal" href="#vanadium-cropping-values-polaris-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_cropping_values</span></a></p>
<p>On POLARIS this is set to the following TOF windows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">focused_cropping_values</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">700</span><span class="p">,</span>  <span class="mi">30000</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
    <span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">24900</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
    <span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">19950</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
    <span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">19950</span><span class="p">),</span>  <span class="c1"># Bank 4</span>
    <span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">19950</span><span class="p">),</span>  <span class="c1"># Bank 5</span>
    <span class="p">]</span>
</pre></div>
</div>
</section>
<section id="grouping-file-name">
<span id="grouping-file-name-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id44" role="doc-backlink">grouping_file_name</a><a class="headerlink" href="#grouping-file-name" title="Link to this heading">Â¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-polaris-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>.</p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grouping_file_name</span><span class="p">:</span> <span class="s2">&quot;Master_copy_of_grouping_file_with_essential_masks.cal&quot;</span>
</pre></div>
</div>
</section>
<section id="vanadium-peaks-masking-file">
<span id="masking-file-name-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id45" role="doc-backlink">vanadium_peaks_masking_file</a><a class="headerlink" href="#vanadium-peaks-masking-file" title="Link to this heading">Â¶</a></h3>
<p>Determines the name of the masking file containing the
masks to remove Bragg peaks on Polaris. This file must
be located within the top level of the
<a class="reference internal" href="#calibration-directory-polaris-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vanadium_peaks_masking_file</span><span class="p">:</span> <span class="s2">&quot;VanaPeaks.dat&quot;</span>
</pre></div>
</div>
</section>
<section id="nxs-filename">
<span id="nxs-filename-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id46" role="doc-backlink">nxs_filename</a><a class="headerlink" href="#nxs-filename" title="Link to this heading">Â¶</a></h3>
<p>A template for the filename of the generated NeXus file.</p>
</section>
<section id="gss-filename">
<span id="gss-filename-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id47" role="doc-backlink">gss_filename</a><a class="headerlink" href="#gss-filename" title="Link to this heading">Â¶</a></h3>
<p>A template for the filename of the generated GSAS file.</p>
</section>
<section id="dat-files-directory">
<span id="dat-files-directory-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id48" role="doc-backlink">dat_files_directory</a><a class="headerlink" href="#dat-files-directory" title="Link to this heading">Â¶</a></h3>
<p>The subdirectory of the output directory where the .dat files are saved</p>
</section>
<section id="tof-xye-filename">
<span id="tof-xye-filename-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id49" role="doc-backlink">tof_xye_filename</a><a class="headerlink" href="#tof-xye-filename" title="Link to this heading">Â¶</a></h3>
<p>A template for the filename of the generated TOF XYE file.</p>
</section>
<section id="dspacing-xye-filename">
<span id="dspacing-xye-filename-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id50" role="doc-backlink">dspacing_xye_filename</a><a class="headerlink" href="#dspacing-xye-filename" title="Link to this heading">Â¶</a></h3>
<p>A template for the filename of the generated dSpacing XYE file.</p>
</section>
<section id="sample-empty-scale">
<span id="sample-empty-scale-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id51" role="doc-backlink">sample_empty_scale</a><a class="headerlink" href="#sample-empty-scale" title="Link to this heading">Â¶</a></h3>
<p>Required if <a class="reference internal" href="#sample-empty-polaris-isis-powder-diffraction-ref"><span class="std std-ref">sample_empty</span></a>
is set to <strong>True</strong></p>
<p>Sets a factor to scale the sample empty run(s) to before
subtracting. This value is multiplied after summing the
sample empty runs and before subtracting the empty from
the data set. For more details see: <a class="reference internal" href="../algorithms/Scale-v1.html#algm-scale-v1"><span class="std std-ref">Scale</span></a>.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale sample empty to 90% of original</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty_scale</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="raw-data-cropping-values">
<span id="raw-data-cropping-values-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id52" role="doc-backlink">raw_data_cropping_values</a><a class="headerlink" href="#raw-data-cropping-values" title="Link to this heading">Â¶</a></h3>
<p>Determines the TOF window to crop all spectra down to before any
processing in the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
and <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> methods.</p>
<p>This helps remove negative counts where at very low TOF
the empty counts can exceed the captured neutron counts
of the run to process.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">raw_data_cropping_values</span><span class="p">:</span> <span class="p">(</span><span class="mi">750</span><span class="p">,</span> <span class="mi">20000</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="spline-coefficient">
<span id="spline-coefficient-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id53" role="doc-backlink">spline_coefficient</a><a class="headerlink" href="#spline-coefficient" title="Link to this heading">Â¶</a></h3>
<p>Determines the spline coefficient to use when processing
the vanadium in <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. For more details see <a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><span class="std std-ref">SplineBackground</span></a></p>
<p><em>Note that if this value is changed âcreate_vanadiumâ
will need to be called again.</em></p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spline_coefficient</span><span class="p">:</span> <span class="mi">100</span>
</pre></div>
</div>
</section>
<section id="spline-coeff-per-detector">
<span id="spline-coeff-per-detector-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id54" role="doc-backlink">spline_coeff_per_detector</a><a class="headerlink" href="#spline-coeff-per-detector" title="Link to this heading">Â¶</a></h3>
<p>Determines the spline coefficient to use when processing
the vanadium in <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. For more details see <a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><span class="std std-ref">SplineBackground</span></a>.
This parameter is used if a detector level Vanadium normalisation has been requested
and is typically lower than <a class="reference internal" href="#spline-coefficient-polaris-isis-powder-diffraction-ref"><span class="std std-ref">spline_coefficient</span></a></p>
<p><em>Note that if this value is changed âcreate_vanadiumâ
will need to be called again.</em></p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spline_coeff_per_detector</span><span class="p">:</span> <span class="mi">10</span>
</pre></div>
</div>
</section>
<section id="vanadium-cropping-values">
<span id="vanadium-cropping-values-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id55" role="doc-backlink">vanadium_cropping_values</a><a class="headerlink" href="#vanadium-cropping-values" title="Link to this heading">Â¶</a></h3>
<p>Determines the TOF windows to crop to on a bank by bank basis
within the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. This is applied after focusing and before a spline is taken.</p>
<p>It is used to remove low counts at the start and end of the vanadium run
to produce a spline which better matches the data.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a larger
TOF window than the <a class="reference internal" href="#focused-cropping-values-polaris-isis-powder-diffraction-ref"><span class="std std-ref">focused_cropping_values</span></a>
and a smaller window than <a class="reference internal" href="#raw-data-cropping-values-polaris-isis-powder-diffraction-ref"><span class="std std-ref">raw_data_cropping_values</span></a>.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vanadium_cropping_values</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c1"># Bank 4</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c1"># Bank 5</span>
                           <span class="p">]</span>
</pre></div>
</div>
</section>
<section id="vanadium-sample-details">
<span id="vanadium-sample-details-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id56" role="doc-backlink">Vanadium sample details</a><a class="headerlink" href="#vanadium-sample-details" title="Link to this heading">Â¶</a></h3>
<section id="chemical-formula">
<h4><a class="toc-backref" href="#id57" role="doc-backlink">chemical_formula</a><a class="headerlink" href="#chemical-formula" title="Link to this heading">Â¶</a></h4>
<p>The chemical formula for the Vanadium rod.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chemical_formula</span> <span class="o">=</span> <span class="s2">&quot;V&quot;</span>
</pre></div>
</div>
</section>
<section id="cylinder-sample-height">
<h4><a class="toc-backref" href="#id58" role="doc-backlink">cylinder_sample_height</a><a class="headerlink" href="#cylinder-sample-height" title="Link to this heading">Â¶</a></h4>
<p>The height of the Vanadium rod.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cylinder_sample_height</span> <span class="o">=</span> <span class="mf">4.0</span>
</pre></div>
</div>
</section>
<section id="cylinder-sample-radius">
<h4><a class="toc-backref" href="#id59" role="doc-backlink">cylinder_sample_radius</a><a class="headerlink" href="#cylinder-sample-radius" title="Link to this heading">Â¶</a></h4>
<p>The radius of the Vanadium rod.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cylinder_sample_radius</span> <span class="o">=</span> <span class="mf">0.25</span>
</pre></div>
</div>
</section>
<section id="cylinder-position">
<h4><a class="toc-backref" href="#id60" role="doc-backlink">cylinder_position</a><a class="headerlink" href="#cylinder-position" title="Link to this heading">Â¶</a></h4>
<p>The position of the Vanadium rod in [x, y, z]</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cylinder_position</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="references">
<h2><a class="toc-backref" href="#id61" role="doc-backlink">References</a><a class="headerlink" href="#references" title="Link to this heading">Â¶</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="howe" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">1</a><span class="fn-bracket">]</span></span>
<p>M A Howe, R L McGreevy and W S Howells
<em>The analysis of liquid structure data from time-of-flight neutron diffractometry</em>
J. Phys.: Condens. Matter 1 (1989)</p>
</aside>
<aside class="footnote brackets" id="keen" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>D A Keen
<em>A comparison of various commonly used correlation functions for describing total scattering</em>
Journal Applied Crystallography (2000)</p>
</aside>
</aside>
<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ISISPowder-Pearl-v1.html" title="Previous Chapter: ISIS Powder Diffraction Scripts - PEARL Reference"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ISIS Powder D...</span>
    </a>
  </li>
  <li>
    <a href="ISISPowder-SampleDetails-v1.html" title="Next Chapter: ISIS Powder Diffraction Scripts - SampleDetails Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ISIS Powder D... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>