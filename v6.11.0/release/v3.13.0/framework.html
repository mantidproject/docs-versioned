<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Framework Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=06de18c4"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UI &amp; Usability Changes" href="ui.html" />
    <link rel="prev" title="Mantid 3.13.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.11</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.13.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Framework Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#instrument-definition-updates" id="id3">Instrument Definition Updates</a></p></li>
<li><p><a class="reference internal" href="#stability" id="id4">Stability</a></p></li>
<li><p><a class="reference internal" href="#algorithms" id="id5">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new-feature" id="id6">New feature</a></p></li>
<li><p><a class="reference internal" href="#new-algorithms" id="id7">New Algorithms</a></p></li>
<li><p><a class="reference internal" href="#improvements" id="id8">Improvements</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id9">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id10">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#new" id="id11">New</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id12">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id13">Bugfixes</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="instrument-definition-updates">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Instrument Definition Updates</a><a class="headerlink" href="#instrument-definition-updates" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The ALF IDF has been updated following a detector array alteration.</p></li>
<li><p>The LARMOR IDF has been updated following the addition of a new detector to the instrument.</p></li>
<li><p>Instrument definition for IN4, 5, and 6 at the ILL have been updated</p></li>
<li><p>REF_L and CNCS has update instrument files and EQSANS, REF_M, ARCS and CNCS are now configured for loading live data.</p></li>
</ul>
</section>
<section id="stability">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Stability</a><a class="headerlink" href="#stability" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>We have introduced a Project Recovery mechanism for Mantidplot in order to be able to recover the lost state of the interface in the event of a crash or unexpected shutdown.  There are more details in the UI section of the release notes.</p></li>
<li><p>The error reporter can now catches hard crashes to desktop, allowing us to get more information on causes of hangs or crashes in Mantid.  Since the last release error reports sent to us led directly to the identification of and fixes for 3 separate bugs in Mantid.</p></li>
<li><p>Mantid now handles poor network stability  better when reading live data from the ISIS DAE.  Mantid will now timeout after a couple of minutes of loss of network connectivity and remains responsive during this time.
You can alter the duration of this timeout by adding a line to the mantid.user.properties file like:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">ISISDAE.Timeout</span> <span class="pre">=</span> <span class="pre">100</span> <span class="pre">#seconds</span>
<span class="pre">`</span></code></p></li>
</ul>
</section>
<section id="algorithms">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Link to this heading">¶</a></h2>
<section id="new-feature">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">New feature</a><a class="headerlink" href="#new-feature" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Sometimes the algorithm you are looking at is close to what you want, but not quite, to help you find the right one a list of related algorithms has been added to each algorithm, and is displayed in the documentation page of each algorithm as part of it’s summary.</p></li>
</ul>
</section>
<section id="new-algorithms">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">New Algorithms</a><a class="headerlink" href="#new-algorithms" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadSampleShape-v1.html#algm-loadsampleshape"><span class="std std-ref">LoadSampleShape</span></a> loads a shape into the sample in a workspace from an
ASCII <a class="reference external" href="https://en.wikipedia.org/wiki/STL_(file_format)">STL</a>  file,
which contains a list of triangles or an
ASCII <a class="reference external" href="https://en.wikipedia.org/wiki/OFF_(file_format)">OFF</a> file,
which has a list of vertices and triangles.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CalculateCarpenterSampleCorrection-v1.html#algm-calculatecarpentersamplecorrection"><span class="std std-ref">CalculateCarpenterSampleCorrection</span></a> outputs a group workspace with the separate absorption and multiple scattering corrections for flexibility to the User to apply them to the sample workspace</p></li>
<li><p><a class="reference internal" href="../../algorithms/CarpenterSampleCorrection-v1.html#algm-carpentersamplecorrection"><span class="std std-ref">CarpenterSampleCorrection</span></a> replaces <em>MultipleScatteringCylinderAbsorption</em> and uses <a class="reference internal" href="../../algorithms/CalculateCarpenterSampleCorrection-v1.html#algm-calculatecarpentersamplecorrection"><span class="std std-ref">CalculateCarpenterSampleCorrection</span></a> for calculating its corrections.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveBankScatteringAngles-v1.html#algm-savebankscatteringangles"><span class="std std-ref">SaveBankScatteringAngles</span></a> was added to save theta and phi values for diffraction banks to a MAUD-readable <cite>grouping.new</cite> file format</p></li>
<li><p><a class="reference internal" href="../../algorithms/ExportSampleLogsToHDF5-v1.html#algm-exportsamplelogstohdf5"><span class="std std-ref">ExportSampleLogsToHDF5</span></a> saves a
workspace’s samples logs to an HDF5 file</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveGDA-v1.html#algm-savegda"><span class="std std-ref">SaveGDA</span></a> saves a focused diffraction workspace to MAUD-readable <code class="docutils literal notranslate"><span class="pre">.gda</span></code> format</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveGEMMAUDParamFile-v1.html#algm-savegemmaudparamfile"><span class="std std-ref">SaveGEMMAUDParamFile</span></a>, which acts as a partner to <a class="reference internal" href="../../algorithms/SaveGDA-v1.html#algm-savegda"><span class="std std-ref">SaveGDA</span></a>,
saves a MAUD calibration file to convert the output of <strong>SaveGDA</strong> back to d-spacing</p></li>
<li><p>Algorithm <a class="reference internal" href="../../algorithms/FitPeaks-v1.html#algm-fitpeaks"><span class="std std-ref">FitPeaks</span></a> is implemented as a generalized multiple-spectrum multiple-peak fitting algorithm.</p></li>
</ul>
</section>
<section id="improvements">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadMcStas-v1.html#algm-loadmcstas"><span class="std std-ref">LoadMcStas</span></a> new alg property which controls the granularity of event data returned.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MaxEnt-v1.html#algm-maxent"><span class="std std-ref">Maxent</span></a> when outputting the results of the iterations, it no longer pads with zeroes but
returns as many items as iterations done for each spectrum, making the iterations easy to count.</p></li>
<li><p>XError values (Dx) can now be treated by the following algorithms: <a class="reference internal" href="../../algorithms/ConjoinXRuns-v1.html#algm-conjoinxruns"><span class="std std-ref">ConjoinXRuns</span></a>, <a class="reference internal" href="../../algorithms/ConvertToHistogram-v1.html#algm-converttohistogram"><span class="std std-ref">ConvertToHistogram</span></a>, <a class="reference internal" href="../../algorithms/ConvertToPointData-v1.html#algm-converttopointdata"><span class="std std-ref">ConvertToPointData</span></a>, <a class="reference internal" href="../../algorithms/CreateWorkspace-v1.html#algm-createworkspace"><span class="std std-ref">CreateWorkspace</span></a>, <a class="reference internal" href="../../algorithms/SortXAxis-v1.html#algm-sortxaxis"><span class="std std-ref">SortXAxis</span></a>, <a class="reference internal" href="../../algorithms/Stitch1D-v3.html#algm-stitch1d"><span class="std std-ref">Stitch1D v3</span></a> and <a class="reference internal" href="../../algorithms/Stitch1DMany-v1.html#algm-stitch1dmany"><span class="std std-ref">Stitch1DMany v1</span></a> (both with respect to point data).</p></li>
<li><p><a class="reference internal" href="../../algorithms/Stitch1D-v3.html#algm-stitch1d"><span class="std std-ref">Stitch1D</span></a> can treat point data.</p></li>
<li><p>The algorithm <a class="reference internal" href="../../algorithms/SortXAxis-v1.html#algm-sortxaxis"><span class="std std-ref">SortXAxis</span></a> has a new input option that allows ascending (default) and descending sorting. The documentation needed to be corrected in general.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadNexusMonitors-v2.html#algm-loadnexusmonitors"><span class="std std-ref">LoadNexusMonitors</span></a> has changed its properties for clarification. This has also propagated to <a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a> and <a class="reference internal" href="../../algorithms/LoadEventAndCompress-v1.html#algm-loadeventandcompress"><span class="std std-ref">LoadEventAndCompress</span></a></p></li>
<li><p><a class="reference internal" href="../../api/python/mantid/kernel/FacilityInfo.html#mantid.kernel.FacilityInfo" title="mantid.kernel.FacilityInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">mantid.kernel.FacilityInfo</span></code></a> has an additional field with the timezone for use in converting <code class="docutils literal notranslate"><span class="pre">numpy.datetime64</span></code> values to strings</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>In <a class="reference internal" href="../../algorithms/LoadMcStas-v1.html#algm-loadmcstas"><span class="std std-ref">LoadMcStas</span></a> internally reduce number of event workspaces created. If n mcstas event components now create n*(n-1) fewer.</p></li>
<li><p>The documentation of the algorithm <a class="reference internal" href="../../algorithms/CreateSampleWorkspace-v1.html#algm-createsampleworkspace"><span class="std std-ref">CreateSampleWorkspace v1</span></a> did not match its implementation. The axis in beam direction will now be correctly described as Z instead of X.</p></li>
<li><p>The <a class="reference internal" href="../../algorithms/ExtractMask-v1.html#algm-extractmask"><span class="std std-ref">ExtractMask</span></a> algorithm now returns a non-empty list of detector ID’s when given a MaskWorkspace.</p></li>
<li><p>Fixed a crash when the input workspace for <a class="reference internal" href="../../algorithms/GroupDetectors-v2.html#algm-groupdetectors"><span class="std std-ref">GroupDetectors</span></a> contained any other units than spectrum numbers.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a> can now be used with workspaces that aren’t in the ADS.</p></li>
<li><p>Fixed <a class="reference internal" href="../../algorithms/SumSpectra-v1.html#algm-sumspectra"><span class="std std-ref">SumSpectra</span></a> to avoid a crash when validation of inputs was called with a WorkspaceGroup.</p></li>
<li><p>Fixed a bug in TableWorkspaces where vector column data was set to 0 when the table was viewed</p></li>
<li><p>The output workspace of <a class="reference internal" href="../../algorithms/LineProfile-v1.html#algm-lineprofile"><span class="std std-ref">LineProfile</span></a> now has correct sample logs, instrument and history.</p></li>
<li><p>TimeSeriesProperty::splitByTimeVector’s behavior on a boundary condition is changed.  In the set of splitters toward a same target split workspace, if a splitter’s beginning time is after the last entry of the TimeSeriesProperty to be split, then this last entry shall be included in its output TimeSeriesProperty.</p></li>
<li><p>Fixed a bug in <a class="reference internal" href="../../algorithms/MergeRuns-v1.html#algm-mergeruns"><span class="std std-ref">MergeRuns</span></a> which could cause the runs to be merged in a different sequence than indicated in the <em>InputWorkspaces</em> property.</p></li>
<li><p>Fixed a bug where the values entered for basis vector properties in <a class="reference internal" href="../../algorithms/BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD</span></a> were not being remembered.</p></li>
<li><p>Fixed a bug which prevented <a class="reference internal" href="../../algorithms/Load-v1.html#algm-load"><span class="std std-ref">Load</span></a> and <a class="reference internal" href="../../algorithms/Load-v1.html#algm-load"><span class="std std-ref">LoadAndMerge</span></a> from parsing advanced run ranges such as <code class="docutils literal notranslate"><span class="pre">1-3+5-7+10+15-20</span></code>.</p></li>
</ul>
</section>
</section>
<section id="python">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Python</a><a class="headerlink" href="#python" title="Link to this heading">¶</a></h2>
<section id="new">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">New</a><a class="headerlink" href="#new" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added a new <code class="docutils literal notranslate"><span class="pre">MDFrameValidator</span></code> which can check that a MD workspace passed to a python algorithm has the expected MD frame (e.g. HKL, QLab, QSample etc.).</p></li>
</ul>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Improvements</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Python fit functions that use from <code class="docutils literal notranslate"><span class="pre">IPeakFunction</span></code> as a base no longer require a <code class="docutils literal notranslate"><span class="pre">functionDeriveLocal</span></code> method to compute an analytical derivative. If
the method is absent then a numerical derivative is calculate.</p></li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Checks on the structure of Python fit function classes have been improved to avoid scenarios, such as writing <code class="docutils literal notranslate"><span class="pre">function1d</span></code> rather than <code class="docutils literal notranslate"><span class="pre">function1D</span></code>, which
would previously have resulted in a hard crash.</p></li>
<li><p>Fit functions defined in a python script can be used with the new fit function API right after subscription.</p></li>
<li><p>Child algorithms now respect their parent algorithm’s <code class="docutils literal notranslate"><span class="pre">EnableLogging</span></code> setting when invoked using the function-style calling. Previously, some messages could appear in the log even though <code class="docutils literal notranslate"><span class="pre">EnableLogging</span></code> was set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p>Fixed a bug in <code class="docutils literal notranslate"><span class="pre">detectorSignedTwoTheta</span></code> method in <code class="docutils literal notranslate"><span class="pre">MatrixWorkspace</span></code> where the sign of the angle depended on the axis pointing up, not on the actual theta-sing axis defined in the IDF.</p></li>
<li><p>Fixed a bug where calling <code class="docutils literal notranslate"><span class="pre">setCell</span></code> method on a <a class="reference internal" href="../../concepts/PeaksWorkspace.html#peaksworkspace"><span class="std std-ref">PeaksWorkspace</span></a> did not set the cell value.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v3-13-0"><span class="std std-ref">Release 3.13.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 3.13.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 3.13.0...</span>
    </a>
  </li>
  <li>
    <a href="ui.html" title="Next Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">UI & Usabilit... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>