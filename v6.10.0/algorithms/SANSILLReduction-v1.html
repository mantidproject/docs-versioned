<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SANSILLReduction v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=770b529d"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SANSILLReduction v2" href="SANSILLReduction-v2.html" />
    <link rel="prev" title="SANSILLParameterScan v1" href="SANSILLParameterScan-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SANSILLReduction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="sansillreduction-v1">
<span id="algm-sansillreduction-v1"></span><h1>SANSILLReduction v1<a class="headerlink" href="#sansillreduction-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id8">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id9">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id10">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id11">Description</a></p></li>
<li><p><a class="reference internal" href="#processas" id="id12">ProcessAs</a></p>
<ul>
<li><p><a class="reference internal" href="#absorber" id="id13">Absorber</a></p></li>
<li><p><a class="reference internal" href="#beam" id="id14">Beam</a></p></li>
<li><p><a class="reference internal" href="#transmission" id="id15">Transmission</a></p></li>
<li><p><a class="reference internal" href="#container" id="id16">Container</a></p></li>
<li><p><a class="reference internal" href="#reference" id="id17">Reference</a></p></li>
<li><p><a class="reference internal" href="#sample" id="id18">Sample</a></p></li>
<li><p><a class="reference internal" href="#full-treatment" id="id19">Full Treatment</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#source" id="id20">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Performs SANS data reduction at the ILL.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="SANSILLIntegration-v1.html#algm-sansillintegration"><span class="std std-ref">SANSILLIntegration</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Run</p></td>
<td><p>Input</p></td>
<td><p>list of str lists</p></td>
<td></td>
<td><p>File path of run(s). Allowed values: [‘nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>ProcessAs</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Sample</p></td>
<td><p>Choose the process type. Allowed values: [‘Absorber’, ‘Beam’, ‘Transmission’, ‘Container’, ‘Sample’]</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The output workspace based on the value of ProcessAs.</p></td>
</tr>
<tr class="row-odd"><td><p>NormaliseBy</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Timer</p></td>
<td><p>Choose the normalisation type. Allowed values: [‘None’, ‘Timer’, ‘Monitor’]</p></td>
</tr>
<tr class="row-even"><td><p>BeamRadius</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.05</p></td>
<td><p>Beam radius [m]; used for beam center finding, transmission and flux calculations.</p></td>
</tr>
<tr class="row-odd"><td><p>BeamFinderMethod</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>DirectBeam</p></td>
<td><p>Choose between direct beam or scattered beam method for beam center finding. Allowed values: [‘DirectBeam’, ‘ScatteredBeam’]</p></td>
</tr>
<tr class="row-even"><td><p>SampleThickness</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.1</p></td>
<td><p>Sample thickness [cm] (if -1, the value is taken from the nexus file).</p></td>
</tr>
<tr class="row-odd"><td><p>AbsorberInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the absorber workspace.</p></td>
</tr>
<tr class="row-even"><td><p>BeamInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the empty beam input workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>TransmissionInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the transmission input workspace.</p></td>
</tr>
<tr class="row-even"><td><p>ContainerInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the container workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>ReferenceInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the reference workspace.</p></td>
</tr>
<tr class="row-even"><td><p>SensitivityInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the input sensitivity workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>SensitivityOutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the output sensitivity workspace.</p></td>
</tr>
<tr class="row-even"><td><p>MaskedInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace to copy the mask from; for example, the beam stop</p></td>
</tr>
<tr class="row-odd"><td><p>FluxInputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the input direct beam flux workspace.</p></td>
</tr>
<tr class="row-even"><td><p>FluxOutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the output direct beam flux workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>CacheSolidAngle</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Whether or not to cache the solid angle workspace.</p></td>
</tr>
<tr class="row-even"><td><p>WaterCrossSection</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Provide water cross-section; used only if the absolute scale is done by dividing to water.</p></td>
</tr>
<tr class="row-odd"><td><p>DefaultMaskedInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Workspace to copy the mask from; for example, the bad detector edges.</p></td>
</tr>
<tr class="row-even"><td><p>ThetaDependent</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Whether or not to use 2theta dependent transmission correction</p></td>
</tr>
<tr class="row-odd"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>Input workspace containing already loaded raw data, used for parameter scans.</p></td>
</tr>
<tr class="row-even"><td><p>SolventInputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td></td>
<td><p>The name of the solvent workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>Wavelength</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Wavelength set for the data, will override nexus, intended for D16 reduction.</p></td>
</tr>
<tr class="row-even"><td><p>MinThreshold</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Minimum threshold for calculated efficiency.</p></td>
</tr>
<tr class="row-odd"><td><p>MaxThreshold</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>2</p></td>
<td><p>Maximum threshold for calculated efficiency.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>This algorithm performs SANS reduction for the instruments at the ILL.
With each call, this algorithm processes one type of data which is a part of the whole experiment.
The logic is resolved by the property <strong>ProcessAs</strong>, which governs the reduction steps based on the requested type.
It can be one of the 5: absorber, beam, transmission, container, and sample.
Note that in the following, the <strong>reference</strong> stands for the water run, that should be processed as sample, but with different configurations, in order to generate either the reference input or the sensitivity map for the subsequent sample measurements.
The full data treatment of the complete experiment should be build up as a chain with multiple calls of this algorithm over various types of acquisitions.
The sequence should be logical, typically as enumerated above, since the later processes need the outputs of earlier processes as input.
The common mandatory input is a run file (numor), or a list of them, in which case they will be summed at raw level, so right after loading.
The other common input is the normalisation type (time or monitor) that must be the same for all the runs in full reduction.
The common mandatory output is a workspace, but up to which step it is processed, depends on <strong>ProcessAs</strong>.</p>
</section>
<section id="processas">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">ProcessAs</a><a class="headerlink" href="#processas" title="Link to this heading">¶</a></h2>
<p>Different input properties can be specified depending on the value of <strong>ProcessAs</strong>, as summarized in the table:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ProcessAs</p></th>
<th class="head"><p>Input Workspace Properties</p></th>
<th class="head"><p>Other Input Properties</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Absorber</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Beam</p></td>
<td><ul class="simple">
<li><p>AbsorberInputWorkspace</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>BeamRadius</p></li>
<li><p>BeamFinderMethod</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Transmission</p></td>
<td><ul class="simple">
<li><p>AbsorberInputWorkspace</p></li>
<li><p><strong>BeamInputWorkspace</strong></p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>BeamRadius</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Container</p></td>
<td><ul class="simple">
<li><p>AbsorberInputWorkspace</p></li>
<li><p>BeamInputWorkspace</p></li>
<li><p>TransmissionInputWorkspace</p></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-even"><td><p>Sample (Ref)</p></td>
<td><ul class="simple">
<li><p>AbsorberInputWorkspace</p></li>
<li><p>BeamInputWorkspace</p></li>
<li><p>TransmissionInputWorkspace</p></li>
<li><p>ContainerInputWorkspace</p></li>
<li><p>MaskedInputWorkspace</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>SampleThickness</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Sample</p></td>
<td><ul class="simple">
<li><p>AbsorberInputWorkspace</p></li>
<li><p>BeamInputWorkspace</p></li>
<li><p>TransmissionInputWorkspace</p></li>
<li><p>ContainerInputWorkspace</p></li>
<li><p>MaskedInputWorkspace</p></li>
<li><p>ReferenceInputWorkspace</p></li>
<li><p>SensitivityInputWorkspace</p></li>
<li><p>SolventInputWorkspace</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>SampleThickness</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>All the input workspace properties above are optional.
For example, if processing as sample, if a container input is specified, subtraction will be performed, if not, the step will be skipped.
The only exception is when processing as transmission, when beam input workspace is mandatory.
When processing as reference there is an additional optional output workspace for sensitivity.
Note that when reducing the water run as sample for reference, it will also be normalised by flux, if the corresponding input is supplied.</p>
<p>In the flowcharts below the yellow ovals represent the inputs, the grey parallelograms are the outputs for each process type.</p>
<section id="absorber">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Absorber</a><a class="headerlink" href="#absorber" title="Link to this heading">¶</a></h3>
<figure class="align-default" id="id1">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="beam">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Beam</a><a class="headerlink" href="#beam" title="Link to this heading">¶</a></h3>
<figure class="align-default" id="id2">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="transmission">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Transmission</a><a class="headerlink" href="#transmission" title="Link to this heading">¶</a></h3>
<figure class="align-default" id="id3">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="container">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Container</a><a class="headerlink" href="#container" title="Link to this heading">¶</a></h3>
<figure class="align-default" id="id4">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="reference">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Reference</a><a class="headerlink" href="#reference" title="Link to this heading">¶</a></h3>
<figure class="align-default" id="id5">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="sample">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Sample</a><a class="headerlink" href="#sample" title="Link to this heading">¶</a></h3>
<figure class="align-default" id="id6">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="full-treatment">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Full Treatment</a><a class="headerlink" href="#full-treatment" title="Link to this heading">¶</a></h3>
<p>Full treatment is built by stacking up unary reductions with corresponding <strong>ProcessAs</strong>. The diagram below illustrates the flow of processing.
Letters denote absorber (A), beam (B), transmission (T), container (C), reference (R), sample (S).
A is processed first, and passed to all the other processes.
B takes only A as input, and the output of B is needed by the rest.
T takes A and B as inputs, and the calculated transmission is used by C, R and S respectively.
C takes A, B and the container T as input, and the output is supplied to R and S respectively.
R takes A, B, its T, and C, and the output is seeded to S.
S takes A, B, its T and C, as well as R as inputs.
The output of S is passed to final step integration.</p>
<figure class="align-default" id="id7">
<img alt="../_images/ImageNotFound.png" src="../_images/ImageNotFound.png" />
<figcaption>
<p><span class="caption-text">diagram generation was disabled</span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>This example below performs a complete reduction for D11 data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For transmission calculation, the beam run and the transmission run have to be recorded at the same instrument configuration.
For beam flux normalisation and beam center movement, the beam run and the sample run have to be recorded at the same configuration.
For container subtraction, the container and the sample run have to be recorded at the same configuration.
Otherwise a warning is logged, but the execution does not stop.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p><strong>Example - full treatment of a sample</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the mask (or load the sample, and mask graphically using the Instrument View)</span>
<span class="n">LoadNexusProcessed</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;D11_mask.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;mask&#39;</span><span class="p">)</span>

<span class="c1"># Process the dark current Cd/B4C for water</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010455.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Absorber&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Process the empty beam for water</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010414.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Beam&#39;</span><span class="p">,</span> <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Water container transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010446.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span>
                 <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;wc_tr&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Water container transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;wc_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Water container</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010454.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Container&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span>
                 <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;wc_tr&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;wc&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Water transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010445.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;w_tr&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Water transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;w_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Water</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010453.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Sample&#39;</span><span class="p">,</span> <span class="n">MaskedInputWorkspace</span><span class="o">=</span><span class="s1">&#39;mask&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s1">&#39;wc&#39;</span><span class="p">,</span>
                 <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;wc_tr&#39;</span><span class="p">,</span>
                 <span class="n">SensitivityOutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sens&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Process the dark current Cd/B4C for sample</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010462.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Absorber&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Process the empty beam for sample</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010413.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Beam&#39;</span><span class="p">,</span> <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;Db&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Sample container transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010444.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sc_tr&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample container transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;sc_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Sample container</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010460.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Container&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Db&#39;</span><span class="p">,</span>
                 <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;sc_tr&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Sample transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010585.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;s_tr&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;s_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Sample</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;010569.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Sample&#39;</span><span class="p">,</span> <span class="n">MaskedInputWorkspace</span><span class="o">=</span><span class="s1">&#39;mask&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s1">&#39;sc&#39;</span><span class="p">,</span>
                 <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;Db&#39;</span><span class="p">,</span> <span class="n">SensitivityInputWorkspace</span><span class="o">=</span><span class="s1">&#39;sens&#39;</span><span class="p">,</span>
                 <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;s_tr&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_flux&#39;</span><span class="p">,</span> <span class="n">Version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Convert to I(Q)</span>
<span class="n">SANSILLIntegration</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_flux&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;iq&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Water container transmission is 0.946
Water transmission is 0.501
Sample container transmission is 0.667
Sample transmission is 0.642
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/ILL/SANS.html">ILL\SANS</a></p>
</section>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/1b00e0b0644260219c488cf4142569b296f21ab0/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SANSILLReduction.py">SANSILLReduction.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SANSILLParameterScan-v1.html" title="Previous Chapter: SANSILLParameterScan v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANSILLParame...</span>
    </a>
  </li>
  <li>
    <a href="SANSILLReduction-v2.html" title="Next Chapter: SANSILLReduction v2"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SANSILLReduction v2 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>