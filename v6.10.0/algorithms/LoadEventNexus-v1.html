<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LoadEventNexus v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=770b529d"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadEventPreNexus v2" href="LoadEventPreNexus-v2.html" />
    <link rel="prev" title="LoadEventAsWorkspace2D v1" href="LoadEventAsWorkspace2D-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadEventNexus v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="loadeventnexus-v1">
<span id="algm-loadeventnexus"></span><span id="algm-loadeventnexus-v1"></span><h1>LoadEventNexus v1<a class="headerlink" href="#loadeventnexus-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#child-algorithms-used" id="id5">Child algorithms used</a></p></li>
<li><p><a class="reference internal" href="#optional-properties" id="id6">Optional properties</a></p></li>
<li><p><a class="reference internal" href="#event-compression" id="id7">Event Compression</a></p></li>
<li><p><a class="reference internal" href="#veto-pulses" id="id8">Veto Pulses</a></p></li>
<li><p><a class="reference internal" href="#data-loaded-from-nexus-file" id="id9">Data Loaded from Nexus File</a></p></li>
<li><p><a class="reference internal" href="#invalid-period-logs-error" id="id10">Invalid Period Logs Error</a></p>
<ul>
<li><p><a class="reference internal" href="#sample-object" id="id11">Sample Object</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id12">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id13">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Loads an Event NeXus file and stores as an EventWorkspace. Optionally, you can filter out events falling outside a range of times-of-flight and/or a time interval.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="LoadISISNexus-v2.html#algm-loadisisnexus"><span class="std std-ref">LoadISISNexus</span></a>, <a class="reference internal" href="LoadEventAndCompress-v1.html#algm-loadeventandcompress"><span class="std std-ref">LoadEventAndCompress</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the Event NeXus file to read, including its full or relative path. The file name is typically of the form INST_####_event.nxs (N.B. case sensitive if running on Linux). Allowed extensions: [‘.nxs.h5’, ‘.nxs’, ‘_event.nxs’]</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the output EventWorkspace or WorkspaceGroup in which to load the EventNexus file.</p></td>
</tr>
<tr class="row-even"><td><p>NXentryName</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Optional: Name of the NXentry to load if it’s not the default.</p></td>
</tr>
<tr class="row-odd"><td><p>FilterByTofMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To exclude events that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds. Keep blank to load all events.</p></td>
</tr>
<tr class="row-even"><td><p>FilterByTofMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To exclude events that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds. Keep blank to load all events.</p></td>
</tr>
<tr class="row-odd"><td><p>FilterByTimeStart</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To only include events after the provided start time, in seconds (relative to the start of the run).</p></td>
</tr>
<tr class="row-even"><td><p>FilterByTimeStop</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To only include events before the provided stop time, in seconds (relative to the start of the run).</p></td>
</tr>
<tr class="row-odd"><td><p>BankName</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>Optional: To only include events from one bank. Any bank whose name does not match the given string will have no events.</p></td>
</tr>
<tr class="row-even"><td><p>SingleBankPixelsOnly</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Optional: Only applies if you specified a single bank to load with BankName. Only pixels in the specified bank will be created if true; all of the instrument’s pixels will be created otherwise.</p></td>
</tr>
<tr class="row-odd"><td><p>Precount</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Pre-count the number of events in each pixel before allocating memory (optional, default True). This can significantly reduce memory use and memory fragmentation; it may also speed up loading.</p></td>
</tr>
<tr class="row-even"><td><p>CompressTolerance</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>CompressEvents while loading (optional, default: off). This specified the tolerance to use (in microseconds) when compressing where positive is linear tolerance, negative is logorithmic tolerance, and zero indicates that time-of-flight must be identical to compress.</p></td>
</tr>
<tr class="row-odd"><td><p>CompressBinningMode</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Default</p></td>
<td><p>Optional. Binning behavior can be specified in the usual way through sign of binwidth and other properties (‘Default’); or can be set to one of the allowed binning modes. This will override all other specification or default behavior. Allowed values: [‘Default’, ‘Linear’, ‘Logarithmic’]</p></td>
</tr>
<tr class="row-even"><td><p>ChunkNumber</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>If loading the file by sections (‘chunks’), this is the section number of this execution of the algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p>TotalChunks</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>If loading the file by sections (‘chunks’), this is the total number of sections.</p></td>
</tr>
<tr class="row-even"><td><p>LoadMonitors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Load the monitors from the file (optional, default False).</p></td>
</tr>
<tr class="row-odd"><td><p>MonitorsLoadOnly</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>If multiple repesentations exist, which one to load. Default is to load the one that is present. Allowed values: [‘’, ‘Events’, ‘Histogram’]</p></td>
</tr>
<tr class="row-even"><td><p>FilterMonByTofMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To exclude events from monitors that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds.</p></td>
</tr>
<tr class="row-odd"><td><p>FilterMonByTofMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To exclude events from monitors that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds.</p></td>
</tr>
<tr class="row-even"><td><p>FilterMonByTimeStart</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To only include events from monitors after the provided start time, in seconds (relative to the start of the run).</p></td>
</tr>
<tr class="row-odd"><td><p>FilterMonByTimeStop</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>Optional: To only include events from monitors before the provided stop time, in seconds (relative to the start of the run).</p></td>
</tr>
<tr class="row-even"><td><p>SpectrumMin</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The number of the first spectrum to read.</p></td>
</tr>
<tr class="row-odd"><td><p>SpectrumMax</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p><em>Optional</em></p></td>
<td><p>The number of the last spectrum to read.</p></td>
</tr>
<tr class="row-even"><td><p>SpectrumList</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>A comma-separated list of individual spectra to read.</p></td>
</tr>
<tr class="row-odd"><td><p>MetaDataOnly</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If true, only the meta data and sample logs will be loaded.</p></td>
</tr>
<tr class="row-even"><td><p>LoadLogs</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Load only the Sample/DAS logs from the file (default True).</p></td>
</tr>
<tr class="row-odd"><td><p>LoadAllLogs</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Load all the logs from the nxs, without checking or processing them; if checked, LoadLogs will be ignored; use with caution</p></td>
</tr>
<tr class="row-even"><td><p>LoadType</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>Default</p></td>
<td><p>Set type of loader. 2 options {Default, Multiproceess},’Multiprocess’ should work faster for big files and it is experimental, available only in Linux. Allowed values: [‘Default’]</p></td>
</tr>
<tr class="row-odd"><td><p>LoadNexusInstrumentXML</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Reads the embedded Instrument XML from the NeXus file (optional, default True).</p></td>
</tr>
<tr class="row-even"><td><p>NumberOfBins</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>500</p></td>
<td><p>The number of bins intially defined. Use Rebin to change the binning later.  If there is no data loaded, or you select meta data only you will only get 1 bin.</p></td>
</tr>
<tr class="row-odd"><td><p>AllowList</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>If specified, only these logs will be loaded from the file (each separated by a space).</p></td>
</tr>
<tr class="row-even"><td><p>BlockList</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>If specified, these logs will NOT be loaded from the file (each separated by a space).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>The LoadEventNeXus algorithm loads data from an EventNexus file into an
<a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a>. The histogram bin
boundaries depend on the setting of NumberOfBins, which by default will be the whole range of time of flight able to hold all events (in all
pixels) split into NumberOfBins linear bins, and will have their <a class="reference internal" href="../concepts/UnitFactory.html#unit-factory"><span class="std std-ref">units</span></a> set to time-of-flight.
Since it is an <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a>, it can be rebinned
to finer bins with no loss of data.</p>
<section id="child-algorithms-used">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Child algorithms used</a><a class="headerlink" href="#child-algorithms-used" title="Link to this heading">¶</a></h3>
<p><strong>Sample logs</strong>, such as motor positions or e.g. temperature vs time, are
also loaded using <a class="reference internal" href="LoadNexusLogs-v1.html#algm-loadnexuslogs"><span class="std std-ref">LoadNexusLogs</span></a>.</p>
<p><strong>Monitors</strong> are loaded using <a class="reference internal" href="LoadNexusMonitors-v2.html#algm-loadnexusmonitors"><span class="std std-ref">LoadNexusMonitors</span></a>.</p>
<p><strong>Instrument geometry</strong></p>
<p>There are a series of approaches for extracting the instrument geometry.
These follow the escalation path as follows:</p>
<ul class="simple">
<li><p>Tries to load embedded instrument_xml from the NXinstrument if present
using <a class="reference internal" href="LoadIDFFromNexus-v1.html#algm-loadidffromnexus"><span class="std std-ref">LoadIDFFromNexus</span></a>.</p></li>
<li><p>Else tries to load embedded nexus geometry from the NXinstrument if present</p></li>
<li><p>Else tries to load the instrument using the name extracted from NXinstrument</p></li>
</ul>
<p>The latter two possibilities are achieved via
<a class="reference internal" href="LoadInstrument-v1.html#algm-loadinstrument"><span class="std std-ref">LoadInstrument</span></a></p>
</section>
<section id="optional-properties">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Optional properties</a><a class="headerlink" href="#optional-properties" title="Link to this heading">¶</a></h3>
<p>If desired, you can filter out the events at the time of loading, by
specifying minimum and maximum time-of-flight values. This can speed up
loading and reduce memory requirements if you are only interested in a
narrow range of the times-of-flight of your data.</p>
<p>You can specify to load only certain spectra within the file,
using the SpectraMax, SpectraMin and SpectraList properties.
This will load data only matching those restrictions.
At facilities that do not group detectors in hardware such as the SNS,
then this will also equate to the detector IDs.</p>
<p>You may also filter out events by providing the start and stop times, in
seconds, relative to the first pulse (the start of the run).</p>
<p>If you wish to load only a single bank, you may enter its name and no
events from other banks will be loaded.</p>
<p>The Precount option will count the number of events in each pixel before
allocating the memory for each event list. Without this option, because
of the way vectors grow and are re-allocated, it is possible for up to
2x too much memory to be allocated for a given event list, meaning that
your EventWorkspace may occupy nearly twice as much memory as needed.
The pre-counting step takes some time but that is normally compensated
by the speed-up in avoid re-allocating, so the net result is smaller
memory footprint and approximately the same loading time.</p>
</section>
<section id="event-compression">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Event Compression</a><a class="headerlink" href="#event-compression" title="Link to this heading">¶</a></h3>
<p>When <code class="docutils literal notranslate"><span class="pre">CompressTolerance</span></code> is set, the data loaded will be compressed while creating the individual weighted events.
The compression will accumulate events to create a weighted event with no time and cannot be further filtered afterwards.
This parameter is interpreted to be linear tolerance when positive, and logorithmic tolerance when negative.
When <code class="docutils literal notranslate"><span class="pre">CompressBinningMode</span></code> is specified, the <code class="docutils literal notranslate"><span class="pre">CompressTolerance</span></code> is modified be linear or logarithmic.
This mode does take longer than running <code class="docutils literal notranslate"><span class="pre">LoadEventNexus</span></code> without compression,
but reduces the overall memory used during algorithm execution, and memory used by the resulting workspace.
For files that do not have many events, this does not necessarily have an effect other than slowing down loading.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The workspace created by <code class="docutils literal notranslate"><span class="pre">LoadEventNexus</span></code> with compression are different from those created by <code class="docutils literal notranslate"><span class="pre">LoadEventNexus</span></code> without compression then <code class="docutils literal notranslate"><span class="pre">CompressedEvents</span></code>. The histogram representation will be near identical if the tolerence is selected appropriately.</p>
</div>
</section>
<section id="veto-pulses">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Veto Pulses</a><a class="headerlink" href="#veto-pulses" title="Link to this heading">¶</a></h3>
<p>Veto pulses can be filtered out in a separate step using
<a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><span class="std std-ref">FilterByLogValue v1</span></a>:</p>
<p><code class="docutils literal notranslate"><span class="pre">FilterByLogValue(InputWorkspace=&quot;ws&quot;, OutputWorkspace=&quot;ws&quot;, LogName=&quot;veto_pulse_time&quot;, PulseFilter=&quot;1&quot;)</span></code></p>
</section>
<section id="data-loaded-from-nexus-file">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Data Loaded from Nexus File</a><a class="headerlink" href="#data-loaded-from-nexus-file" title="Link to this heading">¶</a></h3>
<p>If <cite>LoadAllLogs</cite> is checked, all the logs in the Nexus files will be loaded directly in the sample logs as they are.
The <cite>LoadLogs</cite> flag will be ignored.
If only <cite>LoadLogs</cite> is checked, only a subset of the logs will be processed and loaded, in the manner described afterward.</p>
<p>The nexus file must have <code class="docutils literal notranslate"><span class="pre">/raw_data_1</span></code> or <code class="docutils literal notranslate"><span class="pre">/entry</span></code> as its main group and
that group be of type <code class="docutils literal notranslate"><span class="pre">NXentry</span></code>. It also needs a group of type <code class="docutils literal notranslate"><span class="pre">NXevent_data</span></code>.</p>
<p>The data is read from each group of type <code class="docutils literal notranslate"><span class="pre">NXevent_data</span></code>.</p>
<p>If the file has an <code class="docutils literal notranslate"><span class="pre">isis_vms_compat</span></code> then it is taken to be an ISIS file and
the data will be modified according to the information obtained from this group.</p>
<p>Here are some tables that show it in more detail:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Description of Data</p></th>
<th class="head"><p>Found in Nexus file
(within ‘raw_data_1’)</p></th>
<th class="head"><p>Placed in Workspace (Workspace2D)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Monitor Data</p></td>
<td><p>groups of Class NXMonitor
(one monitor per group)</p></td>
<td><p>Monitor Data</p></td>
</tr>
<tr class="row-odd"><td><p>Detector Data</p></td>
<td><p>groups of Class NXevent_data
(one bank per group)</p></td>
<td><p>Event data</p></td>
</tr>
<tr class="row-even"><td><p>Instrument</p></td>
<td><p>group <code class="docutils literal notranslate"><span class="pre">Instrument</span></code></p></td>
<td><p>Workspace instrument
if not overridden</p></td>
</tr>
<tr class="row-odd"><td><p>Spectrum of each detector ID</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">isis_vms_compat</span></code> exists,
<code class="docutils literal notranslate"><span class="pre">NSP1</span></code>, <code class="docutils literal notranslate"><span class="pre">UDET</span></code> and <code class="docutils literal notranslate"><span class="pre">SPEC</span></code>
within it,
else one spectrum per detector assumed</p></td>
<td><p>Spectra-Detector mapping</p></td>
</tr>
<tr class="row-even"><td><p>Run</p></td>
<td><p>mainly as loaded from
<a class="reference internal" href="LoadNexusLogs-v1.html#algm-loadnexuslogs"><span class="std std-ref">LoadNexusLogs v1</span></a></p></td>
<td><p>Run Object</p></td>
</tr>
<tr class="row-odd"><td><p>Sample</p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">isis_vms_compat</span></code> exists,
<code class="docutils literal notranslate"><span class="pre">SPB</span></code> and <code class="docutils literal notranslate"><span class="pre">RSPB</span></code> within
<code class="docutils literal notranslate"><span class="pre">isis_vms_compat</span></code>
else sample not loaded</p></td>
<td><p>Sample Object</p></td>
</tr>
</tbody>
</table>
</section>
<section id="invalid-period-logs-error">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Invalid Period Logs Error</a><a class="headerlink" href="#invalid-period-logs-error" title="Link to this heading">¶</a></h3>
<p>There is an issue specific to ISIS, particularly on long runs, where noise on data collection instruments can change the period
of the data. This can cause the period associated with certain data points to exceed the total number of periods we expect.</p>
<p>LoadEventNeXus compares the total number of periods we expect, which can be found in the <strong>periods/number</strong> attribute of the run,
and the greatest period number found in <strong>framelog/period_log/value</strong> attribute of the data. If they do not match, an error message
is raised which explains this problem, and loading of the data will be unsuccessful.</p>
<p>In this case, the data is fundamentally corrupted, so Mantid does not know how to correct this automatically. If you only expect 1 period, there is a script
in the script repository, <em>user/TomTitcombe/correct_period_logs.py</em>, which will change all the periods in <strong>framelog/period_log/value</strong> to 1.</p>
<p>If you expect more than 1 periods, there is currently no solution script available through Mantid. You should contact the Mantid team to discuss
the problem and possible solutions.</p>
<section id="sample-object">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Sample Object</a><a class="headerlink" href="#sample-object" title="Link to this heading">¶</a></h4>
<p>If <code class="docutils literal notranslate"><span class="pre">isis_vms_compat</span></code> exists,
then the following sample properties are read from it:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Nexus</p></th>
<th class="head"><p>Workspace sample object</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SPB[2]</span></code></p></td>
<td><p>Geometry flag</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RSPB[3]</span></code></p></td>
<td><p>Thickness</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RSPB[4]</span></code></p></td>
<td><p>Height</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">RSPB[5]</span></code></p></td>
<td><p>Width</p></td>
</tr>
</tbody>
</table>
<p>This is the same as read by <a class="reference internal" href="LoadISISNexus-v2.html#algm-loadisisnexus"><span class="std std-ref">LoadISISNexus v2</span></a>.</p>
</section>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p><strong>Example - Load SNS/ISIS event Nexus file:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load SNS HYS event dataset</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventNexus</span><span class="p">(</span><span class="s1">&#39;HYS_11092_event.nxs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of histograms (spectra) is: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The number of histograms (spectra) is: 20480
</pre></div>
</div>
<p><strong>Example - Load event nexus file with time filtering:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load SNS CNCS event dataset between 1 and 2 minutes</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventNexus</span><span class="p">(</span><span class="s1">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">,</span> <span class="n">FilterByTimeStart</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">FilterByTimeStop</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The number of events: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The number of events: 29753
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Nexus.html">DataHandling\Nexus</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/1b00e0b0644260219c488cf4142569b296f21ab0/Framework/DataHandling/inc/MantidDataHandling/LoadEventNexus.h">LoadEventNexus.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/1b00e0b0644260219c488cf4142569b296f21ab0/Framework/DataHandling/src/LoadEventNexus.cpp">LoadEventNexus.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadEventAsWorkspace2D-v1.html" title="Previous Chapter: LoadEventAsWorkspace2D v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadEventAsWo...</span>
    </a>
  </li>
  <li>
    <a href="LoadEventPreNexus-v2.html" title="Next Chapter: LoadEventPreNexus v2"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadEventPreNexus v2 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>