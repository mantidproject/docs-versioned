<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Inelastic Corrections</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=770b529d"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Inelastic Data Processor" href="Inelastic%20Data%20Processor.html" />
    <link rel="prev" title="Inelastic Bayes Fitting" href="Inelastic%20Bayes%20Fitting.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Interfaces</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Inelastic Corrections</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="inelastic-corrections">
<span id="interface-inelastic-corrections"></span><h1>Inelastic Corrections<a class="headerlink" href="#inelastic-corrections" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id19">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#action-buttons" id="id20">Action Buttons</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#container-subtraction" id="id21">Container Subtraction</a></p>
<ul>
<li><p><a class="reference internal" href="#options" id="id22">Options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#calculate-paalman-pings" id="id23">Calculate Paalman Pings</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id24">Options</a></p></li>
<li><p><a class="reference internal" href="#correction-details" id="id25">Correction Details</a></p></li>
<li><p><a class="reference internal" href="#shape-details" id="id26">Shape Details</a></p>
<ul>
<li><p><a class="reference internal" href="#flat-plate" id="id27">Flat Plate</a></p></li>
<li><p><a class="reference internal" href="#cylinder" id="id28">Cylinder</a></p></li>
<li><p><a class="reference internal" href="#annulus" id="id29">Annulus</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#background" id="id30">Background</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#calculate-monte-carlo-absorption" id="id31">Calculate Monte Carlo Absorption</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id32">Options</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id33">Shape Details</a></p>
<ul>
<li><p><a class="reference internal" href="#preset" id="id34">Preset</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id35">Flat Plate</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id36">Annulus</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id37">Cylinder</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#apply-absorption-corrections" id="id38">Apply Absorption Corrections</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id39">Options</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Provides correction routines for quasielastic, inelastic and diffraction
reductions.</p>
<p>These interfaces do not support GroupWorkspace’s as input.</p>
<figure class="align-right" id="id8">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="action-buttons">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Action Buttons</a><a class="headerlink" href="#action-buttons" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Settings</dt><dd><p>Opens the <a class="reference internal" href="../indirect/Indirect%20Settings.html#inelastic-interface-settings"><span class="std std-ref">Settings</span></a> GUI which allows you to
customize the settings for this interface.</p>
</dd>
</dl>
<dl class="simple">
<dt>?</dt><dd><p>Opens this help page.</p>
</dd>
<dt>Py</dt><dd><p>Exports a Python script which will replicate the processing done by the current tab.</p>
</dd>
<dt>Manage Directories</dt><dd><p>Opens the Manage Directories dialog allowing you to change your search directories
and default save directory and enable/disable data archive search.</p>
</dd>
</dl>
</section>
</section>
<section id="container-subtraction">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">Container Subtraction</a><a class="headerlink" href="#container-subtraction" title="Link to this heading">¶</a></h2>
<p>The Container Subtraction Tab is used to remove the container’s contribution to a run.</p>
<p>Once run the corrected output and container correction is shown in the preview plot. Note
that when this plot shows the result of a calculation the X axis is always in wavelength,
however when data is initially selected the X axis unit matches that of the sample workspace.</p>
<p>The input and container workspaces will be converted to wavelength (using
<a class="reference internal" href="../../algorithms/ConvertUnits-v1.html#algm-convertunits"><span class="std std-ref">ConvertUnits</span></a>) if they do not already have wavelength
as their X unit.</p>
<figure class="align-default" id="id9">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="options">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Options</a><a class="headerlink" href="#options" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Sample</dt><dd><p>Either a reduced file (_red.nxs) or workspace (_red), an <span class="math notranslate nohighlight">\(S(Q,\omega)\)</span> file (_sqw.nxs) or workspace (_sqw), or an ELF file (_elf.nxs) or workspace (_elf) that represents the sample.</p>
</dd>
<dt>Container</dt><dd><p>Either a reduced file (_red.nxs) or workspace (_red), an <span class="math notranslate nohighlight">\(S(Q,\omega)\)</span> file (_sqw.nxs) or workspace (_sqw), or an ELF file (_elf.nxs) or workspace (_elf) that represents the container.</p>
</dd>
<dt>Scale Container by Factor</dt><dd><p>Allows the container’s intensity to be scaled by a given scale factor before being used in the corrections calculation.</p>
</dd>
<dt>Shift X-values by Adding</dt><dd><p>Allows the X-values to be shifted by a specified amount.</p>
</dd>
<dt>Spectrum</dt><dd><p>Changes the spectrum displayed in the preview plot.</p>
</dd>
<dt>Plot Current Preview</dt><dd><p>Plots the currently selected preview plot in a separate external window</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Open Slice Viewer</dt><dd><p>If enabled, it will open the slice viewer for the selected output workspace.</p>
</dd>
<dt>Save Result</dt><dd><p>If enabled the result will be saved as a NeXus file in the default save directory.</p>
</dd>
</dl>
</section>
</section>
<section id="calculate-paalman-pings">
<h2><a class="toc-backref" href="#id23" role="doc-backlink">Calculate Paalman Pings</a><a class="headerlink" href="#calculate-paalman-pings" title="Link to this heading">¶</a></h2>
<p>Calculates absorption corrections in the Paalman &amp; Pings absorption factors that
could be applied to the data when given information about the sample (and
optionally the container) geometry.</p>
<figure class="align-default" id="id10">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id1">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Options</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Sample Input</dt><dd><p>A reduced file (<em>_red.nxs</em>) or workspace (<em>_red</em>).</p>
</dd>
<dt>Use Container</dt><dd><p>If checked allows you to select a workspace for the container in a reduced file (<em>_red.nxs</em>) or workspace (<em>_red</em>).</p>
</dd>
<dt>Corrections Details</dt><dd><p>These options will be automatically preset to the default values read from the sample workspace,
whenever possible. They can be overridden manually.(see below)</p>
</dd>
<dt>Sample Shape</dt><dd><p>Sets the shape of the sample, this affects the options for the shape details
(see below).</p>
</dd>
<dt>Sample Details Method</dt><dd><p>Choose to use a Chemical Formula or Cross Sections to set the neutron information in the sample using
the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a> algorithm.</p>
</dd>
<dt>Sample/Container Mass density, Atom Number Density or Formula Number Density</dt><dd><p>Density of the sample or container. This is used in the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a>
algorithm. If Atom Number Density is used, the NumberDensityUnit property is set to <em>Atoms</em> and if
Formula Number Density is used then NumberDensityUnit is set to <em>Formula Units</em>.</p>
</dd>
<dt>Sample/Container Chemical Formula</dt><dd><p>Chemical formula of the sample or container material. This must be provided in the
format expected by the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a>
algorithm.</p>
</dd>
<dt>Cross Sections</dt><dd><p>Selecting the Cross Sections option in the Sample Details combobox will allow you to enter coherent,
incoherent and attenuation cross sections for the Sample and Container (units in barns).</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Wavelength</dt><dd><p>If enabled, it will plot a wavelength spectrum represented by the selected workspace indices.</p>
</dd>
<dt>Plot Angle</dt><dd><p>If enabled, it will plot an angle bin represented by the neighbouring bin indices.</p>
</dd>
<dt>Save Result</dt><dd><p>Saves the result in the default save directory.</p>
</dd>
</dl>
</section>
<section id="correction-details">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Correction Details</a><a class="headerlink" href="#correction-details" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Emode</dt><dd><p>The energy transfer mode. All the options except <em>Efixed</em> require the input workspaces to be in wavelength.
In <em>Efixed</em> mode, correction will be computed only for a single wavelength point defined by ` Efixed` value.
All the options except <em>Elastic</em> require the Efixed value to be set correctly.
For flat plate, all the options except <em>Efixed</em>, are equivalent.
In brief, use <em>Indirect</em> for QENS, <em>Efixed</em> for FWS and diffraction.
<em>Efixed</em> can be used for QENS also, if the energy transfer can be neglected compared to the incident energy.
See <a class="reference internal" href="../../algorithms/CylinderPaalmanPingsCorrection-v2.html#algm-cylinderpaalmanpingscorrection"><span class="std std-ref">CylinderPaalmanPingsCorrections</span></a> for the details.</p>
</dd>
<dt>Efixed</dt><dd><p>The value of the incident (indirect) or final (direct) energy in <cite>mev</cite>. Specified in the instrument parameter file.</p>
</dd>
<dt>Number Wavelengths</dt><dd><p>Number of wavelength points to compute the corrections for. Ignored for <em>Efixed</em>.</p>
</dd>
<dt>Interpolate</dt><dd><p>Whether or not to interpolate the corrections as a function of wavelength. Ignored for <em>Efixed</em>.</p>
</dd>
</dl>
</section>
<section id="shape-details">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Shape Details</a><a class="headerlink" href="#shape-details" title="Link to this heading">¶</a></h3>
<p>Depending on the shape of the sample different parameters for the sample
dimension are required and are detailed below.</p>
<section id="flat-plate">
<h4><a class="toc-backref" href="#id27" role="doc-backlink">Flat Plate</a><a class="headerlink" href="#flat-plate" title="Link to this heading">¶</a></h4>
<figure class="align-default" id="id11">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id11" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The calculation for a flat plate geometry is performed by the
<a class="reference internal" href="../../algorithms/FlatPlatePaalmanPingsCorrection-v1.html#algm-flatplatepaalmanpingscorrection"><span class="std std-ref">FlatPlatePaalmanPingsCorrection</span></a>
algorithm.</p>
<dl class="simple">
<dt>Sample Thickness</dt><dd><p>Thickness of sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Angle</dt><dd><p>Angle of the sample to the beam in degrees.</p>
</dd>
<dt>Container Front Thickness</dt><dd><p>Thickness of front container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Container Back Thickness</dt><dd><p>Thickness of back container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
</dl>
</section>
<section id="cylinder">
<h4><a class="toc-backref" href="#id28" role="doc-backlink">Cylinder</a><a class="headerlink" href="#cylinder" title="Link to this heading">¶</a></h4>
<figure class="align-default" id="id12">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The calculation for a cylindrical geometry is performed by the
<a class="reference internal" href="../../algorithms/CylinderPaalmanPingsCorrection-v2.html#algm-cylinderpaalmanpingscorrection"><span class="std std-ref">CylinderPaalmanPingsCorrection</span></a>
algorithm.</p>
<dl class="simple">
<dt>Sample Inner Radius</dt><dd><p>Radius of the inner wall of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Outer Radius</dt><dd><p>Radius of the outer wall of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Container Outer Radius</dt><dd><p>Radius of outer wall of the container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Beam Height</dt><dd><p>Height of incident beam <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Beam Width</dt><dd><p>Width of incident beam in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Step Size</dt><dd><p>Step size used in calculation in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
</dl>
</section>
<section id="annulus">
<h4><a class="toc-backref" href="#id29" role="doc-backlink">Annulus</a><a class="headerlink" href="#annulus" title="Link to this heading">¶</a></h4>
<figure class="align-default" id="id13">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id13" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The calculation for an annular geometry is performed by the
<a class="reference internal" href="../../algorithms/CylinderPaalmanPingsCorrection-v2.html#algm-cylinderpaalmanpingscorrection"><span class="std std-ref">CylinderPaalmanPingsCorrection</span></a>
algorithm.</p>
<p>The options here are the same as for Cylinder.</p>
</section>
</section>
<section id="background">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Background</a><a class="headerlink" href="#background" title="Link to this heading">¶</a></h3>
<p>The main correction to be applied to neutron scattering data is that for
absorption both in the sample and its container, when present. For flat plate
geometry, the corrections can be analytical and have been discussed for example
by Carlile [1]. The situation for cylindrical geometry is more complex and
requires numerical integration. These techniques are well known and used in
liquid and amorphous diffraction, and are described in the ATLAS manual [2].</p>
<p>The absorption corrections use the formulism of Paalman and Pings [3] and
involve the attenuation factors <span class="math notranslate nohighlight">\(A_{i,j}\)</span> where <span class="math notranslate nohighlight">\(i\)</span> refers to
scattering and <span class="math notranslate nohighlight">\(j\)</span> attenuation. For example, <span class="math notranslate nohighlight">\(A_{s,sc}\)</span> is the
attenuation factor for scattering in the sample and attenuation in the sample
plus container. If the scattering cross sections for sample and container are
<span class="math notranslate nohighlight">\(\Sigma_{s}\)</span> and <span class="math notranslate nohighlight">\(\Sigma_{c}\)</span> respectively, then the measured
scattering from the empty container is <span class="math notranslate nohighlight">\(I_{c} = \Sigma_{c}A_{c,c}\)</span> and
that from the sample plus container is <span class="math notranslate nohighlight">\(I_{sc} = \Sigma_{s}A_{s,sc} +
\Sigma_{c}A_{c,sc}\)</span>, thus <span class="math notranslate nohighlight">\(\Sigma_{s} = (I_{sc} - I_{c}A_{c,sc}/A_{c,c}) /
A_{s,sc}\)</span>.</p>
<p>References:</p>
<ol class="arabic simple">
<li><p>C J Carlile, Rutherford Laboratory report, RL-74-103 (1974)</p></li>
<li><p>A K Soper, W S Howells &amp; A C Hannon, <a class="reference external" href="http://wwwisis2.isis.rl.ac.uk/Disordered/Manuals/ATLAS/ATLAS%20manual%20v1.0%20Intro.pdf">RAL Report RAL-89-046 (1989)</a></p></li>
<li><p>H H Paalman &amp; C J Pings, <a class="reference external" href="http://dx.doi.org/10.1063/1.1729034">J Appl Phys 33 2635 (1962)</a></p></li>
</ol>
</section>
</section>
<section id="calculate-monte-carlo-absorption">
<h2><a class="toc-backref" href="#id31" role="doc-backlink">Calculate Monte Carlo Absorption</a><a class="headerlink" href="#calculate-monte-carlo-absorption" title="Link to this heading">¶</a></h2>
<p>The Calculate Monte Carlo Absorption tab provides a cross platform alternative to the
Calculate Paalman Pings tab. In this tab a Monte Carlo implementation is used to calculate the
absorption corrections.</p>
<figure class="align-default" id="id14">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id14" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id2">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Options</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Workspace Input</dt><dd><p>A reduced file (<em>_red.nxs</em>) or workspace (<em>_red</em>).</p>
</dd>
<dt>Number Wavelengths</dt><dd><p>The number of wavelength points for which a simulation is attempted.</p>
</dd>
<dt>Events</dt><dd><p>The number of neutron events to generate per simulated point.</p>
</dd>
<dt>Interpolation</dt><dd><p>Method of interpolation used to compute unsimulated values.</p>
</dd>
<dt>Maximum Scatter Point Attempts</dt><dd><p>Maximum number of tries made to generate a scattering point within the sample (+ optional
container etc). Objects with holes in them, e.g. a thin annulus can cause problems if this
number is too low. If a scattering point cannot be generated by increasing this value then
there is most likely a problem with the sample geometry.</p>
</dd>
<dt>Sparse Instrument</dt><dd><p>Whether to spatially approximate the instrument for faster calculation.</p>
</dd>
<dt>Number Of Detector Rows</dt><dd><p>Number of detector rows in the detector grid of the sparse instrument.</p>
</dd>
<dt>Number Of Detector Columns</dt><dd><p>Number of detector columns in the detector grid of the sparse instrument.</p>
</dd>
<dt>Beam Height</dt><dd><p>The height of the beam in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Beam Width</dt><dd><p>The width of the beam in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Shape Details</dt><dd><p>Select the shape of the sample (see specific geometry options below). Alternatively, select ‘Preset’ to use the Sample and Container geometries defined on the input workspace.</p>
</dd>
<dt>Use Container</dt><dd><p>If checked, allows you to input container geometries for use in the absorption corrections.</p>
</dd>
<dt>Sample Details Method</dt><dd><p>Choose to use a Chemical Formula or Cross Sections to set the neutron information in the sample using
the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a> algorithm.</p>
</dd>
<dt>Sample/Container Mass density, Atom Number Density or Formula Number Density</dt><dd><p>Density of the sample or container. This is used in the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a>
algorithm. If Atom Number Density is used, the NumberDensityUnit property is set to <em>Atoms</em> and if
Formula Number Density is used then NumberDensityUnit is set to <em>Formula Units</em>.</p>
</dd>
<dt>Sample/Container Chemical Formula</dt><dd><p>Chemical formula of the sample or container material. This must be provided in the
format expected by the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a>
algorithm.</p>
</dd>
<dt>Cross Sections</dt><dd><p>Selecting the Cross Sections option in the Sample Details combobox will allow you to enter coherent,
incoherent and attenuation cross sections for the Sample and Container (units in barns).</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Wavelength</dt><dd><p>If enabled, it will plot a wavelength spectrum represented by the selected workspace indices.</p>
</dd>
<dt>Plot Angle</dt><dd><p>If enabled, it will plot an angle bin represented by the neighbouring bin indices.</p>
</dd>
<dt>Save Result</dt><dd><p>Saves the result in the default save directory.</p>
</dd>
</dl>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Shape Details</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>Depending on the shape of the sample different parameters for the sample
dimension are required and are detailed below.</p>
<section id="preset">
<h4><a class="toc-backref" href="#id34" role="doc-backlink">Preset</a><a class="headerlink" href="#preset" title="Link to this heading">¶</a></h4>
<p>This option will use the Sample and Container geometries as defined in the input workspace. No further geometry inputs will be taken, though the Sample material can still be overridden.</p>
</section>
<section id="id4">
<h4><a class="toc-backref" href="#id35" role="doc-backlink">Flat Plate</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h4>
<figure class="align-default" id="id15">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id15" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Flat plate calculations are provided by the
<a class="reference internal" href="../../algorithms/IndirectFlatPlateAbsorption-v2.html#algm-indirectflatplateabsorption"><span class="std std-ref">IndirectFlatPlateAbsorption</span></a> algorithm.</p>
<dl class="simple">
<dt>Sample Width</dt><dd><p>Width of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Height</dt><dd><p>Height of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Thickness</dt><dd><p>Thickness of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Angle</dt><dd><p>Angle of the sample to the beam in degrees.</p>
</dd>
<dt>Container Front Thickness</dt><dd><p>Thickness of the front of the container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Container Back Thickness</dt><dd><p>Thickness of the back of the container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
</dl>
</section>
<section id="id5">
<h4><a class="toc-backref" href="#id36" role="doc-backlink">Annulus</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<figure class="align-default" id="id16">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id16" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Annulus calculations are provided by the <a class="reference internal" href="../../algorithms/IndirectAnnulusAbsorption-v2.html#algm-indirectannulusabsorption"><span class="std std-ref">IndirectAnnulusAbsorption</span></a> algorithm.</p>
<dl class="simple">
<dt>Sample Inner Radius</dt><dd><p>Radius of the inner wall of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Outer Radius</dt><dd><p>Radius of the outer wall of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Container Inner Radius</dt><dd><p>Radius of the inner wall of the container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Container Outer Radius</dt><dd><p>Radius of the outer wall of the container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Height</dt><dd><p>Height of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
</dl>
</section>
<section id="id6">
<h4><a class="toc-backref" href="#id37" role="doc-backlink">Cylinder</a><a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<figure class="align-default" id="id17">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id17" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Cylinder calculations are provided by the
<a class="reference internal" href="../../algorithms/IndirectCylinderAbsorption-v2.html#algm-indirectcylinderabsorption"><span class="std std-ref">IndirectCylinderAbsorption</span></a> algorithm.</p>
<dl class="simple">
<dt>Sample Radius</dt><dd><p>Radius of the outer wall of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Container Radius</dt><dd><p>Radius of the outer wall of the container in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
<dt>Sample Height</dt><dd><p>Height of the sample in <span class="math notranslate nohighlight">\(cm\)</span>.</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="apply-absorption-corrections">
<span id="apply-absorp-correct"></span><h2><a class="toc-backref" href="#id38" role="doc-backlink">Apply Absorption Corrections</a><a class="headerlink" href="#apply-absorption-corrections" title="Link to this heading">¶</a></h2>
<p>The Apply Corrections tab applies the corrections calculated in the Calculate Paalman
Pings or Calculate Monte Carlo Absorption tabs of the Inelastic Data Corrections interface.</p>
<p>This uses the <a class="reference internal" href="../../algorithms/ApplyPaalmanPingsCorrection-v1.html#algm-applypaalmanpingscorrection"><span class="std std-ref">ApplyPaalmanPingsCorrection</span></a> algorithm to apply absorption corrections in
the form of the Paalman &amp; Pings correction factors. When <em>Use Container</em> is disabled
only the <span class="math notranslate nohighlight">\(A_{s,s}\)</span> factor must be provided, when using a container the
additional factors must be provided: <span class="math notranslate nohighlight">\(A_{c,sc}\)</span>, <span class="math notranslate nohighlight">\(A_{s,sc}\)</span> and
<span class="math notranslate nohighlight">\(A_{c,c}\)</span>.</p>
<p>Once run the corrected output and container correction is shown in the preview plot. Note
that when this plot shows the result of a calculation the X axis is always in
wavelength, however when data is initially selected the X axis unit matches that
of the sample workspace.</p>
<p>The input and container workspaces will be converted to wavelength (using
<a class="reference internal" href="../../algorithms/ConvertUnits-v1.html#algm-convertunits"><span class="std std-ref">ConvertUnits</span></a>) if they do not already have wavelength
as their X unit.</p>
<p>The binning of the sample, container and corrections factor workspace must all
match, if the sample and container do not match you will be given the option to
rebin (using <a class="reference internal" href="../../algorithms/RebinToWorkspace-v1.html#algm-rebintoworkspace"><span class="std std-ref">RebinToWorkspace</span></a>) the sample to
match the container, if the correction factors do not match you will be given
the option to interpolate (<a class="reference internal" href="../../algorithms/SplineInterpolation-v1.html#algm-splineinterpolation"><span class="std std-ref">SplineInterpolation</span></a>) the correction factor to match the sample.</p>
<figure class="align-default" id="id18">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id18" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="id7">
<h3><a class="toc-backref" href="#id39" role="doc-backlink">Options</a><a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>Sample</dt><dd><p>A reduced file (<em>_red.nxs</em>) or workspace (<em>_red</em>).</p>
</dd>
<dt>Corrections</dt><dd><p>The calculated corrections workspace produced from one of the preview two tabs.</p>
</dd>
<dt>Geometry</dt><dd><p>Sets the sample geometry (this must match the sample shape used when calculating
the corrections).</p>
</dd>
<dt>Use Container</dt><dd><p>If checked allows you to select a workspace for the container in the format of
either a reduced file (<em>_red.nxs</em>) or workspace (<em>_red</em>) or an <span class="math notranslate nohighlight">\(S(Q,
\omega)\)</span> file (<em>_sqw.nxs</em>) or workspace (<em>_sqw</em>).</p>
</dd>
<dt>Scale Container by factor</dt><dd><p>Allows the container intensity to be scaled by a given scale factor before
being used in the corrections calculation.</p>
</dd>
<dt>Shift X-values by Adding</dt><dd><p>Allows the X-values of the container to be shifted by a specified amount.</p>
</dd>
<dt>Rebin Container to Sample</dt><dd><p>Rebins the container to the sample.</p>
</dd>
<dt>Spectrum</dt><dd><p>Changes the spectrum displayed in the preview plot.</p>
</dd>
<dt>Plot Current Preview</dt><dd><p>Plots the currently selected preview plot in a separate external window</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Open Slice Viewer</dt><dd><p>If enabled, it will open the slice viewer for the selected output workspace.</p>
</dd>
<dt>Save Result</dt><dd><p>If enabled the result will be saved as a NeXus file in the default save directory.</p>
</dd>
</dl>
<p><strong>Categories</strong>: <a class="reference external" href="../ILL/categories/Interfaces.html">Interfaces</a> | <a class="reference external" href="../../algorithms/categories/Inelastic.html">Inelastic</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Inelastic%20Bayes%20Fitting.html" title="Previous Chapter: Inelastic Bayes Fitting"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Inelastic Bay...</span>
    </a>
  </li>
  <li>
    <a href="Inelastic%20Data%20Processor.html" title="Next Chapter: Inelastic Data Processor"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Inelastic Dat... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>