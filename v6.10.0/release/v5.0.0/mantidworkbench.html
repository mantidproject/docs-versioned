<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MantidWorkbench Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=770b529d"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MuSR Changes" href="muon.html" />
    <link rel="prev" title="MantidPlot Changes" href="mantidplot.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 5.0.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">MantidWorkbench Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="mantidworkbench-changes">
<h1>MantidWorkbench Changes<a class="headerlink" href="#mantidworkbench-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#new" id="id6">New</a></p></li>
<li><p><a class="reference internal" href="#improvements" id="id7">Improvements</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id8">Bugfixes</a></p></li>
</ul>
</nav>
<figure class="align-right" id="id1">
<img alt="../../_images/ArtWaterfallN1.png" src="../../_images/ArtWaterfallN1.png" />
<figcaption>
<p><span class="caption-text"><em>Waterfall Plots new to Workbench</em></span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="new">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">New</a><a class="headerlink" href="#new" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><em>Waterfall Plots</em> with options for spacing and filling curves.</p></li>
<li><p>Workbench has many more options in the <a class="reference internal" href="../../tutorials/mantid_basic_course/useful/01_save_settings.html#save-settings"><span class="std std-ref">settings menu</span></a>, including setting defaults for plotting and fitting!</p></li>
<li><p>Mantid Workbench can now load all of the workspaces from projects saved from Mantidplot.  Graphs and interface values are not imported from the project.</p></li>
<li><p>Added a compatibility implementation of plotSpectrum and plotBin for python scripts in Workbench, all of the previous arguments are supported with the exception of distribution, which will be ignored. For example the following commands are supported.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#setup a couple of workspaces</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s1">&#39;Powder Diffraction&#39;</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">ws</span><span class="o">+</span><span class="n">ws</span>

<span class="c1">#simple plots</span>
<span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span> <span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plotBin</span><span class="p">(</span><span class="n">ws</span> <span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">#With Error Bars</span>
<span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span> <span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plotBin</span><span class="p">(</span><span class="n">ws</span> <span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1">#Multi line plots</span>
<span class="n">plotSpectrum</span><span class="p">([</span><span class="n">ws</span><span class="p">,</span><span class="n">ws2</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plotBin</span><span class="p">([</span><span class="n">ws</span><span class="p">,</span><span class="n">ws2</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plotSpectrum</span><span class="p">([</span><span class="n">ws</span> <span class="p">,</span><span class="n">ws2</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">plotBin</span><span class="p">([</span><span class="n">ws</span> <span class="p">,</span><span class="n">ws2</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">plotSpectrum</span><span class="p">([</span><span class="s2">&quot;ws&quot;</span><span class="p">,</span><span class="s2">&quot;ws2&quot;</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="c1">#plotting with spectra numbers</span>
<span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">spectrum_nums</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">spectrum_nums</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="n">plotSpectrum</span><span class="p">([</span><span class="n">ws</span><span class="p">,</span><span class="n">ws2</span><span class="p">],</span><span class="n">spectrum_nums</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>

<span class="c1"># add a curve to an existing plot</span>
<span class="n">plot1</span> <span class="o">=</span> <span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plot1</span> <span class="o">=</span> <span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">plot1</span><span class="p">)</span>

<span class="c1"># clear an existing plot use that window to plot</span>
<span class="n">plot2</span> <span class="o">=</span> <span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plot2</span> <span class="o">=</span> <span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">plot2</span><span class="p">,</span> <span class="n">clearWindow</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># plot as points not lines</span>
<span class="n">plotSpectrum</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">error_bars</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plotBin</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># plot as waterfall graphs</span>
<span class="n">plotSpectrum</span><span class="p">([</span><span class="s2">&quot;ws&quot;</span><span class="p">,</span><span class="s2">&quot;ws2&quot;</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">waterfall</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-right" id="id2">
<a class="screenshot reference internal image-reference" href="../../_images/Notification_error.png"><img alt="../../_images/Notification_error.png" class="screenshot" src="../../_images/Notification_error.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Error Notification Service</em></span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="improvements">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Link to this heading">¶</a></h2>
<p><strong>General</strong></p>
<ul class="simple">
<li><p>The way scripts are parsed and executed has been vastly improved, solving issues related to the progress arrow, blank lines after a colon and tabs in strings.</p></li>
<li><p>Progress reporting for scripts has been vastly improved and now reports at the line level.</p></li>
<li><p>Toggle Whitespace in the editor now shows line endings as well as spaces and tabs</p></li>
<li><p>It is easy to miss errors in the Messages box (e.g. many plots on the screen). Now there is an <em>Error Notification service</em> when Mantid encounters an error, directing you to look at the Messages box for details. This can be dis/enabled in File &gt; Settings &gt; General &gt; “Use notifications for important events”.</p></li>
</ul>
<figure class="align-left" id="id3">
<a class="screenshot reference internal image-reference" href="../../_images/Notifications_settings.png"><img alt="../../_images/Notifications_settings.png" class="screenshot" src="../../_images/Notifications_settings.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Toggle Error Notification</em></span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Most changes in the settings dialog now take place immediately, no longer needing a restart, such as changing default instrument, hiding categories of algorithms and interfaces, or choosing whether to see invisible workspaces.</p></li>
</ul>
<p><strong>Fitting</strong></p>
<ul class="simple">
<li><p>Fit functions can now be put into nested categories and into multiple categories.</p></li>
<li><p>Now able to exclude regions of data from a fit, within the fit property browser.</p></li>
<li><p>You can now search for functions when doing fits.</p></li>
<li><p>A help button has been added to the fitting add function dialog.</p></li>
</ul>
<p><strong>Plotting</strong></p>
<ul class="simple">
<li><p>Figure options&gt;Images tab no longer requires Max &gt; Min value. If Min &gt; Max, they will be swapped!</p></li>
<li><p>A warning now appears if you attempt to plot more than ten spectra.</p></li>
<li><p>Normalization options have been added to 2d plots and sliceviewer.</p></li>
<li><p>Double clicking on a workspace that only has a single bin of data (for example from a constant wavelength source) will now plot that bin, also for single bin workspaces a plot bin option has been added to the right click plot menu of the workspace.</p></li>
<li><p>The context menu for WorkspaceGroups now contains plotting options so you can plot all of the workspaces in the group.</p></li>
</ul>
<figure class="align-right" id="id4">
<img alt="../../_images/SaveButton.png" src="../../_images/SaveButton.png" />
<figcaption>
<p><span class="caption-text"><em>Save drop-down menu</em></span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Algorithms</strong></p>
<ul class="simple">
<li><p>Table Workspaces can be saved to Ascii using the <a class="reference internal" href="../../algorithms/SaveAscii-v2.html#algm-saveascii"><span class="std std-ref">SaveAscii</span></a> algorithm, and the <em>Save &gt; Ascii drop-down</em> option above the Workspaces Toolbox.</p></li>
<li><p>The <em>Save drop-down</em> menu in the workspaces toolbox no longer has the old SaveAscii (version 1) as no one was using it and it only added confusion. The most recent version of SaveASCII is still available.</p></li>
<li><p>The algorithm progress details dialog now fills immediately with all running algorithms rather than waiting for a progress update for the algorithm to appear.</p></li>
<li><p>Algorithm dialogs will now use the selected workspace as the InputWorkspace when running an algorithm from the algorithms toolbox.</p></li>
</ul>
<figure class="align-right" id="id5">
<img alt="../../_images/LiveDataCancel.png" src="../../_images/LiveDataCancel.png" />
<figcaption>
<p><span class="caption-text"><em>Live Data Details - easier to cancel</em></span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>We have limited the maximum rate of algorithm progress updates to the progress bar to 1000/second.  This has resulted in a workbench completing certain intensive python scripts 4 times faster.</p></li>
<li><p>Default values for algorithm properties now appear as greyed-out text on custom algorithm dialogs.</p></li>
<li><p><em>Live data sessions</em> can be more easily cancelled, now that MonitorLiveData appears promptly in the <em>algorithm details</em> window.</p></li>
</ul>
</section>
<section id="bugfixes">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Link to this heading">¶</a></h2>
<p><strong>General</strong></p>
<ul class="simple">
<li><p>Scripts with syntax errors can now be opened.</p></li>
<li><p>Scripts are saved properly on windows (no longer double line spaced).</p></li>
<li><p>Scripts generated from plots now work for newer versions of Matplotlib.</p></li>
<li><p>The Show Instrument right click menu option is now disabled for workspaces that have had their spectrum axis converted to another axis using <a class="reference internal" href="../../algorithms/ConvertSpectrumAxis-v2.html#algm-convertspectrumaxis"><span class="std std-ref">ConvertSpectrumAxis</span></a>. Once this axis has been converted the workspace loses its link between the data values and the detectors they were recorded on so we cannot display it in the instrument view.</p></li>
<li><p>Fixed a bug on the instrument viewer where changing projection and back to Full 3D would display the wrong point of view.</p></li>
<li><p>Fixed a crash in the TOFConverter interface when leaving input fields blank or using invalid characters.</p></li>
<li><p>Warnings from the Python <code class="docutils literal notranslate"><span class="pre">warnings</span></code> module are now show as warnings and not errors in the log display.</p></li>
<li><p>Colorbar scale on Instrument view shows labelled ticks when the range is within an order of magnitude, in the SymmetricLog10 setting.</p></li>
</ul>
<p><strong>Plotting</strong></p>
<ul class="simple">
<li><p>Overplots will be normalized by bin width if they are overplotting a curve from a distribution workspace.</p></li>
<li><p>Colorbar scale shows helpful minor ticks and no longer vanishes on colorfill plots with a logarithmic scale.</p></li>
<li><p>Axes limits of a plot no longer automatically rescale when errorbars are on/off.</p></li>
<li><p>Figure options no longer causes a crash for 2d plots created from a script.</p></li>
<li><p>Running an algorithm that reduces the number of spectra on an active plot (eg SumSpectra) no longer causes an error.</p></li>
<li><p>Figure options on bin plots open without throwing an error.</p></li>
<li><p>Right-click menu on the plot of an MDHistoWorkspace can be opened without an error.</p></li>
<li><p>Fixed an uncaught exception when plotting logs on single spectrum workspaces.</p></li>
<li><p>Fixed an issue with changing normalisation on single spectra plots done from a script.</p></li>
<li><p>Axes editor menu now reads the state of the grids on the plot.</p></li>
<li><p>Fixed a bug which caused graphic scaling issues when the double-click menu was used to set an axis as log-scaled.</p></li>
<li><p>The mechanism to keep plots on top of the main Workbench window has been changed because some window managers would not release focus to their script editor rendering it useless.
This has the effect on some Linux environments of removing the ability to minimize the figure. The control within the Plots toolbox still allows visibility to be toggled on/off if required.</p></li>
<li><p>There is now appropriate protection around setting the colorbar scale to logarithmic while the min and/or max value is negative.</p></li>
<li><p>Toggling error bars on a line with markers no longer causes an unhandled exception.</p></li>
</ul>
<p><strong>Fitting</strong></p>
<ul class="simple">
<li><p>Fitting a distribution workspace is normalised correctly.</p></li>
<li><p>The help button in fitting now finds the page for the relevant function.</p></li>
<li><p>Fixed an issue where adding a Bk2BkExpConvPV function to the fit browser caused a crash</p></li>
</ul>
<p><strong>Algorithms</strong></p>
<ul class="simple">
<li><p>In the Algorithm Toolbox, double-clicking on an algorithm always executes the algorithm. In the case, where previous versions of an algorithm are still available, this would show the other versions. You can still click on the triangle to see and execute previous versions.</p></li>
<li><p>Unrolling consecutive workflow algorithms in Workspace History correctly includes every algorithm.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v5-0-0"><span class="std std-ref">Release 5.0.0</span></a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="mantidplot.html" title="Previous Chapter: MantidPlot Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MantidPlot Changes</span>
    </a>
  </li>
  <li>
    <a href="muon.html" title="Next Chapter: MuSR Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MuSR Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>