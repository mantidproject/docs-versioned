<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Direct Inelastic Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=770b529d"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Inelastic Changes" href="indirect_inelastic.html" />
    <link rel="prev" title="SANS Changes" href="sans.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.12.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Direct Inelastic Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#interfaces" id="id5">Interfaces</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id6">New features</a></p></li>
<li><p><a class="reference internal" href="#improvements" id="id7">Improvements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#crystal-field" id="id8">Crystal Field</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id9">New features</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id10">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#algorithms" id="id11">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id12">New features</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id13">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#instrument-definitions" id="id14">Instrument definitions</a></p></li>
<li><p><a class="reference internal" href="#features-removed" id="id15">Features Removed</a></p></li>
</ul>
</nav>
<section id="interfaces">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Interfaces</a><a class="headerlink" href="#interfaces" title="Link to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <a class="reference external" href="https://github.com/mantidproject/mslice">MSlice</a> user interface can now be launched from the MantidPlot Interfaces menu.</p></li>
</ul>
<figure class="align-center">
<a class="screenshot reference internal image-reference" href="../../_images/mslice_interface.png"><img alt="../../_images/mslice_interface.png" class="screenshot" src="../../_images/mslice_interface.png" style="width: 500px;" /></a>
</figure>
<figure class="align-center">
<a class="screenshot reference internal image-reference" href="../../_images/mslice_slice.png"><img alt="../../_images/mslice_slice.png" class="screenshot" src="../../_images/mslice_slice.png" style="width: 500px;" /></a>
</figure>
<figure class="align-center">
<a class="screenshot reference internal image-reference" href="../../_images/mslice_acut.png"><img alt="../../_images/mslice_acut.png" class="screenshot" src="../../_images/mslice_acut.png" style="width: 500px;" /></a>
</figure>
<p>Similar to the slice viewer, MSlice plots slices and cuts from workspaces. It creates customisable publication quality figures. Cuts can be created interactively by dragging a rectangle across a slice, and information such as recoil lines and bragg peaks can be overplotted.</p>
<ul class="simple">
<li><p>The algorithms <a class="reference internal" href="../../algorithms/SofQWCentre-v1.html#algm-sofqwcentre"><span class="std std-ref">SofQWCentre v1</span></a>, <a class="reference internal" href="../../algorithms/SofQWPolygon-v1.html#algm-sofqwpolygon"><span class="std std-ref">SofQWPolygon v1</span></a> and <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon v1</span></a>, which rebin an inelastic workspace (has a <cite>DeltaE</cite> axis) from spectrum numbers (angle) to <cite>MomentumTransfer</cite> may now rebin the energy (<cite>DeltaE</cite>) axis as well as the <span class="math notranslate nohighlight">\(|Q|\)</span> (<cite>MomentumTransfer</cite>) axes.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon v1</span></a> now has uses a faster method for calculating the polygon intersections.</p></li>
<li><p>The crystal field computation and fitting engine is now feature complete. It can now handle multi-site computation and simultaneous fitting of inelastic spectra and physical properties dataset. See the <a class="reference internal" href="../../interfaces/direct/Crystal%20Field%20Python%20Interface.html#crystal-field-python-interface"><span class="std std-ref">Crystal Field Python Interface</span></a> help page for details, and <a class="reference external" href="https://archive.mantidproject.org/Crystal_Field_Examples">https://archive.mantidproject.org/Crystal_Field_Examples</a> for examples of use.</p></li>
<li><p>A new Python module <a class="reference internal" href="../../techniques/DirecttoolsPythonModule.html#directtools-python-module"><span class="std std-ref">directtools</span></a> includes utilities for plotting <span class="math notranslate nohighlight">\(S(Q,W)\)</span> workspaces and cuts (line profiles) in constant <span class="math notranslate nohighlight">\(Q\)</span> and <span class="math notranslate nohighlight">\(E\)</span>.</p></li>
</ul>
</section>
<section id="improvements">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>PyChop has been updated with new look-up tables for the upgraded MAPS (with guide). Some minor bugs in PyChop have been fixed.</p></li>
<li><p>TOFTOF data reduction GUI has been improved. In the new version it has options to delete intermediate workspaces, to replace NaNs in S(Q,W), to create diffractograms and to save the reduced data in NXSPE and NeXus format.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MonitorEfficiencyCorUser-v1.html#algm-monitorefficiencycoruser"><span class="std std-ref">MonitorEfficiencyCorUser v1</span></a> is not anymore restricted to TOFTOF instrument.</p></li>
</ul>
</section>
</section>
<section id="crystal-field">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Crystal Field</a><a class="headerlink" href="#crystal-field" title="Link to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">New features</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The crystal field computation and fitting engine is now feature complete. It can now handle multi-site computation and simultaneous fitting of inelastic spectra and physical properties dataset. See the <a class="reference internal" href="../../interfaces/direct/Crystal%20Field%20Python%20Interface.html#crystal-field-python-interface"><span class="std std-ref">Crystal Field Python Interface</span></a> help page for details, and <a class="reference external" href="https://archive.mantidproject.org/Crystal_Field_Examples">https://archive.mantidproject.org/Crystal_Field_Examples</a> for examples of use.</p></li>
<li><p>Multi-site calculations and fitting are now supported by the crystal field (Python commandline) interface.</p></li>
<li><p>Calculation of dipole transition matrix elements has been added, together with the addition of a <span class="math notranslate nohighlight">\(\chi_0\)</span> term in the <a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldSusceptibility.html#func-crystalfieldsusceptibility"><span class="std std-ref">CrystalFieldSusceptibility</span></a> function.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Bug fixes</a><a class="headerlink" href="#bug-fixes" title="Link to this heading">¶</a></h3>
<p>Several bugs in the Python and C++ code has been fixed - see the <a class="reference external" href="https://github.com/mantidproject/mantid/pull/21604">github page</a> for details.</p>
</section>
</section>
<section id="algorithms">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Link to this heading">¶</a></h2>
<section id="id3">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">New features</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>New algorithm <a class="reference internal" href="../../algorithms/HyspecScharpfCorrection-v1.html#algm-hyspecscharpfcorrection-v1"><span class="std std-ref">HyspecScharpfCorrection</span></a> that can be used to calculate spin incoherent scattering from polarized neutron data</p></li>
<li><p>The algorithms <a class="reference internal" href="../../algorithms/SofQWCentre-v1.html#algm-sofqwcentre"><span class="std std-ref">SofQWCentre v1</span></a>, <a class="reference internal" href="../../algorithms/SofQWPolygon-v1.html#algm-sofqwpolygon"><span class="std std-ref">SofQWPolygon v1</span></a> and <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon v1</span></a>, which rebin an inelastic workspace (has a <cite>DeltaE</cite> axis) from spectrum numbers (angle) to <cite>MomentumTransfer</cite> may now rebin the energy (<cite>DeltaE</cite>) axis as well as the <span class="math notranslate nohighlight">\(|Q|\)</span> (<cite>MomentumTransfer</cite>) axes.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon v1</span></a> now has uses a faster method for calculating the polygon intersections.</p></li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Bug fixes</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug in <a class="reference internal" href="../../algorithms/DirectILLApplySelfShielding-v1.html#algm-directillapplyselfshielding"><span class="std std-ref">DirectILLApplySelfShielding v1</span></a> which could cause confusion among workspaces when the algorithm was run without both self shielding correction and empty container workspaces.</p></li>
<li><p>A <a class="reference external" href="https://github.com/mantidproject/mantid/pull/20953">bug</a> in the handling of workspaces with fractional bin weights (generated by <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon v1</span></a>) has been fixed.</p></li>
</ul>
</section>
</section>
<section id="instrument-definitions">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Instrument definitions</a><a class="headerlink" href="#instrument-definitions" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The MAPS instrument definition file dating back to 2017-06-03 was changed.</p></li>
</ul>
</section>
<section id="features-removed">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Features Removed</a><a class="headerlink" href="#features-removed" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The Direct Convert To Energy graphical interface has been removed, it had not been used for several years, and was a source of bugs as well as using testing effort that is better directed elsewhere.</p></li>
</ul>
<p><a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.12%22+is%3Amerged+label%3A%22Component%3A+Direct+Inelastic%22">Full list of changes on GitHub</a></p>
<p><a class="reference internal" href="index.html#v3-12-0"><span class="std std-ref">Release 3.12.0</span></a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="sans.html" title="Previous Chapter: SANS Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANS Changes</span>
    </a>
  </li>
  <li>
    <a href="indirect_inelastic.html" title="Next Chapter: Indirect Inelastic Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Inel... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>