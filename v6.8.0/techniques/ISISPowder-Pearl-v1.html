<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ISIS Powder Diffraction Scripts - PEARL Reference</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ISIS Powder Diffraction Scripts - POLARIS Reference" href="ISISPowder-Polaris-v1.html" />
    <link rel="prev" title="ISIS Powder Diffraction Scripts - OSIRIS Reference" href="ISISPowder-OSIRIS-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Techniques</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ISIS Powder Diffraction Scripts - PEARL Reference</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="isis-powder-diffraction-scripts-pearl-reference">
<span id="isis-powder-diffraction-pearl-ref"></span><h1>ISIS Powder Diffraction Scripts - PEARL Reference<a class="headerlink" href="#isis-powder-diffraction-scripts-pearl-reference" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#creating-pearl-object" id="id6">Creating PEARL Object</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id7">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#methods" id="id8">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#create-vanadium" id="id9">create_vanadium</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id10">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#focus" id="id11">focus</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id12">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#create-cal" id="id13">create_cal</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id14">Example</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-the-pearl-object-holds-state" id="id15">How the PEARL object holds state</a></p></li>
<li><p><a class="reference internal" href="#calibration-mapping-file" id="id16">Calibration Mapping File</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id17">Example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id18">Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#absorb-corrections-out-filename" id="id19">absorb_corrections_out_filename</a></p></li>
<li><p><a class="reference internal" href="#attenuation-file" id="id20">attenuation_file</a></p></li>
<li><p><a class="reference internal" href="#attenuation-files" id="id21">attenuation_files</a></p></li>
<li><p><a class="reference internal" href="#calibration-directory" id="id22">calibration_directory</a></p></li>
<li><p><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref" id="id23">calibration_mapping_file</a></p></li>
<li><p><a class="reference internal" href="#config-file" id="id24">config_file</a></p></li>
<li><p><a class="reference internal" href="#custom-grouping-filename" id="id25">custom_grouping_filename</a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections" id="id26">do_absorb_corrections</a></p></li>
<li><p><a class="reference internal" href="#file-ext" id="id27">file_ext</a></p></li>
<li><p><a class="reference internal" href="#focus-mode" id="id28">focus_mode</a></p>
<ul>
<li><p><a class="reference internal" href="#all" id="id29">All</a></p></li>
<li><p><a class="reference internal" href="#groups" id="id30">Groups</a></p></li>
<li><p><a class="reference internal" href="#trans" id="id31">Trans</a></p></li>
<li><p><a class="reference internal" href="#mods" id="id32">Mods</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#long-mode" id="id33">long_mode</a></p></li>
<li><p><a class="reference internal" href="#output-directory" id="id34">output_directory</a></p></li>
<li><p><a class="reference internal" href="#perform-attenuation" id="id35">perform_attenuation</a></p></li>
<li><p><a class="reference internal" href="#run-in-cycle" id="id36">run_in_cycle</a></p></li>
<li><p><a class="reference internal" href="#run-number" id="id37">run_number</a></p></li>
<li><p><a class="reference internal" href="#suffix" id="id38">suffix</a></p></li>
<li><p><a class="reference internal" href="#tt-mode" id="id39">tt_mode</a></p></li>
<li><p><a class="reference internal" href="#user-name" id="id40">user_name</a></p></li>
<li><p><a class="reference internal" href="#vanadium-normalisation" id="id41">vanadium_normalisation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-parameters" id="id42">Advanced Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#create-cal-rebin-1-params" id="id43">create_cal_rebin_1_params</a></p></li>
<li><p><a class="reference internal" href="#create-cal-rebin-2-params" id="id44">create_cal_rebin_2_params</a></p></li>
<li><p><a class="reference internal" href="#cross-corr-reference-spectra" id="id45">cross_corr_reference_spectra</a></p></li>
<li><p><a class="reference internal" href="#cross-corr-ws-index-max" id="id46">cross_corr_ws_index_max</a></p></li>
<li><p><a class="reference internal" href="#cross-corr-ws-index-min" id="id47">cross_corr_ws_index_min</a></p></li>
<li><p><a class="reference internal" href="#cross-cor-x-max" id="id48">cross_cor_x_max</a></p></li>
<li><p><a class="reference internal" href="#cross-cor-x-min" id="id49">cross_cor_x_min</a></p></li>
<li><p><a class="reference internal" href="#custom-focused-bin-widths" id="id50">custom_focused_bin_widths</a></p></li>
<li><p><a class="reference internal" href="#custom-focused-cropping-values" id="id51">custom_focused_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#focused-bin-widths" id="id52">focused_bin_widths</a></p></li>
<li><p><a class="reference internal" href="#focused-cropping-values" id="id53">focused_cropping_values</a></p></li>
<li><p><a class="reference internal" href="#generate-absorb-corrections" id="id54">generate_absorb_corrections</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-d-ref" id="id55">get_det_offsets_d_ref</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-step" id="id56">get_det_offsets_step</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-x-max" id="id57">get_det_offsets_x_max</a></p></li>
<li><p><a class="reference internal" href="#get-det-offsets-x-min" id="id58">get_det_offsets_x_min</a></p></li>
<li><p><a class="reference internal" href="#monitor-lambda-crop-range" id="id59">monitor_lambda_crop_range</a></p></li>
<li><p><a class="reference internal" href="#monitor-integration-range" id="id60">monitor_integration_range</a></p></li>
<li><p><a class="reference internal" href="#monitor-mask-regions" id="id61">monitor_mask_regions</a></p></li>
<li><p><a class="reference internal" href="#monitor-spectrum-number" id="id62">monitor_spectrum_number</a></p></li>
<li><p><a class="reference internal" href="#monitor-spline-coefficient" id="id63">monitor_spline_coefficient</a></p></li>
<li><p><a class="reference internal" href="#raw-data-tof-cropping" id="id64">raw_data_tof_cropping</a></p></li>
<li><p><a class="reference internal" href="#spline-coefficient" id="id65">spline_coefficient</a></p></li>
<li><p><a class="reference internal" href="#subtract-empty-instrument" id="id66">subtract_empty_instrument</a></p></li>
<li><p><a class="reference internal" href="#tt35-grouping-filename" id="id67">tt35_grouping_filename</a></p></li>
<li><p><a class="reference internal" href="#tt70-grouping-filename" id="id68">tt70_grouping_filename</a></p></li>
<li><p><a class="reference internal" href="#tt88-grouping-filename" id="id69">tt88_grouping_filename</a></p></li>
<li><p><a class="reference internal" href="#vanadium-absorb-filename" id="id70">vanadium_absorb_filename</a></p></li>
<li><p><a class="reference internal" href="#nxs-filename" id="id71">nxs_filename</a></p></li>
<li><p><a class="reference internal" href="#gss-filename" id="id72">gss_filename</a></p></li>
<li><p><a class="reference internal" href="#dat-files-directory" id="id73">dat_files_directory</a></p></li>
<li><p><a class="reference internal" href="#tof-xye-filename" id="id74">tof_xye_filename</a></p></li>
<li><p><a class="reference internal" href="#dspacing-xye-filename" id="id75">dspacing_xye_filename</a></p></li>
<li><p><a class="reference internal" href="#vanadium-tof-cropping" id="id76">vanadium_tof_cropping</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="creating-pearl-object">
<span id="creating-pearl-object-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink">Creating PEARL Object</a><a class="headerlink" href="#creating-pearl-object" title="Permalink to this heading">¶</a></h2>
<p>This method assumes you are familiar with the concept of objects in Python.
If not more details can be read here: <a class="reference internal" href="ISISPowder-Tutorials.html#intro-to-objects-isis-powder-diffraction-ref"><span class="std std-ref">A quick introduction to objects</span></a></p>
<p>To create a PEARL object the following parameters are required:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a></p></li>
<li><p><a class="reference internal" href="#output-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a></p></li>
<li><p><a class="reference internal" href="#user-name-pearl-isis-powder-diffraction-ref"><span class="std std-ref">user_name</span></a></p></li>
</ul>
<p>Optionally a configuration file may be specified if one exists
using the following parameter:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#config-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">config_file</span></a></p></li>
</ul>
<p>See <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><span class="std std-ref">Using configuration files</span></a>
on YAML configuration files for more details</p>
<section id="example">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Example</a><a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">isis_powder</span> <span class="kn">import</span> <span class="n">Pearl</span>

<span class="n">calibration_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span>

<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="n">calibration_dir</span><span class="p">,</span>
                      <span class="n">output_directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
                      <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">)</span>

<span class="c1"># Optionally we could provide a configuration file like so</span>
<span class="c1"># Notice how the file name ends with .yaml</span>
<span class="n">config_file_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\config_file.yaml</span>
<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file_path</span><span class="p">,</span>
                      <span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="methods">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Methods</a><a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<p>The following methods can be executed on a PEARL object:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a></p></li>
<li><p><a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a></p></li>
<li><p><a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a></p></li>
</ul>
<p>For information on creating a PEARL object see:
<a class="reference internal" href="#creating-pearl-object-isis-powder-diffraction-ref"><span class="std std-ref">Creating PEARL Object</span></a></p>
<section id="create-vanadium">
<span id="create-vanadium-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">create_vanadium</a><a class="headerlink" href="#create-vanadium" title="Permalink to this heading">¶</a></h3>
<p>The <em>create_vanadium</em> method allows a user to process a vanadium run.
Whilst processing the vanadium run the scripts can apply any corrections
the user enables and will spline the resulting workspace(s) for later focusing.</p>
<p>On PEARL the following parameters are required when executing <em>create_vanadium</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#do-absorb-corrections-pearl-isis-powder-diffraction-ref"><span class="std std-ref">do_absorb_corrections</span></a></p></li>
<li><p><a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a></p></li>
<li><p><a class="reference internal" href="#run-in-cycle-pearl-isis-powder-diffraction-ref"><span class="std std-ref">run_in_cycle</span></a></p></li>
<li><p><a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt_mode</span></a></p></li>
</ul>
<section id="id1">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">Example</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                              <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">long_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">run_in_cycle</span><span class="o">=</span><span class="s2">&quot;100&quot;</span><span class="p">,</span> <span class="n">tt_mode</span><span class="o">=</span><span class="s2">&quot;tt88&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="focus">
<span id="focus-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">focus</a><a class="headerlink" href="#focus" title="Permalink to this heading">¶</a></h3>
<p>The <em>focus</em> method processes the user specified run(s). It aligns,
focuses and optionally applies corrections if the user has requested them.</p>
<p>On PEARL the following parameters are required when executing <em>focus</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus_mode</span></a></p></li>
<li><p><a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a></p></li>
<li><p><a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><span class="std std-ref">perform_attenuation</span></a></p></li>
<li><p><a class="reference internal" href="#run-number-pearl-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a></p></li>
<li><p><a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt_mode</span></a></p></li>
<li><p><a class="reference internal" href="#vanadium-normalisation-pearl-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_normalisation</span></a></p></li>
</ul>
<p>The following parameter is required if
<a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><span class="std std-ref">perform_attenuation</span></a> is set to <strong>True</strong></p>
<ul class="simple">
<li><p><a class="reference internal" href="#attenuation-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">attenuation_file</span></a></p></li>
</ul>
<p>The following parameters may also be optionally set:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#file-ext-pearl-isis-powder-diffraction-ref"><span class="std std-ref">file_ext</span></a></p></li>
<li><p><a class="reference internal" href="#suffix-pearl-isis-powder-diffraction-ref"><span class="std std-ref">suffix</span></a></p></li>
</ul>
<section id="id2">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">Example</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                    <span class="n">focus_mode</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="n">long_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">perform_attenuation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">attenuation_file</span><span class="o">=</span><span class="s2">&quot;ZTA&quot;</span><span class="p">,</span>
                    <span class="n">run_number</span><span class="o">=</span><span class="s2">&quot;100-110&quot;</span><span class="p">,</span> <span class="n">tt_mode</span><span class="o">=</span><span class="s2">&quot;tt88&quot;</span><span class="p">,</span>
                    <span class="n">vanadium_normalisation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="create-cal">
<span id="create-cal-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">create_cal</a><a class="headerlink" href="#create-cal" title="Permalink to this heading">¶</a></h3>
<p>The <em>create_cal</em> method creates the offset calibration file for PEARL
scripts. The following parameters are required:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a></p></li>
<li><p><a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus_mode</span></a></p></li>
<li><p><a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a></p></li>
<li><p><a class="reference internal" href="#run-number-pearl-isis-powder-diffraction-ref"><span class="std std-ref">run_number</span></a></p></li>
</ul>
<section id="id3">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">Example</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">pearl_example</span><span class="o">.</span><span class="n">create_cal</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">95671</span><span class="p">,</span>
                         <span class="n">tt_mode</span><span class="o">=</span><span class="s2">&quot;tt70&quot;</span><span class="p">,</span>
                         <span class="n">long_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="how-the-pearl-object-holds-state">
<span id="state-for-pearl-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id15" role="doc-backlink">How the PEARL object holds state</a><a class="headerlink" href="#how-the-pearl-object-holds-state" title="Permalink to this heading">¶</a></h2>
<p>The PEARL object does not behave as described in
<a class="reference internal" href="ISISPowder-Tutorials.html#how-objects-hold-state-isis-powder-diffraction-ref"><span class="std std-ref">How objects hold state in ISIS Powder</span></a>. For PEARL,
any settings given in the constructor for the PEARL object, either
explicitly or via a config file, are taken as defaults. If these are
overridden in a call to either
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>,
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a> or
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>, then these
settings only apply to that line, and are reverted to the defaults
when the line has finished executing.</p>
</section>
<section id="calibration-mapping-file">
<span id="calibration-mapping-pearl-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id16" role="doc-backlink">Calibration Mapping File</a><a class="headerlink" href="#calibration-mapping-file" title="Permalink to this heading">¶</a></h2>
<p>The calibration mapping file holds the mapping between
run numbers, current label, offset filename and the empty
and vanadium numbers.</p>
<p>For more details on the calibration mapping file see:
<a class="reference internal" href="ISISPowder-Tutorials.html#cycle-mapping-files-isis-powder-diffraction-ref"><span class="std std-ref">Cycle mapping files</span></a></p>
<p>The layout on PEARL should look as follows
substituting the example values included for appropriate values:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">1-100</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_1&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="w"></span>
</pre></div>
</div>
<section id="id4">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Example</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">1-100</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_1&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="w"></span>

<span class="nt">101-</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1_2&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">offset_file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;offset_file.cal&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">empty_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;110&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">vanadium_run_numbers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;120&quot;</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<p>The following parameters for PEARL are intended for regular use
when using the ISIS Powder scripts.</p>
<section id="absorb-corrections-out-filename">
<span id="absorb-out-filename-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id19" role="doc-backlink">absorb_corrections_out_filename</a><a class="headerlink" href="#absorb-corrections-out-filename" title="Permalink to this heading">¶</a></h3>
<p>Required if <a class="reference internal" href="#gen-absorb-pearl-isis-powder-diffraction-ref"><span class="std std-ref">generate_absorb_corrections</span></a> is set to <strong>True</strong>.</p>
<p>The full path to save generated absorption corrects file to.</p>
<p><em>Note: The path to the file must include the file extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">generate_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">absorb_corrections_out_filename</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\PEARL\pearl_absorb_sphere_17_2.nxs&quot;</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="attenuation-file">
<span id="attenuation-file-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id20" role="doc-backlink">attenuation_file</a><a class="headerlink" href="#attenuation-file" title="Permalink to this heading">¶</a></h3>
<p>Required if <a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><span class="std std-ref">perform_attenuation</span></a>
is set to <strong>True</strong></p>
<p>The name of the attenuation file to use within the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method. The name must match the name
of one of the entries in the <a class="reference internal" href="#attenuation-files-pearl-isis-powder-diffraction-ref"><span class="std std-ref">attenuation_files</span></a> setting</p>
<p>The workspace will be attenuated with the specified file
if the <a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus_mode</span></a>
is set to <strong>all</strong> or <strong>trans</strong>. For more details see
<a class="reference internal" href="../algorithms/PearlMCAbsorption-v1.html#algm-pearlmcabsorption"><span class="std std-ref">PearlMCAbsorption</span></a></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">attenuation_file</span><span class="o">=</span><span class="s2">&quot;ZTA&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="attenuation-files">
<span id="attenuation-files-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id21" role="doc-backlink">attenuation_files</a><a class="headerlink" href="#attenuation-files" title="Permalink to this heading">¶</a></h3>
<p>A list of attenuation file names and paths that are available for use in the Focus process.
It is expected that this setting will be specified in a configuration yaml file as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">attenuation_files</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ZTA</span><span class="w"></span>
<span class="w">    </span><span class="nt">path </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C:\path\to\anvil_atten_files\PRL112_DC25_10MM_FF.OUT</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WC</span><span class="w"></span>
<span class="w">    </span><span class="nt">path </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C:\path\to\anvil_atten_files\PRL985_WC_HOYBIDE_NK_10MM_FF.OUT</span><span class="w"></span>
</pre></div>
</div>
<p>It can alternatively be supplied as part of the call to focus:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">attenuation_file</span><span class="o">=</span><span class="s2">&quot;ZTA&quot;</span><span class="p">,</span> <span class="n">attenuation_files</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;[{&quot;name&quot;: &quot;ZTA&quot;, &quot;path&quot;: r&quot;C:\path\to\anvil_atten_files\PRL112_DC25_10MM_FF.OUT&quot;}]&#39;</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Note: The path to the file must include the file extension</em></p>
</section>
<section id="calibration-directory">
<span id="calibration-directory-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id22" role="doc-backlink">calibration_directory</a><a class="headerlink" href="#calibration-directory" title="Permalink to this heading">¶</a></h3>
<p>This parameter should be the full path to the calibration folder.
Within the folder the following should be present:</p>
<ul class="simple">
<li><p>Grouping .cal files:</p>
<ul>
<li><p><a class="reference internal" href="#tt35-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt35_grouping_filename</span></a></p></li>
<li><p><a class="reference internal" href="#tt70-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt70_grouping_filename</span></a></p></li>
<li><p><a class="reference internal" href="#tt88-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt88_grouping_filename</span></a></p></li>
</ul>
</li>
<li><p>Vanadium Absorption File
(see: <a class="reference internal" href="#vanadium-absorb-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_absorb_filename</span></a>)</p></li>
<li><p>Folder(s) with the label name specified in mapping file (e.g. “1_1”)</p>
<ul>
<li><p>Inside each folder should be the offset file with name specified in mapping file</p></li>
</ul>
</li>
</ul>
<p>The script will also save out vanadium splines into the relevant
label folder which are subsequently loaded and used within the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\calibration_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="calibration-mapping-file-pearl-isis-powder-diffraction-ref">
<span id="id5"></span><h3><a class="toc-backref" href="#id23" role="doc-backlink">calibration_mapping_file</a><a class="headerlink" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref" title="Permalink to this heading">¶</a></h3>
<p>This parameter gives the full path to the YAML file containing the
calibration mapping. For more details on this file see:
<a class="reference internal" href="#calibration-mapping-pearl-isis-powder-diffraction-ref"><span class="std std-ref">Calibration Mapping File</span></a></p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice the filename always ends in .yaml</span>
<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\file\calibration_mapping.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="config-file">
<span id="config-file-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id24" role="doc-backlink">config_file</a><a class="headerlink" href="#config-file" title="Permalink to this heading">¶</a></h3>
<p>The full path to the YAML configuration file. This file is
described in detail here: <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><span class="std std-ref">Using configuration files</span></a>
It is recommended to set this parameter at object creation instead
of on a method as it will warn if any parameters are overridden
in the scripting window.</p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Notice the filename always ends in .yaml</span>
<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\file\configuration.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="custom-grouping-filename">
<span id="custom-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id25" role="doc-backlink">custom_grouping_filename</a><a class="headerlink" href="#custom-grouping-filename" title="Permalink to this heading">¶</a></h3>
<p>The name of a custom grouping cal file to use. The file needs to be located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">custom_grouping_filename</span><span class="p">:</span> <span class="s2">&quot;DAC_group.cal&quot;</span>
</pre></div>
</div>
</section>
<section id="do-absorb-corrections">
<span id="do-absorb-corrections-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id26" role="doc-backlink">do_absorb_corrections</a><a class="headerlink" href="#do-absorb-corrections" title="Permalink to this heading">¶</a></h3>
<p>Indicates whether to perform vanadium absorption corrections
when calling <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>.
If set to True the vanadium absorption file
(described here: <a class="reference internal" href="#vanadium-absorb-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_absorb_filename</span></a>)
will be loaded and the vanadium sample will be divided by the pre-calculated
absorption corrections.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="file-ext">
<span id="file-ext-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink">file_ext</a><a class="headerlink" href="#file-ext" title="Permalink to this heading">¶</a></h3>
<p><em>Optional</em></p>
<p>Specifies a file extension to use when using the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.</p>
<p>This should be used to process partial runs. When
processing full runs (i.e. completed runs) it should not
be specified as Mantid will automatically determine the
best extension to use.</p>
<p><em>Note: A leading dot (.) is not required but
is preferred for readability</em></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">file_ext</span><span class="o">=</span><span class="s2">&quot;.s01&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="focus-mode">
<span id="focus-mode-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id28" role="doc-backlink">focus_mode</a><a class="headerlink" href="#focus-mode" title="Permalink to this heading">¶</a></h3>
<p>Determines how the banks are grouped when using the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> method.
Each mode is further described below.</p>
<p>Accepted values are: <strong>All</strong>, <strong>Groups</strong>, <strong>Mods</strong> and <strong>Trans</strong></p>
<section id="all">
<h4><a class="toc-backref" href="#id29" role="doc-backlink">All</a><a class="headerlink" href="#all" title="Permalink to this heading">¶</a></h4>
<p>In all mode banks 1-9 (inclusive) are summed into a single spectra
then scaled down to 1/9 of their original values.</p>
<p>The workspace is also attenuated if
<a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><span class="std std-ref">perform_attenuation</span></a>
is set to <strong>True</strong>.</p>
<p>Workspaces containing banks 10-14 are left as
separate workspaces with appropriate names.</p>
</section>
<section id="groups">
<h4><a class="toc-backref" href="#id30" role="doc-backlink">Groups</a><a class="headerlink" href="#groups" title="Permalink to this heading">¶</a></h4>
<p>In groups mode banks 1+2+3, 4+5+6, 7+8+9 are summed into three (3)
separate workspaces. Each workspace is scaled down to a 1/3 of original scale.</p>
<p>The workspaces containing banks 4-9 (inclusive) are then added
into a separate workspace and scaled down to 1/2 original scale.</p>
<p>Banks 10-14 are left as separate workspaces with appropriate names.</p>
</section>
<section id="trans">
<h4><a class="toc-backref" href="#id31" role="doc-backlink">Trans</a><a class="headerlink" href="#trans" title="Permalink to this heading">¶</a></h4>
<p>In trans mode banks 1-9 (inclusive) are summed into a single spectra
then scaled down to 1/9 original scale.</p>
<p>The workspace is also attenuated if
<a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><span class="std std-ref">perform_attenuation</span></a>
is set to <strong>True</strong>.</p>
<p>All banks are also output as individual workspaces with appropriate names
with no additional processing applied.</p>
</section>
<section id="mods">
<h4><a class="toc-backref" href="#id32" role="doc-backlink">Mods</a><a class="headerlink" href="#mods" title="Permalink to this heading">¶</a></h4>
<p>In mods mode every bank is left as individual workspaces with
appropriate names. No additional processing is performed.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">focus_mode</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="long-mode">
<span id="long-mode-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink">long_mode</a><a class="headerlink" href="#long-mode" title="Permalink to this heading">¶</a></h3>
<p>Determines the TOF window to process data in. This
affects both the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
and <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> methods.</p>
<p>As this affects the vanadium spline used the
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a> method
will need to be called once for each <em>long_mode</em> value (<strong>True</strong> and/or <strong>False</strong>)
if the user intends to use a different mode. This will create
a spline for the relevant mode which is automatically used when focusing.</p>
<p>When <em>long_mode</em> is <strong>False</strong> the TOF window processed is
between 0-20,000 μs</p>
<p>When <em>long_mode</em> is <strong>True</strong> the TOF window processed is
between 20,000-40,000 μs</p>
<p>This also affects the <a class="reference internal" href="#advanced-parameters-pearl-isis-powder-diffraction-ref"><span class="std std-ref">Advanced Parameters</span></a>
used. More detail can be found for each individual parameter
listed under the advanced parameters section.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">long_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">long_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="output-directory">
<span id="output-directory-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id34" role="doc-backlink">output_directory</a><a class="headerlink" href="#output-directory" title="Permalink to this heading">¶</a></h3>
<p>Specifies the path to the output directory to save resulting files
into. The script will automatically create a folder
with the label determined from the
<a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_mapping_file</span></a>
and within that create another folder for the current
<a class="reference internal" href="#user-name-pearl-isis-powder-diffraction-ref"><span class="std std-ref">user_name</span></a>.</p>
<p>Within this folder processed data will be saved out in
several formats.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">output_directory</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\path\to\output_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="perform-attenuation">
<span id="perform-attenuation-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id35" role="doc-backlink">perform_attenuation</a><a class="headerlink" href="#perform-attenuation" title="Permalink to this heading">¶</a></h3>
<p>Indicates whether to perform attenuation corrections
whilst running <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>.
For more details of the corrections performed see:
<a class="reference internal" href="../algorithms/PearlMCAbsorption-v1.html#algm-pearlmcabsorption"><span class="std std-ref">PearlMCAbsorption</span></a></p>
<p>If this is set to <strong>True</strong>
<a class="reference internal" href="#attenuation-file-pearl-isis-powder-diffraction-ref"><span class="std std-ref">attenuation_file</span></a>
must be set too.</p>
<p><em>Note: This correction will only be performed if ‘focus_mode’
is in</em> <strong>All</strong> or <strong>Trans</strong>.
See: <a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus_mode</span></a>
for more details.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">perform_attenuation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run-in-cycle">
<span id="run-in-cycle-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id36" role="doc-backlink">run_in_cycle</a><a class="headerlink" href="#run-in-cycle" title="Permalink to this heading">¶</a></h3>
<p>Indicates a run from the current cycle to use when calling
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>.
This does not have the be the first run of the cycle or
the run number corresponding to the vanadium. However it
must be in the correct cycle according to the
<a class="reference internal" href="#calibration-mapping-pearl-isis-powder-diffraction-ref"><span class="std std-ref">Calibration Mapping File</span></a>.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In this example assume we mean a cycle with run numbers 100-200</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">run_in_cycle</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run-number">
<span id="run-number-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id37" role="doc-backlink">run_number</a><a class="headerlink" href="#run-number" title="Permalink to this heading">¶</a></h3>
<p>Specifies the run number(s) to process when calling the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> and
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a> methods.</p>
<p>This parameter accepts a single value or a range
of values with the following syntax:</p>
<p><strong>-</strong> : Indicates a range of runs inclusive
(e.g. <em>1-10</em> would process 1, 2, 3….8, 9, 10)</p>
<p><strong>,</strong> : Indicates a gap between runs
(e.g. <em>1, 3, 5, 7</em> would process run numbers 1, 3, 5, 7)</p>
<p>These can be combined like so:
<em>1-3, 5, 8-10</em> would process run numbers 1, 2, 3, 5, 8, 9, 10.</p>
<p>On Pearl any ranges of runs indicates the runs will be summed
before any additional processing takes place. For example
a run input of <em>1, 3, 5</em> will sum runs 1, 3 and 5 together
before proceeding to focus them.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sum and process run numbers 1, 3, 5, 6, 7</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s2">&quot;1, 3, 5-7&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or just a single run</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="suffix">
<span id="suffix-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id38" role="doc-backlink">suffix</a><a class="headerlink" href="#suffix" title="Permalink to this heading">¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a suffix to append the names of output files
during a focus.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;-corr&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tt-mode">
<span id="tt-mode-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink">tt_mode</a><a class="headerlink" href="#tt-mode" title="Permalink to this heading">¶</a></h3>
<p>Specifies the detectors to be considered from the
grouping files. This is used in the
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a> and
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> methods.</p>
<p>For more details of the grouping file which is selected between
see the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tt35-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt35_grouping_filename</span></a></p></li>
<li><p><a class="reference internal" href="#tt70-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt70_grouping_filename</span></a></p></li>
<li><p><a class="reference internal" href="#tt88-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt88_grouping_filename</span></a></p></li>
<li><p><a class="reference internal" href="#custom-grouping-filename-pearl-isis-powder-diffraction-ref"><span class="std std-ref">custom_grouping_filename</span></a></p></li>
</ul>
<p>Accepted values are: <strong>tt35</strong>, <strong>tt70</strong>, <strong>tt80</strong> and custom</p>
<p>When calling <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
<strong>all</strong> can be used to implicitly process all of the ttXX
values indicated above.</p>
<p>When the custom tt_mode is used a focus mode of “Mods” is always used</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">tt_mode</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c1"># Or</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">tt_mode</span><span class="o">=</span><span class="s2">&quot;tt35&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="user-name">
<span id="user-name-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id40" role="doc-backlink">user_name</a><a class="headerlink" href="#user-name" title="Permalink to this heading">¶</a></h3>
<p>Specifies the name of the current user when creating a
new PEARL object. This is only used when saving data to
sort data into respective user folders.
See <a class="reference internal" href="#output-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">output_directory</span></a>
for more details.</p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="s2">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="vanadium-normalisation">
<span id="vanadium-normalisation-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id41" role="doc-backlink">vanadium_normalisation</a><a class="headerlink" href="#vanadium-normalisation" title="Permalink to this heading">¶</a></h3>
<p>Indicates whether to divide the focused workspace within
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> mode with a
previously generated vanadium spline.</p>
<p>This requires a vanadium to have been previously created
with the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">vanadium_normalisation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-parameters">
<span id="advanced-parameters-pearl-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id42" role="doc-backlink">Advanced Parameters</a><a class="headerlink" href="#advanced-parameters" title="Permalink to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These values are not intended to be changed and should
reflect optimal defaults for the instrument. For more
details please read:
<a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><span class="std std-ref">Instrument advanced properties</span></a></p>
<p>This section is mainly intended to act as reference of the
current settings distributed with Mantid</p>
</div>
<p>All values changed in the advanced configuration file
requires the user to restart Mantid for the new values to take effect.
Please read <a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><span class="std std-ref">Instrument advanced properties</span></a>
before proceeding to change values within the advanced configuration file.</p>
<section id="create-cal-rebin-1-params">
<span id="create-cal-rebin-1-params-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id43" role="doc-backlink">create_cal_rebin_1_params</a><a class="headerlink" href="#create-cal-rebin-1-params" title="Permalink to this heading">¶</a></h3>
<p>The rebin parameters to use in the first rebin operation in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
      <span class="n">create_cal_rebin_1_params</span><span class="p">:</span> <span class="s2">&quot;100,-0.0006,19950&quot;</span>

<span class="c1"># Long mode ON:</span>
      <span class="n">create_cal_rebin_1_params</span><span class="p">:</span> <span class="s2">&quot;20300,-0.0006,39990&quot;</span>
</pre></div>
</div>
</section>
<section id="create-cal-rebin-2-params">
<span id="create-cal-rebin-2-params-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id44" role="doc-backlink">create_cal_rebin_2_params</a><a class="headerlink" href="#create-cal-rebin-2-params" title="Permalink to this heading">¶</a></h3>
<p>The rebin parameters to use in the second rebin operation in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">create_cal_rebin_2_params</span><span class="p">:</span> <span class="s2">&quot;1.8,0.002,2.1&quot;</span>
</pre></div>
</div>
</section>
<section id="cross-corr-reference-spectra">
<span id="cross-corr-reference-spectra-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id45" role="doc-backlink">cross_corr_reference_spectra</a><a class="headerlink" href="#cross-corr-reference-spectra" title="Permalink to this heading">¶</a></h3>
<p>The Workspace Index of the spectra to correlate all other spectra
against in the cross-correlation step of
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_reference_spectra</span><span class="p">:</span> <span class="mi">20</span>
</pre></div>
</div>
</section>
<section id="cross-corr-ws-index-max">
<span id="cross-corr-ws-index-max-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id46" role="doc-backlink">cross_corr_ws_index_max</a><a class="headerlink" href="#cross-corr-ws-index-max" title="Permalink to this heading">¶</a></h3>
<p>The workspace index of the last member of the range of spectra to
cross-correlate against in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_ws_index_max</span><span class="p">:</span> <span class="mi">1063</span>
</pre></div>
</div>
</section>
<section id="cross-corr-ws-index-min">
<span id="cross-corr-ws-index-min-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id47" role="doc-backlink">cross_corr_ws_index_min</a><a class="headerlink" href="#cross-corr-ws-index-min" title="Permalink to this heading">¶</a></h3>
<p>The workspace index of the first member of the range of spectra to
cross-correlate against in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_ws_index_min</span><span class="p">:</span> <span class="mi">9</span>
</pre></div>
</div>
</section>
<section id="cross-cor-x-max">
<span id="cros-cor-x-max-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id48" role="doc-backlink">cross_cor_x_max</a><a class="headerlink" href="#cross-cor-x-max" title="Permalink to this heading">¶</a></h3>
<p>The ending point of the region to be cross correlated in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_x_max</span><span class="p">:</span> <span class="mf">2.1</span>
</pre></div>
</div>
</section>
<section id="cross-cor-x-min">
<span id="cros-corr-x-min-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id49" role="doc-backlink">cross_cor_x_min</a><a class="headerlink" href="#cross-cor-x-min" title="Permalink to this heading">¶</a></h3>
<p>The starting point of the region to be cross correlated in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cross_corr_x_min</span><span class="p">:</span> <span class="mf">1.8</span>
</pre></div>
</div>
</section>
<section id="custom-focused-bin-widths">
<span id="custom-focused-bin-widths-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id50" role="doc-backlink">custom_focused_bin_widths</a><a class="headerlink" href="#custom-focused-bin-widths" title="Permalink to this heading">¶</a></h3>
<p>The dt-upon-t binning for the focused data when using tt_mode=custom</p>
<p>On PEARL this is set to -0.0006 for all banks in the custom grouping file</p>
</section>
<section id="custom-focused-cropping-values">
<span id="custom-focused-cropping-values-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id51" role="doc-backlink">custom_focused_cropping_values</a><a class="headerlink" href="#custom-focused-cropping-values" title="Permalink to this heading">¶</a></h3>
<p>Indicates a list of TOF values to crop the focused workspace
which was created by <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>
on a bank by bank basis when using tt_mode=custom</p>
</section>
<section id="focused-bin-widths">
<span id="focused-bin-widths-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id52" role="doc-backlink">focused_bin_widths</a><a class="headerlink" href="#focused-bin-widths" title="Permalink to this heading">¶</a></h3>
<p>The dt-upon-t binning for the focused data.</p>
<p>On PEARL this is set to -0.0006 for all 14 banks</p>
</section>
<section id="focused-cropping-values">
<span id="focused-cropping-values-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id53" role="doc-backlink">focused_cropping_values</a><a class="headerlink" href="#focused-cropping-values" title="Permalink to this heading">¶</a></h3>
<p>Indicates a list of TOF values to crop the focused workspace
which was created by <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a>
on a bank by bank basis.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a smaller
TOF window than the <a class="reference internal" href="#vanadium-tof-cropping-pearl-isis-powder-diffraction-ref"><span class="std std-ref">vanadium_tof_cropping</span></a></p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following TOF windows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
      <span class="n">focused_cropping_values</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 4</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 5</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 6</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 7</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 8</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 9</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 10</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 11</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 12</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c1"># Bank 13</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">)</span>   <span class="c1"># Bank 14</span>
    <span class="p">]</span>

<span class="c1"># Long mode ON:</span>
      <span class="n">focused_cropping_values</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 1</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 2</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 3</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 4</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 5</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 6</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 7</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 8</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 9</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 10</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 11</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 12</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">),</span>  <span class="c1"># Bank 13</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">38830</span><span class="p">)</span>   <span class="c1"># Bank 14</span>
    <span class="p">]</span>
</pre></div>
</div>
</section>
<section id="generate-absorb-corrections">
<span id="gen-absorb-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id54" role="doc-backlink">generate_absorb_corrections</a><a class="headerlink" href="#generate-absorb-corrections" title="Permalink to this heading">¶</a></h3>
<p>Indicates whether to generate the absorption corrections, instead of
reading them from a file. Allowed values are: <strong>True</strong> and
<strong>False</strong>. If set to <strong>True</strong>,
<a class="reference internal" href="#absorb-out-filename-isis-powder-diffraction-ref"><span class="std std-ref">absorb_corrections_out_filename</span></a> must also be
set. On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">generate_absorb_corrections</span><span class="p">:</span> <span class="kc">False</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-d-ref">
<span id="get-det-offsets-d-ref-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id55" role="doc-backlink">get_det_offsets_d_ref</a><a class="headerlink" href="#get-det-offsets-d-ref" title="Permalink to this heading">¶</a></h3>
<p>Center of reference peak in d-space for GetDetectorOffsets in
<a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this is
set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_d_ref</span><span class="p">:</span> <span class="mf">1.912795</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-step">
<span id="get-det-offsets-step-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id56" role="doc-backlink">get_det_offsets_step</a><a class="headerlink" href="#get-det-offsets-step" title="Permalink to this heading">¶</a></h3>
<p>Step size used to bin d-spacing data in GetDetectorOffsets when
running <a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL
this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_step</span><span class="p">:</span> <span class="mf">0.002</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-x-max">
<span id="get-det-offsets-x-max-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id57" role="doc-backlink">get_det_offsets_x_max</a><a class="headerlink" href="#get-det-offsets-x-max" title="Permalink to this heading">¶</a></h3>
<p>Maximum of CrossCorrelation data to search for peak, usually negative,
in <a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this
is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_x_max</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span>
</pre></div>
</div>
</section>
<section id="get-det-offsets-x-min">
<span id="get-det-offsets-x-min-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id58" role="doc-backlink">get_det_offsets_x_min</a><a class="headerlink" href="#get-det-offsets-x-min" title="Permalink to this heading">¶</a></h3>
<p>Minimum of CrossCorrelation data to search for peak, usually negative,
in <a class="reference internal" href="#create-cal-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_cal</span></a>. On PEARL this
is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_det_offsets_x_min</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span>
</pre></div>
</div>
</section>
<section id="monitor-lambda-crop-range">
<span id="monitor-lambda-crop-range-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id59" role="doc-backlink">monitor_lambda_crop_range</a><a class="headerlink" href="#monitor-lambda-crop-range" title="Permalink to this heading">¶</a></h3>
<p>The range in dSpacing to crop a monitor spectra to when generating a
spline of the current to the target. This is should be stored as a tuple of
both values (lower and upper bound).</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
  <span class="n">monitor_lambda_crop_range</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">6.00</span><span class="p">)</span>

<span class="c1"># Long mode ON:</span>
  <span class="n">monitor_lambda_crop_range</span><span class="p">:</span> <span class="p">(</span><span class="mf">5.9</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="monitor-integration-range">
<span id="monitor-integration-range-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id60" role="doc-backlink">monitor_integration_range</a><a class="headerlink" href="#monitor-integration-range" title="Permalink to this heading">¶</a></h3>
<p>The maximum and minimum values for a bin whilst
integrating the monitor spectra.
Any values that fall outside of this range will not be considered.
This should be stored as a tuple of both values (lower and upper bound).
See: <a class="reference internal" href="../algorithms/Integration-v1.html#algm-integration"><span class="std std-ref">Integration</span></a> for more details.</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
<span class="n">monitor_integration_range</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>

<span class="c1"># Long mode ON:</span>
<span class="n">monitor_integration_range</span><span class="p">:</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="monitor-mask-regions">
<span id="monitor-mask-regions-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id61" role="doc-backlink">monitor_mask_regions</a><a class="headerlink" href="#monitor-mask-regions" title="Permalink to this heading">¶</a></h3>
<p>The masks applied to monitor spectra when normalising a workspace.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">monitor_mask_regions</span><span class="p">:</span> <span class="p">[[</span><span class="mf">3.45</span><span class="p">,</span> <span class="mf">2.96</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span>  <span class="mf">1.73</span><span class="p">],</span>
                       <span class="p">[</span><span class="mf">3.7</span><span class="p">,</span>  <span class="mf">3.2</span><span class="p">,</span>  <span class="mf">2.26</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">]]</span>
</pre></div>
</div>
</section>
<section id="monitor-spectrum-number">
<span id="monitor-spectrum-number-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id62" role="doc-backlink">monitor_spectrum_number</a><a class="headerlink" href="#monitor-spectrum-number" title="Permalink to this heading">¶</a></h3>
<p>The workspace spectrum number that represents a
monitor which can be used to calculate current.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">monitor_spectrum_number</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</pre></div>
</div>
</section>
<section id="monitor-spline-coefficient">
<span id="monitor-spline-coefficient-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id63" role="doc-backlink">monitor_spline_coefficient</a><a class="headerlink" href="#monitor-spline-coefficient" title="Permalink to this heading">¶</a></h3>
<p>Determines the spline coefficient to use whilst
processing the monitor spectra to normalise by
current. For more details see:
<a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><span class="std std-ref">SplineBackground</span></a></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">monitor_spline_coefficient</span><span class="p">:</span> <span class="mi">20</span>
</pre></div>
</div>
</section>
<section id="raw-data-tof-cropping">
<span id="raw-data-tof-cropping-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id64" role="doc-backlink">raw_data_tof_cropping</a><a class="headerlink" href="#raw-data-tof-cropping" title="Permalink to this heading">¶</a></h3>
<p>Determines the TOF window to crop all spectra down to before any
processing in the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
and <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focus</span></a> methods.</p>
<p>This helps remove negative counts where at very low TOF
the empty counts can exceed the captured neutron counts
of the run to process. It also is used
to crop to the correct TOF window depending on the
value of the <a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a> parameter.</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
  <span class="n">raw_data_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">19995</span><span class="p">)</span>

<span class="c1"># Long mode ON:</span>
  <span class="n">raw_data_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">20280</span><span class="p">,</span> <span class="mi">39000</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="spline-coefficient">
<span id="spline-coefficient-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id65" role="doc-backlink">spline_coefficient</a><a class="headerlink" href="#spline-coefficient" title="Permalink to this heading">¶</a></h3>
<p>Determines the spline coefficient to use after processing
the vanadium in <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. For more details see: <a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><span class="std std-ref">SplineBackground</span></a>
This value is lower on long-mode to deal with the increased noise.</p>
<p><em>Note that if this value is changed ‘create_vanadium’
will need to be called again.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
  <span class="n">spline_coefficient</span><span class="p">:</span> <span class="mi">60</span>

<span class="c1"># Long mode ON:</span>
  <span class="n">spline_coefficient</span><span class="p">:</span> <span class="mi">5</span>
</pre></div>
</div>
</section>
<section id="subtract-empty-instrument">
<span id="subtract-empty-instrument-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id66" role="doc-backlink">subtract_empty_instrument</a><a class="headerlink" href="#subtract-empty-instrument" title="Permalink to this heading">¶</a></h3>
<p>Provides the option to disable subtracting empty instrument runs from
the run being focused. This is useful for focusing empties, as
subtracting an empty from itself, or subtracting the previous cycle’s
empty from this cycle’s, creates meaningless data. Set to <strong>False</strong> to
disable empty subtraction.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">subtract_empty_instrument</span><span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="tt35-grouping-filename">
<span id="tt35-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id67" role="doc-backlink">tt35_grouping_filename</a><a class="headerlink" href="#tt35-grouping-filename" title="Permalink to this heading">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>
if <a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt_mode</span></a> is set to <strong>tt35</strong></p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tt35_grouping_filename</span><span class="p">:</span> <span class="s2">&quot;pearl_group_12_1_TT35.cal&quot;</span>
</pre></div>
</div>
</section>
<section id="tt70-grouping-filename">
<span id="tt70-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id68" role="doc-backlink">tt70_grouping_filename</a><a class="headerlink" href="#tt70-grouping-filename" title="Permalink to this heading">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>
if <a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt_mode</span></a> is set to <strong>tt70</strong></p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tt70_grouping_filename</span><span class="p">:</span> <span class="s2">&quot;pearl_group_12_1_TT70.cal&quot;</span>
</pre></div>
</div>
</section>
<section id="tt88-grouping-filename">
<span id="tt88-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id69" role="doc-backlink">tt88_grouping_filename</a><a class="headerlink" href="#tt88-grouping-filename" title="Permalink to this heading">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>
if <a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">tt_mode</span></a> is set to <strong>tt88</strong></p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tt88_grouping_filename</span><span class="p">:</span> <span class="s2">&quot;pearl_group_12_1_TT88.cal&quot;</span>
</pre></div>
</div>
</section>
<section id="vanadium-absorb-filename">
<span id="vanadium-absorb-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id70" role="doc-backlink">vanadium_absorb_filename</a><a class="headerlink" href="#vanadium-absorb-filename" title="Permalink to this heading">¶</a></h3>
<p>Determines the name of the precalculated vanadium absorption
correction values to apply when running
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>.</p>
<p>This file must be located within the top level of the
<a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><span class="std std-ref">calibration_directory</span></a>
directory.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vanadium_absorb_filename</span><span class="p">:</span> <span class="s2">&quot;pearl_absorp_sphere_10mm_newinst2_long.nxs&quot;</span>
</pre></div>
</div>
</section>
<section id="nxs-filename">
<span id="nxs-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id71" role="doc-backlink">nxs_filename</a><a class="headerlink" href="#nxs-filename" title="Permalink to this heading">¶</a></h3>
<p>A template for the filename of the generated NeXus file.</p>
</section>
<section id="gss-filename">
<span id="gss-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id72" role="doc-backlink">gss_filename</a><a class="headerlink" href="#gss-filename" title="Permalink to this heading">¶</a></h3>
<p>A template for the filename of the generated GSAS file.</p>
</section>
<section id="dat-files-directory">
<span id="dat-files-directory-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id73" role="doc-backlink">dat_files_directory</a><a class="headerlink" href="#dat-files-directory" title="Permalink to this heading">¶</a></h3>
<p>The subdirectory of the output directory where the .xye files are saved</p>
</section>
<section id="tof-xye-filename">
<span id="tof-xye-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id74" role="doc-backlink">tof_xye_filename</a><a class="headerlink" href="#tof-xye-filename" title="Permalink to this heading">¶</a></h3>
<p>A template for the filename of the generated TOF XYE file.</p>
</section>
<section id="dspacing-xye-filename">
<span id="dspacing-xye-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id75" role="doc-backlink">dspacing_xye_filename</a><a class="headerlink" href="#dspacing-xye-filename" title="Permalink to this heading">¶</a></h3>
<p>A template for the filename of the generated dSpacing XYE file.</p>
</section>
<section id="vanadium-tof-cropping">
<span id="vanadium-tof-cropping-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id76" role="doc-backlink">vanadium_tof_cropping</a><a class="headerlink" href="#vanadium-tof-cropping" title="Permalink to this heading">¶</a></h3>
<p>Determines the TOF window to crop all banks to
within the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><span class="std std-ref">create_vanadium</span></a>
method. This is applied after focusing and before a spline is taken.</p>
<p>It is used to remove low counts at the start and end of the vanadium run
to produce a spline which better matches the data.</p>
<p>This parameter is stored as a tuple of both values (lower and upper bound).
The values <strong>must</strong> have a larger TOF window than the
<a class="reference internal" href="#focused-cropping-values-pearl-isis-powder-diffraction-ref"><span class="std std-ref">focused_cropping_values</span></a>
and a smaller window than <a class="reference internal" href="#raw-data-tof-cropping-pearl-isis-powder-diffraction-ref"><span class="std std-ref">raw_data_tof_cropping</span></a>.</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><span class="std std-ref">long_mode</span></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Long mode OFF:</span>
  <span class="n">vanadium_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">1400</span><span class="p">,</span> <span class="mi">19990</span><span class="p">)</span>
<span class="c1"># Long mode ON:</span>
  <span class="n">vanadium_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">20295</span><span class="p">,</span> <span class="mi">39000</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ISISPowder-OSIRIS-v1.html" title="Previous Chapter: ISIS Powder Diffraction Scripts - OSIRIS Reference"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ISIS Powder D...</span>
    </a>
  </li>
  <li>
    <a href="ISISPowder-Polaris-v1.html" title="Next Chapter: ISIS Powder Diffraction Scripts - POLARIS Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ISIS Powder D... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>