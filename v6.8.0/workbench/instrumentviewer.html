<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Instrument Viewer Widget</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IPython Console" href="ipythonconsole.html" />
    <link rel="prev" title="Algorithm Toolbox" href="algorithmtoolbox.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Workbench</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Instrument Viewer Widget</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="instrument-viewer-widget">
<span id="instrumentviewer"></span><h1>Instrument Viewer Widget<a class="headerlink" href="#instrument-viewer-widget" title="Permalink to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The Mantid visualisation system allows users to view the geometry of an instrument and also select and query individual detectors.
An instrument is always shown in the context of a workspace, which contains data recorded with this instrument.
The detectors are colored according to the data in the corresponding spectra of the workspace.
The user can select individual detectors by clicking on them and request to see the data recorded by this detector as a table or a graph.
The instrument view also allows users to see close-ups of any component.</p>
</section>
<section id="instrument-view-pane">
<h2>Instrument View Pane<a class="headerlink" href="#instrument-view-pane" title="Permalink to this heading">¶</a></h2>
<p>The instrument view window can be obtained by right clicking on the workspace of interest and selecting <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">Instrument</span></code>.
A 2D projection of the detector arrangement will be visible with each detector pixel color coded depending on the integrated number of counts in its corresponding spectrum, as in the image below.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/Overview.png"><img alt="../_images/Overview.png" src="../_images/Overview.png" style="width: 635px;" /></a>
</figure>
<p>It is possible to alter the view of the instrument by holding down either mouse button and moving (dragging) it within the window.
There are other mouse and key board controls, which are listed at the bottom of the instrument view window.</p>
<p>The control panel of the instrument view has four tabs: <code class="docutils literal notranslate"><span class="pre">Render</span></code>, <code class="docutils literal notranslate"><span class="pre">Pick</span></code>, <code class="docutils literal notranslate"><span class="pre">Mask</span></code>, and <code class="docutils literal notranslate"><span class="pre">Instrument</span></code>.</p>
</section>
<section id="render-tab">
<span id="instrumentviewer-render-tab"></span><h2>Render Tab<a class="headerlink" href="#render-tab" title="Permalink to this heading">¶</a></h2>
<p>The Render tab contains controls for managing the on-screen appearance of the instrument and collected data.
The top-most combo-box control allows the user to select the way the instrument is projected onto the screen.
The default setting is <code class="docutils literal notranslate"><span class="pre">Full</span> <span class="pre">3D</span></code> which gives a 3D view of the instrument in an orthogonal projection.
The other options are unwrapped views, which project the instrument onto a curved surface and unwrap it onto the view.
There is a choice between cylinders and spheres or a side by side view.</p>
<p>The side by side view identifies flat banks of detectors in the instrument definition by looking for the following component types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RectangularDetector</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StructuredDetector</span></code></p></li>
<li><p>any component with a set of children or grandchildren having the <code class="docutils literal notranslate"><span class="pre">outline</span></code> attribute set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>. This is interpreted as a bank of tubes</p></li>
<li><p>any component with detector children arranged in a flat surface</p></li>
</ul>
<p>Each flat bank is then rotated about one of its corners until the bank surface is parallel to the xy plane and a parallel projection is then made of all the banks onto the xy plane. Finally the banks are spread out to remove any overlap between their projected positions.
The spread is applied by fixing the largest bank and moving all other banks away from it until there are no overlaps.
The bank centres in the side by side view can be overridden using the &lt;side-by-side-view-location&gt; tag in the <a class="reference internal" href="../concepts/InstrumentDefinitionFile.html#side-by-side-view-location"><span class="std std-ref">instrument definition file</span></a>.</p>
<p>The unwrapped (or flat) views allow zooming by selecting a rectangular region with the mouse (left click and drag).
Right-clicking resets the zoom, which shows the entire instrument.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/RenderTab.png"><img alt="../_images/RenderTab.png" src="../_images/RenderTab.png" style="width: 635px;" /></a>
</figure>
<p>The next control is <code class="docutils literal notranslate"><span class="pre">Axis</span> <span class="pre">View</span></code>, visible only in the 3D mode, which resets the view so that the instrument is fully visible and the specified axis is perpendicular to the screen.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Display</span> <span class="pre">Settings</span></code> button controls the appearance of the instrument in the view.
The <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">OpenGL</span></code> option toggles between two display modes of a flat view: one that uses OpenGL to render the instrument and one that doesn’t.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/DisplaySettings1.png"><img alt="../_images/DisplaySettings1.png" src="../_images/DisplaySettings1.png" style="width: 635px;" /></a>
</figure>
<p>This option can be useful if the instrument is viewed over a slow network connection, for example.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">image</span></code> button allows the image to be save into a file.</p>
<p>The color bar axis below maps the colors of the detectors to the integrated number of counts in their spectra.
The axis also defines the minimum and maximum values, which can be edited using the text boxes below and above the color bar.
Mantid comes with a number of color map files and these can be loaded by selecting the <code class="docutils literal notranslate"><span class="pre">Display</span> <span class="pre">Settings</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Color</span> <span class="pre">Map</span></code>.</p>
</section>
<section id="pick-tab">
<span id="instrumentviewer-pick-tab"></span><h2>Pick Tab<a class="headerlink" href="#pick-tab" title="Permalink to this heading">¶</a></h2>
<p>Pick Tab is for displaying information about detectors of an instruments and data collected by them. The parameters defined for each component may be hidden if the attribute ‘visible’ is specified as false. You can also manipulate the peak markers in this tab.
At the top of the tab there is a tool bar for switching between different interactive tools.
The text box below the tool bar shows textual information about selected detector:</p>
<ul class="simple">
<li><p>Name</p></li>
<li><p>ID</p></li>
<li><p>Index in the workspace</p></li>
<li><p>Cartesian coordinates of the detector (xyz) in metres</p></li>
<li><p>Spherical coordinates of the detector (rtp, which stands for r, theta, and phi) where the distance is in metres and the angles are in degrees</p></li>
<li><p>The full path of the detector in the instrument tree</p></li>
<li><p>Integrated counts</p></li>
<li><p>The units of the X vector in the underlying workspace.</p></li>
</ul>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/PickTab.png"><img alt="../_images/PickTab.png" src="../_images/PickTab.png" style="width: 635px;" /></a>
</figure>
<section id="single-detector-selection">
<h3>Single detector selection<a class="headerlink" href="#single-detector-selection" title="Permalink to this heading">¶</a></h3>
<p>The <img alt="singlePixel" src="../_images/PickTabPickPixelButton.png" /> tool allows the user to click on detectors, which will update the mini-plot to display the spectrum of the workspace
associated with the clicked detector. The user can keep curves of interest for longer by right clicking on the detector and selecting <code class="docutils literal notranslate"><span class="pre">Store</span> <span class="pre">curve</span></code>
from the context menu.</p>
<p>The context menu also gives the option to save the content of the mini-plot to a new workspace. There is no limit to the number of curves
that can be added to the mini-plot. Curves can be removed by right-clicking on the mini-plot and selecting the line the user wishes to remove. The same
menu allows for switching between linear and log scales for the Y axis.</p>
</section>
<section id="tube-selection">
<h3>Tube Selection<a class="headerlink" href="#tube-selection" title="Permalink to this heading">¶</a></h3>
<p>The <img alt="tubeBank" src="../_images/PickTabPickTubeButton.png" /> tool allows the user to click a detector and have the mini-plot display the data from the immediate parent of the
detector. Usually a tube or bank, depending on the instrument.</p>
<p>When using this tool, the user can right-click on the mini-plot to select between a sum of the counts of all detectors in the bank/tube or counts integrated
over the time bins vs the detector position in the tube.</p>
<figure class="align-center">
<img alt="../_images/PickTubeContextMenu.png" src="../_images/PickTubeContextMenu.png" />
</figure>
</section>
<section id="create-a-single-crystal-peak-list">
<h3>Create a Single Crystal Peak List<a class="headerlink" href="#create-a-single-crystal-peak-list" title="Permalink to this heading">¶</a></h3>
<p>The <img alt="singleCrystal" src="../_images/PickTabAddPeakButton.png" /> tool allows the user to create a single crystal peak list and add a peak to it. First, select the tool and click a detector. Then
click on the peak in the mini-plot. If it is the first peak Workbench will create a <a class="reference internal" href="../concepts/PeaksWorkspace.html#peaksworkspace"><span class="std std-ref">PeaksWorkspace</span></a> named <code class="docutils literal notranslate"><span class="pre">SingleCrystalPeakTable</span></code>
and add a peak to it. Peak markers will then be displayed over the instrument.</p>
<figure class="align-center">
<img alt="../_images/SingleCrystalPeakExample.png" src="../_images/SingleCrystalPeakExample.png" />
</figure>
</section>
<section id="single-crystal-peak-eraser">
<h3>Single Crystal Peak Eraser<a class="headerlink" href="#single-crystal-peak-eraser" title="Permalink to this heading">¶</a></h3>
<p>The <img alt="eraser" src="../_images/PickTabEraseButton.png" /> tool can be used to remove single crystal peaks by clicking on or dragging over the peak markers. The hatched rectangle indicates the
area where peaks will be erased. The rows in the <a class="reference internal" href="../concepts/PeaksWorkspace.html#peaksworkspace"><span class="std std-ref">PeaksWorkspace</span></a> are then deleted with the markers. The size of the rectangle
can be adjusted by scrolling.</p>
</section>
<section id="peak-comparison-tool">
<h3>Peak Comparison Tool<a class="headerlink" href="#peak-comparison-tool" title="Permalink to this heading">¶</a></h3>
<p>The <img alt="peakComparison" src="../_images/PickTabCPCompare.png" /> tool can be used to calculate the reciprocal angle between two single crystal peaks. The hatched box indicates the area in which peaks
will be selected. Click on a single peak marker to select it, then again on another marker. There will be a line drawn between the two peaks and the information
box will show the list of peaks falling into this spectrum.</p>
<figure class="align-center">
<img alt="../_images/PeakComparisonExample.png" src="../_images/PeakComparisonExample.png" />
</figure>
</section>
<section id="peak-alignment-tool">
<h3>Peak Alignment Tool<a class="headerlink" href="#peak-alignment-tool" title="Permalink to this heading">¶</a></h3>
<p>The <img alt="peakAlign" src="../_images/PickTabCPAlign.png" /> tool allows for the calculation of in-plane and out-of-plane angles between a user defined plane and an out-of-plane peak in Q-space. The plane
must be defined first, by selecting two peaks. Clicking while they are within the hatched box will select them, and mark them with a blue circle. Subsequent peaks
will be highlighted by green circles. The information box will contain the in-plane angles (phi) and out-of-plane angles (theta) for each green peak.</p>
<p>Selections can be cleared by right-clicking the instrument view and selecting <code class="docutils literal notranslate"><span class="pre">Clear</span> <span class="pre">alignment</span> <span class="pre">plane</span></code>.</p>
<figure class="align-center">
<img alt="../_images/PeaksAlignmentExample.png" src="../_images/PeaksAlignmentExample.png" />
</figure>
</section>
</section>
<section id="draw-tab">
<span id="instrumentviewer-draw-tab"></span><h2>Draw Tab<a class="headerlink" href="#draw-tab" title="Permalink to this heading">¶</a></h2>
<p>The Draw tab contains tools for creating and editing geometrical shapes, which can be used for selecting regions of interest (ROI) or for masking or grouping detectors.
The tab contains a smaller toolbar, a shape property browser, and a set of buttons to create shapes.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/DrawTab.png"><img alt="../_images/DrawTab.png" src="../_images/DrawTab.png" style="width: 635px;" /></a>
</figure>
<p>Masks are created by using six tools:</p>
<ul class="simple">
<li><p><img alt="ellipse" src="../_images/PickTabEllipseButton.png" /> Ellipse</p></li>
<li><p><img alt="rectangle" src="../_images/PickTabRectButton.png" /> Rectangle</p></li>
<li><p><img alt="ellipseRing" src="../_images/PickTabElRingButton.png" /> Ellipse Ring</p></li>
<li><p><img alt="rectangleRing" src="../_images/PickTabRectRingButton.png" /> Rectangle Ring</p></li>
<li><p><img alt="sector" src="../_images/PickTabSectorButton.png" /> Sector</p></li>
<li><p><img alt="arbitrary" src="../_images/PickTabArbitraryShape.png" /> Brush: This allows for drawing of masks arbitrarily. The size of the brush can be changed by scrolling.</p></li>
</ul>
<p>There is no limit on the number of shapes. The shapes can be selected and edited by selecting <img alt="edit" src="../_images/PickTabEditButton.png" />.
Click on the shaded part of a shape and drag to move it around or move a control point to resize.</p>
<figure class="align-center">
<img alt="../_images/DrawShapesExample.jpg" src="../_images/DrawShapesExample.jpg" />
</figure>
<p>The property browser displays the parameters of the selected shape. All sizes are given in the coordinates of the unwrapped surface the shapes are drawn on.
For example, for a spherical surface it will be polar and azimuth angles in radians. The shapes are “attached” to the surface and move with it when the view is zoomed or moved.
<img alt="zoom" src="../_images/PickTabZoomButton.png" /> can be used to zoom in and out from the render.</p>
<figure class="align-center">
<img alt="../_images/DrawPropertyBrowser.png" src="../_images/DrawPropertyBrowser.png" />
</figure>
<section id="using-the-drawn-shapes">
<h3>Using the Drawn Shapes<a class="headerlink" href="#using-the-drawn-shapes" title="Permalink to this heading">¶</a></h3>
<p>If the shapes are being used for masking or selecting regions of interest (ROIs) they can be used in two ways:</p>
<ul class="simple">
<li><p>To apply the shapes to the workspace press the <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">to</span> <span class="pre">Data</span></code> button. The shapes will be applied into the underlying workspace and shown in the instrument display.</p></li>
<li><p>To see the effect of applying the changes, but without affecting the underlying workspace, click the <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">to</span> <span class="pre">View</span></code> button.
This will change the view you are looking at, but not the underlying data in the workspace. Changes applied in this way can be reverted using <code class="docutils literal notranslate"><span class="pre">ClearAll</span></code> button.</p></li>
</ul>
<p>Masks and Regions of Interest (ROI’s) can also be saved into a separate workspace or into a file, using the options in the <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">and</span> <span class="pre">Save</span></code> drop-down.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">Group</span></code> option is selected, the selected detectors can be extracted or summed into a workspace using the <code class="docutils literal notranslate"><span class="pre">Save</span></code> drop-down.</p>
</section>
<section id="bin-masking">
<h3>Bin Masking<a class="headerlink" href="#bin-masking" title="Permalink to this heading">¶</a></h3>
<p>When the <code class="docutils literal notranslate"><span class="pre">Mask</span></code> option is selected and the integration range is reduced, only bins within the selected range will be masked instead of whole detectors.
The shapes created with the drawing tools now select the detectors for which the bins will be masked.</p>
<p>Clicking the <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">bin</span> <span class="pre">mask</span> <span class="pre">to</span> <span class="pre">view</span></code> button will use the <a class="reference internal" href="../algorithms/MaskBins-v1.html#algm-maskbins"><span class="std std-ref">MaskBins</span></a> algorithm mask the selected bins in the data workspace.</p>
<figure class="align-center">
<img alt="../_images/DrawBinMask.png" src="../_images/DrawBinMask.png" />
</figure>
<p>The <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">to</span> <span class="pre">Data</span></code> button will apply all defined detector and bin masks using the relevant algorithms.</p>
</section>
</section>
<section id="instrument-tab">
<h2>Instrument Tab<a class="headerlink" href="#instrument-tab" title="Permalink to this heading">¶</a></h2>
<p>This contains a list of components and component assemblies as they are named and arranged in the <a class="reference internal" href="../concepts/InstrumentDefinitionFile.html#instrumentdefinitionfile"><span class="std std-ref">Instrument Definition File</span></a>.
For example, in some instruments the detectors are arranged into banks, in others - a long list.
Clicking on a component moves the view of the instrument to centre on that component.</p>
</section>
<section id="python-control">
<h2>Python Control<a class="headerlink" href="#python-control" title="Permalink to this heading">¶</a></h2>
<p>Many aspects of the instrument view can be controlled from Python.
To use the Python interface for the Instrument Viewer, use the following code to import the necessary libraries:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantidqt.widgets.instrumentview.api</span> <span class="kn">import</span> <span class="n">get_instrumentview</span>
</pre></div>
</div>
<p>Then, load the Nexus data into a workspace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventNexus</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="n">nexus_path</span><span class="p">,</span> <span class="n">NumberOfBins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we are done with the necessary preparations, time to get a handle to the window itself (this will create a fresh window):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myiv</span> <span class="o">=</span> <span class="n">get_instrumentview</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">show_view</span><span class="p">()</span>
</pre></div>
</div>
<p>To set the integration range (in time-of-flight), use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myiv</span><span class="o">.</span><span class="n">set_bin_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
<p>To switch to a different tab, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myiv</span><span class="o">.</span><span class="n">select_tab</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># TabIndex</span>
                    <span class="c1"># 0: Render, 1: Pick, 2: Draw, 3: Instrument</span>
</pre></div>
</div>
<p>To select the projection type (surface type), use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myiv</span><span class="o">.</span><span class="n">select_surface_type</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># SurfaceTypeIndex</span>
                            <span class="c1"># 0: FULL3D</span>
                            <span class="c1"># 1: CYLINDRICAL_X, 2: CYLINDRICAL_Y, 3: CYLINDRICAL_Z,</span>
                            <span class="c1"># 4: SPHERICAL_X,   5: SPHERICAL_Y,   6: SPHERICAL_Z,</span>
                            <span class="c1"># 7: SideBySide</span>
</pre></div>
</div>
<p>To switch to a different viewing axis, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myiv</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="s2">&quot;Y+&quot;</span><span class="p">)</span>  <span class="c1"># (Z+, Z-, Y+, Y-, X+, X-)</span>
</pre></div>
</div>
<p>To select the range for the data (intensity, color map legend), use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myiv</span><span class="o">.</span><span class="n">set_auto_scaling</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>         <span class="c1"># need to turn off autoscaling before changing anything</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>          <span class="c1"># minimum value for the colorbar</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_max</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>       <span class="c1"># maximum value for the colorbar</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>  <span class="c1"># full range of the colorbar</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_scale</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>              <span class="c1"># color legend scale type</span>
                                     <span class="c1"># 0: Linear, 1: SymmetricLog10, 2: Power</span>
</pre></div>
</div>
<p>To start the app outside <code class="docutils literal notranslate"><span class="pre">MantidWorkbench</span></code>, use the following code snippet as a starting point:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">mantidqt.gui_helper</span> <span class="kn">import</span> <span class="n">get_qapplication</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">LoadEventNexus</span>
<span class="kn">from</span> <span class="nn">mantidqt.widgets.instrumentview.api</span> <span class="kn">import</span> <span class="n">get_instrumentview</span>
<span class="c1"># check if launched within Workbench, if not return a parent QApp for this widget</span>
<span class="c1"># to attach to</span>
<span class="n">app</span><span class="p">,</span> <span class="n">within_mantid</span> <span class="o">=</span> <span class="n">get_qapplication</span><span class="p">()</span>
<span class="c1"># prepare a valid workspace from any nexus file</span>
<span class="n">nexus_path</span> <span class="o">=</span> <span class="s1">&#39;/SNS/EQSANS/shared/sans-backend/data/new/ornl/sans/hfir/gpsans/CG2_9177.nxs.h5&#39;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventNexus</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="n">nexus_path</span><span class="p">,</span> <span class="n">NumberOfBins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># setup the instrument view</span>
<span class="n">myiv</span> <span class="o">=</span> <span class="n">get_instrumentview</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="c1"># to open the app</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">show_view</span><span class="p">()</span>
<span class="c1"># select tab</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">select_tab</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># select projection (surface type)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">select_surface_type</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># select axis</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="s2">&quot;Z-&quot;</span><span class="p">)</span>
<span class="c1"># select the range for the data (intensity, color map legend)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_auto_scaling</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_max</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_color_scale</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># select the integration range (time of flight)</span>
<span class="n">myiv</span><span class="o">.</span><span class="n">set_bin_range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="c1"># if running as a standalone app, start the QApp</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">within_mantid</span><span class="p">:</span>
  <span class="n">myiv</span><span class="o">.</span><span class="n">reset_view</span><span class="p">()</span>
  <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>
</div>
<p>NOTE: If the Instrument Viewer is launched outside of Workbench on RHEL_7, the user will need to click on the viewing widget to allow it to render correctly.
For other operating systems, the Instrument Viewer widget should display the instrument properly upon launching.</p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="algorithmtoolbox.html" title="Previous Chapter: Algorithm Toolbox"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Algorithm Toolbox</span>
    </a>
  </li>
  <li>
    <a href="ipythonconsole.html" title="Next Chapter: IPython Console"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IPython Console &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>