<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Framework Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UI &amp; Usability Changes" href="ui.html" />
    <link rel="prev" title="Mantid 3.12.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.12.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Framework Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#instrument-definition-updates" id="id12">Instrument Definition Updates</a></p>
<ul>
<li><p><a class="reference internal" href="#instrument-definitions" id="id13">Instrument Definitions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#algorithms" id="id14">Algorithms</a></p>
<ul>
<li><p><a class="reference internal" href="#new" id="id15">New</a></p></li>
<li><p><a class="reference internal" href="#improved" id="id16">Improved</a></p></li>
<li><p><a class="reference internal" href="#bugfixes" id="id17">Bugfixes</a></p></li>
<li><p><a class="reference internal" href="#known-issues" id="id18">Known Issues</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fitting" id="id19">Fitting</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id20">Improved</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id21">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#core-functionality" id="id22">Core Functionality</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id23">New</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id24">Improved</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id25">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#live-data" id="id26">Live Data</a></p>
<ul>
<li><p><a class="reference internal" href="#id6" id="id27">New</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance" id="id28">Performance</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id29">Improved</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id30">Bugfixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python" id="id31">Python</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id32">New</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id33">Improved</a></p></li>
<li><p><a class="reference internal" href="#deprecated" id="id34">Deprecated</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id35">Bugfixes</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="instrument-definition-updates">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Instrument Definition Updates</a><a class="headerlink" href="#instrument-definition-updates" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The MAPS IDF has been updated following its upgrade.</p></li>
</ul>
<section id="instrument-definitions">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Instrument Definitions</a><a class="headerlink" href="#instrument-definitions" title="Permalink to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Users:</strong> Instruments in Mantid will no longer silently discard detectors defined with duplicate IDs. This has been a long-standing source of hard to find issue in Mantid. We have endeavoured to ensure that all <a class="reference internal" href="../../concepts/InstrumentDefinitionFile.html#instrumentdefinitionfile"><span class="std std-ref">Instrument Definition Files</span></a> shipped with Mantid are now corrected. <strong>If you have local IDFs, please update them to remove any duplicate IDs, or ask the Mantid Team for help</strong>, the warning and error information in Mantid will give details about duplicates in IDFs that cannot be loaded.</p>
<p>Beware that <a class="reference internal" href="../../algorithms/LoadNexusProcessed-v2.html#algm-loadnexusprocessed"><span class="std std-ref">LoadNexusProcessed</span></a> will now <strong>NOT load the Instrument from historic Processed Nexus files if the embedded IDF is corruped with duplicate detector IDs</strong>. The workspace (data) part will still load, but the workspace will not have any Instrument attached. There are new warnings generated that describe the exact problem and the remedy when this happens. Note that the fix is generally easy. You should be able to run <a class="reference internal" href="../../algorithms/LoadInstrument-v1.html#algm-loadinstrument"><span class="std std-ref">LoadInstrument</span></a> on the Workspace, pointing it to an updated IDF, which is free of duplicates.</p>
</div>
<p>Please contact the Mantid Team if you experience any further problems as a result of these changes.</p>
</section>
</section>
<section id="algorithms">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this heading">¶</a></h2>
<section id="new">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">New</a><a class="headerlink" href="#new" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/MostLikelyMean-v1.html#algm-mostlikelymean"><span class="std std-ref">MostLikelyMean</span></a> is a new algorithm that computes the mean of the given array, that has the least distance from the rest of the elements.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadAndMerge-v1.html#algm-loadandmerge"><span class="std std-ref">LoadAndMerge</span></a> is a new algorithm that can load and merge multiple runs.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CropWorkspaceRagged-v1.html#algm-cropworkspaceragged"><span class="std std-ref">CropWorkspaceRagged</span></a>: New algorithm that will crop each spectrum with a different x-range.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadLamp-v1.html#algm-loadlamp"><span class="std std-ref">LoadLamp</span></a>: New algorithm to load processed HDF5 files produced by LAMP program at ILL.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveReflections-v1.html#algm-savereflections"><span class="std std-ref">SaveReflections</span></a> is a new algorithm to save PeaksWorkspaces to Fullprof, Jana, GSAS, and SHELX text formats.</p></li>
</ul>
</section>
<section id="improved">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Improved</a><a class="headerlink" href="#improved" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/NormaliseToMonitor-v1.html#algm-normalisetomonitor"><span class="std std-ref">NormaliseToMonitor</span></a> now supports workspaces with detector scans and workspaces with single-count point data.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CalculatePolynomialBackground-v1.html#algm-calculatepolynomialbackground"><span class="std std-ref">CalculatePolynomialBackground</span></a>: It is now possible to choose between weighted and unweighted fitting.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CreateWorkspace-v1.html#algm-createworkspace"><span class="std std-ref">CreateWorkspace</span></a> will no longer create a default (and potentially wrong) mapping from spectra to detectors, unless a parent workspace is given. This change ensures that accidental bad mappings that could lead to corrupted data are not created silently anymore. This change does <em>not</em> affect the use of this algorithm if: (1) a parent workspace is given, or (2) no instrument is loaded into to workspace at a later point, or (3) an instrument is loaded at a later point but <code class="docutils literal notranslate"><span class="pre">LoadInstrument</span></code> is used with <code class="docutils literal notranslate"><span class="pre">RewriteSpectraMapping=True</span></code>. See also the algorithm documentation for details.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ConjoinWorkspaces-v1.html#algm-conjoinworkspaces"><span class="std std-ref">ConjoinWorkspaces</span></a> now supports non-constant bins.</p></li>
<li><p><a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a> will now respect excluded ranges when <code class="docutils literal notranslate"><span class="pre">CostFunction</span> <span class="pre">=</span> <span class="pre">'Unweighted</span> <span class="pre">least</span> <span class="pre">squares'</span></code>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/NormaliseToMonitor-v1.html#algm-normalisetomonitor"><span class="std std-ref">NormaliseToMonitor</span></a> now supports a non-constant number of bins.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CompressEvents-v1.html#algm-compressevents"><span class="std std-ref">CompressEvents</span></a> now supports compressing events with pulse time.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MaskBins-v1.html#algm-maskbins"><span class="std std-ref">MaskBins</span></a> now uses a modernized and standardized way for providing a list of workspace indices. For compatibility reasons the previous <code class="docutils literal notranslate"><span class="pre">SpectraList</span></code> property is still supported.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadMcStas-v1.html#algm-loadmcstas"><span class="std std-ref">LoadMcStas</span></a> now loads event data in separate workspaces (single scattering, multiple scattering) as well as all scattering.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MaxEnt-v1.html#algm-maxent"><span class="std std-ref">MaxEnt</span></a>: The <code class="docutils literal notranslate"><span class="pre">EvolChi</span></code> and  <code class="docutils literal notranslate"><span class="pre">EvolAngle</span></code> workspaces now only contain data up until the result has converged.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveNexus-v1.html#algm-savenexus"><span class="std std-ref">SaveNexus</span></a> will no longer crash when passed a <code class="docutils literal notranslate"><span class="pre">PeaksWorkspace</span></code> with integrated peaks that have missing radius information.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ConjoinXRuns-v1.html#algm-conjoinxruns"><span class="std std-ref">ConjoinXRuns</span></a> will now accept workspaces with varying x-axes per spectrum.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadEXED-v1.html#algm-loadexed"><span class="std std-ref">LoadEXED</span></a> has better handling of monitor workspace and sample logs.</p></li>
</ul>
</section>
<section id="bugfixes">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a> has had a bug fixed that prevented a fix from being removed.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadMask-v1.html#algm-loadmask"><span class="std std-ref">LoadMask</span></a> has had a bug fixed that could, under certain conditions, cause detectors from previously loaded masking to be added to the currently loaded masking.</p></li>
</ul>
</section>
<section id="known-issues">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Known Issues</a><a class="headerlink" href="#known-issues" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a> is incorrectly ignoring the <cite>FilterMonBy*</cite> properties. When loading monitors as events the output
<cite>*_monitors</cite> workspace then contains all recorded events rather than those accepted by the filters. To work around this issue run the
<a class="reference internal" href="../../algorithms/FilterByTime-v1.html#algm-filterbytime"><span class="std std-ref">FilterByTime</span></a> algorithm on the output <cite>*_monitors</cite> workspace with the same values as passed to the <cite>FilterMonBy*</cite>
properties.</p></li>
</ul>
</section>
</section>
<section id="fitting">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Fitting</a><a class="headerlink" href="#fitting" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Improved</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../fitting/fitfunctions/EISFDiffSphere.html#func-eisfdiffsphere"><span class="std std-ref">EISFDiffSphere</span></a> fits the Q-dependence on the EISF of a particle undergoing continuous diffusion but confined to a spherical volume.</p></li>
<li><p><a class="reference internal" href="../../fitting/fitfunctions/EISFDiffSphereAlkyl.html#func-eisfdiffspherealkyl"><span class="std std-ref">EISFDiffSphereAlkyl</span></a> fits the Q-dependence on the EISF of an alkyl molecule, like a membrane lipd.</p></li>
<li><p><a class="reference internal" href="../../fitting/fitfunctions/EISFDiffCylinder.html#func-eisfdiffcylinder"><span class="std std-ref">EISFDiffCylinder</span></a> models the elastic incoherent scattering intensity of a particle diffusing within a cylinder.</p></li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fix for a bug in calculating numerical derivatives by applying ties correctly.</p></li>
</ul>
</section>
</section>
<section id="core-functionality">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Core Functionality</a><a class="headerlink" href="#core-functionality" title="Permalink to this heading">¶</a></h2>
<section id="id3">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">New</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added new classes <code class="docutils literal notranslate"><span class="pre">ConfigObserver</span></code> for listening for changes to any configuration property and <code class="docutils literal notranslate"><span class="pre">ConfigPropertyObserver</span></code> for listening to changes to an individual config property of interest.</p></li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Improved</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>DEB and RPM package sizes reduced by 17% and 6% respectively.</p></li>
<li><p><a class="reference internal" href="../../api/python/mantid/kernel/FloatTimeSeriesProperty.html#mantid.kernel.FloatTimeSeriesProperty" title="mantid.kernel.FloatTimeSeriesProperty"><code class="xref py py-class docutils literal notranslate"><span class="pre">mantid.kernel.FloatTimeSeriesProperty</span></code></a> now returns <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.datetime64" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.datetime64</span></code></a> for the log times.</p></li>
<li><p>The duration reported by a running algorithm now includes time spent for validation of properties and inputs. This fixes a discrepancy between observed and reported timings if validation is expensive, e.g., when checking if a file exists. More detailed timing information is now available when setting the log level to <code class="docutils literal notranslate"><span class="pre">debug</span></code>.</p></li>
<li><p>The status of a fit in the fit window is now at the top of the of the dialog instead of the bottom.</p></li>
<li><p>Condition to check if a property is enabled when serializing.</p></li>
<li><p>Workspace locking no longer prevents simple read operations required to display the workspace context menu in Mantidplot.</p></li>
<li><p>TableWorkspaces can now be converted to a Python dictionary by calling the <code class="docutils literal notranslate"><span class="pre">table.toDict()</span></code> function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiFileProperty</span></code> now accepts complex summation ranges for run numbers, such as <code class="docutils literal notranslate"><span class="pre">111-113+115</span></code> and <code class="docutils literal notranslate"><span class="pre">111-115+123-132</span></code>.</p></li>
</ul>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue where certain isotopes could not be accessed using the <cite>Atom</cite> classes, e.g Si28.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datasearch.searcharchive</span></code> <a class="reference internal" href="../../concepts/PropertiesFile.html#properties-file"><span class="std std-ref">property</span></a> has new functionality to only search the default facility.</p></li>
<li><p>Fixed the calculation of scattering length and scattering length squared for <a class="reference internal" href="../../api/python/mantid/kernel/Material.html#mantid.kernel.Material" title="mantid.kernel.Material"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Material</span></code></a>.</p></li>
<li><p>Fixed the behaviour of <code class="docutils literal notranslate"><span class="pre">UpdateInstrumentDefinitions.OnStartup</span></code> in the <a class="reference internal" href="../../concepts/PropertiesFile.html#properties-file"><span class="std std-ref">properties file</span></a>. It was not being used correctly for using the updated <code class="docutils literal notranslate"><span class="pre">Facilities.xml</span></code> file.</p></li>
</ul>
</section>
</section>
<section id="live-data">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Live Data</a><a class="headerlink" href="#live-data" title="Permalink to this heading">¶</a></h2>
<section id="id6">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">New</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">KafkaEventListener</span></code> is a new live listener for neutron event and sample environment data which is in development for the ESS and ISIS.</p></li>
</ul>
</section>
</section>
<section id="performance">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">Performance</a><a class="headerlink" href="#performance" title="Permalink to this heading">¶</a></h2>
<section id="id7">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Improved</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/LoadEmptyInstrument-v1.html#algm-loademptyinstrument"><span class="std std-ref">LoadEmptyInstrument</span></a> and load algorithms that are using it. Improved performance for second and consecutive loads of instrument geometry, particularly for instruments with many detector pixels.</p></li>
<li><p><a class="reference internal" href="../../algorithms/CropToComponent-v1.html#algm-croptocomponent"><span class="std std-ref">CropToComponent</span></a>: Up to 30% performance improvement, based on ongoing work on Instrument-2.0.</p></li>
<li><p><a class="reference internal" href="../../algorithms/MaxEnt-v1.html#algm-maxent"><span class="std std-ref">MaxEnt</span></a>: Improved rate of convergence. The  <code class="docutils literal notranslate"><span class="pre">ChiTarget</span></code> property has been replaced by  <code class="docutils literal notranslate"><span class="pre">ChiTargetOverN</span></code>.</p></li>
</ul>
</section>
<section id="id8">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>A <a class="reference external" href="https://github.com/mantidproject/mantid/pull/20953">bug</a> in the handling of fractional bin weights in a specialised form
(<code class="docutils literal notranslate"><span class="pre">RebinnedOutput</span></code>) of <a class="reference internal" href="../../concepts/Workspace2D.html#workspace2d"><span class="std std-ref">Workspace2D</span></a> has been fixed.
This mainly affects the algorithms <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon v1</span></a> and <a class="reference internal" href="../../algorithms/Rebin2D-v1.html#algm-rebin2d"><span class="std std-ref">Rebin2D v1</span></a>,
which underlies the <a class="reference external" href="http://archive.mantidproject.org/MantidPlot:_SliceViewer">SliceViewer</a>.</p></li>
</ul>
</section>
</section>
<section id="python">
<h2><a class="toc-backref" href="#id31" role="doc-backlink">Python</a><a class="headerlink" href="#python" title="Permalink to this heading">¶</a></h2>
<section id="id9">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">New</a><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mantid.api.IPeak</span></code> has three new functions:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">getEnergyTransfer</span></code> which returns the difference between the initial and final energy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getIntensityOverSigma</span></code> which returns the peak intensity divided by the error in intensity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getGoniometerMatrix</span></code> which returns the goniometer rotation matrix associated with the peak.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Improved</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">mantid.simpleapi</span></code>, a keyword has been implemented for function-like algorithm calls to control the storing on the Analysis Data Service.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StoreInADS=False</span></code> can be passed to function calls to not to store their output on the ADS.</p></li>
<li><p>The standard Python operators, e.g. <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">+=</span></code>, etc., now work also with workspaces not in the ADS.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">isDefault</span></code> attribute for workspace properties now works correctly with workspaces not in the ADS.</p></li>
<li><p>The previously mentioned <code class="docutils literal notranslate"><span class="pre">ConfigObserver</span></code> and <code class="docutils literal notranslate"><span class="pre">ConfigPropertyObserver</span></code> classes are also exposed to Python.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mantid.kernel.V3D</span></code> vectors now support negation through the usual <code class="docutils literal notranslate"><span class="pre">-</span></code> operator.</p></li>
<li><p>It is now possible to <a class="reference external" href="https://docs.python.org/2/library/pickle.html">pickle</a> and de-pickle <a class="reference internal" href="../../concepts/Workspace2D.html#workspace2d"><span class="std std-ref">Workspace2D</span></a> and <a class="reference internal" href="../../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> in Python. This has been added to make it easier to transfer your workspaces over a network. Only these two workspace types currently supports the pickling process, and there are limitations to be aware of described <a class="reference internal" href="../../concepts/Workspace2D.html#workspace2d"><span class="std std-ref">here</span></a>.</p></li>
<li><p>Support for unicode property names has been added to Python. This means that one can run the following in Python2 or Python3.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s1">&#39;{&quot;Filename&quot;:&quot;CNCS_7860_event.nxs&quot;}&#39;</span><span class="p">)</span>
<span class="n">props</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s1">&#39;{&quot;InputWorkspace&quot;:&quot;eventWS&quot;, &quot;Params&quot;:&quot;1000&quot;}&#39;</span><span class="p">)</span>
<span class="n">eventWS</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="o">**</span><span class="n">source</span><span class="p">)</span>
<span class="n">rebinned</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="o">**</span><span class="n">props</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="deprecated">
<h3><a class="toc-backref" href="#id34" role="doc-backlink">Deprecated</a><a class="headerlink" href="#deprecated" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="http://docs.mantidproject.org/v3.11.0/api/python/mantidplot/pyplot/index.html">MantidPlot.pyplot</a> was an early attempt to provide Matplotlib style syntax over Mantidplot plotting.  This will be replaced in Mantid 4.0 with MatPlotlib itself, and this packages would cause namespace clashes and confusion.  This package is now deprecated, and will not be included in future releases of Mantid.  To the best of our knowledge the impact of this should be minimal as it is at best only rarely used.</p></li>
</ul>
</section>
<section id="id11">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">Bugfixes</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue with coercing data from python lists or numpy arrays where the datatype!=float64 into a workspace</p></li>
</ul>
<p><a class="reference internal" href="index.html#v3-12-0"><span class="std std-ref">Release 3.12.0</span></a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 3.12.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 3.12.0...</span>
    </a>
  </li>
  <li>
    <a href="ui.html" title="Next Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">UI & Usabilit... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>