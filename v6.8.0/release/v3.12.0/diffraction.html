<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Diffraction Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MuSR Changes" href="muon.html" />
    <link rel="prev" title="UI &amp; Usability Changes" href="ui.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.12.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Diffraction Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#powder-diffraction" id="id7">Powder Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#new-features" id="id8">New features</a></p></li>
<li><p><a class="reference internal" href="#improvements" id="id9">Improvements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#engineering-diffraction" id="id10">Engineering Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id11">Improvements</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id12">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#single-crystal-diffraction" id="id13">Single Crystal Diffraction</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id14">New features</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id15">Improvements</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id16">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#total-scattering" id="id17">Total Scattering</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id18">New features</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#features-removed" id="id19">Features Removed</a></p></li>
</ul>
</nav>
<section id="powder-diffraction">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Permalink to this heading">¶</a></h2>
<section id="new-features">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">New features</a><a class="headerlink" href="#new-features" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>New features in ISIS Powder which affect all instruments:</p>
<ul>
<li><p>‘suffix’ parameter added for output filenames</p></li>
<li><p>Offset files may now be specified by an absolute path. The default behaviour of assuming they live in calibration/label has been retained</p></li>
<li><p>Output workspace names altered slightly to allow for easier renaming of GroupWorkspaces (see RenameWorkspace)</p></li>
<li><p>Scripts no longer crash when current-normalising a workspace with no current. Instead, no normalisation or empty calibration is applied, and processing continues as normal</p></li>
<li><p>It is now possible to set beam parameters (height and width) using <code class="docutils literal notranslate"><span class="pre">instrument_object.set_beam_parameters(height=123,</span> <span class="pre">width=456)</span></code>.</p></li>
<li><p>Using grouping files with only one bank was enabled, and related errors to do with mismatched number of parameters were made more readable</p></li>
</ul>
</li>
<li><p>New features in ISIS Powder scripts for PEARL:</p>
<ul>
<li><p>Scripts now support creation of grouping .cal files from ceria run(s)</p></li>
<li><p>Absorption corrections enabled for all samples, not just vanadium</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subtract_empty_instrument</span></code> parameter added for disabling empty subtraction, useful for focusing empties</p></li>
</ul>
</li>
<li><p>New functionality for POLARIS in the ISIS Powder scripts. Some default parameters adjusted and output unsplined vanadium workspace by default.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/EstimateDivergence-v1.html#algm-estimatedivergence"><span class="std std-ref">EstimateDivergence v1</span></a> estimates the beam divergence due to finite slit size.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/SumOverlappingTubes-v1.html#algm-sumoverlappingtubes"><span class="std std-ref">SumOverlappingTubes v1</span></a> combines a detector scan for D2B into a single workspace.</p></li>
</ul>
</section>
<section id="improvements">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/CalculateDIFC-v1.html#algm-calculatedifc"><span class="std std-ref">CalculateDIFC</span></a> has been extended to allow for calibration workspaces from <a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a>.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveFocusedXYE-v1.html#algm-savefocusedxye"><span class="std std-ref">SaveFocusedXYE</span></a> has been amended to write the metadata (e.g. temperature) value in the header, in the form of the Fullprof readable keyword.</p></li>
<li><p>Improvements in ISIS Powder for HRPD:</p>
<ul>
<li><p>The prompt pulse is now masked out for the long window</p></li>
<li><p>Extra TOF windows 10-50 and 180-280 now supported</p></li>
<li><p>Default bin widths have been updated</p></li>
</ul>
</li>
<li><p>Improvements in ISIS Powder for POLARIS:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">mode</span></code> parameter now behaves as described in the documentation - it persists through function calls and is case insensitive</p></li>
<li><p>After calling create_vanadium and focus, the output workspaces always contain the sample material if it is set using <code class="docutils literal notranslate"><span class="pre">set_sample_material</span></code>. (To view the sample material, right click the workspace and click ‘Sample Material…’)</p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code> is now optional in <a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a>. In this case time focussing will use <a class="reference internal" href="../../algorithms/ConvertUnits-v1.html#algm-convertunits"><span class="std std-ref">ConvertUnits</span></a> and the instrument geometry. Care must be taken to supply a <code class="docutils literal notranslate"><span class="pre">GroupingFile</span></code> otherwise all of the spectra will be kept separate.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveGSS-v1.html#algm-savegss"><span class="std std-ref">SaveGSS</span></a> is relaxed to accept non-TOF point data workspaces as well.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a> returns three more diagnostic workspaces: one for the fitted peak heights, one for the fitted peak widths, and one for observed resolution.</p></li>
<li><p><a class="reference internal" href="../../algorithms/LoadILLDiffraction-v1.html#algm-loadilldiffraction"><span class="std std-ref">LoadILLDiffraction</span></a> now supports D2B files with calibrated data.</p></li>
<li><p><strong>PowderDiffILLReduction</strong> and <strong>PowderDiffILLDetEffCorr</strong> enable the basic data reduction for D20 scanning powder diffractometer at ILL.</p></li>
<li><p><a class="reference internal" href="../../algorithms/ApplyDetectorScanEffCorr-v1.html#algm-applydetectorscaneffcorr"><span class="std std-ref">ApplyDetectorScanEffCorr</span></a> applies the calibration file generated by <strong>PowderDiffILLDetEffCorr</strong> to detector scan workspaces.</p></li>
<li><p><strong>PowderDiffILLDetScanReduction</strong> supports D2B and D20 (when doing a detector scan) powder diffraction reduction at the ILL.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveGSS-v1.html#algm-savegss"><span class="std std-ref">SaveGSS</span></a> has been extended to allow user to specify GSAS general header, each bank’s header and XYE decimal precision for SLOG.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveVulcanGSS-v1.html#algm-savevulcangss"><span class="std std-ref">SaveVulcanGSS</span></a> has been moved to a workflow algorithm and largely rewritten by using recent change in histogram and Workspace2D.  It is also improved such that there is no constraint on the number of spectra and number of various binning parameters on the workspace to be saved to a GSAS file for VULCAN.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PDLoadCharacterizations-v1.html#algm-pdloadcharacterizations"><span class="std std-ref">PDLoadCharacterizations</span></a> now allows for the azimuthal angles to be optionally specified in the file.</p></li>
</ul>
</section>
</section>
<section id="engineering-diffraction">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Improvements</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>GSAS Fitting tab was added to the GUI to allow convenient GSAS-style refinement using GSASIIRefineFitPeaks</p></li>
</ul>
<figure class="align-right" id="id6" style="width: 50%">
<img alt="../../_images/engineering_gsas_gui.PNG" class="screenshot" src="../../_images/engineering_gsas_gui.PNG" />
<figcaption>
<p><span class="caption-text">The Engineering diffraction GSAS-II GUI</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/GSASIIRefineFitPeaks-v1.html#algm-gsasiirefinefitpeaks"><span class="std std-ref">GSASIIRefineFitPeaks</span></a> has been re-integrated with the
latest version of GSAS-II, allowing Rietveld and Pawley refinement
within Mantid.
+ Fitted peaks are now output as a Mantid workspace.</p></li>
<li><p>Usability improvements in the GUI:</p>
<ul>
<li><p>The “Invalid RB number” popup window in the GUI has been replaced with a more user-friendly message.</p></li>
<li><p>Improved progress reporting for Calibration and Focus.</p></li>
<li><p>Enabled multi-run fitting and plotting in the Fitting tab.</p></li>
<li><p>Improved unit conversions when using the peak picker.</p></li>
</ul>
</li>
</ul>
</section>
<section id="bug-fixes">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Bug fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug where the engineering diffraction GUI could hang when performing a long running file search.</p></li>
</ul>
</section>
</section>
<section id="single-crystal-diffraction">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Permalink to this heading">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">New features</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>New algorithm <a class="reference internal" href="../../algorithms/LoadWAND-v1.html#algm-loadwand"><span class="std std-ref">LoadWAND</span></a> that will load event data for WAND² integrating out the events and correctly setting the units.</p></li>
</ul>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Improvements</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/FilterPeaks-v1.html#algm-filterpeaks"><span class="std std-ref">FilterPeaks</span></a> now supports filtering peaks by TOF, d-spacing, and wavelength.</p></li>
<li><p>HB3A reduction interface has been enhanced.  A child window is added to it for users to pre-process scans and save the processed and merged data to NeXus files in order to save time when they start to reduce and visualize the data. A record file is generated along with processed scans to record the calibration information. During data reduction, scans that have been processed in pre-processing will be loaded automatically from corresponding MD files.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMDHKL-v1.html#algm-integratepeaksmdhkl"><span class="std std-ref">IntegratePeaksMDHKL</span></a> now has option to specify background shell instead of using default background determination.</p></li>
<li><p>In HB3A reduction interface, section for downloading experimental data via http server has been removed from main UI.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMDHKL-v1.html#algm-integratepeaksmdhkl"><span class="std std-ref">IntegratePeaksMDHKL</span></a> now has option to specify background shell instead of using default background determination.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IndexPeaks-v1.html#algm-indexpeaks"><span class="std std-ref">IndexPeaks</span></a> now has option, CommonUBForAll, to use the current UB to index all peaks from different runs. This option does not optimize the UB for the different runs.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FindUBUsingFFT-v1.html#algm-findubusingfft"><span class="std std-ref">FindUBUsingFFT</span></a> now has options to specify number of iterations to refine UB and also resolution of the search through possible orientations.  Minimum angle between a,b,c vectors reduced for large unit cells.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FindUBUsingLatticeParameters-v1.html#algm-findubusinglatticeparameters"><span class="std std-ref">FindUBUsingLatticeParameters</span></a> now has option to specify number of iterations to refine UB.</p></li>
<li><p>SCD Event Data Reduction interface now uses the Indexing Tolerance for Index Peaks to index the peaks for the Select Cell options in Choose Cell tab.  Previously it used a constant, 0.12, for the tolerance.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveLauenorm-v1.html#algm-savelauenorm"><span class="std std-ref">SaveLauenorm</span></a> now has option to save peaks in geasc format for input into exchge and then lauescale from the laue package.</p></li>
<li><p><a class="reference internal" href="../../algorithms/FindPeaksMD-v1.html#algm-findpeaksmd"><span class="std std-ref">FindPeaksMD</span></a> now has an option to calculate the Goniometer rotation (around y-axis only) for a constant wavelength source.</p></li>
<li><p><a class="reference internal" href="../../algorithms/StatisticsOfPeaksWorkspace-v1.html#algm-statisticsofpeaksworkspace"><span class="std std-ref">StatisticsOfPeaksWorkspace</span></a> now can accept long or short names for the point group and reflection condition.</p></li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Bug fixes</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug in <a class="reference internal" href="../../algorithms/IntegrateEllipsoids-v3.html#algm-integrateellipsoids"><span class="std std-ref">IntegrateEllipsoids</span></a> and <a class="reference internal" href="../../algorithms/IntegrateEllipsoidsTwoStep-v1.html#algm-integrateellipsoidstwostep"><span class="std std-ref">IntegrateEllipsoidsTwoStep</span></a> that forced output to be weighted by the bin width.</p></li>
<li><p>Fixed a bug in <a class="reference internal" href="../../algorithms/IntegrateEllipsoidsTwoStep-v1.html#algm-integrateellipsoidstwostep"><span class="std std-ref">IntegrateEllipsoidsTwoStep</span></a> where peaks with negative intensity values would be set to zero.</p></li>
</ul>
</section>
</section>
<section id="total-scattering">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Total Scattering</a><a class="headerlink" href="#total-scattering" title="Permalink to this heading">¶</a></h2>
<section id="id5">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">New features</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>A basic analysis for total scattering method <code class="docutils literal notranslate"><span class="pre">create_total_scattering_pdf</span></code> has been added to POLARIS. More information can be found on the POLARIS reference page.</p></li>
</ul>
</section>
</section>
<section id="features-removed">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Features Removed</a><a class="headerlink" href="#features-removed" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The “Test the Curve Fit widget” graphical interface has been removed, it was a test harness for developers and was not intended to be exposed during earlier releases.</p></li>
</ul>
<p><a class="reference internal" href="index.html#v3-12-0"><span class="std std-ref">Release 3.12.0</span></a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ui.html" title="Previous Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; UI & Usabilit...</span>
    </a>
  </li>
  <li>
    <a href="muon.html" title="Next Chapter: MuSR Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MuSR Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>