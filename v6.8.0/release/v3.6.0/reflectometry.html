<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Reflectometry Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Mantid 3.6.1 Release Notes" href="../v3.6.1/index.html" />
    <link rel="prev" title="Muon Analysis" href="muon.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.6.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Reflectometry Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="reflectometry-changes">
<h1>Reflectometry Changes<a class="headerlink" href="#reflectometry-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#reflectometryreductionone" id="id11">ReflectometryReductionOne</a></p></li>
<li><p><a class="reference internal" href="#converttoreflectometryq" id="id12">ConvertToReflectometryQ</a></p></li>
<li><p><a class="reference internal" href="#reflectometry-reduction-interface" id="id13">Reflectometry Reduction Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#isis-reflectometry-polref" id="id14">ISIS Reflectometry (Polref)</a></p></li>
<li><p><a class="reference internal" href="#isis-reflectometry" id="id15">ISIS Reflectometry</a></p></li>
<li><p><a class="reference internal" href="#measurement-based-reduction-grouping" id="id16">Measurement Based Reduction Grouping</a></p></li>
<li><p><a class="reference internal" href="#momentum-transfer-calculations" id="id17">Momentum Transfer calculations</a></p></li>
<li><p><a class="reference internal" href="#slitcalculator" id="id18">SlitCalculator</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#other-changes" id="id19">Other Changes</a></p></li>
</ul>
</nav>
<section id="reflectometryreductionone">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">ReflectometryReductionOne</a><a class="headerlink" href="#reflectometryreductionone" title="Permalink to this heading">¶</a></h2>
<p>A new algorithm, <a class="reference internal" href="../../algorithms/RotateSource-v1.html#algm-rotatesource"><span class="std std-ref">RotateSource</span></a>,
to move the source to the correct position, was added <cite>#14707 &lt;https://github.com/mantidproject/mantid/pull/14707&gt;</cite></p>
<p><a class="reference internal" href="../../algorithms/RotateSource-v1.html#algm-rotatesource"><span class="std std-ref">RotateSource</span></a> algorithm has been implemented so that source position is
rotated before the conversion from IvsLambda to IvsQ to ensure that the
correct Q range is calculated. <a class="reference external" href="https://github.com/mantidproject/mantid/pull/14942">#14942</a></p>
<p>To sustain continuity in the instrument setup the <a class="reference internal" href="../../algorithms/RotateSource-v1.html#algm-rotatesource"><span class="std std-ref">RotateSource</span></a> algorithm
is applied again but in the opposite direction by the same rotation
theta. This fixed some bugs we were seeing when other algorithms that
relied on the source position were producing the wrong results <a class="reference external" href="https://github.com/mantidproject/mantid/pull/15139">#15139</a></p>
</section>
<section id="converttoreflectometryq">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">ConvertToReflectometryQ</a><a class="headerlink" href="#converttoreflectometryq" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="../../algorithms/ConvertToReflectometryQ-v2.html#algm-converttoreflectometryq"><span class="std std-ref">ConvertToReflectometryQ</span></a> can now output any transformation (Centre point
or NormalisedPolygon) in the form of an <a class="reference internal" href="../../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a>. See
<code class="docutils literal notranslate"><span class="pre">OutputAsMDWorkspace</span> <span class="pre">property</span></code> in the <a class="reference internal" href="../../algorithms/ConvertToReflectometryQ-v2.html#algm-converttoreflectometryq"><span class="std std-ref">documentation</span></a>.</p>
<p>A bug that was causing <a class="reference internal" href="../../algorithms/ConvertToReflectometryQ-v2.html#algm-converttoreflectometryq"><span class="std std-ref">ConvertToReflectometryQ</span></a> to output wrong values
around Qx ~ 0 was fixed <a class="reference external" href="https://github.com/mantidproject/mantid/pull/14201">#14201</a></p>
<p>A bug that was causing <a class="reference internal" href="../../algorithms/ConvertToReflectometryQ-v2.html#algm-converttoreflectometryq"><span class="std std-ref">ConvertToReflectometryQ</span></a> to output NaN’s at one of
the edges was fixed <a class="reference external" href="https://github.com/mantidproject/mantid/pull/14283">#14283</a> (this fix
has also been applied to the PiPf and KiKf transformations
<a class="reference external" href="https://github.com/mantidproject/mantid/pull/14455">#14455</a>)</p>
<p>A bug in PolygonIntersection was fixed. It was affecting
<a class="reference internal" href="../../algorithms/ConvertToReflectometryQ-v2.html#algm-converttoreflectometryq"><span class="std std-ref">ConvertToReflectometryQ</span></a> when the number of pixels was large (~3000x3000)
<a class="reference external" href="https://github.com/mantidproject/mantid/issues/14477">#14477</a></p>
</section>
<section id="reflectometry-reduction-interface">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Reflectometry Reduction Interface</a><a class="headerlink" href="#reflectometry-reduction-interface" title="Permalink to this heading">¶</a></h2>
<section id="isis-reflectometry-polref">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">ISIS Reflectometry (Polref)</a><a class="headerlink" href="#isis-reflectometry-polref" title="Permalink to this heading">¶</a></h3>
<p>The Reflectometry Polref Interface can now import a <cite>.tbl</cite> file straight
into the processing table instead of the two-step process of importing
and then opening the table that was previously implemented. This change
mimics the behaviour of the old Reflectometry reduction Interface
<a class="reference external" href="https://github.com/mantidproject/mantid/pull/14709">#14709</a></p>
<p>The name of the table that is currently in the table should appear in
the title of the interface window i.e “ISIS Reflectometry (Polref) -
table1”</p>
<p>A bug has been fixed that appeared when the user tried to open a new
table when the table currently in the interface had been edited. This
bug caused a pop-up saying “You have unsaved changes in your table,
would you like to discard these changes?” to appear multiple times if
the user clicked the “No” button.
<a class="reference external" href="https://github.com/mantidproject/mantid/pull/14966">#14966</a></p>
</section>
<section id="isis-reflectometry">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">ISIS Reflectometry</a><a class="headerlink" href="#isis-reflectometry" title="Permalink to this heading">¶</a></h3>
<p>Another bug that would reset your table back to original values if you
chose ‘Cancel’ when asked if you would like to discard your changes.
<a class="reference external" href="https://github.com/mantidproject/mantid/pull/15083">#15083</a></p>
</section>
<section id="measurement-based-reduction-grouping">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Measurement Based Reduction Grouping</a><a class="headerlink" href="#measurement-based-reduction-grouping" title="Permalink to this heading">¶</a></h3>
<p>Transferring of runs will now automatically assemble the batch
processing table using the measurement logs in the isis nexus files.</p>
<p>If the measurement log is invalid it result in a failed transfer and the
row in the search table corresponding to this run will be highlighted.
Hovering the cursor over failed transfers will show you why the transfer
failed i.e “Invalid measurement ID”.</p>
</section>
<section id="momentum-transfer-calculations">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Momentum Transfer calculations</a><a class="headerlink" href="#momentum-transfer-calculations" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Some algorithms either returning theta or two theta, but labelling
the output incorrectly. One candidate being
<a class="reference internal" href="../../algorithms/SpecularReflectionCalculateTheta-v2.html#algm-specularreflectioncalculatetheta"><span class="std std-ref">SpecularReflectionCalculateTheta</span></a>.
<strong>This change could affect results when using</strong> <a class="reference internal" href="../../algorithms/ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><span class="std std-ref">ReflectometryReductionOne</span></a>.</p></li>
<li><p><span class="math notranslate nohighlight">\(|Q|\)</span> created via <a class="reference internal" href="../../algorithms/ConvertUnits-v1.html#algm-convertunits"><span class="std std-ref">ConvertUnits</span></a>
and Qx, Qz maps created via
<a class="reference internal" href="../../algorithms/ConvertToReflectometryQ-v2.html#algm-converttoreflectometryq"><span class="std std-ref">ConvertToReflectometryQ</span></a>
incommensurate. Source component not being located correctly.</p></li>
</ul>
</section>
<section id="slitcalculator">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">SlitCalculator</a><a class="headerlink" href="#slitcalculator" title="Permalink to this heading">¶</a></h3>
<p>The SlitCalculator tool for this interface will now retrieve values for:
Distance between first and second slit and distance between the second
slit and the sample container, using the Instrument Definition file of
the processing/search instrument. This functionality will work even if
SlitCalculator is open when you change the instrument associated with
the interface.
<a class="reference external" href="https://github.com/mantidproject/mantid/pull/14077">#14077</a></p>
</section>
</section>
<section id="other-changes">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Other Changes</a><a class="headerlink" href="#other-changes" title="Permalink to this heading">¶</a></h2>
<p>A bug has been fixed in <a class="reference internal" href="../../algorithms/SpecularReflectionPositionCorrect-v2.html#algm-specularreflectionpositioncorrect"><span class="std std-ref">SpecularReflectionPositionCorrect</span></a> whereby the Y
shift was not being correctly calculated
<a class="reference external" href="https://github.com/mantidproject/mantid/pull/14376">#14376</a></p>
<p><a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.6%22+is%3Amerged+label%3A%22Component%3A+Reflectometry%22">Full list of changes on github</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="muon.html" title="Previous Chapter: Muon Analysis"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Muon Analysis</span>
    </a>
  </li>
  <li>
    <a href="../v3.6.1/index.html" title="Next Chapter: Mantid 3.6.1 Release Notes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Mantid 3.6.1 ... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>