<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Diffraction Changes</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Muon Analysis" href="muon.html" />
    <link rel="prev" title="SANS Changes" href="sans.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 3.8.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Diffraction Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#crystal-improvements" id="id2">Crystal Improvements</a></p></li>
<li><p><a class="reference internal" href="#single-crystal-diffraction" id="id3">Single Crystal Diffraction</a></p></li>
<li><p><a class="reference internal" href="#engineering-diffraction" id="id4">Engineering Diffraction</a></p></li>
<li><p><a class="reference internal" href="#powder-diffraction" id="id5">Powder Diffraction</a></p></li>
<li><p><a class="reference internal" href="#imaging" id="id6">Imaging</a></p>
<ul>
<li><p><a class="reference internal" href="#tomographic-reconstruction-graphical-user-interface" id="id7">Tomographic reconstruction graphical user interface</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="crystal-improvements">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Crystal Improvements</a><a class="headerlink" href="#crystal-improvements" title="Permalink to this heading">¶</a></h2>
</section>
<section id="single-crystal-diffraction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>HFIR HB3A’s data reduction interface application (MantidPlot/Interfaces/Diffraction/HFIR 4Circle Reduction)
has been expanded and improved from previous release. It provides an integrated user-friendly interface for
instrument scientists and users to access data, calculate and refine UB matrix, merge multiple data sets
for slice-view and peak integration.</p></li>
<li><p><a class="reference internal" href="../../algorithms/IntegratePeaksMDHKL-v1.html#algm-integratepeaksmdhkl"><span class="std std-ref">IntegratePeaksMDHKL</span></a> has been added to integrate data in HKL space.  The
main usage will be to normalize the data using
<a class="reference internal" href="../../algorithms/MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDNormSCD</span></a> and then integrate the resulting MDHistoWorkspace,
but it also integrates MDHistoWorkspaces and MDEventWorkspaces without normalizing.
The MD data must be in units of HKL.  A 3D box is created for each peak and the background
and peak data are separated.  The intensity and sigma of the intensity is found from the grid inside the peak and
the background is subtracted.  The boxes are created and integrated in parallel and less memory is required than
binning all HKL space at once. The figure shows the grid points within an HKL box that are in one peak from Si data.</p></li>
</ul>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/peak3d.png"><img alt="../../_images/peak3d.png" src="../../_images/peak3d.png" style="width: 487px;" /></a>
</figure>
<ul class="simple">
<li><p>Some improvements were done for creating peaks from python. <a class="reference internal" href="../../algorithms/CreatePeaksWorkspace-v1.html#algm-createpeaksworkspace"><span class="std std-ref">CreatePeaksWorkspace</span></a>
copies the goniometer from the input MatrixWorkspace to PeaksWorkspace. createPeak for PeaksWorkspace copies goniometer
from PeaksWorkspace to peak. setGoniometer for a peak can be done from python and setQLabFrame and setQSampleFrame work
correctly now with one argument.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SCDCalibratePanels-v2.html#algm-scdcalibratepanels"><span class="std std-ref">SCDCalibratePanels</span></a> has been rewritten to calibrate the position and rotations of
each panel independently in parallel.  There are options to calibrate the panel size and the L1 for all the panels.
Only the U of the UB matrix is refined.  There is a script, scripts/SCD_Reduction/SCDCalibratePanelsResults.py, that takes the output of
this algorithm and plots the theoretical vs calculated position of each peak for each panel.  The RMSD in mm is
calculated and printed in a log file and on the plots.</p></li>
<li><p>Given a PeaksWorkspace or MatrixWorkspace with an instrument,
<a class="reference internal" href="../../algorithms/SetDetScale-v1.html#algm-setdetscale"><span class="std std-ref">SetDetScale</span></a>
will set or change the detector bank scales that are used in SaveHKL and AnvredCorrection.  The input format is the same as
used in anvred3.py, so DetScaleList input can be pasted from the definition of detScale there.  The default values can be
set in the instrument parameter file. Default values are in the parameter file for the TOPAZ instrument.</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveLauenorm-v1.html#algm-savelauenorm"><span class="std std-ref">SaveLauenorm</span></a>
was modified to have an option to use the detector bank scales from the instrument parameters. The values can be
set to have defaults in the instrument parameter file or by
<a class="reference internal" href="../../algorithms/SetDetScale-v1.html#algm-setdetscale"><span class="std std-ref">SetDetScale</span></a>.</p></li>
</ul>
</section>
<section id="engineering-diffraction">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>EnggFocus: bins are now masked at the beginning of the workflow
(when using the option MaskBinsXMins)</p></li>
<li><p><a class="reference internal" href="../../algorithms/SaveDiffFittingAscii-v1.html#algm-savedifffittingascii"><span class="std std-ref">SaveDiffFittingAscii</span></a> an algorithm which saves a TableWorkspace containing
diffraction fitting results as an ASCII file</p></li>
<li><p>New <em>Fit All</em> button on the Fitting Tab will enable user to
batch-process all the runs and banks when a range of run number
is given. During the Fit process,
<a class="reference internal" href="../../algorithms/SaveDiffFittingAscii-v1.html#algm-savedifffittingascii"><span class="std std-ref">SaveDiffFittingAscii</span></a> algorithm
will be utilised to save <em>engggui_fitting_fitpeaks_param</em>
TableWorkspace as a <cite>csv</cite> file.</p></li>
<li><p>New <em>Load</em> button on the Fitting Tab, will enable user to load the
focused file to the canvas, so that the user can select the peaks
manually beforehand</p></li>
<li><p>New tool-tip <em>How to use</em> quickly tells users how to use the peak
picker tool by simply hovering their cursor over it.</p></li>
</ul>
</section>
<section id="powder-diffraction">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><span class="std std-ref">SNSPowderReduction</span></a> has changed
parameters. <code class="docutils literal notranslate"><span class="pre">Instrument</span></code>, <code class="docutils literal notranslate"><span class="pre">RunNumber</span></code>, and <code class="docutils literal notranslate"><span class="pre">Extension</span></code> have
been replaced with a single <code class="docutils literal notranslate"><span class="pre">Filename</span></code> parameter. This has been
paired with changes to the Powder Diffraction interface as
well. There were also a variety of bugfixes related to the output
workspaces. While it did not affect the saved data files, the output
workspaces were not always correctly normalized or in the requested
units. There is also an additional <code class="docutils literal notranslate"><span class="pre">GroupingFile</span></code> parameter which
allows overriding the grouping that is specified in the
<code class="docutils literal notranslate"><span class="pre">CalibrationFile</span></code>. The documentation for this algorithm has been
greatly expanded as well.</p></li>
<li><p><a class="reference internal" href="../../algorithms/PDFFourierTransform-v2.html#algm-pdffouriertransform"><span class="std std-ref">PDFFourierTransform</span></a> has been modified to
look at the signal as well when looking at the <code class="docutils literal notranslate"><span class="pre">Q</span></code>-range to use
for the transform.</p></li>
<li><dl class="simple">
<dt><a class="reference external" href="http://docs.mantidproject.org/v3.8.0/api/python/techniques/CryPowderDiffractionISIS-v1.html">Crystallography Powder Diffraction Script</a>: S-Empty option has been enabled for</dt><dd><p>the Crystallography Powder Diffraction Script. In order to use the
S-Empty option, simply provide the S-Empty run number within the
<code class="docutils literal notranslate"><span class="pre">.pref</span></code> file.</p>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="../../algorithms/CorelliCrossCorrelate-v1.html#algm-corellicrosscorrelate"><span class="std std-ref">CorelliCrossCorrelate</span></a>: The
weights applied to events have changed by a factor of the duty cycle
(<span class="math notranslate nohighlight">\(c\approx0.498\)</span>) as requested by the instrument scientists.</p></li>
<li><p><a class="reference external" href="http://docs.mantidproject.org/v3.8.0/api/python/techniques/PearlPowderDiffractionISIS-v1.html">Pearl Powder Diffraction Script</a>:
A workflow diagram for <code class="docutils literal notranslate"><span class="pre">pearl_run_focus</span></code> function has been created.</p></li>
<li><p><cite>CalibrateRectangularDetectors</cite> has been modified to output
<code class="docutils literal notranslate"><span class="pre">.h5</span></code> formatted calibration files as well as the other versions it
already supported.</p></li>
<li><p>New algorithm <a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><span class="std std-ref">PDCalibration</span></a> for
pixel-by-pixel calibration in time-of-flight space.</p></li>
</ul>
</section>
<section id="imaging">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Imaging</a><a class="headerlink" href="#imaging" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>An updated version of the IMAT instrument definition now includes
prototype diffraction detector banks.</p></li>
</ul>
<section id="tomographic-reconstruction-graphical-user-interface">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Tomographic reconstruction graphical user interface</a><a class="headerlink" href="#tomographic-reconstruction-graphical-user-interface" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed the submission of custom commands.</p></li>
</ul>
<p>Full list of <a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.8%22+is%3Amerged+label%3A%22Component%3A+Diffraction%22">diffraction</a>
and
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.8%22+is%3Amerged+label%3A%22Component%3A+Imaging%22">imaging</a> changes on GitHub.</p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="sans.html" title="Previous Chapter: SANS Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANS Changes</span>
    </a>
  </li>
  <li>
    <a href="muon.html" title="Next Chapter: Muon Analysis"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Muon Analysis &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>