<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>BinMD v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="BinWidthAtX v1" href="BinWidthAtX-v1.html" />
    <link rel="prev" title="Bin2DPowderDiffraction v1" href="Bin2DPowderDiffraction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">BinMD v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="binmd-v1">
<span id="algm-binmd"></span><span id="algm-binmd-v1"></span><h1>BinMD v1<a class="headerlink" href="#binmd-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#axis-aligned-binning" id="id6">Axis-Aligned Binning</a></p></li>
<li><p><a class="reference internal" href="#non-axis-aligned-binning" id="id7">Non-Axis Aligned Binning</a></p></li>
<li><p><a class="reference internal" href="#binning-a-mdhistoworkspace" id="id8">Binning a MDHistoWorkspace</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id9">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id10">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Take a MDEventWorkspace and bin into into a dense, multi-dimensional histogram workspace (MDHistoWorkspace).</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="SliceMDHisto-v1.html#algm-slicemdhisto"><span class="std std-ref">SliceMDHisto</span></a>, <a class="reference internal" href="ProjectMD-v1.html#algm-projectmd"><span class="std std-ref">ProjectMD</span></a>, <a class="reference internal" href="CutMD-v1.html#algm-cutmd"><span class="std std-ref">CutMD</span></a>, <a class="reference internal" href="SliceMD-v1.html#algm-slicemd"><span class="std std-ref">SliceMD</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input MDWorkspace.</p></td>
</tr>
<tr class="row-odd"><td><p>AxisAligned</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Perform binning aligned with the axes of the input MDEventWorkspace?</p></td>
</tr>
<tr class="row-even"><td><p>AlignedDim0</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 0th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>AlignedDim1</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 1th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>AlignedDim2</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 2th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>AlignedDim3</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 3th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>AlignedDim4</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 4th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>AlignedDim5</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Binning parameters for the 5th dimension. Enter it as a comma-separated list of values with the format: ‘name,minimum,maximum,number_of_bins’. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>BasisVector0</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 0th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>BasisVector1</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 1th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>BasisVector2</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 2th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>BasisVector3</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 3th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>BasisVector4</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 4th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-odd"><td><p>BasisVector5</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Description of the basis vector of the 5th output dimension.Format: ‘name, units, x,y,z,..’.   name : string for the name of the output dimension.   units : string for the units of the output dimension.   x,y,z,…: vector definining the basis in the input dimensions space. Leave blank for NONE.</p></td>
</tr>
<tr class="row-even"><td><p>Translation</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Coordinates in the INPUT workspace that corresponds to (0,0,0) in the OUTPUT workspace. Enter as a comma-separated string. Default: 0 in all dimensions (no translation).</p></td>
</tr>
<tr class="row-odd"><td><p>OutputExtents</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>The minimum, maximum edges of space of each dimension of the OUTPUT workspace, as a comma-separated list</p></td>
</tr>
<tr class="row-even"><td><p>OutputBins</p></td>
<td><p>Input</p></td>
<td><p>int list</p></td>
<td></td>
<td><p>The number of bins for each dimension of the OUTPUT workspace.</p></td>
</tr>
<tr class="row-odd"><td><p>NormalizeBasisVectors</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Normalize the given basis vectors to unity.  If true, then a distance of 1 in the INPUT dimensions = 1 in the OUTPUT dimensions. If false, then a distance of norm(basis_vector) in the INPUT dimension = 1 in the OUTPUT dimensions.</p></td>
</tr>
<tr class="row-even"><td><p>ForceOrthogonal</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Force the input basis vectors to form an orthogonal coordinate system. Only works in 3 dimension!</p></td>
</tr>
<tr class="row-odd"><td><p>ImplicitFunctionXML</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>XML string describing the implicit function determining which bins to use.</p></td>
</tr>
<tr class="row-even"><td><p>IterateEvents</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Alternative binning method where you iterate through every event, placing them in the proper bin. This may be faster for workspaces with few events and lots of output bins.</p></td>
</tr>
<tr class="row-odd"><td><p>Parallel</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Temporary parameter: true to run in parallel. This is ignored for file-backed workspaces, where running in parallel makes things slower due to disk thrashing.</p></td>
</tr>
<tr class="row-even"><td><p>TemporaryDataWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td></td>
<td><p>An input MDHistoWorkspace used to accumulate results from multiple MDEventWorkspaces. If unspecified a blank MDHistoWorkspace will be created.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>A name for the output MDHistoWorkspace.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm performs dense binning of the events in multiple
dimensions of an input <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDWorkspace</span></a> and
places them into a dense <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a> with 1-4 dimensions.</p>
<p>The input <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDWorkspace</span></a> may have more dimensions than the number of
output dimensions. The names of the dimensions in the DimX, etc.
parameters are used to find the corresponding dimensions that will be
created in the output.</p>
<p>An ImplicitFunction can be defined using the ImplicitFunctionXML
parameter; any points NOT belonging inside of the ImplicitFunction will
be set as NaN (not-a-number).</p>
<section id="axis-aligned-binning">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Axis-Aligned Binning</a><a class="headerlink" href="#axis-aligned-binning" title="Permalink to this heading">¶</a></h3>
<p>This is binning where the output axes are aligned with the original
workspace. Specify each of the AlignedDim0, etc. parameters with these
values, separated by commas:</p>
<ul class="simple">
<li><p>First, the name of the dimension in the original workspace</p></li>
<li><p>Next, the start and end position along that dimension</p></li>
<li><p>Finally, the number of bins to use in that dimensions.</p></li>
</ul>
<p>If you specify fewer output dimensions, then events in the remaining
dimensions will be integrated along all space. If you wish to integrate
only within a range, then specify the start and end points, with only 1
bin.</p>
</section>
<section id="non-axis-aligned-binning">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Non-Axis Aligned Binning</a><a class="headerlink" href="#non-axis-aligned-binning" title="Permalink to this heading">¶</a></h3>
<p>This allows rebinning to a new arbitrary space, with rotations,
translations, or skewing. This is given by a set of basis vectors and
other parameters</p>
<p>The <strong>BasisVector0…</strong> parameters allow you to specify the basis
vectors relating the input coordinates to the output coordinates. They
are string with these parameters, separated by commas: ‘name, units,
x,y,z,..,’:</p>
<ul class="simple">
<li><p>Name: of the new dimension</p></li>
<li><p>Units: string giving the units</p></li>
<li><p>x, y, z, etc.: a vector, matching the number of dimensions, giving
the direction of the basis vector</p></li>
</ul>
<p>The <strong>Translation</strong> parameter defines the translation between the
spaces. The coordinates are given in the input space dimensions, and
they correspond to 0,0,0 in the output space.</p>
<p>The <strong>OutputExtents</strong> parameter specifies the min/max coordinates <em>in
the output coordinate</em> space. For example, if you the output X to range
from -5 to 5, and output Y to go from 0 to 10, you would have: “-5,5,
0,10”.</p>
<p>The <strong>OutputBins</strong> parameter specifies how many bins to use in the
output workspace for each dimension. For example, “10,20,30” will make
10 bins in X, 20 bins in Y and 30 bins in Z.</p>
<p>If the <strong>NormalizeBasisVectors</strong> parameter is <strong>True</strong>, then the
distances in the <em>input</em> space are the same as in the <em>output</em> space (no
scaling).</p>
<ul class="simple">
<li><p>For example, if BasisVector0=(1,1), a point at (1,1) transforms to
<span class="math notranslate nohighlight">\(x=\sqrt{2}\)</span>, which is the same as the distance in the input
dimension.</p></li>
</ul>
<p>If the <strong>NormalizeBasisVectors</strong> parameter is <strong>False</strong>, then the
algorithm will take into account the <em>length</em> of each basis vector.</p>
<ul class="simple">
<li><p>For example, if BasisVector0=(1,1), a point at (1,1) transforms to
<span class="math notranslate nohighlight">\(x=1\)</span>. The distance was scaled by <span class="math notranslate nohighlight">\(1/\sqrt{2}\)</span></p></li>
</ul>
<p>Finally, the <strong>ForceOrthogonal</strong> parameter will modify your basis
vectors if needed to make them orthogonal to each other. Only works in 3
dimensions!</p>
</section>
<section id="binning-a-mdhistoworkspace">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Binning a MDHistoWorkspace</a><a class="headerlink" href="#binning-a-mdhistoworkspace" title="Permalink to this heading">¶</a></h3>
<p>It is possible to rebin a <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a>. Each
<a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a> holds a reference to the
<a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDWorkspace</span></a> that created it, as well as the
coordinate transformation that was used. In this case, the rebinning is
actually performed on the original <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDWorkspace</span></a>, after suitably
transforming the basis vectors.</p>
<p>Only the non-axis aligned binning method can be performed on a
MDHistoWorkspace! Of course, your basis vectors can be aligned with the
dimensions, which is equivalent.</p>
<p>For more details on the coordinate transformations applied in this case,
please see <a class="reference internal" href="../techniques/BinMDCoordinateTransformations.html#binmdcoordinatetransformations"><span class="std std-ref">BinMD Coordinate Transformations</span></a>.</p>
<figure class="align-default">
<img alt="BinMD_Coordinate_Transforms_withLine.png" src="../_images/BinMD_Coordinate_Transforms_withLine.png" />
</figure>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p><strong>Axis Aligned Example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">mdws</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-10,10,-10,10,-10,10&#39;</span><span class="p">,</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A,B,C&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U,U,U&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;500000,0,0,0,3&#39;</span><span class="p">)</span>
<span class="n">binned_ws</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;A,0,10,100&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;B,-10,10,100&#39;</span><span class="p">,</span> <span class="n">AlignedDim2</span><span class="o">=</span><span class="s1">&#39;C,-10,10,100&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of events = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">binned_ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Number of events = 250334
</pre></div>
</div>
<p>The output looks like the following in the <a class="reference internal" href="../workbench/sliceviewer.html#sliceviewer"><span class="std std-ref">Sliceviewer</span></a>:</p>
<img alt="The sliceveiwer with the axis aligned cut" src="../_images/BinMD_AxisAligned.png" />
<p><strong>Non Axis Aligned Example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="n">mdws</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-10,10,-10,10,-10,10&#39;</span><span class="p">,</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A,B,C&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U,U,U&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;100000,-5,-5,0,1&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;100000,0,0,0,1&#39;</span><span class="p">)</span>
<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;100000,5,5,0,1&#39;</span><span class="p">)</span>
<span class="n">binned_ws</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">AxisAligned</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">BasisVector0</span><span class="o">=</span><span class="s1">&#39;a,unit,1,1,0&#39;</span><span class="p">,</span><span class="n">BasisVector1</span><span class="o">=</span><span class="s1">&#39;b,unit,-1,1,0&#39;</span><span class="p">,</span><span class="n">BasisVector2</span><span class="o">=</span><span class="s1">&#39;c,unit,0,0,1&#39;</span><span class="p">,</span><span class="n">NormalizeBasisVectors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Translation</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">OutputExtents</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="mi">20</span><span class="o">*</span><span class="mi">20</span><span class="p">),</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">OutputBins</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of events = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">binned_ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Number of events = 300000
</pre></div>
</div>
<p>The output looks like the following in the <a class="reference internal" href="../workbench/sliceviewer.html#sliceviewer"><span class="std std-ref">Sliceviewer</span></a>:</p>
<img alt="The sliceveiwer with the non axis aligned cut" src="../_images/BinMD_NonAxisAligned.png" />
<p><strong>Accumulation Example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">binned_ws</span><span class="o">=</span><span class="kc">None</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">mdws</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-10,10,-10,10&#39;</span><span class="p">,</span> <span class="n">Names</span><span class="o">=</span><span class="s1">&#39;A,B&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;U,U&#39;</span><span class="p">)</span>
    <span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="s1">&#39;500000,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,0,3&#39;</span><span class="p">)</span>
    <span class="n">binned_ws</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">mdws</span><span class="p">,</span> <span class="n">AlignedDim0</span><span class="o">=</span><span class="s1">&#39;A,-10,10,100&#39;</span><span class="p">,</span> <span class="n">AlignedDim1</span><span class="o">=</span><span class="s1">&#39;B,-10,10,100&#39;</span><span class="p">,</span> <span class="n">TemporaryDataWorkspace</span><span class="o">=</span><span class="n">binned_ws</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of events = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">binned_ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Number of events = 1500000
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/Slicing.html">MDAlgorithms\Slicing</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/MDAlgorithms/inc/MantidMDAlgorithms/BinMD.h">BinMD.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/MDAlgorithms/src/BinMD.cpp">BinMD.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Bin2DPowderDiffraction-v1.html" title="Previous Chapter: Bin2DPowderDiffraction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Bin2DPowderDi...</span>
    </a>
  </li>
  <li>
    <a href="BinWidthAtX-v1.html" title="Next Chapter: BinWidthAtX v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">BinWidthAtX v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>