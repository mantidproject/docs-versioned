<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>MaskAngle v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MaskBTP v1" href="MaskBTP-v1.html" />
    <link rel="prev" title="MagnetismReflectometryReduction v1" href="MagnetismReflectometryReduction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">MaskAngle v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="maskangle-v1">
<span id="algm-maskangle"></span><span id="algm-maskangle-v1"></span><h1>MaskAngle v1<a class="headerlink" href="#maskangle-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Algorithm to mask detectors with scattering angles in a given interval (in degrees).</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="MaskDetectors-v1.html#algm-maskdetectors"><span class="std std-ref">MaskDetectors</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input workspace</p></td>
</tr>
<tr class="row-odd"><td><p>MinAngle</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Angles above MinAngle are going to be masked</p></td>
</tr>
<tr class="row-even"><td><p>MaxAngle</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>180</p></td>
<td><p>Angles below MaxAngle are going to be masked</p></td>
</tr>
<tr class="row-odd"><td><p>Angle</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>TwoTheta</p></td>
<td><p>Which angle to use. Allowed values: [‘TwoTheta’, ‘Phi’, ‘InPlane’]</p></td>
</tr>
<tr class="row-even"><td><p>MaskedDetectors</p></td>
<td><p>Output</p></td>
<td><p>long list</p></td>
<td></td>
<td><p>List of detector masked, with scattering angles between MinAngle and MaxAngle</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Algorithm to mask detectors with scattering angles in a given interval
(in degrees) By default MinAngle=0, MaxAngle=180, so if no keywords are
set, all detectors are going to be masked Returns a list of detectors
that were masked</p>
<p>When masking the phi angle the absolute value of phi is used.</p>
<p>The three angle options are subtly different:
* <code class="docutils literal notranslate"><span class="pre">TwoTheta</span></code> is the detector’s <span class="math notranslate nohighlight">\(2 \theta\)</span> value as calcualted from the downstream beam. This is the angle from the pole and not constrained to be in-plane.
* <code class="docutils literal notranslate"><span class="pre">Phi</span></code> is the detector’s angle with respect to the positive z-axis not constrained to be in-plane. For many geometries this will be the same as the <code class="docutils literal notranslate"><span class="pre">TwoTheta</span></code> option.
* <code class="docutils literal notranslate"><span class="pre">InPlane</span></code> is the detector’s angle with respect to the positive z-axis constrained within the x-z-plane.</p>
<p>For the <code class="docutils literal notranslate"><span class="pre">TwoTheta</span></code> and <code class="docutils literal notranslate"><span class="pre">Phi</span></code> options, only positive angles are allowed.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path.
In Mantid this is done using <a class="reference internal" href="../interfaces/framework/ManageUserDirectories.html#manageuserdirectories"><span class="std std-ref">Manage User Directories</span></a>.</p>
</div>
<p><strong>Two theta example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Load a workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;CNCS_7860&quot;</span><span class="p">)</span>

<span class="c1">#Do the masking for direct beam</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">MaskAngle</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MinAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">MaxAngle</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The algorithm has masked </span><span class="si">{}</span><span class="s2"> detectors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

<span class="c1">#to test check a couple of detectors</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is the minimum element in the mask list (detector </span><span class="si">{}</span><span class="s2">) masked?  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is the maximum element in the mask list (detector </span><span class="si">{}</span><span class="s2">) masked?  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is a detector outside the list masked (for example detector 100)?  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()</span>  <span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The algorithm has masked 1516 detectors
Is the minimum element in the mask list (detector 35126) masked?  True
Is the maximum element in the mask list (detector 38601) masked?  True
Is a detector outside the list masked (for example detector 100)?  False
</pre></div>
</div>
<p>The instrument view would look like:</p>
<figure class="align-default">
<img alt="MaskAngle.png" src="../_images/MaskAngle.png" />
</figure>
<p><strong>Phi example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Load a workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;CNCS_7860&quot;</span><span class="p">)</span>

<span class="c1">#Do the masking for direct beam</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">MaskAngle</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MinAngle</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">MaxAngle</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">Angle</span><span class="o">=</span><span class="s1">&#39;Phi&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The algorithm has masked </span><span class="si">{}</span><span class="s2"> detectors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

<span class="c1">#to test check a couple of detectors</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is the minimum element in the mask list (detector </span><span class="si">{}</span><span class="s2">) masked?  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is the maximum element in the mask list (detector </span><span class="si">{}</span><span class="s2">) masked?  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is a detector outside the list masked (for example detector 100)?  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()</span>  <span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The algorithm has masked 6348 detectors
Is the minimum element in the mask list (detector 29568) masked?  True
Is the maximum element in the mask list (detector 44287) masked?  True
Is a detector outside the list masked (for example detector 100)?  False
</pre></div>
</div>
<p>The instrument view would look like:</p>
<figure class="align-default">
<img alt="MaskAngle_phi.png" src="../_images/MaskAngle_phi.png" />
</figure>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Transforms/Masking.html">Transforms\Masking</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/PythonInterface/plugins/algorithms/MaskAngle.py">MaskAngle.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="MagnetismReflectometryReduction-v1.html" title="Previous Chapter: MagnetismReflectometryReduction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MagnetismRefl...</span>
    </a>
  </li>
  <li>
    <a href="MaskBTP-v1.html" title="Next Chapter: MaskBTP v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MaskBTP v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>