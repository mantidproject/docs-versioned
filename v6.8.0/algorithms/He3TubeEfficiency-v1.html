<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>He3TubeEfficiency v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HyspecScharpfCorrection v1" href="HyspecScharpfCorrection-v1.html" />
    <link rel="prev" title="HasUB v1" href="HasUB-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">He3TubeEfficiency v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="he3tubeefficiency-v1">
<span id="algm-he3tubeefficiency"></span><span id="algm-he3tubeefficiency-v1"></span><h1>He3TubeEfficiency v1<a class="headerlink" href="#he3tubeefficiency-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#restrictions-on-input-workspace" id="id6">Restrictions on Input Workspace</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id7">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id8">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>He3 tube efficiency correction.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="DetectorEfficiencyCor-v1.html#algm-detectorefficiencycor"><span class="std std-ref">DetectorEfficiencyCor</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the input workspace</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Name of the output workspace, can be the same as the input</p></td>
</tr>
<tr class="row-even"><td><p>ScaleFactor</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>1</p></td>
<td><p>Constant factor with which to scale the calculateddetector efficiency. Same factor applies to all efficiencies.</p></td>
</tr>
<tr class="row-odd"><td><p>TubePressure</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Provide overriding the default tube pressure. The pressure must be specified in atm.</p></td>
</tr>
<tr class="row-even"><td><p>TubeThickness</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Provide overriding the default tube thickness. The thickness must be specified in metres.</p></td>
</tr>
<tr class="row-odd"><td><p>TubeTemperature</p></td>
<td><p>Input</p></td>
<td><p>dbl list</p></td>
<td></td>
<td><p>Provide overriding the default tube temperature. The temperature must be specified in Kelvin.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>This algorithm corrects the detection efficiency of He3 tubes using an
exponential function and certain detector properties. The correction
scheme is given by the following:</p>
<p><span class="math notranslate nohighlight">\(\epsilon = \frac{A}{1-e^{\frac{-\alpha P (L - 2W) \lambda}{T \sin(\theta)}}}\)</span></p>
<p>where <em>A</em> is a dimensionless scaling factor, <span class="math notranslate nohighlight">\(\alpha\)</span> is a
constant with units <span class="math notranslate nohighlight">\((\text{Kelvin} / (\text{metres} \: \AA\: \text{atm}))\)</span>, <em>P</em> is
pressure in units of <em>atm</em>, <em>L</em> is the tube diameter in units of
metres, <em>W</em> is the tube thickness in units of metres, <em>T</em> is the
temperature in units of Kelvin, <span class="math notranslate nohighlight">\(\sin(\theta)\)</span> is the angle
of the neutron trajectory with respect to the long axis of the He3 tube
and <span class="math notranslate nohighlight">\(\lambda\)</span> is in units of <span class="math notranslate nohighlight">\(\AA\)</span>.</p>
<p>The Optional properties that are of num list type can be used in the
following manner. If no input value is given, the detector parameter is
pulled from the detector itself. If a single value is used as input,
that value is applied to all detectors. If an array of values is used,
that array <em>must</em> be the same size as the number of spectra in the
workspace. If it is not, the spectra indices that do not have values
will be zeroed in the output workspace.</p>
<section id="restrictions-on-input-workspace">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Restrictions on Input Workspace</a><a class="headerlink" href="#restrictions-on-input-workspace" title="Permalink to this heading">¶</a></h3>
<p>The input workspace must be in units of wavelength.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>The correction applies equally well to histogram and event workspaces. An example
for a histogram workspace will be given.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create workspace with correct units</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s1">&#39;Flat background&#39;</span><span class="p">,</span><span class="n">NumBanks</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
                           <span class="n">XUnit</span><span class="o">=</span><span class="s1">&#39;Wavelength&#39;</span><span class="p">,</span><span class="n">XMax</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="n">BinWidth</span><span class="o">=</span><span class="s1">&#39;0.01&#39;</span><span class="p">)</span>

<span class="c1"># workspace does not have correct tube parameters, so we need to provide some</span>
<span class="c1"># parameters taken from the ARCS instrument at the SNS</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">He3TubeEfficiency</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">TubePressure</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="n">TubeThickness</span><span class="o">=</span><span class="s1">&#39;0.0008&#39;</span><span class="p">,</span><span class="n">TubeTemperature</span><span class="o">=</span><span class="s1">&#39;290&#39;</span><span class="p">)</span>

<span class="c1"># show the before and after for the first detector for the first 5 bins</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Original counts: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Corrected counts: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws1</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Original counts: [ 1.  1.  1.  1.  1.]
Corrected counts: [ 417.07353051  139.35837696   83.81566631   60.01187609   46.787726  ]
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/CorrectionFunctions/EfficiencyCorrections.html">CorrectionFunctions\EfficiencyCorrections</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/Algorithms/inc/MantidAlgorithms/He3TubeEfficiency.h">He3TubeEfficiency.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/Algorithms/src/He3TubeEfficiency.cpp">He3TubeEfficiency.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="HasUB-v1.html" title="Previous Chapter: HasUB v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; HasUB v1</span>
    </a>
  </li>
  <li>
    <a href="HyspecScharpfCorrection-v1.html" title="Next Chapter: HyspecScharpfCorrection v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">HyspecScharpf... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>