<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>SaveZODS v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Scale v1" href="Scale-v1.html" />
    <link rel="prev" title="SaveYDA v1" href="SaveYDA-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SaveZODS v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="savezods-v1">
<span id="algm-savezods"></span><span id="algm-savezods-v1"></span><h1>SaveZODS v1<a class="headerlink" href="#savezods-v1" title="Permalink to this heading">¶</a></h1>
<figure class="align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ImageNotFound.png"><img alt="../_images/ImageNotFound.png" class="screenshot" src="../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id2">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id3">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id4">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id5">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#summary-of-data-format" id="id6">Summary of data format</a></p></li>
<li><p><a class="reference internal" href="#description-of-data-fields" id="id7">Description of data fields</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id8">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id9">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<p>Save a MDHistoWorkspace in HKL space to a HDF5 format for use with the ZODS analysis software.</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="SaveMD-v2.html#algm-savemd"><span class="std std-ref">SaveMD</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p>IMDHistoWorkspace</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>An input MDHistoWorkspace in HKL space.</p></td>
</tr>
<tr class="row-odd"><td><p>Filename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The name of the HDF5 file to write, as a full or relative path. Allowed extensions: [‘.h5’]</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p>Saves a HDF5 file to the ZODS (Zurich Oak Ridge Disorder Simulation
program) format. This format consists of a slice of a
<a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><span class="std std-ref">MDHistoWorkspace</span></a> and some information about its
location.</p>
<p><strong>You must be in HKL space for the output of this algorithm to make
sense!</strong></p>
<p>From <a class="reference external" href="http://www.crystal.mat.ethz.ch/research/DiffuseXrayScattering.html">http://www.crystal.mat.ethz.ch/research/DiffuseXrayScattering.html</a>:</p>
<ul class="simple">
<li><p>In the frame of an international cooperation between our group, the
University of Zurich and Oak Ridge National Laboratories, we are
further developing Monte Carlo simulation techniques for modeling
disordered crystal structures. A major goal of this project is to
develop the Monte Carlo simulation computer program ZODS (Zurich Oak
Ridge Disorder Simulation program), which is designed to be not only
user friendly, but also fast and flexible. Special focus is on the
efficient use of modern super-computer architectures and of
multi-core desktop computers to take full advantage of current trends
in computing technologies.</p></li>
</ul>
<section id="summary-of-data-format">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Summary of data format</a><a class="headerlink" href="#summary-of-data-format" title="Permalink to this heading">¶</a></h3>
<p>In general it contains collection of grids with intensities and each
grid is described by specifying origin, size of grid (in each direction)
and grid base vectors (a1,a2,a3) so a point at node (i,j,k) of grid has
coordinates r = origin+i*a1+j*a2+k*a3.</p>
<p>Please contact Michal Chodkiewicz (<a class="reference external" href="mailto:michal&#46;chodkiewicz&#37;&#52;&#48;gmail&#46;com">michal<span>&#46;</span>chodkiewicz<span>&#64;</span>gmail<span>&#46;</span>com</a>); Vickie
Lynch (<a class="reference external" href="mailto:lynchve&#37;&#52;&#48;ornl&#46;gov">lynchve<span>&#64;</span>ornl<span>&#46;</span>gov</a>) for more details.</p>
</section>
<section id="description-of-data-fields">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Description of data fields</a><a class="headerlink" href="#description-of-data-fields" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>The CoordinateSystem data object has the attribute “isLocal”.</p>
<ul>
<li><p>If <strong>isLocal</strong>=1, then we are in HKL space:</p>
<ul>
<li><p>The <strong>direction_1</strong> vector (0.04,0,0) represents a step of
0.04 in the (1,0,0) direction (a*) in reciprocal space.</p></li>
<li><p><strong>This is currently the only mode in which SaveZODS saves</strong>.</p></li>
</ul>
</li>
<li><p>If <strong>isLocal</strong>=0, then we are in Q-space.</p>
<ul>
<li><p>The <strong>direction_1</strong> vector (0.04,0,0) represents a step of
0.04 Angstrom^(-1) in X direction of Cartesian coordinate
system (with X colinear with a and Z with c*)</p></li>
<li><p>In this case CoordinateSystem has additional attribute
UnitCell, which is a vector with 6 components
(a,b,c,alpha,beta,gamma) a,b,c in angstroms and angles in
degrees.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>The <strong>origin</strong> field gives the origin of the center of the (0,0,0)
cell; in HKL space for our case of isLocal=1.</p></li>
<li><p>The <strong>size</strong> field gives the number of bins in each direction.</p></li>
<li><p>The <strong>data</strong> field contains the actual intensity at each bin.</p>
<ul>
<li><p>The grid of points (r = origin+i*a1+j*a2+k*a3) specifies the
centers of histogram, not the corners.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>This algorithm can be run on a pre-existing <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a>
or a newly created one. The example below will be done with newly created one
using <a class="reference internal" href="CreateMDWorkspace-v1.html#algm-createmdworkspace"><span class="std std-ref">CreateMDWorkspace</span></a>.</p>
<p><strong>SaveZODS HKL MDHisto Example</strong></p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">SignalInput</span><span class="o">=</span><span class="s1">&#39;1,2,3,4,5,6,7,8&#39;</span><span class="p">,</span> <span class="n">ErrorInput</span><span class="o">=</span><span class="s1">&#39;1,1,1,1,1,1,1,1&#39;</span><span class="p">,</span>
    <span class="n">Dimensionality</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="s1">&#39;-2, 2, -2, 2, -2, 2&#39;</span><span class="p">,</span> <span class="n">Names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;[H,0,0]&#39;</span><span class="p">,</span><span class="s1">&#39;[0,K,0]&#39;</span><span class="p">,</span><span class="s1">&#39;[0,0,L]&#39;</span><span class="p">],</span>
    <span class="n">NumberOfBins</span><span class="o">=</span><span class="s1">&#39;2,2,2&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s1">&#39;lattice,lattice,lattice&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">savefile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;defaultsave.directory&quot;</span><span class="p">],</span> <span class="s2">&quot;ZODS.h5&quot;</span><span class="p">)</span>
<span class="n">SaveZODS</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">FileName</span><span class="o">=</span><span class="n">savefile</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File created: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">savefile</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>File created: True
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/DataHandling.html">MDAlgorithms\DataHandling</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Permalink to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/MDAlgorithms/inc/MantidMDAlgorithms/SaveZODS.h">SaveZODS.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/b75cfaae9218e7d59662138c22a81da96e2235c1/Framework/MDAlgorithms/src/SaveZODS.cpp">SaveZODS.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SaveYDA-v1.html" title="Previous Chapter: SaveYDA v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SaveYDA v1</span>
    </a>
  </li>
  <li>
    <a href="Scale-v1.html" title="Next Chapter: Scale v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Scale v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>