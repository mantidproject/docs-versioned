<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ISIS Reflectometry Interface</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script src="../../_static/documentation_options.js?v=5b08953a"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Filter Events Interface" href="../utility/Filter%20Events.html" />
    <link rel="prev" title="Transformation Tab" href="../muon/muon_transform_tab.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Interfaces</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ISIS Reflectometry Interface</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="isis-reflectometry-interface">
<span id="interface-isis-refl"></span><h1>ISIS Reflectometry Interface<a class="headerlink" href="#isis-reflectometry-interface" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#purpose" id="id18">Purpose</a></p></li>
<li><p><a class="reference internal" href="#example-workflow" id="id19">Example Workflow</a></p>
<ul>
<li><p><a class="reference internal" href="#sample-data" id="id20">Sample Data</a></p></li>
<li><p><a class="reference internal" href="#processing-runs" id="id21">Processing Runs</a></p></li>
<li><p><a class="reference internal" href="#editing-settings" id="id22">Editing Settings</a></p></li>
<li><p><a class="reference internal" href="#viewing-results" id="id23">Viewing Results</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#layout" id="id24">Layout</a></p>
<ul>
<li><p><a class="reference internal" href="#batches" id="id25">Batches</a></p></li>
<li><p><a class="reference internal" href="#menu-bar" id="id26">Menu Bar</a></p>
<ul>
<li><p><a class="reference internal" href="#batch-menu" id="id27">Batch Menu</a></p></li>
<li><p><a class="reference internal" href="#tools-menu" id="id28">Tools Menu</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#runs-tab" id="id29">Runs Tab</a></p>
<ul>
<li><p><a class="reference internal" href="#processing-table" id="id30">Processing Table</a></p>
<ul>
<li><p><a class="reference internal" href="#columns" id="id31">Columns</a></p></li>
<li><p><a class="reference internal" href="#toolbar" id="id32">Toolbar</a></p></li>
<li><p><a class="reference internal" href="#keyboard-shortcuts" id="id33">Keyboard Shortcuts</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#search-interface" id="id34">Search Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#searching-by-investigation-id" id="id35">Searching by Investigation ID</a></p></li>
<li><p><a class="reference internal" href="#transferring-runs-to-the-processing-table" id="id36">Transferring runs to the processing table</a></p></li>
<li><p><a class="reference internal" href="#invalid-runs" id="id37">Invalid runs</a></p></li>
<li><p><a class="reference internal" href="#excluding-and-annotating-runs" id="id38">Excluding and annotating runs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#autoprocessing" id="id39">Autoprocessing</a></p>
<ul>
<li><p><a class="reference internal" href="#starting-autoprocessing" id="id40">Starting autoprocessing</a></p></li>
<li><p><a class="reference internal" href="#invalid-excluded-runs" id="id41">Invalid/excluded runs</a></p></li>
<li><p><a class="reference internal" href="#during-autoprocessing" id="id42">During autoprocessing</a></p></li>
<li><p><a class="reference internal" href="#editing-the-processing-table" id="id43">Editing the processing table</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#live-data-monitoring" id="id44">Live Data Monitoring</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#event-handling-tab" id="id45">Event Handling Tab</a></p></li>
<li><p><a class="reference internal" href="#experiment-and-instrument-settings-tabs" id="id46">Experiment and Instrument Settings Tabs</a></p>
<ul>
<li><p><a class="reference internal" href="#sample-and-angle-lookup-table" id="id47">Sample and angle lookup table</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reduction-preview-tab" id="id48">Reduction Preview Tab</a></p></li>
<li><p><a class="reference internal" href="#save-ascii-tab" id="id49">Save ASCII Tab</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#troubleshooting" id="id50">Troubleshooting</a></p>
<ul>
<li><p><a class="reference internal" href="#when-i-try-to-process-i-get-an-error-invalid-value-for-property-filename-list-of-str-lists" id="id51">When I try to process I get an error: “Invalid value for property Filename (list of str lists) …”</a></p></li>
<li><p><a class="reference internal" href="#when-i-try-to-process-i-get-an-error-error-encountered-while-stitching-group" id="id52">When I try to process I get an error: “Error encountered while stitching group …”</a></p></li>
<li><p><a class="reference internal" href="#when-i-try-to-process-i-get-an-error-invalid-key-value-pair" id="id53">When I try to process I get an error: “Invalid key value pair, ‘…’”</a></p></li>
<li><p><a class="reference internal" href="#when-i-try-to-process-i-get-an-error-invalid-value-for-property-can-not-convert-false-true-to-boolean" id="id54">When I try to process I get an error: “Invalid value for property … Can not convert “False/True” to boolean”</a></p></li>
<li><p><a class="reference internal" href="#my-ivsq-workspaces-are-not-being-stitched-correctly" id="id55">My IvsQ workspaces are not being stitched correctly</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="purpose">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Purpose</a><a class="headerlink" href="#purpose" title="Link to this heading">¶</a></h2>
<p>This user interface allows for batch processing of data reduction for
reflectometry data. The actual data reduction is performed with
<a class="reference internal" href="../../algorithms/ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a>.
Wherever possible, this interface attempts to use reasonable defaults,
either loaded from the instruments’ parameter files, or calculated from
the provided data, to minimise the amount of user input required.
This interface also strives to be transparent, making it clear how your
data is being processed, and easy to adjust any of the options used.</p>
<p>Integration with data archives is also provided, allowing for data to
be located and prepared for reduction automatically.</p>
<p>Information on how to resolve common problems can be found in the
<a class="reference internal" href="#troubleshooting">Troubleshooting</a> section of this document.</p>
</section>
<section id="example-workflow">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Example Workflow</a><a class="headerlink" href="#example-workflow" title="Link to this heading">¶</a></h2>
<section id="sample-data">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Sample Data</a><a class="headerlink" href="#sample-data" title="Link to this heading">¶</a></h3>
<p>To follow this example you will need the ISIS reflectometry example materials:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INTER00013460.nxs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INTER00013462.nxs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INTER00013463.nxs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INTER00013464.nxs</span></code></p></li>
</ul>
<p>These can be downloaded as part of the <a class="reference external" href="http://download.mantidproject.org/">ISIS example data</a>.</p>
<p>Once they are downloaded, place the nxs files in one of Mantid’s user directories.
To see a list of directories, click on <strong>File -&gt; Manage User Directories</strong>.</p>
</section>
<section id="processing-runs">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Processing Runs</a><a class="headerlink" href="#processing-runs" title="Link to this heading">¶</a></h3>
<p>Open <code class="docutils literal notranslate"><span class="pre">MantidWorkbench</span></code> and open the ISIS
Reflectometry interface from the menu: <strong>Interfaces -&gt; Reflectometry -&gt; ISIS
Reflectometry</strong></p>
<p>First, we want to enter the runs that we will process into the table. Enter the
values as shown in the figure below. Just the run number and the angle is the
minimum requirement.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the <a class="reference internal" href="#toolbar">Toolbar</a> or <a class="reference internal" href="#keyboard-shortcuts">Keyboard Shortcuts</a> to edit the table,
e.g.  <code class="docutils literal notranslate"><span class="pre">Tab</span></code> between cells, <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to add a new row, <code class="docutils literal notranslate"><span class="pre">Ctrl-I</span></code> to insert
a child row.</p>
</div>
<figure class="align-center" id="id1">
<a class="screenshot reference internal image-reference" href="../../_images/workflow_runs.png"><img alt="Run numbers and angles entered into the runs table" class="screenshot" src="../../_images/workflow_runs.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Run numbers and angles entered into the runs table</em></span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Let’s process the first group, which consists of the first two rows of the
table (13460 and 13462). Select the group we want to process, and then click on
<img alt="process" src="../../_images/sigma.png" /> <strong>Process</strong>.</p>
<figure class="align-center" id="id2">
<a class="screenshot reference internal image-reference" href="../../_images/workflow_processed.png"><img alt="The runs table after the first group has been processed" class="screenshot" src="../../_images/workflow_processed.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The runs table after the first group has been processed with default settings</em></span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The rows within the group should turn yellow (probably very briefly) to
indicate that they are processing, and then green when they have
completed. Once both rows have been processed, the group will be post-processed
and it will also turn green. The <code class="docutils literal notranslate"><span class="pre">Q</span> <span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">Q</span> <span class="pre">max</span></code> and <code class="docutils literal notranslate"><span class="pre">dQ/Q</span></code> cells will
also be updated with the values that were calculated in the reduction.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If a row or group turns blue, it has an error. Hover over the row to
see the error message and consult the <a class="reference internal" href="#troubleshooting">Troubleshooting</a> section of this
document for guidance on fixing it.</p>
</div>
</section>
<section id="editing-settings">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Editing Settings</a><a class="headerlink" href="#editing-settings" title="Link to this heading">¶</a></h3>
<p>The above is a minimal reduction. We also want to use some transmission runs to
correct this data. We could enter these into the runs table but instead we will
use the <strong>Experiment Settings</strong> tab to set them as defaults for all runs.  We
will also set the limits and resolution for the final rebinning in <code class="docutils literal notranslate"><span class="pre">Q</span></code>, and
output the debug workspaces.</p>
<p>Enter the following information on the table on the <strong>Experiment Settings</strong>
tab, and tick the <code class="docutils literal notranslate"><span class="pre">Debug</span></code> option. Then re-process the group.</p>
<figure class="align-center" id="id3">
<a class="screenshot reference internal image-reference" href="../../_images/workflow_settings.png"><img alt="Editing experiment settings" class="screenshot" src="../../_images/workflow_settings.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Editing experiment settings</em></span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="viewing-results">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Viewing Results</a><a class="headerlink" href="#viewing-results" title="Link to this heading">¶</a></h3>
<p>You should now have several workspaces in the ADS. Amongst them should be:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Workspace</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TOF_13460</p></td>
<td><p>This is the data before processing. The X axis is time of flight in
<span class="math notranslate nohighlight">\(\mu s\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p>IvsQ_13460</p></td>
<td><p>This is the output workspace of
<a class="reference internal" href="../../algorithms/ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a>.
The X axis is momentum transfer in Å<sup>-1</sup>.</p></td>
</tr>
<tr class="row-even"><td><p>IvsQ_13460_13462</p></td>
<td><p>This workspace is the result of stitching <code class="docutils literal notranslate"><span class="pre">IvsQ_13460</span></code> and <code class="docutils literal notranslate"><span class="pre">IvsQ_13462</span></code>
together using <a class="reference internal" href="../../algorithms/Stitch1DMany-v1.html#algm-stitch1dmany"><span class="std std-ref">Stitch1DMany</span></a>. The X axis is
momentum transfer in Å<sup>-1</sup>.</p></td>
</tr>
<tr class="row-odd"><td><p>IvsLam_13460</p></td>
<td><p>This is the wavelength output workspace of
<a class="reference internal" href="../../algorithms/ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a>.
The X axis is wavelength in Å. It is only output if the <code class="docutils literal notranslate"><span class="pre">Debug</span></code> option is
ticked.</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_13463_13464</p></td>
<td><p>This is a transmission run, created by running
<a class="reference internal" href="../../algorithms/CreateTransmissionWorkspace-v2.html#algm-createtransmissionworkspace"><span class="std std-ref">CreateTransmissionWorkspace</span></a>
on <code class="docutils literal notranslate"><span class="pre">TOF_13463</span></code> and <code class="docutils literal notranslate"><span class="pre">TOF_13464</span></code>. The X axis is wavelength in Å.</p></td>
</tr>
</tbody>
</table>
<p>For convenience, the interface provides tools to easily plot the main
outputs. The plot-rows <img alt="plotrow" src="../../_images/chart-line.png" /> button plots the reduced runs
(i.e. <code class="docutils literal notranslate"><span class="pre">IvsQ_binned_13460</span></code> and <code class="docutils literal notranslate"><span class="pre">IvsQ_binned_13462</span></code>) for the selected row(s),
and/or all rows in the selected group(s). The plot-groups <img alt="plotgroup" src="../../_images/chart-areaspline.png" /> button
plots the stitched output for the selected group(s)
(i.e. <code class="docutils literal notranslate"><span class="pre">IvsQ_13460_13462</span></code>).</p>
<figure class="align-center" id="id4">
<a class="screenshot reference internal image-reference" href="../../_images/workflow_plot.png"><img alt="Plotting the results of the reduction" class="screenshot" src="../../_images/workflow_plot.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Plotting the results of the reduction</em></span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="layout">
<h2><a class="toc-backref" href="#id24" role="doc-backlink">Layout</a><a class="headerlink" href="#layout" title="Link to this heading">¶</a></h2>
<section id="batches">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Batches</a><a class="headerlink" href="#batches" title="Link to this heading">¶</a></h3>
<p>The main window contains one or more “Batches”, which are shown as vertical
tabs on the left. Each Batch contains a group of settings tabs (Runs, Event
Handling, Experiment, Instrument and Save ASCII). Together, these provide all
of the settings for a particular reduction.</p>
<figure class="align-center" id="id5">
<a class="screenshot reference internal image-reference" href="../../_images/batches.png"><img alt="Batch tabs on the ISIS Reflectometry interface" class="screenshot" src="../../_images/batches.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Batch tabs on the left contain all of the reduction settings for a particular batch of runs</em></span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Using multiple batches is useful when users need to apply different options to
runs measured during the same experiment. For instance, if some runs need to be
analyzed with a wavelength range of <code class="docutils literal notranslate"><span class="pre">LambdaMin=1,</span> <span class="pre">LambdaMax=17</span></code> but others
need a wavelength range of <code class="docutils literal notranslate"><span class="pre">LambdaMin=1.5,</span> <span class="pre">LambdaMax=15</span></code>, users may want to
enter the first set of runs in the processing table in one batch and the
second set in the processing table in another batch, and update the settings in
each batch accordingly. The interface will use the settings from the relevant
batch to reduce runs in that batch’s processing table.</p>
</section>
<section id="menu-bar">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Menu Bar</a><a class="headerlink" href="#menu-bar" title="Link to this heading">¶</a></h3>
<section id="batch-menu">
<h4><a class="toc-backref" href="#id27" role="doc-backlink">Batch Menu</a><a class="headerlink" href="#batch-menu" title="Link to this heading">¶</a></h4>
<p>The <strong>Batch</strong> menu contains options for managing the Batch tabs:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Action</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>New
Load
Save</p></td>
<td><p>Add a new Batch tab
Load settings for the current Batch tab from a file
Save settings for the current Batch to a file</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tools-menu">
<h4><a class="toc-backref" href="#id28" role="doc-backlink">Tools Menu</a><a class="headerlink" href="#tools-menu" title="Link to this heading">¶</a></h4>
<p>The <strong>Tools</strong> menu provides access to options and utilities:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Action</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Slit Calculator
Options</p></td>
<td><p>Tool for calculating approximate slit widths
Tool for controlling warnings and rounding precision</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="runs-tab">
<span id="refl-runs"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink">Runs Tab</a><a class="headerlink" href="#runs-tab" title="Link to this heading">¶</a></h3>
<p>This section describes the different elements in the <em>Runs</em> tab.</p>
<figure class="align-center" id="id6">
<a class="screenshot reference internal image-reference" href="../../_images/runs_tab.png"><img alt="The runs tab" class="screenshot" src="../../_images/runs_tab.png" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The runs tab</em></span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="processing-table">
<h4><a class="toc-backref" href="#id30" role="doc-backlink">Processing Table</a><a class="headerlink" href="#processing-table" title="Link to this heading">¶</a></h4>
<p>The processing table is where the bulk of the work takes place. It is used to
specify which runs to process, the properties that should be used to process
them, and how the different runs should be joined together.</p>
<p>Each row represents a single reduction (i.e. execution of
<a class="reference internal" href="../../algorithms/ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a>),
and belongs to a group. Rows that are grouped together will have their output stitched
together using <a class="reference internal" href="../../algorithms/Stitch1DMany-v1.html#algm-stitch1dmany"><span class="std std-ref">Stitch1DMany</span></a>.</p>
<p>Above the processing table is a <a class="reference internal" href="#toolbar">Toolbar</a> containing various actions for
manipulating the processing table, and a filter bar to allow filtering of the
table by group or run name. Various <a class="reference internal" href="#keyboard-shortcuts">Keyboard Shortcuts</a> are available to help
with quickly editing the table.</p>
<p>To process, simply select the rows or groups you want to process and click
<strong>Process</strong> <img alt="process" src="../../_images/sigma.png" />. Alternatively, if nothing is selected, the entire table
will be processed.</p>
<p>Below the table is a progress bar, which shows the current progress of any
processing that is in progress. When processing the entire table, this will
show the percentage of the entire table that is complete. When processing a
selection it will show the percentage of that selection that is complete.</p>
<figure class="align-center" id="id7">
<a class="screenshot reference internal image-reference" href="../../_images/processing_table.png"><img alt="The processing table" class="screenshot" src="../../_images/processing_table.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The processing table</em></span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Rows or groups that are currently processing will be highlighted in yellow, and
those that are successfully complete will be highlighted in green. Groups where
all of the rows within it are complete, but post-processing has not yet completed,
will be highlighted in a paler green. Groups with a single row do not need to be
stitched, so will not be post-processed. If processing fails for any reason, the
row/group will be highlighted in blue and you can hover over it to see a tooltip
displaying the error message.</p>
<p>Editing any settings that may change the outputs will reset the state for all
rows and groups. If any rows are added to or removed from a group, the group’s
state will be reset. Deleting any of the mandatory output workspaces will also
reset the relevant row or group states. Note however that if you rename a
workspace, the interface will track it, so it will remain associated with its
original row or group.</p>
<p>If reduction stops and is then resumed, the interface will re-process any rows
and groups within the current selection that have not been processed, or whose
state has been reset. If you manually select rows/groups that have an error
then they too will be reprocessed. However if you process the entire table
(i.e. click <strong>Process</strong> <img alt="process" src="../../_images/sigma.png" /> when nothing is selected), rows/groups that
have errors will <strong>not</strong> be reprocessed - you can manually select all rows in
the table if you want to reprocess them.</p>
<p><strong>Note</strong>: The interface cannot be closed while runs are being processed. To
close the interface, you must first stop the reduction by clicking on the
<strong>Pause</strong> <img alt="pause" src="../../_images/pause.png" /> button.</p>
<section id="columns">
<h5><a class="toc-backref" href="#id31" role="doc-backlink">Columns</a><a class="headerlink" href="#columns" title="Link to this heading">¶</a></h5>
<p>The processing table contains the following columns:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Column Title</p></th>
<th class="head"><p>Required?</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Run(s)</p></td>
<td><p><strong>Yes</strong></p></td>
<td><p>Contains the sample runs to be processed.
Runs may be given as run numbers or workspace
names. Multiple runs may be added together by
separating them with a <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">1234+1235+1236</span></code></p>
<p>Note that if a workspace name contains <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">,</span></code> you must enter it in
quotes, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;TOF_1234+1235+1236&quot;</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Angle</p></td>
<td><p><strong>Yes</strong></p></td>
<td><p>Contains the angle used during the run, in
degrees. If left blank,
<a class="reference internal" href="../../algorithms/ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a>
will calculate theta using
<a class="reference internal" href="../../algorithms/SpecularReflectionCalculateTheta-v2.html#algm-specularreflectioncalculatetheta"><span class="std std-ref">SpecularReflectionCalculateTheta</span></a>.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">0.7</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>1st Trans Run(s)</p>
<p>2nd Trans Run(s)</p>
</td>
<td><p>No</p></td>
<td><p>Contains the transmission run(s) used to
normalise the sample runs. To specify two
transmission runs, enter them in each input box.
Note that as per the Run(s) column, you can sum multiple
runs for each input by entering multiple values separated by <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">,</span></code>.
If left blank, the sample runs will be
normalised by monitor only.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">1234,1235</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Q min</p></td>
<td><p>No</p></td>
<td><p>Contains the minimum value of Q to be used in
Å<sup>−1</sup>. Data with a value of Q lower
than this will be discarded. If left blank,
this is set to the lowest Q value found. This
is useful for discarding noisy data.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">0.1</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Q max</p></td>
<td><p>No</p></td>
<td><p>Contains the maximum value of Q to be used in
Å<sup>−1</sup>. Data with a value of Q higher
than this will be discarded. If left blank,
this is set to the highest Q value found. This
is useful for discarding noisy data.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">0.9</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>dQ/Q</p></td>
<td><p>No</p></td>
<td><p>Contains the resolution used when rebinning
output workspaces. If left blank, this is
calculated for you using the
NRCalculateSlitResolution algorithm. This value is
negated so that Logarithmic binning can be
applied for the IvsQ workspace.
If you desire linear binning then you
may negate the value in the processing table
and a linear binning will be applied.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">0.9</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Scale</p></td>
<td><p>No</p></td>
<td><p>Contains the factor used to scale output
IvsQ workspaces. The IvsQ workspaces are
scaled by <code class="docutils literal notranslate"><span class="pre">1/i</span></code> where i is the value of
this column.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">1.0</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p>Options</p></td>
<td><p>No</p></td>
<td><p>Contains options that allow you to override
ReflectometryReductionOne’s properties. To
override a property, just use the property’s
name as a key, and the desired value as the
value.
Options are specified in <code class="docutils literal notranslate"><span class="pre">key=value</span></code> pairs,
separated by commas. Values containing commas
must be quoted. Options specified via this
column will prevail over options specified
in the <strong>Settings</strong> tab.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">RegionOfDirectBeam=&quot;0,2&quot;,</span> <span class="pre">Params=&quot;1,2,3&quot;</span></code></p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="toolbar">
<h5><a class="toc-backref" href="#id32" role="doc-backlink">Toolbar</a><a class="headerlink" href="#toolbar" title="Link to this heading">¶</a></h5>
<p>This table details the behaviour of the actions in the tool bar, from left to right.</p>
<figure class="align-center" id="id8">
<img alt="The runs table toolbar" class="screenshot" src="../../_images/toolbar.png" />
<figcaption>
<p><span class="caption-text"><em>The runs table toolbar</em></span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Action</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="process" src="../../_images/sigma.png" /> Process</p></td>
<td><p>Processes the selected runs, or, if no runs are selected,
all of the runs in the table. When a group is selected,
runs belonging to the same group are stitched together.</p></td>
</tr>
<tr class="row-odd"><td><p><img alt="pause" src="../../_images/pause.png" /> Pause</p></td>
<td><p>Pauses processing any selected runs. Processing may be
resumed by clicking on the ‘Process’ button. If the
selection has changed, the new selection will be
processed.</p></td>
</tr>
<tr class="row-even"><td><p><img alt="expandall" src="../../_images/expand-all.png" /> Expand Groups</p></td>
<td><p>Expand all groups so that you can see all child rows.</p></td>
</tr>
<tr class="row-odd"><td><p><img alt="collapseall" src="../../_images/collapse-all.png" /> Collapse Groups</p></td>
<td><p>Collapse all groups to hide all child rows.</p></td>
</tr>
<tr class="row-even"><td><p><img alt="plotrow" src="../../_images/chart-line.png" /> Plot Selected
Rows
Rows</p></td>
<td><p>Creates a plot of the IvsQ workspaces generated by any of
the selected rows (or all child rows of the selected
groups).</p></td>
</tr>
<tr class="row-odd"><td><p><img alt="plotgroup" src="../../_images/chart-areaspline.png" /> Plot Selected
Groups</p></td>
<td><p>Creates a plot of the stitched IvsQ workspaces generated
by any of the selected groups.</p></td>
</tr>
<tr class="row-even"><td><p><img alt="insertrow" src="../../_images/table-row-plus-after.png" /> Insert Row</p></td>
<td><p>Inserts a new child row into the selected group</p></td>
</tr>
<tr class="row-odd"><td><p><img alt="removerow" src="../../_images/table-row-remove.png" /> Delete Row</p></td>
<td><p>Deletes any selected rows. If no rows are selected,
nothing happens.</p></td>
</tr>
<tr class="row-even"><td><p><img alt="insertgroup" src="../../_images/table-plus.png" /> Insert Group</p></td>
<td><p>Adds a new group after the first selected group, or at
the end of the table if no groups were selected.</p></td>
</tr>
<tr class="row-odd"><td><p><img alt="removegroup" src="../../_images/table-remove.png" /> Delete Group</p></td>
<td><p>Deletes any selected Groups. If no groups are selected,
nothing happens.</p></td>
</tr>
<tr class="row-even"><td><p><img alt="copy" src="../../_images/content-copy.png" /> Copy Rows</p></td>
<td><p>Copies the selected rows or groups into the clipboard.</p></td>
</tr>
<tr class="row-odd"><td><p><img alt="paste" src="../../_images/content-paste.png" /> Paste Rows</p></td>
<td><p>Pastes the contents of the clipboard onto the selected
rows or groups. For groups, if no destination is selected
the they will be pasted as new groups at the end of the
table. Rows must always be pasted onto a destination
selection of the same size.</p></td>
</tr>
<tr class="row-even"><td><p><img alt="cut" src="../../_images/content-cut.png" /> Cut Rows</p></td>
<td><p>Copies the selected rows, and then deletes them.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="keyboard-shortcuts">
<h5><a class="toc-backref" href="#id33" role="doc-backlink">Keyboard Shortcuts</a><a class="headerlink" href="#keyboard-shortcuts" title="Link to this heading">¶</a></h5>
<p>The following keyboard shortcuts are available for editing in the runs
table.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Shortcut</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">F2</span></code></p></td>
<td><p>Edit the current cell</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Esc</span></code></p></td>
<td><p>Cancel editing</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Tab</span></code></p></td>
<td><p>Next cell</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Shift-Tab</span></code></p></td>
<td><p>Previous cell</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Enter</span></code></p></td>
<td><p>Edit the next row / append a new row</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl-I</span></code></p></td>
<td><p>Insert child row</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl-X</span></code></p></td>
<td><p>Cut</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code></p></td>
<td><p>Copy</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl-V</span></code></p></td>
<td><p>Paste</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Delete</span></code></p></td>
<td><p>Delete the selected rows/groups</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Up</span></code>/<code class="docutils literal notranslate"><span class="pre">Down</span></code></p></td>
<td><p>Select next/previous row</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Shift-Up</span></code>/<code class="docutils literal notranslate"><span class="pre">Shift-Down</span></code></p></td>
<td><p>Extend selection to next/previous row</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl-A</span></code></p></td>
<td><p>Select all</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="search-interface">
<h4><a class="toc-backref" href="#id34" role="doc-backlink">Search Interface</a><a class="headerlink" href="#search-interface" title="Link to this heading">¶</a></h4>
<figure class="align-right" id="id9">
<img alt="The search interface" class="screenshot" src="../../_images/search.png" />
<figcaption>
<p><span class="caption-text"><em>The search interface</em></span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="searching-by-investigation-id">
<h5><a class="toc-backref" href="#id35" role="doc-backlink">Searching by Investigation ID</a><a class="headerlink" href="#searching-by-investigation-id" title="Link to this heading">¶</a></h5>
<p>To search for runs, select the instrument the runs are from, enter the
experiment ID, and optionally the cycle name, of the investigation the runs are
part of, and click on <strong>Search</strong>. Providing the cycle name is currently
recommended if you are on the ISIS network because this avoids the need to log
in to ICat. At the time of writing, the ICat search is less reliable. However,
if you are not on the ISIS network or do not know the cycle name, you will need
to use the ICat search.</p>
<p>If any runs are found for the experiment, their run number and description will
be listed in the search results table below. Note that if you enter an invalid
search or if there are no runs in the experiment yet, the table will remain
empty. If an experiment is currently running, you can re-run the search to
check for new runs and they will be added to the results table.</p>
<p>Note that some runs will be highlighted in blue. This indicates that they are
not valid for reduction, e.g. transmission runs, or runs without a valid
angle. Hover over the row to see a tooltip with the reason the run is invalid.</p>
</section>
<section id="transferring-runs-to-the-processing-table">
<h5><a class="toc-backref" href="#id36" role="doc-backlink">Transferring runs to the processing table</a><a class="headerlink" href="#transferring-runs-to-the-processing-table" title="Link to this heading">¶</a></h5>
<p>In order to process runs they must be transferred to the main table for
processing. To transfer runs, select them in the search results table and click
the <strong>Transfer</strong> <img alt="transfer" src="../../_images/file-move.png" /> button. You can select multiple items by holding
Ctrl or Shift while clicking with the mouse or using the up/down arrow keys.</p>
<p>The run number and angle will be populated in the main table. If a run’s
description contains the text <code class="docutils literal notranslate"><span class="pre">th=0.7</span></code> at the end of the description then the
interface will deduce that the run’s angle (also known as theta), was <code class="docutils literal notranslate"><span class="pre">0.7</span></code>,
and enter this value into the angle column for you.  This holds true for any
numeric value. If the angle is not set in the description, the run will not be
valid for transfer.</p>
<p>Runs that need to be summed or stitched together are automatically identified
and grouped as follows:</p>
<ul class="simple">
<li><p>Any runs with the same description <em>and the same theta value</em> will be merged
into a single row. The run numbers will be listed in the format
<code class="docutils literal notranslate"><span class="pre">123+124+125</span></code>. This indicates that they will be summed before being
reduced.</p></li>
<li><p>Any runs with the same description <em>but a different theta value</em> will be
placed in separate rows but in the same group. This indicates that they will
be stitched together after the reduction.</p></li>
<li><p>Rows within a group will be sorted by angle.</p></li>
</ul>
<figure class="align-center" id="id10">
<a class="screenshot reference internal image-reference" href="../../_images/transfer.png"><img alt="Selecting runs from search table to transfer to processing table" class="screenshot" src="../../_images/transfer.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Transferring search results to the processing table</em></span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="invalid-runs">
<h5><a class="toc-backref" href="#id37" role="doc-backlink">Invalid runs</a><a class="headerlink" href="#invalid-runs" title="Link to this heading">¶</a></h5>
<p>Some runs will be highlighted in blue in the search results table. This means
they are not valid for reduction, e.g. if theta was not found or is zero. This
is expected for some runs, e.g. transmission runs. Hovering over a highlighted
row will display the reason it is invalid.</p>
<p>These runs cannot be transferred to the processing table - if you attempt to
transfer them they will be ignored - this means you can safely select e.g. all
of the rows and be sure that only valid rows will be transferred. They will
also be excluded from auto processing (see below).</p>
</section>
<section id="excluding-and-annotating-runs">
<h5><a class="toc-backref" href="#id38" role="doc-backlink">Excluding and annotating runs</a><a class="headerlink" href="#excluding-and-annotating-runs" title="Link to this heading">¶</a></h5>
<p>You may with to exclude certain runs from reduction. This is especially useful
for auto processing (see below). You can mark a run for exclusion by entering a
reason into the <cite>Exclude</cite> column in the search results table. Double-click the
cell to edit it and then press Enter or click off the cell when finished. The
row will be highlighted blue to indicate that it will be excluded, similar to
invalid rows. Again, a tooltip will display the reason that it is excluded.</p>
<p>You can also add a comment to a run without excluding it by entering text in
the <cite>Comments</cite> column. This will not affect the reduction and is simply for
user convenience.</p>
<p>To save your annotations in the <cite>Exclude</cite> and <cite>Comments</cite> columns, save the
whole batch via the <cite>Batch-&gt;Save</cite> menu.</p>
<p>Note that your annotations will be preserved if you re-run the same search or
run auto-processing. However, if you change the search settings, then the
existing search results, including your annotations, will be discarded. If you
have warnings enabled in the <cite>Options</cite> dialog, then you will be warned before
any unsaved changes are discarded.</p>
</section>
</section>
<section id="autoprocessing">
<h4><a class="toc-backref" href="#id39" role="doc-backlink">Autoprocessing</a><a class="headerlink" href="#autoprocessing" title="Link to this heading">¶</a></h4>
<section id="starting-autoprocessing">
<h5><a class="toc-backref" href="#id40" role="doc-backlink">Starting autoprocessing</a><a class="headerlink" href="#starting-autoprocessing" title="Link to this heading">¶</a></h5>
<p>The interface provides <strong>Autoprocessing</strong>, which allows fully automatic
processing of runs for a particular investigation. This works similarly to
searching for runs by investigation but takes out the manual steps for you. For
more details on how searching works, see the <cite>Search Interface</cite> section.</p>
<p>To start autoprocessing, specify the instrument and investigation ID, and
optionally the cycle name. Then click <cite>Autoprocess</cite> to start autoproessing for
this investigation. This will:</p>
<ul class="simple">
<li><p>Populate the search results list with runs that are part of the investigation.</p></li>
<li><p>Transfer valid runs into the processing table, and begin processing them.</p></li>
<li><p>Periodically check for new runs.</p></li>
<li><p>If any new runs are found, merge them in to the main table and process them.</p></li>
</ul>
<p>If the investigation has not started yet, the results list will initially be
empty. However, polling will begin and runs will be found and processed as soon
as they become available. Note that there may be a slight delay in the run
finishing and its file becoming availble on the archive.</p>
</section>
<section id="invalid-excluded-runs">
<h5><a class="toc-backref" href="#id41" role="doc-backlink">Invalid/excluded runs</a><a class="headerlink" href="#invalid-excluded-runs" title="Link to this heading">¶</a></h5>
<p>Runs that are not valid for reduction will not be included in autoprocessing -
they will be highlighted in blue in the search results table to indicate they
will be excluded. The reason will be displayed as a tooltip if you hover over
the row.</p>
<p>You can manually exclude runs from autoprocessing by specifying an <cite>Exclude</cite>
reason in the search results list. You will need to pause autoprocessing in
order to edit the table. Alternatively you can do a manual search first to view
and edit the results before you start autoprocessing.</p>
</section>
<section id="during-autoprocessing">
<h5><a class="toc-backref" href="#id42" role="doc-backlink">During autoprocessing</a><a class="headerlink" href="#during-autoprocessing" title="Link to this heading">¶</a></h5>
<p>Similarly to manual processing, the <cite>Autoprocess</cite> button will be disabled while
autoprocessing is in progress. If autoprocessing has been paused, the button
will be enabled again. Clicking <cite>Autoprocess</cite> again will resume processing from
where it left off.</p>
<p>Successfully reduced rows are highlighted in green in the processing table. If
a group has been post-processed successfully then it is also highlighted in
green. If the group only contains a single row then post-processing is not
applicable, and the group will be highlighted in a paler shade of green to
indicate that all of its rows have been reduced successfully but that
post-processing was not performed.</p>
<p>If row or group processing fails, the row will be highlighted in blue in the
processing table. The error message will be displayed as a tooltip if you hover
over the row. Failed rows will not be reprocessed automatically, but you can
manually re-process them by pausing autoprocessing, selecting the required
rows, and clicking <cite>Process</cite>.</p>
</section>
<section id="editing-the-processing-table">
<h5><a class="toc-backref" href="#id43" role="doc-backlink">Editing the processing table</a><a class="headerlink" href="#editing-the-processing-table" title="Link to this heading">¶</a></h5>
<p>The Processing table is not editable while autoprocessing is running but can be
edited while paused. Any changes to a row that will affect the result of the
reduction will cause the row’s state to be reset to unprocessed, and the row
will be re-processed when autoprocessing is resumed. You can also manually
process selected rows while autoprocessing is paused using the <cite>Process</cite> button.</p>
<p>Additional rows can be added to the table and will be processed if you restart
autoprocessing. Note that if you delete rows and then start autoprocessing
again, they will be re-added to the table. If you want to exclude them, you
must specify an <cite>Exclude</cite> reason in the search results table.</p>
<p>If workspaces are deleted while autoprocessing is running, or before resuming
autoprocessing, then affected rows/groups will be reprocessed if their
mandatory output workspaces no longer exist. If you do not want a row/group to
be reprocessed, then you must first remove it from the table. Deleting interim
workspaces such as IvsLam will not cause rows to be reprocessed.</p>
<p>Changing the instrument or search criteria while paused and then clicking
<cite>Autoprocess</cite> will start a completely new autoprocessing operation. The search
results and processing table will be cleared and populated with the new
results. If you have warnings enabled in the <cite>Options</cite>, you will be warned if
this will cause unsaved changes to be lost.</p>
</section>
</section>
<section id="live-data-monitoring">
<span id="refl-live-data"></span><h4><a class="toc-backref" href="#id44" role="doc-backlink">Live Data Monitoring</a><a class="headerlink" href="#live-data-monitoring" title="Link to this heading">¶</a></h4>
<figure class="align-center" id="id11">
<a class="screenshot reference internal image-reference" href="../../_images/live_data_section.png"><img alt="The event handling tab" class="screenshot" src="../../_images/live_data_section.png" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The live data section</em></span><a class="headerlink" href="#id11" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The <em>Live data</em> section on the <em>Runs</em> tab allows you to start a monitoring
algorithm that will periodically load live data from the instrument, given by the update interval spin box, and reduce
it with <a class="reference internal" href="../../algorithms/ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a>. It outputs two workspaces, <cite>TOF_live</cite>
for the original data and <cite>IvsQ_binned_live</cite> for the reduced data.</p>
<p>Live values for <cite>ThetaIn</cite> and the slit gaps are checked and used each time the
reduction runs. Other algorithm properties are taken from <cite>Group 1</cite> on the
<em>Settings</em> tab. Make any changes you want to the settings and press <cite>Start
monitor</cite> to begin monitoring. Note that <strong>any changes to the settings will not
be updated</strong> in the live data reduction unless you stop and re-start
monitoring.</p>
<p>You can stop monitoring at any time using the <cite>Stop monitor</cite> button or by
cancelling the algorithm from the <em>Algorithm progress</em> dialog. If you close the
interface, monitoring will continue running in the background. You can cancel
the <cite>MonitorLiveData</cite> algorithm from the <em>Algorithm progress</em> dialog.</p>
<p>If <cite>MonitorLiveData</cite> stops due to an error, the <cite>Start monitor</cite> button will be
re-enabled so that it can be re-started from the Interface.</p>
<p>Note that if you close and re-open the Interface, the link to any running
monitor algorithm will be lost. You will not be able to start a new version of
the monitor due to a clash in the output names. Stop the algorithm from the
<em>Algorithm process</em> dialog and re-start it from the new instance of the
Interface to re-link it.</p>
<p>Live data monitoring has the following requirements:</p>
<ul class="simple">
<li><p>CaChannel must be installed in Mantid. See the instructions <a class="reference internal" href="../../concepts/CaChannel.html#cachannel"><span class="std std-ref">here</span></a>.</p></li>
<li><p>The instrument must be on IBEX or have additional processes installed to supply the EPICS values.</p></li>
<li><p>If it does not, you will get an error that live values could not be found for <cite>Theta</cite> and the slits.</p></li>
</ul>
</section>
</section>
<section id="event-handling-tab">
<span id="refl-event-handling"></span><h3><a class="toc-backref" href="#id45" role="doc-backlink">Event Handling Tab</a><a class="headerlink" href="#event-handling-tab" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id12">
<a class="screenshot reference internal image-reference" href="../../_images/event_handling_tab.png"><img alt="The event handling tab" class="screenshot" src="../../_images/event_handling_tab.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The event handling tab</em></span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The <strong>Event Handling</strong> tab can be used to analyze event workspaces. It contains four text boxes for
specifying uniform even, uniform, custom and log value slicing respectively. Each of these slicing
options are exclusive, no more than one can be applied. If the text box for the selected slicing
method is empty no event analysis will be performed, runs will be loaded using
<a class="reference internal" href="../../algorithms/LoadISISNexus-v2.html#algm-loadisisnexus"><span class="std std-ref">LoadISISNexus</span></a> and analyzed as histogram workspaces. When this text box
is not empty, runs will be loaded using <a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><span class="std std-ref">LoadEventNexus</span></a> and the
interface will try to parse the user input to obtain a set of start and stop values. These define
different time slices that will be passed on to the filtering algorithms
(<a class="reference internal" href="../../algorithms/GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a> and <a class="reference internal" href="../../algorithms/FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>). Each time slice will be
normalized by the total proton charge and reduced as described in the previous section. Note that,
if any of the runs in a group could not be loaded as an event workspace, you will get an error message
and the reduction will not be performed.</p>
<p>The four slicing options are described in more detail below:</p>
<ul class="simple">
<li><p><strong>Uniform Even</strong> - The interface obtains the start and end times of the run and divides it into
a specified number of evenly-sized slices. For example given a run of duration 100 seconds,
specifying 4 uniform even slices will produce slices with ranges of <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">-</span> <span class="pre">25</span></code>, <code class="docutils literal notranslate"><span class="pre">25</span> <span class="pre">-</span> <span class="pre">50</span></code>,
<code class="docutils literal notranslate"><span class="pre">50</span> <span class="pre">-</span> <span class="pre">75</span></code> and <code class="docutils literal notranslate"><span class="pre">75</span> <span class="pre">-</span> <span class="pre">100</span></code> seconds respectively.</p></li>
<li><p><strong>Uniform</strong> - The interface obtains the start and end times of the run and divides it into
several slices of a specified duration. If the total duration does not divide evenly by the
slice duration, then the last slice will be shorter than the others. For example, given a run
of duration 100 seconds, specifying slices of duration 30 seconds will produce slices with
ranges of <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">-</span> <span class="pre">30</span></code>, <code class="docutils literal notranslate"><span class="pre">30</span> <span class="pre">-</span> <span class="pre">60</span></code>, <code class="docutils literal notranslate"><span class="pre">60</span> <span class="pre">-</span> <span class="pre">90</span></code> and <code class="docutils literal notranslate"><span class="pre">90</span> <span class="pre">-</span> <span class="pre">100</span></code> seconds respectively.</p></li>
<li><p><strong>Custom</strong> - This takes a list of comma-separated numbers, giving a sequence of intervals
that is applied repeatedly to slice the entire run. For example, given a run of duration 100
seconds, specifying custom slicing of <code class="docutils literal notranslate"><span class="pre">10,</span> <span class="pre">20,</span> <span class="pre">30</span></code> will produce slices with ranges of
<code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">-</span> <span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">-</span> <span class="pre">30</span></code>, <code class="docutils literal notranslate"><span class="pre">30</span> <span class="pre">-</span> <span class="pre">60</span></code>, <code class="docutils literal notranslate"><span class="pre">60</span> <span class="pre">-</span> <span class="pre">70</span></code>, <code class="docutils literal notranslate"><span class="pre">70</span> <span class="pre">-</span> <span class="pre">90</span></code> and <code class="docutils literal notranslate"><span class="pre">90</span> <span class="pre">-</span> <span class="pre">100</span></code> seconds.</p></li>
<li><p><strong>LogValue</strong> - This takes a single value which is the log value interval, and also the log name
which is the name of the log we wish to filter the run for. For example, given a run and entries
of <code class="docutils literal notranslate"><span class="pre">100</span></code> and <code class="docutils literal notranslate"><span class="pre">proton_charge</span></code> for slicing values and log name respectively, we would
produce a number of slices each with interval <code class="docutils literal notranslate"><span class="pre">100</span></code>.</p></li>
</ul>
<p>Workspaces will be named with a suffix providing information about the slice, e.g
<code class="docutils literal notranslate"><span class="pre">IvsQ_13460_slice_50_75</span></code>, <code class="docutils literal notranslate"><span class="pre">IvsQ_13460_slice_75_100</span></code>, etc.</p>
</section>
<section id="experiment-and-instrument-settings-tabs">
<span id="refl-exp-instrument-settings"></span><h3><a class="toc-backref" href="#id46" role="doc-backlink">Experiment and Instrument Settings Tabs</a><a class="headerlink" href="#experiment-and-instrument-settings-tabs" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id13">
<a class="screenshot reference internal image-reference" href="../../_images/experiment_settings_tab.png"><img alt="The experiment settings tab" class="screenshot" src="../../_images/experiment_settings_tab.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The experiment Settings tab</em></span><a class="headerlink" href="#id13" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The <strong>Experiment Settings</strong> and <strong>Instrument Settings</strong> tabs can be used to
specify options for the reduction and post-processing releting to a specific
experiment. The Experiment settings are variables that are mostly set by the
user, whereas the <strong>Instrument Settings</strong> are variables relating to the
instrument used to perform the reduction. Both are populated with default
values for the current instrument. The <strong>Restore Defaults</strong> button allows you
to revert the settings to the default values for the instrument.</p>
<p>The majority of these options are used by the interface to provide argument
values for the pre-processing and reduction steps, which are handled by the
algorithm: <a class="reference internal" href="../../algorithms/ReflectometryISISLoadAndProcess-v1.html#algm-reflectometryisisloadandprocess"><span class="std std-ref">ReflectometryISISLoadAndProcess</span></a></p>
<p>The exception is <code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">Stitch</span> <span class="pre">Params</span></code>, which is used for the final
stitching done by the algorithm <a class="reference internal" href="../../algorithms/Stitch1DMany-v1.html#algm-stitch1dmany"><span class="std std-ref">Stitch1DMany</span></a>. Note
however that if a bin width is not provided, for instance <code class="docutils literal notranslate"><span class="pre">Params=&quot;-0.03&quot;</span></code>,
then <code class="docutils literal notranslate"><span class="pre">-dQ/Q</span></code> will be used, if specified; otherwise a default value will be
calculated from the slits, if possible.</p>
<p>Note that when conflicting options are specified for the reduction,
i.e. different values for the same property are specified via one of the
settings tabs and the cells in the <strong>Runs</strong> tab, the latter will take
precedence. Therefore, the Settings tabs should be used to specify
global options that will be applied to all the rows in the table, whereas the
row values will only be applicable to the specific row for which those options
are defined.</p>
<section id="sample-and-angle-lookup-table">
<h4><a class="toc-backref" href="#id47" role="doc-backlink">Sample and angle lookup table</a><a class="headerlink" href="#sample-and-angle-lookup-table" title="Link to this heading">¶</a></h4>
<p>The <strong>Experiment Settings</strong> tab allows some options to be specified in a lookup
table that will be applied to runs that match certain search criteria, namely the
angle, and optionally also the run title. Matching angles are searched for within
a tolerance of <code class="docutils literal notranslate"><span class="pre">0.01</span></code>. The title field on the lookup table is a regular expression.</p>
<p>In the lookup table, you can also specify a “wildcard” row, which will apply to all
runs that don’t also have a matching angle/title - just leave the angle and title
blank to create a wildcard row. Only one wildcard row may exist.</p>
<figure class="align-center" id="id14">
<a class="screenshot reference internal image-reference" href="../../_images/workflow_settings.png"><img alt="The settings lookup table" class="screenshot" src="../../_images/workflow_settings.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The lookup table on the Experiment Settings tab</em></span><a class="headerlink" href="#id14" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Entries in the lookup table are similar to the table on the Runs
tab. Hover over a table cell to see a tooltip describing what the value is for.</p>
<p>Default transmission runs can be specified and each input can take a
single run/workspace or a number of runs/workspaces that will be summed before
processing. Specific spectra of interest can be specified for the input runs
and separate spectra, if required, can be specified for the transmission runs -
if the latter are not specified then the <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">Spectra</span></code> will also be used for
the transmission runs. If both a First and Second tranmission input is
specified, then they will be stitched using the options specified.</p>
<figure class="align-center" id="id15">
<a class="screenshot reference internal image-reference" href="../../_images/transmission_runs.png"><img alt="Transmission run options" class="screenshot" src="../../_images/transmission_runs.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text"><em>Transmission run options</em></span><a class="headerlink" href="#id15" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="reduction-preview-tab">
<span id="refl-preview"></span><h3><a class="toc-backref" href="#id48" role="doc-backlink">Reduction Preview Tab</a><a class="headerlink" href="#reduction-preview-tab" title="Link to this heading">¶</a></h3>
<figure class="align-center" id="id16">
<a class="screenshot reference internal image-reference" href="../../_images/preview_tab.png"><img alt="The reduction preview tab" class="screenshot" src="../../_images/preview_tab.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The reduction preview tab</em></span><a class="headerlink" href="#id16" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The preview tab provides a graphical tool for the selection of various regions of interest, and allows you to
see the effect of those selections on the reduced reflectivity curve.</p>
<p>Typical usage of the tool is as follows:</p>
<ul class="simple">
<li><p>Enter a <strong>run</strong> number and <strong>angle</strong>.</p>
<ul>
<li><p>The run is loaded, and a plot of the workspace is displayed, with pre-processing (e.g. calibration) applied.</p></li>
<li><p>For <strong>2D detectors</strong>, a <strong>detector image</strong> is displayed</p></li>
<li><p>For <strong>linear</strong> detectors, a <strong>Spectrum vs TOF</strong> plot is displayed</p></li>
</ul>
</li>
<li><p>2D Detectors only: select a <strong>region of interest</strong> on the detector image.</p>
<ul>
<li><p>The selected detectors are <strong>summed</strong> across segments, and a plot of <strong>Spectrum vs TOF</strong> plot is displayed.</p></li>
</ul>
</li>
<li><p>Select one or more <strong>regions of interest</strong> on the TOF plot.</p>
<ul>
<li><p>A full <strong>reduction</strong> is run using the selected regions, and a plot of the final <strong>reflectivity curve</strong> is displayed.</p></li>
</ul>
</li>
<li><p><strong>Adjust</strong> the regions of interest until you are happy with the reflectivity curve.</p></li>
<li><p>Click the <strong>Apply</strong> button to save the regions of interest into the batch settings.</p>
<ul>
<li><p>This will overwrite the settings on the lookup table in the Experiment Settings tab so that they can be applied to
a <strong>batch reduction</strong> or saved to a batch file.</p></li>
</ul>
</li>
</ul>
<p>All other settings for the preprocessing/reduction are taken from the interface, so the reduction preview will perform
exactly the <strong>same reduction</strong> as a normal batch reduction, aside from the regions of interest that you have overridden
using the graphical selection tool.</p>
</section>
<section id="save-ascii-tab">
<span id="refl-save-ascii"></span><h3><a class="toc-backref" href="#id49" role="doc-backlink">Save ASCII Tab</a><a class="headerlink" href="#save-ascii-tab" title="Link to this heading">¶</a></h3>
<p>The <strong>Save ASCII</strong> tab allows for processed workspaces to be saved in specific
ASCII formats. The filenames are saved in the form [Prefix][Workspace Name].[ext].
See <a class="reference internal" href="../../algorithms/SaveReflectometryAscii-v1.html#algm-savereflectometryascii"><span class="std std-ref">SaveReflectometryAscii v1</span></a> for a description of the formats.</p>
<figure class="align-center" id="id17">
<a class="screenshot reference internal image-reference" href="../../_images/save_tab.png"><img alt="The save ASCII tab" class="screenshot" src="../../_images/save_tab.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text"><em>The save ASCII tab</em></span><a class="headerlink" href="#id17" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Save path</p></td>
<td><p>At present this dialog doesn’t have a standard
file dialog so that path must be filled in manually.
The path must already exist as this dialog doesn’t
have the ability to create directories. As the
naming of files is automatic, the path must also
point to a directory rather than a file.</p></td>
</tr>
<tr class="row-odd"><td><p>Prefix</p></td>
<td><p>The prefix is what is added to the beginning of
the workspace name to create the file name. No
underscore or space is added between them so they
must be manually added.</p></td>
</tr>
<tr class="row-even"><td><p>Filter</p></td>
<td><p>This can be specified to filter out workspaces
in the workspace list whose name does not match
that of the filter text.</p></td>
</tr>
<tr class="row-odd"><td><p>Regex</p></td>
<td><p>Checking this option allows a regular expression
to be used for filtering workspace names.</p></td>
</tr>
<tr class="row-even"><td><p>List Of Workspaces</p></td>
<td><p>The left listbox will contain any workspaces loaded
into mantid (excluding group and table workspaces).
Double clicking on one will fill the right list box
with the parameters it contains. This listbox
supports multi-select in order to allow for multiple
workspaces to be saved out at the same time with the
same settings.</p></td>
</tr>
<tr class="row-odd"><td><p>List Of Logged Parameters</p></td>
<td><p>The right listbox starts out empty, but will fill
with parameter names when a workspace in the left
listbox is double clicked. This listbox supports
multi-select in order to allow for the save output
to contain multiple parameter notes.</p></td>
</tr>
<tr class="row-even"><td><p>File format</p></td>
<td><p>This dialog can save to ANSTO, ILL cosmos, 3-column,
and a customisable format. It doesn’t save from
the main interface’s table, but from workspaces
loaded into mantid. All algorithms are also
available as save algorithms from mantid itself.</p></td>
</tr>
<tr class="row-odd"><td><p>Custom Format Options</p></td>
<td><p>When saving in ‘Custom’ this section allows you
to specify if you want a Header and/or Q Resolution
column as well as specifying the delimiter.</p></td>
</tr>
<tr class="row-even"><td><p>Automatic Save</p></td>
<td><p>Automatically save the main output workspace for
groups in the runs table. Note that the stitched
group output will be saved if there is one or, for
a single-row group, the <code class="docutils literal notranslate"><span class="pre">IvsQ_binned</span></code> row output
will be saved instead.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="troubleshooting">
<h2><a class="toc-backref" href="#id50" role="doc-backlink">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<section id="when-i-try-to-process-i-get-an-error-invalid-value-for-property-filename-list-of-str-lists">
<h3><a class="toc-backref" href="#id51" role="doc-backlink">When I try to process I get an error: “Invalid value for property Filename (list of str lists) …”</a><a class="headerlink" href="#when-i-try-to-process-i-get-an-error-invalid-value-for-property-filename-list-of-str-lists" title="Link to this heading">¶</a></h3>
<p>This occurs when Mantid is unable to load a run. If the run was given as a
workspace name, check the spelling. If the run was given as a number, check
that the run number is correct. If the run number is incorrect, check the
number given in the <strong>Run(s)</strong> or <strong>Transmission Run(s)</strong> columns. If the run
number is correct, check the instrument named in the error message is correct.
If the instrument is incorrect, check that the processing instrument selector
(at the bottom right of the interface) is correct.</p>
<p>If the run still isn’t loading check Mantid’s user directories are set
correctly, and that the desired run is in one of the given directories. To
manage the user directories, open <strong>File -&gt; Manage User Directories</strong>.</p>
</section>
<section id="when-i-try-to-process-i-get-an-error-error-encountered-while-stitching-group">
<h3><a class="toc-backref" href="#id52" role="doc-backlink">When I try to process I get an error: “Error encountered while stitching group …”</a><a class="headerlink" href="#when-i-try-to-process-i-get-an-error-error-encountered-while-stitching-group" title="Link to this heading">¶</a></h3>
<p>This occurs when Mantid is unable to stitch a group. Please check that at you have
specified at least the bin width. This can be done either by setting a value in column
<strong>dQ/Q</strong> before processing the data, or by using the <code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">Stitch</span> <span class="pre">Params</span></code> text
box in the <strong>Experiment Settings</strong> tab to provide the <em>Params</em> input property like this:
<code class="docutils literal notranslate"><span class="pre">Params=&quot;-0.03&quot;</span></code> (you may want to replace <code class="docutils literal notranslate"><span class="pre">0.03</span></code> with a bin size suitable for
your reduction). Note that the “-” sign in this case will produce a logarithmic binning in the
stitched workspace. For linear binning, use <code class="docutils literal notranslate"><span class="pre">Params=&quot;0.03&quot;</span></code>.</p>
</section>
<section id="when-i-try-to-process-i-get-an-error-invalid-key-value-pair">
<h3><a class="toc-backref" href="#id53" role="doc-backlink">When I try to process I get an error: “Invalid key value pair, ‘…’”</a><a class="headerlink" href="#when-i-try-to-process-i-get-an-error-invalid-key-value-pair" title="Link to this heading">¶</a></h3>
<p>This occurs when the contents of the options column are invalid.
Key value pairs must be given in the form <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">=</span> <span class="pre">value</span></code>, and if the value
contains commas it <strong>must</strong> be quoted, like so: <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">=</span> <span class="pre">&quot;v,a,l,u,e&quot;</span></code>.</p>
</section>
<section id="when-i-try-to-process-i-get-an-error-invalid-value-for-property-can-not-convert-false-true-to-boolean">
<h3><a class="toc-backref" href="#id54" role="doc-backlink">When I try to process I get an error: “Invalid value for property … Can not convert “False/True” to boolean”</a><a class="headerlink" href="#when-i-try-to-process-i-get-an-error-invalid-value-for-property-can-not-convert-false-true-to-boolean" title="Link to this heading">¶</a></h3>
<p>This occurs when a boolean property is set to “True” or “False”. Please, use <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">0</span></code> instead.</p>
</section>
<section id="my-ivsq-workspaces-are-not-being-stitched-correctly">
<h3><a class="toc-backref" href="#id55" role="doc-backlink">My IvsQ workspaces are not being stitched correctly</a><a class="headerlink" href="#my-ivsq-workspaces-are-not-being-stitched-correctly" title="Link to this heading">¶</a></h3>
<p>Stitching is controlled by the group a row is in. For stitching to occur, the
rows must be in the same group, and be processed simultaneously. To select all
rows in a group, just select the group itself - its child rows are implicitly
selected.</p>
<p><strong>Categories</strong>: <a class="reference external" href="../ILL/categories/Interfaces.html">Interfaces</a> | <a class="reference external" href="../../algorithms/categories/Reflectometry.html">Reflectometry</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="../muon/muon_transform_tab.html" title="Previous Chapter: Transformation Tab"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Transformation Tab</span>
    </a>
  </li>
  <li>
    <a href="../utility/Filter%20Events.html" title="Next Chapter: Filter Events Interface"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Filter Events... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>