<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SplineSmoothing v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=5b08953a"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Squares v1" href="Squares-v1.html" />
    <link rel="prev" title="SplineInterpolation v1" href="SplineInterpolation-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SplineSmoothing v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="splinesmoothing-v1">
<span id="algm-splinesmoothing"></span><span id="algm-splinesmoothing-v1"></span><h1>SplineSmoothing v1<a class="headerlink" href="#splinesmoothing-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p>
<ul>
<li><p><a class="reference internal" href="#for-histogram-workspaces" id="id5">For Histogram Workspaces</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id7">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Smooths a set of spectra using a cubic spline. Optionally, this algorithm can also calculate derivatives up to order 2 as a side product</p>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a>, <a class="reference internal" href="SplineInterpolation-v1.html#algm-splineinterpolation"><span class="std std-ref">SplineInterpolation</span></a>, <a class="reference internal" href="SplineBackground-v1.html#algm-splinebackground"><span class="std std-ref">SplineBackground</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The workspace on which to perform the smoothing algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputWorkspace</p></td>
<td><p>Output</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>The workspace containing the calculated points</p></td>
</tr>
<tr class="row-even"><td><p>OutputWorkspaceDeriv</p></td>
<td><p>Output</p></td>
<td><p>WorkspaceGroup</p></td>
<td></td>
<td><p>The workspace containing the calculated derivatives</p></td>
</tr>
<tr class="row-odd"><td><p>DerivOrder</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>Order to derivatives to calculate.</p></td>
</tr>
<tr class="row-even"><td><p>Error</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0.05</p></td>
<td><p>The amount of error we wish to tolerate in smoothing</p></td>
</tr>
<tr class="row-odd"><td><p>MaxNumberOfBreaks</p></td>
<td><p>Input</p></td>
<td><p>number</p></td>
<td><p>0</p></td>
<td><p>To set the positions of the break-points, default 0 equally spaced real values in interval 0.0 - 1.0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>The algorithm performs a smoothing of the input data using a cubic
spline. The algorithm takes a 2D workspace and generates a spline
for each of the spectra to approximate a fit of the data.</p>
<p>Optionally, this algorithm can also calculate the first and second
derivatives of each of the interpolated points as a side product.
Setting the DerivOrder property to zero will force the algorithm to
calculate no derivatives.</p>
<p>The algorithm provides user with an option of including number of
breaking points which will enable the algorithm to execute functions
with large number of spikes or noise. With the control of number of
breaking points, user will be able to execute
<a class="reference internal" href="#algm-splinesmoothing-v1"><span class="std std-ref">SplineSmoothing</span></a> algorithm in small
period of time. The lower breaking points number is set the faster
algorithm will execute the function but it will not produce high
quality smoothing function. By inserting high number of breaking points,
a detailed smoothing function can also be produced. By not providing
MaxNumberOfBreaks, the algorithm will assume that user would like to
execute the maximum number of breaks possible. This comes with a risk
of algorithm falling in to a very long loop.</p>
<p>By providing MaxNumberOfBreaks as a parameter, the users are also will
be able to successfully and efficiently apply the algorithm to a workspace
with multiple spectrums, which would generate an output of workspace
with multiple spectrums of <a class="reference internal" href="#algm-splinesmoothing-v1"><span class="std std-ref">SplineSmoothing</span></a>
algorithm applied to it. <a class="reference internal" href="../fitting/fitfunctions/BSpline.html#func-bspline"><span class="std std-ref">BSpline</span></a>
can be used to help you understand break-points in further detail.</p>
<section id="for-histogram-workspaces">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">For Histogram Workspaces</a><a class="headerlink" href="#for-histogram-workspaces" title="Link to this heading">¶</a></h3>
<p>If the input workspace contains histograms, rather than data points,
then SplineInterpolation will automatically convert the input to point
data. The output returned with be in the same format as the input.</p>
</section>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example - Smoothing noisy data:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s2">&quot;Histogram&quot;</span><span class="p">,</span><span class="s2">&quot;Multiple Peaks&quot;</span><span class="p">,</span>
    <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">NumBanks</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">Random</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">XMax</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">BinWidth</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">wsOut</span> <span class="o">=</span> <span class="n">SplineSmoothing</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">Error</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This has created a spline for each spectra in the </span><span class="si">%s</span><span class="s2"> workspace&quot;</span> <span class="o">%</span> <span class="n">wsOut</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">plotSpectrum</span><span class="p">([</span><span class="n">ws</span><span class="p">,</span><span class="n">wsOut</span><span class="p">],</span><span class="mi">0</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
    <span class="c1"># plotSpectrum was not available</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>This has created a spline for each spectra in the wsOut workspace
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Optimization.html">Optimization</a> | <a class="reference external" href="categories/CorrectionFunctions/BackgroundCorrections.html">CorrectionFunctions\BackgroundCorrections</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/66c74f87d9b779695dc85b538bc48767c5975b19/Framework/CurveFitting/inc/MantidCurveFitting/Algorithms/SplineSmoothing.h">SplineSmoothing.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/66c74f87d9b779695dc85b538bc48767c5975b19/Framework/CurveFitting/src/Algorithms/SplineSmoothing.cpp">SplineSmoothing.cpp</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SplineInterpolation-v1.html" title="Previous Chapter: SplineInterpolation v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SplineInterpo...</span>
    </a>
  </li>
  <li>
    <a href="Squares-v1.html" title="Next Chapter: Squares v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Squares v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>