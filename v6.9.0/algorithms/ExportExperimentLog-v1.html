<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ExportExperimentLog v1</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=fadd4351" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=77160d70" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script src="../_static/documentation_options.js?v=5b08953a"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ExportGeometry v1" href="ExportGeometry-v1.html" />
    <link rel="prev" title="ExponentialMD v1" href="ExponentialMD-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="https://www.mantidproject.org">Home</a></li>
                <li><a href="https://download.mantidproject.org">Download</a></li>
                <li><a href="https://docs.mantidproject.org">Documentation</a></li>
                <li><a href="https://www.mantidproject.org/contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ExportExperimentLog v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="exportexperimentlog-v1">
<span id="algm-exportexperimentlog"></span><span id="algm-exportexperimentlog-v1"></span><h1>ExportExperimentLog v1<a class="headerlink" href="#exportexperimentlog-v1" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<span id="index-0"></span><p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#summary" id="id1">Summary</a></p>
<ul>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#properties" id="id3">Properties</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p></li>
<li><p><a class="reference internal" href="#file-mode" id="id5">File Mode</a></p></li>
<li><p><a class="reference internal" href="#missing-sample-logs" id="id6">Missing Sample Logs</a></p></li>
<li><p><a class="reference internal" href="#sample-log-operation" id="id7">Sample Log Operation</a></p></li>
<li><p><a class="reference internal" href="#file-format" id="id8">File format</a></p></li>
<li><p><a class="reference internal" href="#time-zone" id="id9">Time Zone</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id10">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id11">Source</a></p></li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<section id="see-also">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">See Also</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="ExportSampleLogsToCSVFile-v1.html#algm-exportsamplelogstocsvfile"><span class="std std-ref">ExportSampleLogsToCSVFile</span></a></p>
</section>
</section>
<section id="properties">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Properties</a><a class="headerlink" href="#properties" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InputWorkspace</p></td>
<td><p>Input</p></td>
<td><p><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Input workspace containing the sample log information.</p></td>
</tr>
<tr class="row-odd"><td><p>OutputFilename</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p><em>Mandatory</em></p></td>
<td><p>Output file of the experiment log. Allowed extensions: [‘.txt, .csv’]</p></td>
</tr>
<tr class="row-even"><td><p>FileMode</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>append</p></td>
<td><p>Optional to create a new file or append to an existing file. Allowed values: [‘append’, ‘fastappend’, ‘new’]</p></td>
</tr>
<tr class="row-odd"><td><p>SampleLogNames</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>Sample log names.</p></td>
</tr>
<tr class="row-even"><td><p>SampleLogTitles</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>Log sample titles as file header.</p></td>
</tr>
<tr class="row-odd"><td><p>SampleLogOperation</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>Operation on each log, including None (as no operation), min, max, average, sum and “0”.</p></td>
</tr>
<tr class="row-even"><td><p>FileFormat</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>tab</p></td>
<td><p>Output file format.  ‘tab’ format will insert a tab between 2 adjacent values; ‘comma’ will put a , instead. With this option, the posfix of the output file is .csv automatically.  Allowed values: [‘tab’, ‘comma (csv)’]</p></td>
</tr>
<tr class="row-odd"><td><p>OrderByTitle</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td></td>
<td><p>Log file will be ordered by the value of this title from low to high.</p></td>
</tr>
<tr class="row-even"><td><p>RemoveDuplicateRecord</p></td>
<td><p>Input</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>Coupled with OrderByTitle, duplicated record will be removed.</p></td>
</tr>
<tr class="row-odd"><td><p>OverrideLogValue</p></td>
<td><p>Input</p></td>
<td><p>str list</p></td>
<td></td>
<td><p>List of paired strings as log title and value to override values from workspace.</p></td>
</tr>
<tr class="row-even"><td><p>TimeZone</p></td>
<td><p>Input</p></td>
<td><p>string</p></td>
<td><p>America/New_York</p></td>
<td><p>Allowed values: [‘UTC’, ‘America/New_York’, ‘Asia/Shanghai’, ‘Australia/Sydney’, ‘Europe/London’, ‘GMT+0’, ‘Europe/Paris’, ‘Europe/Copenhagen’]</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Description</a><a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>Algorithm ExportExperimentLog obtains run information, sample
information and sample log information from a MatrixWorkspace and write
them to a csv file.</p>
</section>
<section id="file-mode">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">File Mode</a><a class="headerlink" href="#file-mode" title="Link to this heading">¶</a></h2>
<p>There are 3 modes to write the experiment log file.</p>
<ol class="arabic simple">
<li><p>“new”: A new file will be created with header line;</p></li>
</ol>
<ul class="simple">
<li><p>If a file with same name exists, then this file will be overwritten;</p></li>
</ul>
<p>2. “appendfast”: A line of experiment log information will be appended
to an existing file;</p>
<ul class="simple">
<li><p>It is assumed that the log names given are exactly same as those in
the file, as well as their order;</p></li>
<li><p>Input property <em>SampleLogTitles</em> will be ignored in this option;</p></li>
</ul>
<p>3. “append”: A line of experiment log information will be appended to an
existing file;</p>
<ul class="simple">
<li><p>The algorithm will check whether the specified log file names, titles
and their orders are exactly same as those in the file to append to;</p></li>
<li><p>If any difference is deteced, the old file will be renamed in the
same directory. And a new file will be generated.</p></li>
</ul>
</section>
<section id="missing-sample-logs">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Missing Sample Logs</a><a class="headerlink" href="#missing-sample-logs" title="Link to this heading">¶</a></h2>
<p>If there is any sample log specified in the properites but does not
exist in the workspace, a zero float value will be put to the experiment
log information line, as the preference of instrument scientist.</p>
</section>
<section id="sample-log-operation">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Sample Log Operation</a><a class="headerlink" href="#sample-log-operation" title="Link to this heading">¶</a></h2>
<p>If the type of a sample log is TimeSeriesProperty, it must be one of the
following 5 types.</p>
<ul class="simple">
<li><p>“min”: minimum TimeSeriesProperty’s values;</p></li>
<li><p>“max”: maximum TimeSeriesProperty’s values;</p></li>
<li><p>“average”: average of TimeSeriesProperty’s values;</p></li>
<li><p>“sum”: summation of TimeSeriesProperty’s values;</p></li>
<li><p>“0”: first value of TimeSeriesProperty’s value.</p></li>
</ul>
<p>If the type of a sample log is string and in fact it is a string for
time, then there will an option as</p>
<ul class="simple">
<li><p>“localtime”: convert the time from UTC (default) to local time</p></li>
</ul>
<p>Otherwise, there is no operation required. For example, log ‘duration’
or ‘run_number’ does not have any operation on its value. An empty
string will serve for them in property ‘SampleLogOperation’.</p>
</section>
<section id="file-format">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">File format</a><a class="headerlink" href="#file-format" title="Link to this heading">¶</a></h2>
<p>There are two types of output file formats that are supported. They are
csv (comma separated) file and tsv (tab separated) file. The csv file
must have an extension as “.csv”. If a user gives the name of a log
file, which is in csv format, does not have an extension as .csv, the
algorithm will correct it automatically.</p>
</section>
<section id="time-zone">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Time Zone</a><a class="headerlink" href="#time-zone" title="Link to this heading">¶</a></h2>
<p>The time stamps of sample logs are recorded as UTC time.
Some users wants to see the exported sample log as the neutron facility’s local time.
So the input property ‘TimeZone’ is for this purpose.</p>
</section>
<section id="usage">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Usage</a><a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p><strong>Example - Export several experiment logs to a csv file:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">nxsfilename</span> <span class="o">=</span> <span class="s2">&quot;HYS_11092_event.nxs&quot;</span>
<span class="n">wsname</span> <span class="o">=</span> <span class="s2">&quot;HYS_11092_event&quot;</span>

<span class="n">defaultdir</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;default.savedirectory&quot;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">defaultdir</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
  <span class="n">defaultdir</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;defaultsave.directory&quot;</span><span class="p">]</span>
<span class="n">savefile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">defaultdir</span><span class="p">,</span> <span class="s2">&quot;testlog.txt&quot;</span><span class="p">)</span>

<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span> <span class="o">=</span> <span class="n">nxsfilename</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="n">wsname</span><span class="p">,</span>
    <span class="n">MetaDataOnly</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">LoadLogs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">ExportExperimentLog</span><span class="p">(</span>
    <span class="n">InputWorkspace</span> <span class="o">=</span> <span class="n">wsname</span><span class="p">,</span>
    <span class="n">OutputFilename</span> <span class="o">=</span> <span class="n">savefile</span><span class="p">,</span>
    <span class="n">FileMode</span> <span class="o">=</span> <span class="s2">&quot;new&quot;</span><span class="p">,</span>
    <span class="n">SampleLogNames</span> <span class="o">=</span> <span class="s2">&quot;run_start, run_title&quot;</span><span class="p">,</span>
    <span class="n">SampleLogTitles</span> <span class="o">=</span> <span class="s2">&quot;AA, BB&quot;</span><span class="p">,</span>
    <span class="n">SampleLogOperation</span> <span class="o">=</span> <span class="s2">&quot;None, None&quot;</span><span class="p">,</span>
    <span class="n">FileFormat</span> <span class="o">=</span> <span class="s2">&quot;tab&quot;</span><span class="p">,</span>
    <span class="n">TimeZone</span> <span class="o">=</span> <span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File is created =  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">savefile</span><span class="p">)))</span>

<span class="c1"># Get lines of file</span>
<span class="n">sfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">savefile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">slines</span> <span class="o">=</span> <span class="n">sfile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">sfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of lines in File = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">slines</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>File is created =  True
Number of lines in File = 2
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Logs.html">DataHandling\Logs</a></p>
</section>
<section id="source">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Source</a><a class="headerlink" href="#source" title="Link to this heading">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/66c74f87d9b779695dc85b538bc48767c5975b19/Framework/PythonInterface/plugins/algorithms/ExportExperimentLog.py">ExportExperimentLog.py</a></p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ExponentialMD-v1.html" title="Previous Chapter: ExponentialMD v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ExponentialMD v1</span>
    </a>
  </li>
  <li>
    <a href="ExportGeometry-v1.html" title="Next Chapter: ExportGeometry v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ExportGeometry v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>